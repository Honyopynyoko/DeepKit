(self.webpackChunk_deepkit_framework_debug_gui=self.webpackChunk_deepkit_framework_debug_gui||[]).push([[179],{98255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=98255,t.exports=e},33018:(t,e,n)=>{"use strict";n.d(e,{deG:()=>un,tb:()=>tc,AFp:()=>Wl,ip1:()=>Yl,CZH:()=>Gl,hGG:()=>qc,z2F:()=>Lc,sBO:()=>Va,Sil:()=>hc,_Vd:()=>da,EJc:()=>rc,SBq:()=>ma,qLn:()=>kr,vpe:()=>Ol,gxx:()=>vo,tBr:()=>Mn,XFs:()=>M,OlP:()=>cn,zs3:()=>Ro,ZZ4:()=>Na,aQg:()=>Fa,soG:()=>nc,YKP:()=>Qa,v3s:()=>Bc,h0i:()=>Xa,PXZ:()=>Mc,R0b:()=>pc,FiY:()=>In,Lbi:()=>Kl,g9A:()=>Ql,Qsj:()=>ba,FYo:()=>va,JOm:()=>Dr,Tiy:()=>wa,q3G:()=>wr,tp0:()=>Rn,EAV:()=>Uc,Rgc:()=>Ya,dDg:()=>wc,DyG:()=>hn,GfV:()=>xa,s_b:()=>tl,ifc:()=>F,eFA:()=>Ic,G48:()=>Pc,Gpc:()=>g,f3M:()=>An,_c5:()=>zc,VLi:()=>Sc,c2e:()=>ec,zSh:()=>_o,wAp:()=>Qs,Vbs:()=>H,vHH:()=>v,EiD:()=>br,mCW:()=>nr,qzn:()=>Hn,JVY:()=>Yn,pB0:()=>Xn,eBb:()=>Wn,L6k:()=>Gn,LAX:()=>Jn,cg1:()=>Ws,Tjo:()=>Zc,kL8:()=>Js,yhl:()=>qn,dqk:()=>V,sIi:()=>Zo,CqO:()=>us,QGY:()=>ls,F4k:()=>cs,RDi:()=>At,AaK:()=>d,z3N:()=>zn,qOj:()=>No,TTD:()=>wt,_Bn:()=>ca,xp6:()=>wi,uIk:()=>Go,Tol:()=>Os,Gre:()=>zs,ekj:()=>Es,Suo:()=>Ul,Xpm:()=>K,lG2:()=>at,Yz7:()=>x,cJS:()=>C,oAB:()=>it,Yjl:()=>lt,Y36:()=>Qo,_UZ:()=>rs,GkF:()=>ss,BQk:()=>os,ynx:()=>is,qZA:()=>ns,TgZ:()=>es,EpF:()=>as,n5z:()=>rn,Ikx:()=>Hs,LFG:()=>On,$8M:()=>sn,NdJ:()=>hs,CRH:()=>Vl,kcU:()=>we,O4$:()=>_e,oxw:()=>ps,ALo:()=>wl,lcZ:()=>xl,xi3:()=>Cl,Hsn:()=>ys,F$t:()=>ms,Q6J:()=>Ko,MGl:()=>vs,DdM:()=>gl,VKq:()=>ml,WLB:()=>yl,iGM:()=>jl,MAs:()=>Xo,Jf7:()=>Ir,CHM:()=>Yt,oJD:()=>xr,LSH:()=>Cr,B6R:()=>tt,kYT:()=>ot,Udp:()=>Ts,YNc:()=>Jo,W1O:()=>ql,_uU:()=>js,Oqu:()=>$s,hij:()=>Us,AsE:()=>Vs,lnq:()=>Zs,Gf:()=>$l});var r=n(79765),i=n(75319),o=n(67574),s=n(66682),a=n(52441),l=n(51307);function c(){return new r.xQ}function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function h(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function d(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(d).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function f(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const p=u({__forward_ref__:u});function g(t){return t.__forward_ref__=g,t.toString=function(){return d(this())},t}function m(t){return y(t)?t():t}function y(t){return"function"==typeof t&&t.hasOwnProperty(p)&&t.__forward_ref__===g}class v extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function _(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function w(t,e){const n=e?` in ${e}`:"";throw new v("201",`No provider for ${_(t)} found${n}`)}function x(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function C(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return T(t,O)||T(t,P)}function T(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(A)||t.hasOwnProperty(k))?t[A]:null}const O=u({"\u0275prov":u}),A=u({"\u0275inj":u}),P=u({ngInjectableDef:u}),k=u({ngInjectorDef:u});var M=(()=>((M=M||{})[M.Default=0]="Default",M[M.Host=1]="Host",M[M.Self=2]="Self",M[M.SkipSelf=4]="SkipSelf",M[M.Optional=8]="Optional",M))();let I;function R(t){const e=I;return I=t,e}function D(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&M.Optional?null:void 0!==e?e:void w(d(t),"Injector")}function N(t){return{toString:t}.toString()}var L=(()=>((L=L||{})[L.OnPush=0]="OnPush",L[L.Default=1]="Default",L))(),F=(()=>((F=F||{})[F.Emulated=0]="Emulated",F[F.None=2]="None",F[F.ShadowDom=3]="ShadowDom",F))();const B="undefined"!=typeof globalThis&&globalThis,j="undefined"!=typeof window&&window,$="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,V=B||U||j||$,Z={},z=[],H=u({"\u0275cmp":u}),q=u({"\u0275dir":u}),Y=u({"\u0275pipe":u}),G=u({"\u0275mod":u}),W=u({"\u0275loc":u}),J=u({"\u0275fac":u}),X=u({__NG_ELEMENT_ID__:u});let Q=0;function K(t){return N(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||F.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Q++,n.inputs=st(t.inputs,e),n.outputs=st(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(et):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(nt):null,n})}function tt(t,e,n){const r=t.\u0275cmp;r.directiveDefs=()=>e.map(et),r.pipeDefs=()=>n.map(nt)}function et(t){return ct(t)||function(t){return t[q]||null}(t)}function nt(t){return function(t){return t[Y]||null}(t)}const rt={};function it(t){return N(()=>{const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(rt[t.id]=t.type),e})}function ot(t,e){return N(()=>{const n=ut(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function st(t,e){if(null==t)return Z;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const at=K;function lt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ct(t){return t[H]||null}function ut(t,e){const n=t[G]||null;if(!n&&!0===e)throw new Error(`Type ${d(t)} does not have '\u0275mod' property.`);return n}const ht=20,dt=10;function ft(t){return Array.isArray(t)&&"object"==typeof t[1]}function pt(t){return Array.isArray(t)&&!0===t[1]}function gt(t){return 0!=(8&t.flags)}function mt(t){return 2==(2&t.flags)}function yt(t){return 1==(1&t.flags)}function vt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(J)?t[J]:null}class _t{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function wt(){return xt}function xt(t){return t.type.prototype.ngOnChanges&&(t.setInput=St),Ct}function Ct(){const t=Tt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Z)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function St(t,e,n,r){const i=Tt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Z,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],l=s[a];o[a]=new _t(l&&l.currentValue,e,s===Z),t[r]=e}function Tt(t){return t.__ngSimpleChanges__||null}wt.ngInherit=!0;const Et="http://www.w3.org/2000/svg";let Ot;function At(t){Ot=t}function Pt(){return void 0!==Ot?Ot:"undefined"!=typeof document?document:void 0}function kt(t){return!!t.listen}const Mt={createRenderer:(t,e)=>Pt()};function It(t){for(;Array.isArray(t);)t=t[0];return t}function Rt(t,e){return It(e[t])}function Dt(t,e){return It(e[t.index])}function Nt(t,e){return t.data[e]}function Lt(t,e){return t[e]}function Ft(t,e){const n=e[t];return ft(n)?n:n[0]}function Bt(t){return 4==(4&t[2])}function jt(t){return 128==(128&t[2])}function $t(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Zt={lFrame:fe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function zt(){return Zt.bindingsEnabled}function Ht(){return Zt.lFrame.lView}function qt(){return Zt.lFrame.tView}function Yt(t){return Zt.lFrame.contextLView=t,t[8]}function Gt(){let t=Wt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Wt(){return Zt.lFrame.currentTNode}function Jt(t,e){const n=Zt.lFrame;n.currentTNode=t,n.isParent=e}function Xt(){return Zt.lFrame.isParent}function Qt(){Zt.lFrame.isParent=!1}function Kt(){return Zt.isInCheckNoChangesMode}function te(t){Zt.isInCheckNoChangesMode=t}function ee(){const t=Zt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ne(){return Zt.lFrame.bindingIndex}function re(){return Zt.lFrame.bindingIndex++}function ie(t){const e=Zt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function oe(t,e){const n=Zt.lFrame;n.bindingIndex=n.bindingRootIndex=t,se(e)}function se(t){Zt.lFrame.currentDirectiveIndex=t}function ae(){return Zt.lFrame.currentQueryIndex}function le(t){Zt.lFrame.currentQueryIndex=t}function ce(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ue(t,e,n){if(n&M.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&M.Host||(r=ce(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Zt.lFrame=de();return r.currentTNode=e,r.lView=t,!0}function he(t){const e=de(),n=t[1];Zt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function de(){const t=Zt.lFrame,e=null===t?null:t.child;return null===e?fe(t):e}function fe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function pe(){const t=Zt.lFrame;return Zt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ge=pe;function me(){const t=pe();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ye(){return Zt.lFrame.selectedIndex}function ve(t){Zt.lFrame.selectedIndex=t}function be(){const t=Zt.lFrame;return Nt(t.tView,t.selectedIndex)}function _e(){Zt.lFrame.currentNamespace=Et}function we(){Zt.lFrame.currentNamespace=null}function xe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function Ce(t,e,n){Ee(t,e,3,n)}function Se(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function Te(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Oe(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Oe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Ae=-1;class Pe{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ke(t,e,n){const r=kt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,s):e.setAttributeNS(s,a,l)}else{const s=o,a=n[++i];Ie(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Me(t){return 3===t||4===t||6===t}function Ie(t){return 64===t.charCodeAt(0)}function Re(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||De(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function De(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ne(t){return t!==Ae}function Le(t){return 32767&t}function Fe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Be=!0;function je(t){const e=Be;return Be=t,e}let $e=0;function Ue(t,e){const n=Ze(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ve(r.data,t),Ve(e,null),Ve(r.blueprint,null));const i=ze(t,e),o=t.injectorIndex;if(Ne(i)){const t=Le(i),n=Fe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ve(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ze(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function ze(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ae;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ae}function He(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(X)&&(r=n[X]),null==r&&(r=n[X]=$e++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function qe(t,e,n){if(n&M.Optional)return t;w(e,"NodeInjector")}function Ye(t,e,n,r){if(n&M.Optional&&void 0===r&&(r=null),0==(n&(M.Self|M.Host))){const i=t[9],o=R(void 0);try{return i?i.get(e,r,n&M.Optional):D(e,r,n&M.Optional)}finally{R(o)}}return qe(r,e,n)}function Ge(t,e,n,r=M.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(X)?t[X]:void 0;return"number"==typeof e?e>=0?255&e:Je:e}(n);if("function"==typeof o){if(!ue(e,t,r))return r&M.Host?qe(i,n,r):Ye(e,n,r,i);try{const t=o(r);if(null!=t||r&M.Optional)return t;w(n)}finally{ge()}}else if("number"==typeof o){let i=null,s=Ze(t,e),a=Ae,l=r&M.Host?e[16][6]:null;for((-1===s||r&M.SkipSelf)&&(a=-1===s?ze(t,e):e[s+8],a!==Ae&&en(r,!1)?(i=e[1],s=Le(a),e=Fe(a,e)):s=-1);-1!==s;){const t=e[1];if(tn(o,s,t.data)){const t=Xe(s,e,n,i,r,l);if(t!==We)return t}a=e[s+8],a!==Ae&&en(r,e[1].data[s+8]===l)&&tn(o,s,e)?(i=t,s=Le(a),e=Fe(a,e)):s=-1}}}return Ye(e,n,r,i)}const We={};function Je(){return new nn(Gt(),Ht())}function Xe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],l=Qe(a,s,n,null==r?mt(a)&&Be:r!=s&&0!=(3&a.type),i&M.Host&&o===a);return null!==l?Ke(e,s,l,a):We}function Qe(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,l=t.directiveStart,c=o>>20,u=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<u;h++){const t=s[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(i){const t=s[l];if(t&&vt(t)&&t.type===n)return l}return null}function Ke(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Pe){const s=i;s.resolving&&function(t,e){throw new v("200",`Circular dependency in DI detected for ${t}`)}(_(o[n]));const a=je(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?R(s.injectImpl):null;ue(t,r,M.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=xt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==l&&R(l),je(a),s.resolving=!1,ge()}}return i}function tn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function en(t,e){return!(t&M.Self||t&M.Host&&e)}class nn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ge(this._tNode,this._lView,t,void 0,e)}}function rn(t){return N(()=>{const e=t.prototype.constructor,n=e[J]||on(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[J]||on(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function on(t){return y(t)?()=>{const e=on(m(t));return e&&e()}:bt(t)}function sn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Me(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gt(),t)}const an="__parameters__";function ln(t,e,n){return N(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(an)?t[an]:Object.defineProperty(t,an,{value:[]})[an];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class cn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=x({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const un=new cn("AnalyzeForEntryComponents"),hn=Function;function dn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),dn(r,e)):e!==t&&e.push(r)}return e}function fn(t,e){t.forEach(t=>Array.isArray(t)?fn(t,e):e(t))}function pn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function gn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function mn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function yn(t,e,n){let r=bn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function vn(t,e){const n=bn(t,e);if(n>=0)return t[1|n]}function bn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const _n={},wn=/\n/gm,xn="__source",Cn=u({provide:String,useValue:u});let Sn;function Tn(t){const e=Sn;return Sn=t,e}function En(t,e=M.Default){if(void 0===Sn)throw new Error("inject() must be called from an injection context");return null===Sn?D(t,void 0,e):Sn.get(t,e&M.Optional?null:void 0,e)}function On(t,e=M.Default){return(I||En)(m(t),e)}const An=On;function Pn(t){const e=[];for(let n=0;n<t.length;n++){const r=m(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=M.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(On(t,n))}else e.push(On(r))}return e}function kn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Mn=kn(ln("Inject",t=>({token:t})),-1),In=kn(ln("Optional"),8),Rn=kn(ln("SkipSelf"),4);let Dn,Nn;function Ln(t){var e;return(null===(e=function(){if(void 0===Dn&&(Dn=null,V.trustedTypes))try{Dn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Dn}())||void 0===e?void 0:e.createHTML(t))||t}function Fn(t){var e;return(null===(e=function(){if(void 0===Nn&&(Nn=null,V.trustedTypes))try{Nn=V.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Nn}())||void 0===e?void 0:e.createHTML(t))||t}class Bn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class jn extends Bn{getTypeName(){return"HTML"}}class $n extends Bn{getTypeName(){return"Style"}}class Un extends Bn{getTypeName(){return"Script"}}class Vn extends Bn{getTypeName(){return"URL"}}class Zn extends Bn{getTypeName(){return"ResourceURL"}}function zn(t){return t instanceof Bn?t.changingThisBreaksApplicationSecurity:t}function Hn(t,e){const n=qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function qn(t){return t instanceof Bn&&t.getTypeName()||null}function Yn(t){return new jn(t)}function Gn(t){return new $n(t)}function Wn(t){return new Un(t)}function Jn(t){return new Vn(t)}function Xn(t){return new Zn(t)}class Qn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Ln(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Kn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Ln(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Ln(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const tr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,er=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function nr(t){return(t=String(t)).match(tr)||t.match(er)?t:"unsafe:"+t}function rr(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function ir(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const or=rr("area,br,col,hr,img,wbr"),sr=rr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ar=rr("rp,rt"),lr=ir(ar,sr),cr=ir(or,ir(sr,rr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ir(ar,rr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lr),ur=rr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hr=rr("srcset"),dr=ir(ur,hr,rr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),fr=rr("script,style,template");class pr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!cr.hasOwnProperty(e))return this.sanitizedSomething=!0,!fr.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!dr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;ur[o]&&(s=nr(s)),hr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>nr(t.trim())).join(", ")),this.buf.push(" ",e,'="',yr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();cr.hasOwnProperty(e)&&!or.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(yr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const gr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,mr=/([^\#-~ |!])/g;function yr(t){return t.replace(/&/g,"&amp;").replace(gr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(mr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let vr;function br(t,e){let n=null;try{vr=vr||function(t){const e=new Kn(t);return function(){try{return!!(new window.DOMParser).parseFromString(Ln(""),"text/html")}catch(t){return!1}}()?new Qn(e):e}(t);let r=e?String(e):"";n=vr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=vr.getInertBodyElement(r)}while(r!==o);return Ln((new pr).sanitizeChildren(_r(n)||n))}finally{if(n){const t=_r(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function _r(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function xr(t){const e=Sr();return e?Fn(e.sanitize(wr.HTML,t)||""):Hn(t,"HTML")?Fn(zn(t)):br(Pt(),b(t))}function Cr(t){const e=Sr();return e?e.sanitize(wr.URL,t)||"":Hn(t,"URL")?zn(t):nr(b(t))}function Sr(){const t=Ht();return t&&t[12]}function Tr(t,e){t.__ngContext__=e}function Er(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Or(t){return t.ngDebugContext}function Ar(t){return t.ngOriginalError}function Pr(t,...e){t.error(...e)}class kr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Pr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Or(t)?Or(t):this._findContext(Ar(t)):null}_findOriginalError(t){let e=Ar(t);for(;e&&Ar(e);)e=Ar(e);return e}}const Mr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function Ir(t){return t.ownerDocument.defaultView}function Rr(t){return t instanceof Function?t():t}var Dr=(()=>((Dr=Dr||{})[Dr.Important=1]="Important",Dr[Dr.DashCase=2]="DashCase",Dr))();function Nr(t,e){return(void 0)(t,e)}function Lr(t){const e=t[3];return pt(e)?e[3]:e}function Fr(t){return jr(t[13])}function Br(t){return jr(t[4])}function jr(t){for(;null!==t&&!pt(t);)t=t[4];return t}function $r(t,e,n,r,i){if(null!=r){let o,s=!1;pt(r)?o=r:ft(r)&&(s=!0,r=r[0]);const a=It(r);0===t&&null!==n?null==i?Gr(e,n,a):Yr(e,n,a,i||null,!0):1===t&&null!==n?Yr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Jr(t,e);r&&function(t,e,n,r){kt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==It(n)&&$r(e,t,r,o,i);for(let s=dt;s<n.length;s++){const i=n[s];ii(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ur(t,e,n){return kt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Vr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Zr(t,e){if(t.length<=dt)return;const n=dt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Vr(o,r),e>0&&(t[n-1][4]=r[4]);const s=gn(t,dt+e);ii(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function zr(t,e){if(!(256&e[2])){const n=e[11];kt(n)&&n.destroyNode&&ii(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Hr(t[1],t);for(;e;){let n=null;if(ft(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ft(e)&&Hr(e[1],e),e=e[3];null===e&&(e=t),ft(e)&&Hr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Hr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Pe)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):It(e[t]),a=r[i=n[o+2]],l=n[o+3];"boolean"==typeof l?s.removeEventListener(n[o],a,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&kt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&pt(e[3])){n!==e[3]&&Vr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function qr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===F.None||e===F.Emulated)return null}return Dt(r,n)}(t,e.parent,n)}function Yr(t,e,n,r,i){kt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Gr(t,e,n){kt(t)?t.appendChild(e,n):e.appendChild(n)}function Wr(t,e,n,r,i){null!==r?Yr(t,e,n,r,i):Gr(t,e,n)}function Jr(t,e){return kt(t)?t.parentNode(e):e.parentNode}function Xr(t,e,n){return Qr(t,e,n)}let Qr=function(t,e,n){return 40&t.type?Dt(t,n):null};function Kr(t,e,n,r){const i=qr(t,r,e),o=e[11],s=Xr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Wr(o,i,n[a],s,!1);else Wr(o,i,n,s,!1)}function ti(t,e){if(null!==e){const n=e.type;if(3&n)return Dt(e,t);if(4&n)return ni(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return ti(t,n);{const n=t[e.index];return pt(n)?ni(-1,n):It(n)}}if(32&n)return Nr(e,t)()||It(t[e.index]);{const n=ei(t,e);return null!==n?Array.isArray(n)?n[0]:ti(Lr(t[16]),n):ti(t,e.next)}}return null}function ei(t,e){return null!==e?t[16][6].projection[e.projection]:null}function ni(t,e){const n=dt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return ti(t,r)}return e[7]}function ri(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],l=n.type;if(s&&0===e&&(a&&Tr(It(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)ri(t,e,n.child,r,i,o,!1),$r(e,t,i,a,o);else if(32&l){const s=Nr(n,r);let l;for(;l=s();)$r(e,t,i,l,o);$r(e,t,i,a,o)}else 16&l?oi(t,e,r,n,i,o):$r(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ii(t,e,n,r,i,o){ri(n,r,t.firstChild,e,i,o,!1)}function oi(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)$r(e,t,i,a[l],o);else ri(t,e,a,s[3],i,o,!0)}function si(t,e,n){kt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function ai(t,e,n){kt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function li(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ci="ng-template";function ui(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==li(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function hi(t){return 4===t.type&&t.value!==ci}function di(t,e,n){return e===(4!==t.type||n?t.value:ci)}function fi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Me(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!s)if(4&r){if(r=2|1&r,""!==l&&!di(t,l,n)||""===l&&1===e.length){if(pi(r))return!1;s=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!ui(t.attrs,c,n)){if(pi(r))return!1;s=!0}continue}const u=gi(8&r?"class":l,i,hi(t),n);if(-1===u){if(pi(r))return!1;s=!0;continue}if(""!==c){let t;t=u>o?"":i[u+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==li(e,c,0)||2&r&&c!==t){if(pi(r))return!1;s=!0}}}}else{if(!s&&!pi(r)&&!pi(l))return!1;if(s&&pi(l))continue;s=!1,r=l|1&r}}return pi(r)||s}function pi(t){return 0==(1&t)}function gi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function mi(t,e,n=!1){for(let r=0;r<e.length;r++)if(fi(t,e[r],n))return!0;return!1}function yi(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function vi(t,e){return t?":not("+e.trim()+")":e}function bi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||pi(s)||(e+=vi(o,i),i=""),r=s,o=o||!pi(r);n++}return""!==i&&(e+=vi(o,i)),e}const _i={};function wi(t){xi(qt(),Ht(),ye()+t,Kt())}function xi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&Ce(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Se(e,r,0,n)}ve(n)}function Ci(t,e){return t<<17|e<<2}function Si(t){return t>>17&32767}function Ti(t){return 2|t}function Ei(t){return(131068&t)>>2}function Oi(t,e){return-131069&t|e<<2}function Ai(t){return 1|t}function Pi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];le(i),n.contentQueries(2,e[o],o)}}}function ki(t,e,n,r,i,o,s,a,l,c){const u=e.blueprint.slice();return u[0]=i,u[2]=140|r,Ut(u),u[3]=u[15]=t,u[8]=n,u[10]=s||t&&t[10],u[11]=a||t&&t[11],u[12]=l||t&&t[12]||null,u[9]=c||t&&t[9]||null,u[6]=o,u[16]=2==e.type?t[16]:u,u}function Mi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Wt(),s=Xt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Zt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Zt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Jt(o,!0),o}function Ii(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ri(t,e,n){he(e);try{const r=t.viewQuery;null!==r&&co(1,r,n);const i=t.template;null!==i&&Li(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Pi(t,e),t.staticViewQueries&&co(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)io(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,me()}}function Di(t,e,n,r){const i=e[2];if(256==(256&i))return;he(e);const o=Kt();try{Ut(e),Zt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Li(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&Ce(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Se(e,n,0,null),Te(e,0)}if(function(t){for(let e=Fr(t);null!==e;e=Br(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=Fr(t);null!==e;e=Br(e))for(let t=dt;t<e.length;t++){const n=e[t],r=n[1];jt(n)&&Di(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Pi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&Ce(e,n)}else{const n=t.contentHooks;null!==n&&Se(e,n,1),Te(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ve(~r);else{const i=r,o=n[++t],s=n[++t];oe(o,i),s(2,e[i])}}}finally{ve(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)no(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&co(2,l,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&Ce(e,n)}else{const n=t.viewHooks;null!==n&&Se(e,n,2),Te(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{me()}}function Ni(t,e,n,r){const i=e[10],o=!Kt(),s=Bt(e);try{o&&!s&&i.begin&&i.begin(),s&&Ri(t,e,r),Di(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Li(t,e,n,r,i){const o=ye(),s=2&r;try{ve(-1),s&&e.length>ht&&xi(t,e,ht,Kt()),n(r,i)}finally{ve(o)}}function Fi(t,e,n){if(gt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function Bi(t,e,n){zt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ue(n,e),Tr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=vt(r);o&&Qi(e,n,r);const l=Ke(e,t,a,n);Tr(l,e),null!==s&&Ki(0,a-i,l,r,0,s),o&&(Ft(n.index,e)[8]=l)}}(t,e,n,Dt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Zt.lFrame.currentDirectiveIndex;try{ve(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];se(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Yi(r,i)}}finally{ve(-1),se(s)}}(t,e,n))}function ji(t,e,n=Dt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function $i(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ui(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ui(t,e,n,r,i,o,s,a,l,c){const u=ht+r,h=u+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:_i);return n}(u,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Vi(t,e,n,r){const i=ho(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&fo(t).push(r,i.length-1))}function Zi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function zi(t,e,n,r,i,o,s,a){const l=Dt(e,n);let c,u=e.inputs;var h;!a&&null!=u&&(c=u[r])?(go(t,n,c,r,i),mt(e)&&function(t,e){const n=Ft(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,kt(o)?o.setProperty(l,r,i):Ie(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}function Hi(t,e,n,r){let i=!1;if(zt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];mi(n,s.selectors,!1)&&(i||(i=[]),He(Ue(n,e),t,s.type),vt(s)?(Gi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ji(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,l=Ii(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Re(n.mergedAttrs,c.hostAttrs),Xi(t,n,e,l,c),Wi(l,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const u=c.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=r[l],n=t.inputs,c=null===i||hi(e)?null:to(n,i);o.push(c),s=Zi(n,l,s),a=Zi(t.outputs,l,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new v("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Re(n.mergedAttrs,n.attrs),i}function qi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Yi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Gi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Wi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;vt(e)&&(n[""]=t)}}function Ji(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Xi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new Pe(o,vt(i),null);t.blueprint[r]=s,n[r]=s,qi(t,e,0,r,Ii(t,n,i.hostVars,_i),i)}function Qi(t,e,n){const r=Dt(e,t),i=$i(n),o=t[10],s=oo(t,ki(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ki(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function to(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function eo(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function no(t,e){const n=Ft(e,t);if(jt(n)){const t=n[1];80&n[2]?Di(t,n,t.template,n[8]):n[5]>0&&ro(n)}}function ro(t){for(let n=Fr(t);null!==n;n=Br(n))for(let t=dt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Di(t,e,t.template,e[8])}else e[5]>0&&ro(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ft(e[n],t);jt(r)&&r[5]>0&&ro(r)}}function io(t,e){const n=Ft(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ri(r,n,n[8])}function oo(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function so(t){for(;t;){t[2]|=64;const e=Lr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function ao(t,e,n){const r=e[10];r.begin&&r.begin();try{Di(t,e,t.template,n)}catch(i){throw po(e,i),i}finally{r.end&&r.end()}}function lo(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Er(n),i=r[1];Ni(i,r,i.template,n)}}(t[8])}function co(t,e,n){le(0),e(t,n)}const uo=(()=>Promise.resolve(null))();function ho(t){return t[7]||(t[7]=[])}function fo(t){return t.cleanup||(t.cleanup=[])}function po(t,e){const n=t[9],r=n?n.get(kr,null):null;r&&r.handleError(e)}function go(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],l=e[s],c=t.data[s];null!==c.setInput?c.setInput(l,i,r,a):l[a]=i}}function mo(t,e,n){const r=Rt(e,t);!function(t,e,n){kt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function yo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=f(i,t):2==o&&(r=f(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const vo=new cn("INJECTOR",-1);class bo{get(t,e=_n){if(e===_n){const e=new Error(`NullInjectorError: No provider for ${d(t)}!`);throw e.name="NullInjectorError",e}return e}}const _o=new cn("Set Injector scope."),wo={},xo={};let Co;function So(){return void 0===Co&&(Co=new bo),Co}function To(t,e=null,n=null,r){return new Eo(t,n,e||So(),r)}class Eo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&fn(e,n=>this.processProvider(n,t,e)),fn([t],t=>this.processInjectorType(t,[],i)),this.records.set(vo,Po(void 0,this));const o=this.records.get(_o);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:d(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=_n,n=M.Default){this.assertNotDestroyed();const r=Tn(this);try{if(!(n&M.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof cn)&&S(t);e=n&&this.injectableDefInScope(n)?Po(Oo(t),wo):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&M.Self?So():this.parent).get(t,e=n&M.Optional&&e===_n?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(d(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[xn]&&i.unshift(e[xn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=d(e);if(Array.isArray(e))i=e.map(d).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):d(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(wn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Tn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(d(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=m(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{fn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];fn(r,t=>this.processProvider(t,n,r||z))}}this.injectorDefTypes.add(o);const a=bt(o)||(()=>new o);this.records.set(o,Po(a,wo));const l=r.providers;if(null!=l&&!s){const e=t;fn(l,t=>this.processProvider(t,e,l))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Mo(t=m(t))?t:m(t&&t.provide);const i=function(t,e,n){return ko(t)?Po(void 0,t.useValue):Po(Ao(t),wo)}(t);if(Mo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Po(void 0,wo,!0),e.factory=()=>Pn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===wo&&(e.value=xo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=m(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Oo(t){const e=S(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;if(t instanceof cn)throw new Error(`Token ${d(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=mn(e,"?");throw new Error(`Can't resolve all parameters for ${d(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[P]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Ao(t,e,n){let r;if(Mo(t)){const e=m(t);return bt(e)||Oo(e)}if(ko(t))r=()=>m(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Pn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>On(m(t.useExisting));else{const e=m(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||Oo(e);r=()=>new e(...Pn(t.deps))}var i;return r}function Po(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ko(t){return null!==t&&"object"==typeof t&&Cn in t}function Mo(t){return"function"==typeof t}const Io=function(t,e,n){return function(t,e=null,n=null,r){const i=To(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class Ro{static create(t,e){return Array.isArray(t)?Io(t,e,""):Io(t.providers,t.parent,t.name||"")}}function Do(t,e){xe(Er(t)[1],Gt())}function No(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(vt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Lo(t.inputs),e.declaredInputs=Lo(t.declaredInputs),e.outputs=Lo(t.outputs);const n=i.hostBindings;n&&jo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Fo(t,o),s&&Bo(t,s),h(t.inputs,i.inputs),h(t.declaredInputs,i.declaredInputs),h(t.outputs,i.outputs),vt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===No&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Re(i.hostAttrs,n=Re(n,i.hostAttrs))}}(r)}function Lo(t){return t===Z?{}:t===z?[]:t}function Fo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Bo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function jo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}Ro.THROW_IF_NOT_FOUND=_n,Ro.NULL=new bo,Ro.\u0275prov=x({token:Ro,providedIn:"any",factory:()=>On(vo)}),Ro.__NG_ELEMENT_ID__=-1;let $o=null;function Uo(){if(!$o){const t=V.Symbol;if(t&&t.iterator)$o=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&($o=n)}}}return $o}class Vo{constructor(t){this.wrapped=t}static wrap(t){return new Vo(t)}static unwrap(t){return Vo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Vo}}function Zo(t){return!!zo(t)&&(Array.isArray(t)||!(t instanceof Map)&&Uo()in t)}function zo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Ho(t,e,n){return t[e]=n}function qo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Yo(t,e,n,r){const i=qo(t,e,n);return qo(t,e+1,r)||i}function Go(t,e,n,r){const i=Ht();return qo(i,re(),e)&&(qt(),function(t,e,n,r,i,o){const s=Dt(t,e);!function(t,e,n,r,i,o,s){if(null==o)kt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);kt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(be(),i,t,e,n,r)),Go}function Wo(t,e,n,r){return qo(t,re(),n)?e+b(n)+r:_i}function Jo(t,e,n,r,i,o,s,a){const l=Ht(),c=qt(),u=t+ht,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,l){const c=e.consts,u=Mi(e,t,4,s||null,$t(c,a));Hi(e,n,u,$t(c,l)),xe(e,u);const h=u.tViews=Ui(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,n,r,i,o,s):c.data[u];Jt(h,!1);const d=l[11].createComment("");Kr(c,l,d,h),Tr(d,l),oo(l,l[u]=eo(d,l,d,h)),yt(h)&&Bi(c,l,h),null!=s&&ji(l,h,a)}function Xo(t){return Lt(Zt.lFrame.contextLView,ht+t)}function Qo(t,e=M.Default){const n=Ht();return null===n?On(t,e):Ge(Gt(),n,m(t),e)}function Ko(t,e,n){const r=Ht();return qo(r,re(),e)&&zi(qt(),be(),r,t,e,r[11],n,!1),Ko}function ts(t,e,n,r,i){const o=i?"class":"style";go(t,n,e.inputs[o],o,r)}function es(t,e,n,r){const i=Ht(),o=qt(),s=ht+t,a=i[11],l=i[s]=Ur(a,e,Zt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,l=Mi(e,t,2,i,$t(a,o));return Hi(e,n,l,$t(a,s)),null!==l.attrs&&yo(l,l.attrs,!1),null!==l.mergedAttrs&&yo(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(s,o,i,0,e,n,r):o.data[s];Jt(c,!0);const u=c.mergedAttrs;null!==u&&ke(a,l,u);const h=c.classes;null!==h&&ai(a,l,h);const d=c.styles;null!==d&&si(a,l,d),64!=(64&c.flags)&&Kr(o,i,l,c),0===Zt.lFrame.elementDepthCount&&Tr(l,i),Zt.lFrame.elementDepthCount++,yt(c)&&(Bi(o,i,c),Fi(o,c,i)),null!==r&&ji(i,c)}function ns(){let t=Gt();Xt()?Qt():(t=t.parent,Jt(t,!1));const e=t;Zt.lFrame.elementDepthCount--;const n=qt();n.firstCreatePass&&(xe(n,t),gt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ts(n,e,Ht(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ts(n,e,Ht(),e.stylesWithoutHost,!1)}function rs(t,e,n,r){es(t,e,n,r),ns()}function is(t,e,n){const r=Ht(),i=qt(),o=t+ht,s=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=$t(o,r),a=Mi(e,t,8,"ng-container",s);return null!==s&&yo(a,s,!0),Hi(e,n,a,$t(o,i)),null!==e.queries&&e.queries.elementStart(e,a),a}(o,i,r,e,n):i.data[o];Jt(s,!0);const a=r[o]=r[11].createComment("");Kr(i,r,a,s),Tr(a,r),yt(s)&&(Bi(i,r,s),Fi(i,s,r)),null!=n&&ji(r,s)}function os(){let t=Gt();const e=qt();Xt()?Qt():(t=t.parent,Jt(t,!1)),e.firstCreatePass&&(xe(e,t),gt(t)&&e.queries.elementEnd(t))}function ss(t,e,n){is(t,e,n),os()}function as(){return Ht()}function ls(t){return!!t&&"function"==typeof t.then}function cs(t){return!!t&&"function"==typeof t.subscribe}const us=cs;function hs(t,e,n,r){const i=Ht(),o=qt(),s=Gt();return function(t,e,n,r,i,o,s,a){const l=yt(r),c=t.firstCreatePass&&fo(t),u=ho(e);let h=!0;if(3&r.type||a){const d=Dt(r,e),f=a?a(d):d,p=u.length,g=a?t=>a(It(t[r.index])):r.index;if(kt(n)){let s=null;if(!a&&l&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=fs(r,e,0,o,!1);const t=n.listen(f,i,o);u.push(o,t),c&&c.push(i,g,p,p+1)}}else o=fs(r,e,0,o,!0),f.addEventListener(i,o,s),u.push(o),c&&c.push(i,g,p,s)}else o=fs(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=u.length;u.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),hs}function ds(t,e,n,r){try{return!1!==n(r)}catch(i){return po(t,i),!1}}function fs(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Ft(t.index,e):e;0==(32&e[2])&&so(s);let a=ds(e,0,r,o),l=n.__ngNextListenerFn__;for(;l;)a=ds(e,0,l,o)&&a,l=l.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function ps(t=1){return function(t){return(Zt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Zt.lFrame.contextLView))[8]}(t)}function gs(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?mi(t,o,!0):yi(r,o))return i}else n=i}return n}function ms(t){const e=Ht()[16][6];if(!e.projection){const n=e.projection=mn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?gs(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function ys(t,e=0,n){const r=Ht(),i=qt(),o=Mi(i,ht+t,16,null,n||null);null===o.projection&&(o.projection=e),Qt(),64!=(64&o.flags)&&function(t,e,n){oi(e[11],0,e,n,qr(t,n,e),Xr(n.parent||e[6],n,e))}(i,r,o)}function vs(t,e,n,r,i){const o=Ht(),s=Wo(o,e,n,r);return s!==_i&&zi(qt(),be(),o,t,s,o[11],i,!1),vs}function bs(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Si(o):Ei(o),l=!1;for(;0!==a&&(!1===l||s);){const n=t[a+1];_s(t[a],e)&&(l=!0,t[a+1]=r?Ai(n):Ti(n)),a=r?Si(n):Ei(n)}l&&(t[n+1]=r?Ti(o):Ai(o))}function _s(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&bn(t,e)>=0}const ws={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xs(t){return t.substring(ws.key,ws.keyEnd)}function Cs(t,e){const n=ws.textEnd;return n===e?-1:(e=ws.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,ws.key=e,n),Ss(t,e,n))}function Ss(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Ts(t,e,n){return Ps(t,e,n,!1),Ts}function Es(t,e){return Ps(t,e,null,!0),Es}function Os(t){ks(yn,As,t,!0)}function As(t,e){for(let n=function(t){return function(t){ws.key=0,ws.keyEnd=0,ws.value=0,ws.valueEnd=0,ws.textEnd=t.length}(t),Cs(t,Ss(t,0,ws.textEnd))}(e);n>=0;n=Cs(e,n))yn(t,xs(e),!0)}function Ps(t,e,n,r){const i=Ht(),o=qt(),s=ie(2);o.firstUpdatePass&&Is(o,t,s,r),e!==_i&&qo(i,s,e)&&Ns(o,o.data[ye()],i,i[11],t,i[s+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=d(zn(t)))),t}(e,n),r,s)}function ks(t,e,n,r){const i=qt(),o=ie(2);i.firstUpdatePass&&Is(i,null,o,r);const s=Ht();if(n!==_i&&qo(s,o,n)){const a=i.data[ye()];if(Bs(a,r)&&!Ms(i,o)){let t=r?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=f(t,n||"")),ts(i,a,s,n,r)}else!function(t,e,n,r,i,o,s,a){i===_i&&(i=z);let l=0,c=0,u=0<i.length?i[0]:null,h=0<o.length?o[0]:null;for(;null!==u||null!==h;){const d=l<i.length?i[l+1]:void 0,f=c<o.length?o[c+1]:void 0;let p,g=null;u===h?(l+=2,c+=2,d!==f&&(g=h,p=f)):null===h||null!==u&&u<h?(l+=2,g=u):(c+=2,g=h,p=f),null!==g&&Ns(t,e,n,r,g,p,s,a),u=l<i.length?i[l]:null,h=c<o.length?o[c]:null}}(i,a,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return z;const r=[],i=zn(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),r,o)}}function Ms(t,e){return e>=t.expandoStartIndex}function Is(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ye()],s=Ms(t,n);Bs(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Zt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Ds(n=Rs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Rs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==Ei(r))return t[Si(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Rs(null,t,e,n[1],r),n=Ds(n,e.attrs,r),function(t,e,n,r){t[Si(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Ds(r,t[o].hostAttrs,n);return Ds(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Si(s),l=Ei(s);t[r]=n;let c,u=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||bn(t,c)>0)&&(u=!0)}else c=n;if(i)if(0!==l){const e=Si(t[a+1]);t[r+1]=Ci(e,a),0!==e&&(t[e+1]=Oi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Ci(a,0),0!==a&&(t[a+1]=Oi(t[a+1],r)),a=r;else t[r+1]=Ci(l,0),0===a?a=r:t[l+1]=Oi(t[l+1],r),l=r;u&&(t[r+1]=Ti(t[r+1])),bs(t,c,r,!0),bs(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&bn(o,e)>=0&&(n[r+1]=Ai(n[r+1]))}(e,c,t,r,o),s=Ci(a,l),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Rs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Ds(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Ds(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),yn(t,s,!!n||e[++o]))}return void 0===t?null:t}function Ns(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const l=t.data,c=l[a+1];Fs(1==(1&c)?Ls(l,e,n,i,Ei(c),s):void 0)||(Fs(o)||2==(2&c)&&(o=Ls(l,null,n,i,a,s)),function(t,e,n,r,i){const o=kt(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{let e=-1===r.indexOf("-")?void 0:Dr.DashCase;if(null==i)o?t.removeStyle(n,r,e):n.style.removeProperty(r);else{const s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),e|=Dr.Important),o?t.setStyle(n,r,i,e):n.style.setProperty(r,i,s?"important":"")}}}(r,s,Rt(ye(),n),i,o))}function Ls(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),l=o?e[1]:e,c=null===l;let u=n[i+1];u===_i&&(u=c?z:void 0);let h=c?vn(u,r):l===r?u:void 0;if(o&&!Fs(h)&&(h=vn(e,r)),Fs(h)&&(a=h,s))return a;const d=t[i+1];i=s?Si(d):Ei(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=vn(t,r))}return a}function Fs(t){return void 0!==t}function Bs(t,e){return 0!=(t.flags&(e?16:32))}function js(t,e=""){const n=Ht(),r=qt(),i=t+ht,o=r.firstCreatePass?Mi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return kt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Kr(r,n,s,o),Jt(o,!1)}function $s(t){return Us("",t,""),$s}function Us(t,e,n){const r=Ht(),i=Wo(r,t,e,n);return i!==_i&&mo(r,ye(),i),Us}function Vs(t,e,n,r,i){const o=Ht(),s=function(t,e,n,r,i,o){const s=Yo(t,ne(),n,i);return ie(2),s?e+b(n)+r+b(i)+o:_i}(o,t,e,n,r,i);return s!==_i&&mo(o,ye(),s),Vs}function Zs(t,e,n,r,i,o,s){const a=Ht(),l=function(t,e,n,r,i,o,s,a){const l=function(t,e,n,r,i){const o=Yo(t,e,n,r);return qo(t,e+2,i)||o}(t,ne(),n,i,s);return ie(3),l?e+b(n)+r+b(i)+o+b(s)+a:_i}(a,t,e,n,r,i,o,s);return l!==_i&&mo(a,ye(),l),Zs}function zs(t,e,n){ks(yn,As,Wo(Ht(),t,e,n),!0)}function Hs(t,e,n){const r=Ht();return qo(r,re(),e)&&zi(qt(),be(),r,t,e,r[11],n,!0),Hs}const qs=void 0;var Ys=["en",[["a","p"],["AM","PM"],qs],[["AM","PM"],qs,qs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qs,"{1} 'at' {0}",qs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Gs={};function Ws(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Xs(e);if(n)return n;const r=e.split("-")[0];if(n=Xs(r),n)return n;if("en"===r)return Ys;throw new Error(`Missing locale data for the locale "${t}".`)}function Js(t){return Ws(t)[Qs.PluralCase]}function Xs(t){return t in Gs||(Gs[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),Gs[t]}var Qs=(()=>((Qs=Qs||{})[Qs.LocaleId=0]="LocaleId",Qs[Qs.DayPeriodsFormat=1]="DayPeriodsFormat",Qs[Qs.DayPeriodsStandalone=2]="DayPeriodsStandalone",Qs[Qs.DaysFormat=3]="DaysFormat",Qs[Qs.DaysStandalone=4]="DaysStandalone",Qs[Qs.MonthsFormat=5]="MonthsFormat",Qs[Qs.MonthsStandalone=6]="MonthsStandalone",Qs[Qs.Eras=7]="Eras",Qs[Qs.FirstDayOfWeek=8]="FirstDayOfWeek",Qs[Qs.WeekendRange=9]="WeekendRange",Qs[Qs.DateFormat=10]="DateFormat",Qs[Qs.TimeFormat=11]="TimeFormat",Qs[Qs.DateTimeFormat=12]="DateTimeFormat",Qs[Qs.NumberSymbols=13]="NumberSymbols",Qs[Qs.NumberFormats=14]="NumberFormats",Qs[Qs.CurrencyCode=15]="CurrencyCode",Qs[Qs.CurrencySymbol=16]="CurrencySymbol",Qs[Qs.CurrencyName=17]="CurrencyName",Qs[Qs.Currencies=18]="Currencies",Qs[Qs.Directionality=19]="Directionality",Qs[Qs.PluralCase=20]="PluralCase",Qs[Qs.ExtraData=21]="ExtraData",Qs))();const Ks="en-US";let ta=Ks;function ea(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(ta=t.toLowerCase().replace(/_/g,"-"))}function na(t,e,n,r,i){if(t=m(t),Array.isArray(t))for(let o=0;o<t.length;o++)na(t[o],e,n,r,i);else{const o=qt(),s=Ht();let a=Mo(t)?t:m(t.provide),l=Ao(t);const c=Gt(),u=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Mo(t)||!t.multi){const r=new Pe(l,i,Qo),f=oa(a,e,i?u:u+d,h);-1===f?(He(Ue(c,s),o,a),ra(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=oa(a,e,u+d,h),p=oa(a,e,u,u+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){He(Ue(c,s),o,a);const u=function(t,e,n,r,i){const o=new Pe(t,n,Qo);return o.multi=[],o.index=e,o.componentProviders=0,ia(o,i,r&&!n),o}(i?aa:sa,n.length,i,r,l);!i&&m&&(n[p].providerFactory=u),ra(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(u),s.push(u)}else ra(o,t,f>-1?f:p,ia(n[i?p:f],l,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function ra(t,e,n,r){const i=Mo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ia(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function oa(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function sa(t,e,n,r){return la(this.multi,[])}function aa(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Ke(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),la(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],la(i,o);return o}function la(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ca(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=qt();if(r.firstCreatePass){const i=vt(t);na(n,r.data,r.blueprint,i,!0),na(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ua{}class ha{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${d(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class da{}function fa(...t){}function pa(t,e){return new ma(Dt(t,e))}da.NULL=new ha;const ga=function(){return pa(Gt(),Ht())};let ma=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=ga,t})();function ya(t){return t instanceof ma?t.nativeElement:t}class va{}let ba=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>_a(),t})();const _a=function(){const t=Ht(),e=Ft(Gt().index,t);return function(t){return t[11]}(ft(e)?e:t)};let wa=(()=>{class t{}return t.\u0275prov=x({token:t,providedIn:"root",factory:()=>null}),t})();class xa{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ca=new xa("12.1.1");class Sa{constructor(){}supports(t){return Zo(t)}create(t){return new Ea(t)}}const Ta=(t,e)=>e;class Ea{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ta}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ka(n,r,i)?e:n,s=ka(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Zo(t))throw new Error(`Error trying to diff '${d(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Uo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Oa(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Pa),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pa),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Oa{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Aa{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Pa{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Aa,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ka(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ma{constructor(){}supports(t){return t instanceof Map||zo(t)}create(){return new Ia}}class Ia{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||zo(t)))throw new Error(`Error trying to diff '${d(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ra(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ra{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Da(){return new Na([new Sa])}let Na=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Da()),deps:[[t,new Rn,new In]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=x({token:t,providedIn:"root",factory:Da}),t})();function La(){return new Fa([new Ma])}let Fa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||La()),deps:[[t,new Rn,new In]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=x({token:t,providedIn:"root",factory:La}),t})();function Ba(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(It(o)),pt(o))for(let t=dt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Ba(e[1],e,n,r)}const s=n.type;if(8&s)Ba(t,e,n.child,r);else if(32&s){const t=Nr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=ei(e,n);if(Array.isArray(t))r.push(...t);else{const n=Lr(e[16]);Ba(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ja{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ba(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(pt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Zr(t,n),gn(e,n))}this._attachedToViewContainer=!1}zr(this._lView[1],this._lView)}onDestroy(t){Vi(this._lView[1],this._lView,null,t)}markForCheck(){so(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ao(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){te(!0);try{ao(t,e,n)}finally{te(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,ii(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class $a extends ja{constructor(t){super(t),this._view=t}detectChanges(){lo(this._view)}checkNoChanges(){!function(t){te(!0);try{lo(t)}finally{te(!1)}}(this._view)}get context(){return null}}const Ua=function(t){return function(t,e,n){if(mt(t)&&!n){const n=Ft(t.index,e);return new ja(n,n)}return 47&t.type?new ja(e[16],e):null}(Gt(),Ht(),16==(16&t))};let Va=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ua,t})();const Za=[new Ma],za=new Na([new Sa]),Ha=new Fa(Za),qa=function(){return Ja(Gt(),Ht())};let Ya=(()=>{class t{}return t.__NG_ELEMENT_ID__=qa,t})();const Ga=Ya,Wa=class extends Ga{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ki(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ri(e,n,t),new ja(n)}};function Ja(t,e){return 4&t.type?new Wa(e,t,pa(t,e)):null}class Xa{}class Qa{}const Ka=function(){return ol(Gt(),Ht())};let tl=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ka,t})();const el=tl,nl=class extends el{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return pa(this._hostTNode,this._hostLView)}get injector(){return new nn(this._hostTNode,this._hostLView)}get parentInjector(){const t=ze(this._hostTNode,this._hostLView);if(Ne(t)){const e=Fe(t,this._hostLView),n=Le(t);return new nn(e[1].data[n+8],e)}return new nn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=rl(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-dt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Xa,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(pt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new nl(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=dt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-dt?(e[4]=n[i],pn(n,dt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=ni(i,o),a=n[11],l=Jr(a,o[7]);return null!==l&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,ii(t,r,n,1,i,o)}(r,o[6],a,n,l,s),t.attachToViewContainerRef(),pn(il(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=rl(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Zr(this._lContainer,e);n&&(gn(il(this._lContainer),e),zr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Zr(this._lContainer,e);return n&&null!=gn(il(this._lContainer),e)?new ja(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function rl(t){return t[8]}function il(t){return t[8]||(t[8]=[])}function ol(t,e){let n;const r=e[t.index];if(pt(r))n=r;else{let i;if(8&t.type)i=It(r);else{const n=e[11];i=n.createComment("");const r=Dt(t,e);Yr(n,Jr(n,r),i,function(t,e){return kt(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=eo(r,e,i,t),oo(e,n)}return new nl(n,t,e)}const sl={};class al extends da{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ct(t);return new ul(e,this.ngModule)}}function ll(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const cl=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Mr});class ul extends ua{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(bi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ll(this.componentDef.inputs)}get outputs(){return ll(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,sl,i);return o!==sl||r===sl?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(va,Mt),s=i.get(wa,null),a=o.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(kt(t))return t.selectRootElement(e,n===F.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Ur(o.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?Et:"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Mr,clean:uo,playerHandler:null,flags:0},d=Ui(0,null,null,1,0,null,null,null,null,null),f=ki(null,d,h,u,null,null,o,a,s,i);let p,g;he(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Mi(s,20,2,"#host",null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(yo(a,l,!0),null!==t&&(ke(i,t,l),null!==a.classes&&ai(i,t,a.classes),null!==a.styles&&si(i,t,a.styles)));const c=r.createRenderer(t,e),u=ki(n,$i(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(He(Ue(a,n),s,e.type),Gi(s,a),Ji(a,n.length,1)),oo(n,u),n[20]=u}(c,this.componentDef,f,o,a);if(c)if(n)ke(a,c,["ng-version",Ca.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!pi(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ke(a,c,t),e&&e.length>0&&ai(a,c,e.join(" "))}if(g=Nt(d,ht),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Xi(t,r,e,Ii(t,e,1,null),n));const i=Ke(e,t,r.directiveStart,r);Tr(i,e);const o=Dt(r,e);return o&&Tr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Gt();e.contentQueries(1,s,t.directiveStart)}const a=Gt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ve(a.index),qi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Yi(e,s)),s}(t,this.componentDef,f,h,[Do]),Ri(d,f,null)}finally{me()}return new hl(this.componentType,p,pa(g,f),f,g)}}class hl extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new $a(r),this.componentType=t}get injector(){return new nn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const dl=new Map;class fl extends Xa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new al(this);const n=ut(t),r=t[W]||null;r&&ea(r),this._bootstrapComponents=Rr(n.bootstrap),this._r3Injector=To(t,e,[{provide:Xa,useValue:this},{provide:da,useValue:this.componentFactoryResolver}],d(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ro.THROW_IF_NOT_FOUND,n=M.Default){return t===Ro||t===Xa||t===vo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class pl extends Qa{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${d(e)} vs ${d(e.name)}`)}(i,dl.get(i),n),dl.set(i,n));const o=Rr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new fl(this.moduleType,t)}}function gl(t,e,n){const r=ee()+t,i=Ht();return i[r]===_i?Ho(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function ml(t,e,n,r){return bl(Ht(),ee(),t,e,n,r)}function yl(t,e,n,r,i){return _l(Ht(),ee(),t,e,n,r,i)}function vl(t,e){const n=t[e];return n===_i?void 0:n}function bl(t,e,n,r,i,o){const s=e+n;return qo(t,s,i)?Ho(t,s+1,o?r.call(o,i):r(i)):vl(t,s+1)}function _l(t,e,n,r,i,o,s){const a=e+n;return Yo(t,a,i,o)?Ho(t,a+2,s?r.call(s,i,o):r(i,o)):vl(t,a+2)}function wl(t,e){const n=qt();let r;const i=t+ht;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new v("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=bt(r.type)),s=R(Qo);try{const t=je(!1),e=o();return je(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Ht(),i,e),e}finally{R(s)}}function xl(t,e,n){const r=t+ht,i=Ht(),o=Lt(i,r);return Tl(i,Sl(i,r)?bl(i,ee(),e,o.transform,n,o):o.transform(n))}function Cl(t,e,n,r){const i=t+ht,o=Ht(),s=Lt(o,i);return Tl(o,Sl(o,i)?_l(o,ee(),e,s.transform,n,r,s):s.transform(n,r))}function Sl(t,e){return t[1].data[e].pure}function Tl(t,e){return Vo.isWrapped(e)&&(e=Vo.unwrap(e),t[ne()]=_i),e}function El(t){return e=>{setTimeout(t,void 0,e)}}const Ol=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,l=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),l=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(l=El(l),a&&(a=El(a)),c&&(c=El(c)));const u=super.subscribe({next:a,error:l,complete:c});return t instanceof i.w&&t.add(u),u}};function Al(){return this._results[Uo()]()}class Pl{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Uo(),n=Pl.prototype;n[e]||(n[e]=Al)}get changes(){return this._changes||(this._changes=new Ol)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=dn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class kl{constructor(t){this.queryList=t,this.matches=null}clone(){return new kl(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ml{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ml(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Hl(t,e).matches&&this.queries[e].setDirty()}}class Il{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Rl{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Rl(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Dl{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Dl(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Nl(e,i)),this.matchTNodeWithReadOption(t,e,Qe(e,t,i,!1,!1))}else n===Ya?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Qe(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ma||r===tl||r===Ya&&4&e.type)this.addMatch(e.index,-2);else{const n=Qe(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Nl(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ll(t,e,n,r){return-1===n?function(t,e){return 11&t.type?pa(t,e):4&t.type?Ja(t,e):null}(e,t):-2===n?function(t,e,n){return n===ma?pa(e,t):n===Ya?Ja(e,t):n===tl?ol(e,t):void 0}(t,e,r):Ke(t,t[1],n,e)}function Fl(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ll(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Bl(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Fl(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=dt;t<s.length;t++){const e=s[t];e[17]===e[3]&&Bl(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Bl(n[1],n,i,r)}}}}}return r}function jl(t){const e=Ht(),n=qt(),r=ae();le(r+1);const i=Hl(n,r);if(t.dirty&&Bt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Bl(n,e,r,[]):Fl(n,e,i,r);t.reset(o,ya),t.notifyOnChanges()}return!0}return!1}function $l(t,e,n){const r=qt();r.firstCreatePass&&(zl(r,new Il(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),Zl(r,Ht(),e)}function Ul(t,e,n,r){const i=qt();if(i.firstCreatePass){const o=Gt();zl(i,new Il(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}Zl(i,Ht(),n)}function Vl(){return t=Ht(),e=ae(),t[19].queries[e].queryList;var t,e}function Zl(t,e,n){const r=new Pl(4==(4&n));Vi(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ml),e[19].queries.push(new kl(r))}function zl(t,e,n){null===t.queries&&(t.queries=new Rl),t.queries.track(new Dl(e,n))}function Hl(t,e){return t.queries.getByIndex(e)}function ql(t,e){return Ja(t,e)}const Yl=new cn("Application Initializer");let Gl=(()=>{class t{constructor(t){this.appInits=t,this.resolve=fa,this.reject=fa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(ls(e))t.push(e);else if(us(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(On(Yl,8))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();const Wl=new cn("AppId"),Jl={provide:Wl,useFactory:function(){return`${Xl()}${Xl()}${Xl()}`},deps:[]};function Xl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ql=new cn("Platform Initializer"),Kl=new cn("Platform ID"),tc=new cn("appBootstrapListener");let ec=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();const nc=new cn("LocaleId"),rc=new cn("DefaultCurrencyCode");class ic{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const oc=function(t){return new pl(t)},sc=oc,ac=function(t){return Promise.resolve(oc(t))},lc=function(t){const e=oc(t),n=Rr(ut(t).declarations).reduce((t,e)=>{const n=ct(e);return n&&t.push(new ul(n)),t},[]);return new ic(e,n)},cc=lc,uc=function(t){return Promise.resolve(lc(t))};let hc=(()=>{class t{constructor(){this.compileModuleSync=sc,this.compileModuleAsync=ac,this.compileModuleAndAllComponentsSync=cc,this.compileModuleAndAllComponentsAsync=uc}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();const dc=(()=>Promise.resolve(0))();function fc(t){"undefined"==typeof Zone?dc.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class pc{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ol(!1),this.onMicrotaskEmpty=new Ol(!1),this.onStable=new Ol(!1),this.onError=new Ol(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,yc(t),t.isCheckStableRunning=!0,mc(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),yc(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return vc(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),bc(t)}},onInvoke:(n,r,i,o,s,a,l)=>{try{return vc(t),n.invoke(i,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),bc(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,yc(t),mc(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,gc,fa,fa);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const gc={};function mc(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yc(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function vc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function bc(t){t._nesting--,mc(t)}class _c{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ol,this.onMicrotaskEmpty=new Ol,this.onStable=new Ol,this.onError=new Ol}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let wc=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pc.assertNotInAngularZone(),fc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())fc(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(On(pc))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})(),xc=(()=>{class t{constructor(){this._applications=new Map,Ec.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ec.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();class Cc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Sc(t){Ec=t}let Tc,Ec=new Cc,Oc=!0,Ac=!1;function Pc(){if(Ac)throw new Error("Cannot enable prod mode after platform setup.");Oc=!1}const kc=new cn("AllowMultipleToken");class Mc{constructor(t,e){this.name=t,this.token=e}}function Ic(t,e,n=[]){const r=`Platform: ${e}`,i=new cn(r);return(e=[])=>{let o=Rc();if(!o||o.injector.get(kc,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:_o,useValue:"platform"});!function(t){if(Tc&&!Tc.destroyed&&!Tc.injector.get(kc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Tc=t.get(Dc);const e=t.get(Ql,null);e&&e.forEach(t=>t())}(Ro.create({providers:t,name:r}))}return function(t){const e=Rc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Rc(){return Tc&&!Tc.destroyed?Tc:null}let Dc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new _c:("zone.js"===t?void 0:t)||new pc({enableLongStackTrace:(Ac=!0,Oc),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:pc,useValue:n}];return n.run(()=>{const e=Ro.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(kr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Fc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return ls(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Gl);return t.runInitializers(),t.donePromise.then(()=>(ea(i.injector.get(nc,Ks)||Ks),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Nc({},e);return function(t,e,n){const r=new pl(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Lc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${d(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(On(Ro))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();function Nc(t,e){return Array.isArray(e)?e.reduce(Nc,t):Object.assign(Object.assign({},t),e)}let Lc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{pc.assertNotInAngularZone(),fc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{pc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(u,h.pipe(t=>{return(0,l.x)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.N);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ua?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Xa),i=n.create(Ro.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(wc,null),a=s&&i.injector.get(xc);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Fc(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Fc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(tc,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(On(pc),On(Ro),On(kr),On(da),On(Gl))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();function Fc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Bc{}class jc{}const $c={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Uc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||$c}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(98255)(e).then(t=>t[r]).then(t=>Vc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(98255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Vc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(On(hc),On(jc,8))},t.\u0275prov=x({token:t,factory:t.\u0275fac}),t})();function Vc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Zc=function(t){return null},zc=Ic(null,"core",[{provide:Kl,useValue:"unknown"},{provide:Dc,deps:[Ro]},{provide:xc,deps:[]},{provide:ec,deps:[]}]),Hc=[{provide:Lc,useClass:Lc,deps:[pc,Ro,kr,da,Gl]},{provide:cl,deps:[pc],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Gl,useClass:Gl,deps:[[new In,Yl]]},{provide:hc,useClass:hc,deps:[]},Jl,{provide:Na,useFactory:function(){return za},deps:[]},{provide:Fa,useFactory:function(){return Ha},deps:[]},{provide:nc,useFactory:function(t){return ea(t=t||"undefined"!=typeof $localize&&$localize.locale||Ks),t},deps:[[new Mn(nc),new In,new Rn]]},{provide:rc,useValue:"USD"}];let qc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(On(Lc))},t.\u0275mod=it({type:t}),t.\u0275inj=C({providers:Hc}),t})()},91463:(t,e,n)=>{"use strict";n.d(e,{X6:()=>C,QV:()=>Z,KW:()=>M,MY:()=>q,NS:()=>Y});var r=n(65341),i=n(44879);const o=4294967296;function s(t){return t<10?2:t<100?3:t<1e3?4:t<1e4?5:t<1e5?6:t<1e6?7:t<1e7?8:t<1e8?9:t<1e9?10:11}const a=new TextDecoder("utf-8");function l(t,e=0,n){return n-e>512?a.decode(t.slice(e,n)):function(t,e=0,n){let r="";for(;e<n;){let i=t[e++];if(i>127){if(i>191&&i<224){if(e>=n)throw new Error("UTF-8 decode: incomplete 2-byte sequence");i=(31&i)<<6|63&t[e++]}else if(i>223&&i<240){if(e+1>=n)throw new Error("UTF-8 decode: incomplete 3-byte sequence");i=(15&i)<<12|(63&t[e++])<<6|63&t[e++]}else{if(!(i>239&&i<248))throw new Error("UTF-8 decode: unknown multibyte start 0x"+i.toString(16)+" at index "+(e-1));if(e+2>=n)throw new Error("UTF-8 decode: incomplete 4-byte sequence");i=(7&i)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++]}if(i<=65535)r+=String.fromCharCode(i);else{if(!(i<=1114111))throw new Error("UTF-8 decode: code point 0x"+i.toString(16)+" exceeds UTF-16 reach");i-=65536,r+=String.fromCharCode(i>>10|55296,1023&i|56320)}}else{if(0===i)return r;r+=String.fromCharCode(i)}}return r}(t,e,n)}var c,u,h=n(10840),d=n.t(h,2);const{randomBytes:f}=d;let p;const g=[];for(let G=0;G<256;G++)g[G]=(G<=15?"0":"")+G.toString(16);const m=Symbol.for("deepkit/bson/objectid"),y=Symbol.for("deepkit/bson/uuid");function v(t){return!!t&&t.hasOwnProperty(y)}function b(t){return!!t&&t.hasOwnProperty(m)}class _{constructor(t){this.id=t,this[c]=!0}static generate(t){t||(t=Math.ceil(Date.now()/1e3));const e=++_.index%16777215,n=p||(p=f(5),p);return""+g[t>>24&255]+g[t>>16&255]+g[t>>8&255]+g[255&t]+g[n[0]]+g[n[1]]+g[n[2]]+g[n[3]]+g[n[4]]+g[e>>16&255]+g[e>>8&255]+g[255&e]}}c=m,_.index=Math.ceil(16777215&Math.random());class w{constructor(t){this.id=t,this[u]=!0}}u=y;const x=function(t=10){const e=new r.Ri,n=[];function i(t){const e=[];for(let n=0;n<t;n++)e.push(`codes[${n}]`);return`fromCharCode(${e.join(", ")})`}const o=[];for(let r=1;r<=t;r++){const t=new Function("fromCharCode","return function(codes) { return "+i(r)+"}")(String.fromCharCode);e.context.set("decodeCodes"+r,t),o.push(t)}for(let r=0;r<t;r++)n.push(`if (codesOffset === ${r+1}) return s + decodeCodes${r+1}(codes);`);return e.context.set("codes",new Uint16Array(t)),e.context.set("fns",o),e.context.set("fromCharCode",String.fromCharCode),e.build(`\n    let codesOffset = 0;\n    let s = '';\n    while (off < end) {\n        let c = buffer[off++];\n\n        if (c > 127) {\n            if (c > 191 && c < 224) {\n                c = (c & 31) << 6 | buffer[off++] & 63;\n            } else if (c > 223 && c < 240) {\n                c = (c & 15) << 12 | (buffer[off++] & 63) << 6 | buffer[off++] & 63;\n            } else if (c > 239 && c < 248) {\n                c = (c & 7) << 18 | (buffer[off++] & 63) << 12 | (buffer[off++] & 63) << 6 | buffer[off++] & 63;\n            }\n            if (c <= 0xffff) {\n                codes[codesOffset++] = c;\n            } else if (c <= 0x10ffff) {\n                c -= 0x10000;\n                codes[codesOffset++] = c >> 10 | 0xd800;\n                codes[codesOffset++] = c & 0x3FF | 0xdc00;\n            }\n        } else {\n            if (c === 0) {\n                return codesOffset ? s + fns[codesOffset - 1](codes) : s;\n            }\n\n            codes[codesOffset++] = c;\n        }\n\n        if (codesOffset >= ${t}) {\n            s += decodeCodes${t}(codes);\n            codesOffset = 0;\n        }\n    }\n\n    if (codesOffset === 0) return s;\n    return s + fns[codesOffset - 1](codes);\n    `,"buffer","off","end")}(32);class C extends class{constructor(t,e=0){this.buffer=t,this.offset=e,this.size=t.byteLength,this.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength)}peek(t,e){const n=this.offset,r=this.parse(t,e);return this.offset=n,r}parse(t,e){switch(t){case 2:return this.parseString();case 1:return this.parseNumber();case 7:return this.parseOid();case 16:return this.parseInt();case 9:return this.parseDate();case 18:case 17:return this.parseLong();case 8:return this.parseBoolean();case 10:return null;case 6:return;case 5:return this.parseBinary(e);case 11:const n=this.eatString(this.stringSize()),r=this.eatString(this.stringSize());return new RegExp(n,r.replace("s","g"));case 3:return function(t){const e={},n=t.eatUInt32()+t.offset;for(;t.offset<n;){const n=t.eatByte();if(0===n)break;e[t.eatObjectPropertyName()]=t.parse(n)}return e}(this);case 4:return function(t){const e=[],n=t.eatUInt32()+t.offset;for(let r=0;t.offset<n;r++){const n=t.eatByte();if(0===n)break;t.seek(s(r)),e.push(t.parse(n))}return e}(this);default:throw new Error("Unsupported BSON type "+t)}}parseBoolean(){return 1===this.eatByte()}parseLong(){const t=this.eatUInt32(),e=this.eatUInt32();return BigInt(e)*BigInt(o)+BigInt(t>>>0)}parseString(){return this.eatString(this.eatUInt32())}parseBinary(t){let e=this.eatUInt32();const n=this.eatByte();if(4===n){const t=this.offset+e,n=this.parseUUID();return this.offset=t,n}if(127===n){const t=this.offset+e,n=this.parseBigInt(e);return this.offset=t,n}2===n&&(e=this.eatUInt32());const r=this.buffer.slice(this.offset,this.offset+e);return this.seek(e),t&&"arrayBuffer"===t.type?(0,i.lv)(r):t&&t.isTypedArray?new(i.hw.get(t.type))((0,i.lv)(r)):r}parseNumber(){return this.eatDouble()}parseOid(){const t=this.offset,e=this.buffer;let n=g[e[t]]+g[e[t+1]]+g[e[t+2]]+g[e[t+3]]+g[e[t+4]]+g[e[t+5]]+g[e[t+6]]+g[e[t+7]]+g[e[t+8]]+g[e[t+9]]+g[e[t+10]]+g[e[t+11]];return this.seek(12),n}parseBigInt(t){let e="";for(let n=0;n<t;n++)e+=g[this.buffer[this.offset+n]];return BigInt("0x"+e)}parseUUID(){const t=this.offset,e=this.buffer;let n=g[e[t]]+g[e[t+1]]+g[e[t+2]]+g[e[t+3]]+"-"+g[e[t+4]]+g[e[t+5]]+"-"+g[e[t+6]]+g[e[t+7]]+"-"+g[e[t+8]]+g[e[t+9]]+"-"+g[e[t+10]]+g[e[t+11]]+g[e[t+12]]+g[e[t+13]]+g[e[t+14]]+g[e[t+15]];return this.seek(16),n}parseInt(){return this.eatInt32()}parseDate(){const t=this.eatUInt32(),e=this.eatUInt32();return new Date(e*o+(t>>>0))}peekUInt32(){return this.dataView.getUint32(this.offset,!0)}stringSize(){let t=this.offset;for(;0!==this.buffer[t];)t++;return t++,t-this.offset}eatObjectPropertyName(){let t=this.offset;for(;0!==this.buffer[t];)t++;const e=l(this.buffer,this.offset,t);return this.offset=t+1,e}seek(t){this.offset+=t}eatByte(){return this.buffer[this.offset++]}eatInt32(){return this.offset+=4,this.dataView.getInt32(this.offset-4,!0)}eatUInt32(){return this.offset+=4,this.dataView.getUint32(this.offset-4,!0)}eatDouble(){return this.offset+=8,this.dataView.getFloat64(this.offset-8,!0)}eatString(t){return this.offset+=t,l(this.buffer,this.offset-t,this.offset-1)}}{eatObjectPropertyName(){let t=this.offset,e=!0,n="";for(;0!==this.buffer[t];)this.buffer[t]>127&&(e=!1),e&&(n+=String.fromCharCode(this.buffer[t])),t++;if(e)return this.offset=t+1,n;const r=x(this.buffer,this.offset,t);return this.offset=t+1,r}eatString(t){let e="";return e=t>64&&"undefined"!=typeof Buffer&&"function"==typeof Buffer.from?Buffer.from(this.buffer.buffer,this.buffer.byteOffset+this.offset,t-1).toString("utf8"):x(this.buffer,this.offset,this.offset+t),this.offset+=t,e}}function S(t,e){switch(t){case 2:return e.seek(e.eatUInt32());case 7:return e.seek(12);case 16:return e.seek(4);case 1:case 9:return e.seek(8);case 8:return e.seek(1);case 3:case 4:return e.seek(e.peekUInt32());case 10:return;case 18:case 17:return e.seek(8);case 6:return;case 5:let n=e.eatUInt32();return 2===e.eatByte()&&(n=e.eatUInt32()),e.seek(n);case 19:case 11:case 14:case 255:case 127:case 13:case 15:case 12:throw new Error("Unsupported BSON type "+t);default:throw new Error("Unknown BSON type "+t)}}function T(t,e){const n=t.offset,r=t.eatUInt32()+t.offset;for(;t.offset<r;){const r=t.eatByte();if(0===r)break;if(e(r,t.eatObjectPropertyName())){const e=t.parse(r);return t.offset=n,e}S(r,t)}t.offset=n}new TextDecoder("utf8");const E=new Map;function O(t,e){E.set(t,e)}function A(t){return(t,e)=>5===t}O("class",t=>{const e=t.getResolvedClassSchema();if(e.discriminant){const t=e.getProperty(e.discriminant),n="literal"===t.type?t.literalValue:t.defaultValue?t.defaultValue():void 0;if(void 0===n)throw new Error(`Discriminant ${e.getClassPropertyName(t.name)} has no default value.`);const r=(e,n)=>n===t.name&&3!==e;return(t,e)=>3===t&&T(e,r)===n}for(const n of e.getProperties()){if("literal"!==n.type)continue;const t=(t,e)=>e===n.name&&3!==t;return(e,r)=>3===e&&T(r,t)===n.literalValue}throw new Error(`Type of property ${t.name} (${t.toString()}, ${e.getClassName()}) has no discriminant or literal set. Could not discriminate the value.`)}),O("string",t=>(t,e)=>2===t),O("enum",t=>(e,n)=>{if(2===e||1===e){const i=n.peek(e,t);return void 0!==i&&!(0,r.Cz)(t.resolveClassType,i,t.allowLabelsAsValue)}return!1}),O("objectId",t=>(t,e)=>7===t),O("uuid",t=>(t,e)=>5===t),O("arrayBuffer",t=>(t,e)=>5===t);for(const G of i.hw.keys())O(G,A);function P(t,e,n,r){const o=e.hasDefaultValue||void 0===e.defaultValue?"undefined":`${n.reserveVariable("defaultValue",e.defaultValue)}()`,a=`\n    if (elementType === 6) {\n        if (${e.isOptional}) ${t} = ${o};\n    } else if (elementType === 10) {\n        if (${e.isOptional}) ${t} = ${o};\n        if (${e.isNullable}) ${t} = null;\n    }`,l=`\n        ${a} else {\n            seekElementSize(elementType, parser);\n        }\n    `,c="_property_"+e.name;if(n.context.set(c,e),"string"===e.type)return`\n            if (elementType === 2) {\n                const size = parser.eatUInt32(); //size\n                ${t} = parser.eatString(size);\n            } else {\n                ${l}\n            }\n        `;if("literal"===e.type){const r=n.reserveVariable("literalValue",e.literalValue);return e.isOptional||e.isNullable?`\n                if (${e.isOptional} && (elementType === 6 || elementType === 10)) {\n                    ${t} = ${o};\n                } else if (${e.isNullable} && elementType === 10) {\n                    ${t} = null;\n                } else {\n                    ${t} = ${r};\n                    seekElementSize(elementType, parser);\n                }\n            `:`\n                ${t} = ${r};\n                seekElementSize(elementType, parser);\n            `}if("enum"===e.type)return`\n        if (elementType === 2 || elementType === 1 || elementType === 16 || elementType === 18) {\n            ${t} = parser.parse(elementType);\n        } else {\n            ${l}\n        }`;if("boolean"===e.type)return`\n            if (elementType === 8) {\n                ${t} = parser.parseBoolean();\n            } else {\n                ${l}\n            }\n        `;if("date"===e.type)return`\n            if (elementType === 9) {\n                ${t} = parser.parseDate();\n            } else {\n                ${l}\n            }\n        `;if("number"===e.type)return`\n            if (elementType === 16) {\n                ${t} = parser.parseInt();\n            } else if (elementType === 1) {\n                ${t} = parser.parseNumber();\n            } else if (elementType === 18 || elementType === 17) {\n                ${t} = parser.parseLong();\n            } else {\n                ${l}\n            }\n        `;if("uuid"===e.type)return`\n            if (elementType === 5) {\n                parser.eatUInt32(); //size\n                const subType = parser.eatByte();\n                if (subType !== 4) throw new Error('${e.name} BSON binary type invalid. Expected UUID(4), but got ' + subType); \n                ${t} = parser.parseUUID();\n            } else {\n                ${l}\n            }\n            `;if("objectId"===e.type)return`\n            if (elementType === 7) {\n                ${t} = parser.parseOid();\n            } else {\n                ${l}\n            }\n            `;if("partial"===e.type){const r=n.reserveVariable("partiaObject",{}),i=[],o=e.getResolvedClassSchema();for(let t of o.getProperties()){const e=[];for(let n=0;n<t.name.length;n++)e.push(`parser.buffer[parser.offset + ${n}] === ${t.name.charCodeAt(n)}`);e.push(`parser.buffer[parser.offset + ${t.name.length}] === 0`),i.push(`\n            //partial: property ${t.name} (${t.toString()})\n            if (${e.join(" && ")}) {\n                parser.offset += ${t.name.length} + 1;\n                ${P(`${r}.${t.name}`,t,n)}\n                continue;\n            }\n        `)}return`\n        if (elementType === 3) {\n            ${r} = {};\n            const end = parser.eatUInt32() + parser.offset;\n            \n            while (parser.offset < end) {\n                const elementType = parser.eatByte();\n                if (elementType === 0) break;\n                \n                ${i.join("\n")}\n                \n                //jump over this property when not registered in schema\n                while (parser.offset < end && parser.buffer[parser.offset++] != 0);\n\n                //seek property value\n                if (parser.offset >= end) break;\n                seekElementSize(elementType, parser);\n            }\n            ${t} = ${r};\n        } else {\n            ${l}\n        }\n    `}if("class"===e.type){const r=e.getResolvedClassSchema();if(r.decorator){const i=r.getDecoratedPropertySchema(),o=n.reserveVariable("decorated"),s=n.reserveVariable("classType",e.classType);let a="";const c=[],u=i.isOptional?`'v' in ${o}`:`${o}.v !== undefined`;return"constructor"===i.methodName?a=`(${u} ? ${o}.v : undefined)`:c.push(`if (${u}) ${t}.${i.name} = ${o}.v;`),`\n            //decorated\n            if (elementType !== 6 && elementType !== 10) {\n                ${o} = {};\n                ${P(`${o}.v`,r.getDecoratedPropertySchema(),n)}\n\n                ${t} = new ${s}(${a});\n                ${c.join("\n")}\n            } else {\n                ${l}\n            }\n            `}const i="_propertySchema_"+e.name;n.context.set("getRawBSONDecoder",k),n.context.set(i,e.getResolvedClassSchema());let o="";return e.isReference&&(o=P(t,e.getResolvedClassSchema().getPrimaryField(),n)),`\n            if (elementType === 3) {\n                ${t} = getRawBSONDecoder(${i})(parser);\n            } else if (${e.isReference}) {\n                ${o}\n            } else {\n                ${l}\n            }\n            `}if("array"===e.type){n.context.set("digitByteSize",s);const r=n.reserveVariable("v");return`\n        if (elementType === 4) {\n            ${t} = [];\n            parser.seek(4);\n            for (let i = 0; ; i++) {\n                const elementType = parser.eatByte();\n                if (elementType === 0) break;\n        \n                //arrays are represented as objects, so we skip the key name\n                parser.seek(digitByteSize(i));\n        \n                let ${r} = undefined;\n                ${P(r,e.getSubType(),n)}\n                ${t}.push(${r});\n            }\n        } else {\n            ${l}\n        }\n        `}if("map"===e.type){const r=n.reserveVariable("propertyName");return`\n        if (elementType === 3) {\n            ${t} = {};\n            parser.seek(4);\n            while (true) {\n                const elementType = parser.eatByte();\n                if (elementType === 0) break;\n\n                ${r} = parser.eatObjectPropertyName();\n\n                ${P(`${t}[${r}]`,e.getSubType(),n)}\n            }\n        } else {\n            ${l}\n        }\n        `}if("union"===e.type){let r=["if (false) {\n}"];const o=[];for(const t of(0,i.uM)(e,E))o.push(t.property.type);for(const s of(0,i.uM)(e,E)){const e=n.reserveVariable("guard_"+s.property.type,s.guard);r.push(`\n                //guard:${s.property.type}\n                else if (${e}(elementType, parser)) {\n                    ${P(t,s.property,n)}\n                }\n            `)}return`\n            ${r.join("\n")}\n            else {\n                ${l}\n            }\n        `}return`\n        ${a} else {\n            ${t} = parser.parse(elementType, ${c});\n        }\n    `}function k(t){return(t=t instanceof i.oe?t:(0,i.VI)(t)).jit.rawBson||(t.jit.rawBson=function(t){const e=new r.Ri;e.context.set("seekElementSize",S);const n=[],i=[],o=t.getMethodProperties("constructor"),s=[],a=[],l=[];for(const r of t.getProperties()){const t=[];for(let e=0;e<r.name.length;e++)t.push(`parser.buffer[parser.offset + ${e}] === ${r.name.charCodeAt(e)}`);t.push(`parser.buffer[parser.offset + ${r.name.length}] === 0`);const c=e.reserveVariable("valueSetVar",!1),u=void 0!==r.defaultValue?e.reserveVariable("defaultValue",r.defaultValue):"undefined";r.hasManualDefaultValue()||"literal"===r.type?(s.push(`${c} = false;`),void 0!==r.defaultValue?a.push(`if (!${c}) object.${r.name} = ${u};`):"literal"!==r.type||r.isOptional||a.push(`if (!${c}) object.${r.name} = ${JSON.stringify(r.literalValue)};`)):r.isNullable&&(s.push(`${c} = false;`),a.push(`if (!${c}) object.${r.name} = null;`));const h=r.isOptional?`${JSON.stringify(r.name)} in object`:`object.${r.name} !== undefined`;if("constructor"===r.methodName)i[o.indexOf(r)]=`(${h} ? object.${r.name} : ${u})`;else{if(r.isParentReference)throw new Error("Parent references not supported in BSON.");n.push(`if (${h}) _instance.${r.name} = object.${r.name};`)}l.push(`\n            //property ${r.name} (${r.toString()})\n            if (${t.join(" && ")}) {\n                parser.offset += ${r.name.length} + 1;\n                ${c?`${c} = true;`:""}\n                ${P(`object.${r.name}`,r,e)}\n                continue;\n            } `)}let c="";t.isCustomClass()&&(e.context.set("_classType",t.classType),c=`\n            _instance = new _classType(${i.join(", ")});\n            ${n.join("\n")}\n            return _instance;\n        `);const u=`\n        var object = {};\n        ${t.isCustomClass()?"var _instance;":""}\n        const end = parser.eatUInt32() + parser.offset;\n        \n        ${s.join("\n")}\n\n        while (parser.offset < end) {\n            const elementType = parser.eatByte();\n            if (elementType === 0) break;\n\n            ${l.join("\n")}\n\n            //jump over this property when not registered in schema\n            while (parser.offset < end && parser.buffer[parser.offset++] != 0);\n            //seek property value\n            if (parser.offset >= end) break;\n            seekElementSize(elementType, parser);\n        }\n\n        ${a.join("\n")}\n        ${t.isCustomClass()?c:"return object;"}\n    `,h=e.build(u,"parser","partial");return h.buildId=t.buildId,h}(t)),t.jit.rawBson}function M(t){const e=k(t);return(t=t instanceof i.oe?t:(0,i.VI)(t)).jit.bsonEncoder||(t.jit.bsonEncoder=(t,n=0)=>e(new C(t,n))),t.jit.bsonEncoder}function I(t){return"undefined"!=typeof Buffer&&"function"==typeof Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Uint8Array(t)}O("date",t=>(t,e)=>9===t),O("any",t=>(t,e)=>!0),O("union",t=>{throw new Error("Union typechecking not implemented. Nested unions thus not supported yet.")}),O("array",t=>(t,e)=>4===t),O("map",t=>(t,e)=>3===t),O("patch",t=>(t,e)=>3===t),O("partial",t=>(t,e)=>3===t),O("number",t=>(t,e)=>1===t||16===t||18===t),O("bigint",t=>(t,e)=>5===t),O("boolean",t=>(t,e)=>8===t),O("literal",t=>(e,n)=>n.peek(e)===t.literalValue),BigInt.prototype.toJSON=function(){return this.toString()};const R=2147483647,D=-2147483648,N=9007199254740992,L=-9007199254740992;function F(t,e=0,n=0){let r=t.charCodeAt(2*e+n)-48;r>9&&(r-=39);let i=t.charCodeAt(2*e+n+1)-48;return i>9&&(i-=39),16*r+i}function B(t,e=0){let n=0;return e>3&&(n+=1),e>5&&(n+=1),e>7&&(n+=1),e>9&&(n+=1),F(t,e,n)}function j(t){if(!t)return 0;let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);e+=r<128?1:r>127&&r<2048?2:3}return e}function $(t){if("boolean"==typeof t)return 1;if("string"==typeof t)return 4+j(t)+1;if("bigint"==typeof t)return 5+Math.ceil(t.toString(16).length/2);if("number"==typeof t)return Math.floor(t)===t&&t>=D&&t<=R?4:8;if(t instanceof Date)return 8;if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){let e=4;return e+=1,e+=t.byteLength,e}if((0,r.kJ)(t)){let e=4;for(let n=0;n<t.length;n++)e+=1,e+=s(n),e+=$(t[n]);return e+=1,e}if(v(t))return 21;if(b(t))return 12;if(t&&"Binary"===t._bsontype){let e=4;return e+=1,e+=t.buffer.byteLength,e}if(t instanceof RegExp)return j(t.source)+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if((0,r.Kn)(t)){let e=4;for(let n in t)t.hasOwnProperty(n)&&(e+=1,e+=j(n)+1,e+=$(t[n]));return e+=1,e}return 0}function U(t,e,n,o,a){"class"===n.type&&n.getResolvedClassSchema().decorator&&(o=`(${o} && ${o}.${(n=n.getResolvedClassSchema().getDecoratedPropertySchema()).name})`),e.context.set("getValueSize",$);let l=`size += getValueSize(${o});`;if("array"===n.type){e.context.set("digitByteSize",s);const c=e.reserveVariable("isArray",r.kJ),u=e.reserveVariable("unpopulatedSymbol",i.JZ),h=e.reserveVariable("i");l=`\n        if (${o} && ${o} !== ${u} && ${c}(${o})) {\n            size += 4; //array size\n            for (let ${h} = 0; ${h} < ${o}.length; ${h}++) {\n                size += 1; //element type\n                size += digitByteSize(${h}); //element name\n                ${U(t,e,n.getSubType(),`${o}[${h}]`,a)}\n            }\n            size += 1; //null\n        }\n        `}else if("bigint"===n.type)l=`\n        if (typeof ${o} === 'bigint') {\n            size += 4 + 1 + Math.ceil(${o}.toString(16).length / 2);\n        }\n        `;else if("number"===n.type)l=`\n        if (typeof ${o} === 'number') {\n            if (Math.floor(${o}) === ${o}) {\n                //it's an int\n                if (${o} >= -2147483648 && ${o} <= 2147483647) {\n                    //32bit\n                    size += 4;\n                } else if (${o} >= ${L} && ${o} <= ${N}) {\n                    //double, 64bit\n                    size += 8;\n                } else {\n                    //long\n                    size += 8;\n                }\n            } else {\n                //double\n                size += 8;\n            }\n        } else if (typeof ${o} === 'bigint') {\n            size += 8;\n        }\n        `;else if("string"===n.type)l=`\n        if (typeof ${o} === 'string') {\n            size += getValueSize(${o});\n        }\n        `;else if("literal"===n.type)l=`\n        if (typeof ${o} === 'string' || typeof ${o} === 'number' || typeof ${o} === 'boolean') {\n            size += getValueSize(${o});\n        } else if (!${n.isOptional} && !${n.isOptional}) {\n            size += getValueSize(${JSON.stringify(n.literalValue)});\n        }\n        `;else if("boolean"===n.type)l=`\n        if (typeof ${o} === 'boolean') {\n            size += 1;\n        }\n        `;else if("map"===n.type){e.context.set("stringByteLength",j);const r=e.reserveVariable("i");l=`\n        size += 4; //object size\n        for (${r} in ${o}) {\n            if (!${o}.hasOwnProperty(${r})) continue;\n            size += 1; //element type\n            size += stringByteLength(${r}) + 1; //element name + null;\n            ${U(t,e,n.getSubType(),`${o}[${r}]`,a)}\n        }\n        size += 1; //null\n        `}else if("class"===n.type){const s="_sizer_"+n.name,c=n.getResolvedClassSchema(),u=a.getOrCreate(c,()=>V(n.getResolvedClassSchema(),a)),h=e.reserveVariable("unpopulatedSymbol",i.JZ);e.context.set("isObject",r.Kn),e.context.set(s,u),e.context.set("UUIDSymbol",y),e.context.set("ObjectIdSymbol",m);let d="";const f=n.isReference||n.parent&&n.parent.isReference;f&&(d=U(t,e,c.getPrimaryField(),o,a));let p="true";t.hasCircularReference()&&(p=`!_stack.includes(${o})`),l=`\n            if (${o} !== ${h}) {\n                if (isObject(${o}) && !${o}.hasOwnProperty(UUIDSymbol) && !${o}.hasOwnProperty(ObjectIdSymbol) && ${p}) {\n                    size += ${s}.fn(${o}, _stack);\n                } else if (${f})  {\n                    ${d}\n                }\n            }\n        `}else if("date"===n.type)l=`if (${o} instanceof Date) size += 8;`;else if("objectId"===n.type)e.context.set("isObjectId",b),l=`if ('string' === typeof ${o}|| isObjectId(${o})) size += 12;`;else if("uuid"===n.type)e.context.set("isUUID",v),l=`if ('string' === typeof ${o} || isUUID(${o})) size += 4 + 1 + 16;`;else if("arrayBuffer"===n.type||n.isTypedArray)l=`\n            size += 4; //size\n            size += 1; //sub type\n            if (${o}['_bsontype'] === 'Binary') {\n                size += ${o}.buffer.byteLength\n            } else {\n                size += ${o}.byteLength;\n            }\n        `;else if("union"===n.type){let r=["if (false) {\n}"];const s=[];for(const t of(0,i.uM)(n,i.LA))s.push(t.property.type);const c=`throw new Error('No valid discriminant was found for ${n.name}, so could not determine class type. Guard tried: [${s.join(",")}]. Got: ' + ${o});`;for(const l of(0,i.uM)(n,i.LA)){const n=e.reserveVariable("guard_"+l.property.type,l.guard);r.push(`\n                //guard:${l.property.type}\n                else if (${n}(${o})) {\n                    ${U(t,e,l.property,`${o}`,a)}\n                }\n            `)}l=`\n            ${r.join("\n")}\n            else {\n                ${c}\n            }\n        `}let c="\n        // size += 0; //null\n    ";if(n.hasDefaultValue||void 0===n.defaultValue)n.isOptional||"literal"!==n.type||(c=`size += getValueSize(${JSON.stringify(n.literalValue)});`);else{const r=e.reserveVariable("property",n),i=n.clone();i.defaultValue=void 0,c=`\n            ${r}.lastGeneratedDefaultValue = ${r}.defaultValue();\n            ${U(t,e,i,`${r}.lastGeneratedDefaultValue`,a)}\n        `}return`\n    if (${o} === undefined) {\n        ${c}\n    } else if (${o} === null) {\n        if (${n.isNullable}) {\n            // size += 0; //null\n        } else {\n            ${c}\n        }\n    } else {\n        ${l}\n    }\n    `}function V(t,e=new i.HH){const n=new r.Ri;let o=[];const s=e.prepare(t);for(const r of t.getProperties()){let i="";if(r.hasManualDefaultValue()||"literal"===r.type)if(void 0!==r.defaultValue){const o=n.reserveVariable("property",r);i=`\n                    size += 1; //type\n                    size += ${r.name.length} + 1; //property name\n                    ${o}.lastGeneratedDefaultValue = ${o}.defaultValue();\n                    ${U(t,n,r,`${o}.lastGeneratedDefaultValue`,e)}\n                `}else"literal"!==r.type||r.isOptional||(i=`\n                size += 1; //type\n                size += ${r.name.length} + 1; //property name\n                ${U(t,n,r,JSON.stringify(r.literalValue),e)}`);else r.isNullable&&(i=`\n                size += 1; //type null\n                size += ${r.name.length} + 1; //property name\n            `);o.push(`\n            //${r.name}\n            if (${JSON.stringify(r.name)} in obj) {\n                size += 1; //type\n                size += ${r.name.length} + 1; //property name\n                ${U(t,n,r,`obj.${r.name}`,e)}\n            } else {\n                ${i}\n            }\n        `)}n.context.set("_global",(0,i.zJ)()),n.context.set("UnpopulatedCheck",i.uN),n.context.set("seekElementSize",S);let a="",l="";t.hasCircularReference()&&(a="\n        if (!_stack) _stack = [];\n        _stack.push(obj);\n        ",l="_stack.pop();");const c=`\n        ${a}\n        let size = 4; //object size\n\n        const unpopulatedCheck = _global.unpopulatedCheck;\n        _global.unpopulatedCheck = UnpopulatedCheck.ReturnSymbol;\n\n        ${o.join("\n")}\n\n        size += 1; //null\n\n        _global.unpopulatedCheck = unpopulatedCheck;\n\n        ${l}\n        return size;\n    `;try{const t=n.build(c,"obj","_stack");return s(t),t}catch(u){throw console.log("Error compiling BSON sizer",c),u}}class Z{constructor(t,e=0){this.buffer=t,this.offset=e,this.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength)}writeUint32(t){this.dataView.setUint32(this.offset,t,!0),this.offset+=4}writeInt32(t){this.dataView.setInt32(this.offset,t,!0),this.offset+=4}writeDouble(t){this.dataView.setFloat64(this.offset,t,!0),this.offset+=8}writeDelayedSize(t,e){this.dataView.setUint32(e,t,!0)}writeByte(t){this.buffer[this.offset++]=t}writeBuffer(t,e=0){for(let n=e;n<t.byteLength;n++)this.buffer[this.offset++]=t[n]}writeNull(){this.writeByte(0)}writeAsciiString(t){for(let e=0;e<t.length;e++)this.buffer[this.offset++]=t.charCodeAt(e)}writeString(t){if(t&&"string"==typeof t)for(let e=0;e<t.length;e++){const n=t.charCodeAt(e);n<128?this.buffer[this.offset++]=n:n>127&&n<2048?(this.buffer[this.offset++]=n>>6|192,this.buffer[this.offset++]=63&n|128):(this.buffer[this.offset++]=n>>12|224,this.buffer[this.offset++]=n>>6&63|128,this.buffer[this.offset++]=63&n|128)}}writeBigInt(t){let e=t.toString(16);e.length%2&&(e="0"+e);const n=Math.ceil(e.length/2);this.writeUint32(n),this.writeByte(127);for(let r=0;r<n;r++)this.buffer[this.offset+r]=F(e,r);this.offset+=n}writeUUID(t){t=t instanceof w?t.id:t,this.writeUint32(16),this.writeByte(4),this.buffer[this.offset+0]=B(t,0),this.buffer[this.offset+1]=B(t,1),this.buffer[this.offset+2]=B(t,2),this.buffer[this.offset+3]=B(t,3),this.buffer[this.offset+4]=B(t,4),this.buffer[this.offset+5]=B(t,5),this.buffer[this.offset+6]=B(t,6),this.buffer[this.offset+7]=B(t,7),this.buffer[this.offset+8]=B(t,8),this.buffer[this.offset+9]=B(t,9),this.buffer[this.offset+10]=B(t,10),this.buffer[this.offset+11]=B(t,11),this.buffer[this.offset+12]=B(t,12),this.buffer[this.offset+13]=B(t,13),this.buffer[this.offset+14]=B(t,14),this.buffer[this.offset+15]=B(t,15),this.offset+=16}writeObjectId(t){this.buffer[this.offset+0]=F(t="string"==typeof t?t:t.id,0),this.buffer[this.offset+1]=F(t,1),this.buffer[this.offset+2]=F(t,2),this.buffer[this.offset+3]=F(t,3),this.buffer[this.offset+4]=F(t,4),this.buffer[this.offset+5]=F(t,5),this.buffer[this.offset+6]=F(t,6),this.buffer[this.offset+7]=F(t,7),this.buffer[this.offset+8]=F(t,8),this.buffer[this.offset+9]=F(t,9),this.buffer[this.offset+10]=F(t,10),this.buffer[this.offset+11]=F(t,11),this.offset+=12}write(t,e){if("boolean"==typeof t)e&&(this.writeByte(8),e()),this.writeByte(t?1:0);else if(t instanceof RegExp)e&&(this.writeByte(11),e()),this.writeString(t.source),this.writeNull(),t.ignoreCase&&this.writeString("i"),t.global&&this.writeString("s"),t.multiline&&this.writeString("m"),this.writeNull();else if("string"==typeof t){e&&(this.writeByte(2),e());const n=this.offset;this.offset+=4,this.writeString(t),this.writeByte(0),this.writeDelayedSize(this.offset-n-4,n)}else if("number"==typeof t)Math.floor(t)===t&&t>=D&&t<=R?(e&&(this.writeByte(16),e()),this.writeInt32(t)):(e&&(this.writeByte(1),e()),this.writeDouble(t));else if(t instanceof Date)e&&(this.writeByte(9),e()),this.writeUint32(t.valueOf()%o|0),this.writeUint32(t.valueOf()/o|0);else if(v(t))e&&(this.writeByte(5),e()),this.writeUUID(t);else if("bigint"==typeof t)e&&(this.writeByte(5),e()),this.writeBigInt(t);else if(b(t))e&&(this.writeByte(7),e()),this.writeObjectId(t);else if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)){e&&(this.writeByte(5),e());let n=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);"Binary"===t._bsontype&&(n=t.buffer),this.writeUint32(t.byteLength),this.writeByte(0);for(let e=0;e<t.byteLength;e++)this.buffer[this.offset++]=n[e]}else if((0,r.kJ)(t)){e&&(this.writeByte(4),e());const n=this.offset;this.offset+=4;for(let e=0;e<t.length;e++)this.write(t[e],()=>{this.writeAsciiString(""+e),this.writeByte(0)});this.writeNull(),this.writeDelayedSize(this.offset-n,n)}else if(void 0===t)e&&(this.writeByte(6),e());else if(null===t)e&&(this.writeByte(10),e());else if((0,r.Kn)(t)){e&&(this.writeByte(3),e());const n=this.offset;this.offset+=4;for(let e in t)t.hasOwnProperty(e)&&this.write(t[e],()=>{this.writeString(e),this.writeByte(0)});this.writeNull(),this.writeDelayedSize(this.offset-n,n)}else e&&(this.writeByte(6),e())}}function z(t,e,n,s,a,l){if(n.isParentReference)return"";let c=`\n        writer.writeAsciiString(${l});\n        writer.writeByte(0);\n    `;l||(c=function(t){const e=[];for(let n=0;n<t.name.length;n++)e.push(`writer.buffer[writer.offset++] = ${t.name.charCodeAt(n)};`);return`\n        //write name: '${t.name}'\n        ${e.join("\n")}\n        writer.writeByte(0); //null\n    `}(n));let u=`\n    writer.writeByte(6);\n    ${c}`,h=`writer.write(${s}, () => {\n        ${c}\n    });`;if("class"===n.type&&n.getResolvedClassSchema().decorator&&(s=`(${s} && ${s}.${(n=n.getResolvedClassSchema().getDecoratedPropertySchema()).name})`),"class"===n.type){const o=`_serializer_${n.name}`,d=n.getResolvedClassSchema(),f=a.getOrCreate(n.getResolvedClassSchema(),()=>H(n.getResolvedClassSchema(),a));e.context.set(o,f);const p=e.reserveVariable("unpopulatedSymbol",i.JZ);e.context.set("isObject",r.Kn),e.context.set("UUIDSymbol",y),e.context.set("ObjectIdSymbol",m);let g="";const v=n.isReference||n.parent&&n.parent.isReference;v&&(g=z(t,e,d.getPrimaryField(),s,a,l||JSON.stringify(n.name)));let b="true";t.hasCircularReference()&&(b=`!_stack.includes(${s})`),h=`\n        if (${s} !== ${p}) {\n            if (isObject(${s}) && !${s}.hasOwnProperty(UUIDSymbol) && !${s}.hasOwnProperty(ObjectIdSymbol) && ${b}) {\n                writer.writeByte(3);\n                ${c}\n                ${o}.fn(${s}, writer, _stack);\n            } else if (${v})  {\n                ${g}\n            } else {\n                ${u}\n            }\n        } else {\n            ${u}\n        }\n        `}else if("string"===n.type)h=`\n        if (typeof ${s} === 'string') {\n            writer.writeByte(2);\n            ${c}\n            const start = writer.offset;\n            writer.offset += 4; //size placeholder\n            writer.writeString(${s});\n            writer.writeByte(0); //null\n            writer.writeDelayedSize(writer.offset - start - 4, start);\n        } else {\n            ${u}\n        }\n        `;else if("literal"===n.type)h=`\n        if (typeof ${s} === 'string' || typeof ${s} === 'number' || typeof ${s} === 'boolean') {\n            ${h}\n        } else if (!${n.isOptional} && !${n.isOptional}) {\n            writer.write(${JSON.stringify(n.literalValue)}, () => {\n                ${c}\n            });\n        } else {\n            ${u}\n        }\n        `;else if("boolean"===n.type)h=`\n        if (typeof ${s} === 'boolean') {\n            writer.writeByte(8);\n            ${c}\n            writer.writeByte(${s} ? 1 : 0);\n        } else {\n            ${u}\n        }\n        `;else if("date"===n.type)e.context.set("TWO_PWR_32_DBL_N",o),h=`\n        if (${s} instanceof Date) {\n            writer.writeByte(9);\n            ${c}\n            if (!(${s} instanceof Date)) {\n                throw new Error(${JSON.stringify(s)} + " not a Date object");\n            }\n\n            writer.writeUint32((${s} % TWO_PWR_32_DBL_N) | 0); //low\n            writer.writeUint32((${s} / TWO_PWR_32_DBL_N) | 0); //high\n        } else {\n            ${u}\n        }\n        `;else if("objectId"===n.type)e.context.set("isObjectId",b),e.context.set("hexToByte",F),h=`\n            if ('string' === typeof ${s} || isObjectId(${s})) {\n                writer.writeByte(7);\n                ${c}\n                writer.writeObjectId(${s});\n            } else {\n                ${u}\n            }\n        `;else if("uuid"===n.type)e.context.set("isUUID",v),e.context.set("UUID",w),h=`\n        if ('string' === typeof ${s} || isUUID(${s})) {\n            writer.writeByte(5);\n            ${c}\n            writer.writeUUID(${s});\n        } else {\n            ${u}\n        }\n        `;else if("bigint"===n.type)h=`\n            if ('bigint' === typeof ${s}) {\n                writer.writeByte(5);\n                ${c}\n                writer.writeBigInt(${s});\n            }\n        `;else if("number"===n.type)e.context.set("TWO_PWR_32_DBL_N",o),h=`\n            if ('bigint' === typeof ${s}) {\n                //long\n                writer.writeByte(18);\n                ${c}\n                writer.writeUint32(Number(${s} % BigInt(TWO_PWR_32_DBL_N)) | 0); //low\n                writer.writeUint32(Number(${s} / BigInt(TWO_PWR_32_DBL_N)) | 0); //high\n            } else if ('number' === typeof ${s}) {\n                if (Math.floor(${s}) === ${s}) {\n                    //it's an int\n                    if (${s} >= -2147483648 && ${s} <= 2147483647) {\n                        //32bit\n                        writer.writeByte(16);\n                        ${c}\n                        writer.writeInt32(${s});\n                    } else if (${s} >= ${L} && ${s} <= ${N}) {\n                        //double, 64bit\n                        writer.writeByte(1);\n                        ${c}\n                        writer.writeDouble(${s});\n                    } else {\n                        //long, but we serialize as Double, because deserialize will be BigInt\n                        writer.writeByte(1);\n                        ${c}\n                        writer.writeDouble(${s});\n                    }\n                } else {\n                    //double, 64bit\n                    writer.writeByte(1);\n                    ${c}\n                    writer.writeDouble(${s});\n                }\n            } else {\n                ${u}\n            }\n        `;else if("array"===n.type){const o=e.reserveVariable("i"),l=e.reserveVariable("isArray",r.kJ);h=`\n        if (${s} && ${s} !== ${e.reserveVariable("unpopulatedSymbol",i.JZ)} && ${l}(${s})) {\n            writer.writeByte(4);\n            ${c}\n            const start = writer.offset;\n            writer.offset += 4; //size\n\n            for (let ${o} = 0; ${o} < ${s}.length; ${o}++) {\n                //${n.getSubType().name} (${n.getSubType().type})\n                ${z(t,e,n.getSubType(),`${s}[${o}]`,a,`''+${o}`)}\n            }\n            writer.writeNull();\n            writer.writeDelayedSize(writer.offset - start, start);\n        } else {\n            ${u}\n        }\n        `}else if("map"===n.type){const r=e.reserveVariable("i");h=`\n            writer.writeByte(3);\n            ${c}\n            const start = writer.offset;\n            writer.offset += 4; //size\n\n            for (let ${r} in ${s}) {\n                if (!${s}.hasOwnProperty(${r})) continue;\n                //${n.getSubType().name} (${n.getSubType().type})\n                ${z(t,e,n.getSubType(),`${s}[${r}]`,a,`${r}`)}\n            }\n            writer.writeNull();\n            writer.writeDelayedSize(writer.offset - start, start);\n        `}else if("union"===n.type){let r=["if (false) {\n}"];const o=[];for(const t of(0,i.uM)(n,i.LA))o.push(t.property.type);const c=`throw new Error('No valid discriminant was found for ${n.name}, so could not determine class type. Guard tried: [${o.join(",")}]. Got: ' + ${s});`;for(const u of(0,i.uM)(n,i.LA)){const i=e.reserveVariable("guard_"+u.property.type,u.guard);r.push(`\n                //guard\n                else if (${i}(${s})) {\n                    //${u.property.name} (${u.property.type})\n                    ${z(t,e,u.property,`${s}`,a,l||JSON.stringify(n.name))}\n                }\n            `)}h=`\n            ${r.join("\n")}\n            else {\n                ${c}\n            }\n        `}let d=`\n        writer.writeByte(10);\n        ${c}\n    `;if(n.hasDefaultValue||void 0===n.defaultValue)n.isOptional||"literal"!==n.type||(d=`writer.write(${JSON.stringify(n.literalValue)}, () => {${c}});`);else{const r=e.reserveVariable("property",n),i=n.clone();i.defaultValue=void 0,d=z(t,e,i,`${r}.lastGeneratedDefaultValue`,a)}return`\n    if (${s} === undefined) {\n        ${d}\n    } else if (${s} === null) {\n        if (${n.isNullable}) {\n            writer.writeByte(10);\n            ${c}\n        } else {\n            ${d}\n        }\n    } else {\n        //serialization code\n        ${h}\n    }\n    `}function H(t,e=new i.HH){const n=new r.Ri,o=e.prepare(t);n.context.set("_global",(0,i.zJ)()),n.context.set("UnpopulatedCheck",i.uN),n.context.set("_sizer",Y(t)),n.context.set("Writer",Z),n.context.set("seekElementSize",S),n.context.set("createBuffer",I),n.context.set("schema",t);let s="",a=[];for(const r of t.getProperties()){let i="";if(r.hasManualDefaultValue()||"literal"===r.type)if(void 0!==r.defaultValue){const o=n.reserveVariable("property",r);i=z(t,n,r,`${o}.lastGeneratedDefaultValue`,e)}else"literal"!==r.type||r.isOptional||(i=z(t,n,r,JSON.stringify(r.literalValue),e));else r.isNullable&&(i=z(t,n,r,"null",e));a.push(`\n            //${r.name}:${r.type}\n            if (${JSON.stringify(r.name)} in obj) {\n                ${z(t,n,r,`obj.${r.name}`,e)}\n            } else {\n                ${i}\n            }\n        `)}let l="",c="";t.hasCircularReference()&&(l="\n        if (!_stack) _stack = [];\n        _stack.push(obj);\n        ",c="_stack.pop();"),s=`\n        ${l}\n        const size = _sizer(obj, _stack);\n        writer = writer || new Writer(createBuffer(size));\n        const started = writer.offset;\n        writer.writeUint32(size);\n        const unpopulatedCheck = _global.unpopulatedCheck;\n        _global.unpopulatedCheck = UnpopulatedCheck.ReturnSymbol;\n\n        ${a.join("\n")}\n        writer.writeNull();\n\n        _global.unpopulatedCheck = unpopulatedCheck;\n        if (size !== writer.offset - started) {\n            console.error('Wrong size calculated. Calculated=' + size + ', but serializer wrote ' + (writer.offset - started) + ' bytes. Object: ', JSON.stringify(obj), Object.getOwnPropertyNames(obj), schema.toString());\n            throw new Error('Wrong size calculated. Calculated=' + size + ', but serializer wrote ' + (writer.offset - started) + ' bytes');\n        }\n\n        ${c}\n        return writer.buffer;\n    `;const u=n.build(s,"obj","writer","_stack");return o(u),u}function q(t){const e=(t=(0,i.VI)(t)).jit;return e.bsonSerializer||(e.bsonSerializer=H(t),(0,r.SV)(e)),e.bsonSerializer}function Y(t){const e=(t=(0,i.VI)(t)).jit;return e.bsonSizer||(e.bsonSizer=V(t),(0,r.SV)(e)),e.bsonSizer}},65341:(t,e,n)=>{"use strict";n.d(e,{Ri:()=>G,sH:()=>o,_g:()=>C,sE:()=>y,lH:()=>S,KR:()=>T,kC:()=>W,ef:()=>P,f_:()=>I,d1:()=>q,hs:()=>Y,cS:()=>w,L8:()=>et,rR:()=>tt,Ps:()=>x,gj:()=>s,IP:()=>a,bs:()=>Z,Zu:()=>$,B8:()=>V,Y9:()=>D,aM:()=>k,td:()=>H,vW:()=>R,cq:()=>v,kJ:()=>p,HV:()=>d,RL:()=>N,mf:()=>h,hj:()=>m,Kn:()=>f,PO:()=>l,Jn:()=>L,Cz:()=>z,VA:()=>M,_v:()=>b,TG:()=>c,pO:()=>J,SV:()=>B});var r=n(16304),i=n(22962);class o extends Error{constructor(t=""){super(t),this.message=t,this.name=this.constructor.name}}function s(t){return t?(t.prototype?t.prototype:t).constructor.name:"undefined"}function a(t,e){return`${s(t)}::${e}`}function l(t){return Boolean(t&&"object"==typeof t&&t.constructor instanceof t.constructor)}function c(t){return"string"==typeof t?`String(${t})`:"number"==typeof t?`Number(${t})`:"boolean"==typeof t?`Boolean(${t})`:"function"==typeof t?`Function ${t.name}`:l(t)?`Object ${u(t)}`:f(t)?`${s(function(t){if(!function(t){return null!=t&&t.constructor&&Object.getPrototypeOf(t)===t.constructor.prototype&&!l(t)&&f(t)}(t))throw new Error(`Value is not a class instance. Got ${c(t)}`);return t.constructor}(t))} ${u(t)}`:null===t?"null":"undefined"}function u(t){let e=[];for(const n in t)e.push(n+": "+c(t[n]));return"{"+e.join(",")+"}"}function h(t){return"function"==typeof t&&!t.toString().startsWith("class ")}function d(t){return"function"==typeof t&&(t.toString().startsWith("class ")||t.toString().startsWith("class{"))}function f(t){return null!==t&&"object"==typeof t&&!p(t)}function p(t){return!(!t||"number"!=typeof t.length||"function"!=typeof t.reduce)}function g(t){return!function(t){return null===t}(t)&&!function(t){return void 0===t}(t)}function m(t){return"number"===function(t){return(({}.toString.call(t).match(/\s([a-zA-Z]+)/)||[])[1]||"").toLowerCase()}(t)}function y(t,e){return-1!==t.indexOf(e)}function v(t,e){return t?t.indexOf(e):-1}function b(t){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(function*(t){return new Promise(e=>setTimeout(e,1e3*t))})).apply(this,arguments)}function w(t){if(!t)return!0;if(p(t))return 0===t.length;for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function x(t){if(p(t))return t[0];const e=function(t){return Object.keys(t)[0]}(t);return e?t[e]:void 0}function C(t){return t.splice(0,t.length).length}function S(t,e){const n=t.indexOf(e);return-1!==n&&(t.splice(n,1),!0)}function T(t){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)(function*(t){let e,n;try{n=yield new Promise(function(){var e=(0,r.Z)(function*(e,n){try{yield t(e,n)}catch(r){n(r)}});return function(t,n){return e.apply(this,arguments)}}())}catch(i){e=i}if(e)throw A(e,O()),e;return n})).apply(this,arguments)}function O(t=!0){10===Error.stackTraceLimit&&(Error.stackTraceLimit=100);let e=(new Error).stack||"";return e=e.slice(e.indexOf("   at ")+6),e=e.slice(e.indexOf("   at ")-1),t&&(e=e.slice(e.indexOf("   at ")+6),e=e.slice(e.indexOf("   at ")-1)),e}function A(t,e){t instanceof Error&&t.stack&&(t.stack+="\n"+e)}function P(t){let e=[],n=!1;return r=>{e.push(r),n||(n=!0,queueMicrotask(()=>{n=!1,t(e),e.length=0}))}}function k(t,e,n){if(g(t[e]))return t[e];const r=i.get(t,e);return g(r)?r:n}function M(t,e,n){i.set(t,e,n)}function I(t,e){i.delete(t,e)}function R(t,e=!1){const n=e?1e3:1024;if(Math.abs(t)<n)return t+" B";const r=e?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let i=-1;do{t/=n,++i}while(Math.abs(t)>=n&&i<r.length-1);return t.toFixed(2)+" "+r[i]}function D(t){let e=0;for(let n in t)t.hasOwnProperty(n)&&e++;return e}function N(t){try{return new new Proxy(t,{construct:()=>({})}),!0}catch(e){return!1}}function L(t,e){if(!t)return!1;if(t===e)return!0;let n=Object.getPrototypeOf(t);for(;n&&n!==Object.prototype;){if(n===e)return!0;n=Object.getPrototypeOf(n)}return!1}var F=n(69391);function B(t){F(t)}const j=new Map;function $(t){let e=j.get(t);return e||(e=Object.keys(t).filter(t=>!Number.isFinite(parseInt(t,10))),j.set(t,e)),e}const U=new Map;function V(t){let e=U.get(t);return e||(e=Object.values(t).filter(e=>"number"!=typeof t[e]),U.set(t,e)),e}function Z(t){const e=new Map,n=V(t),r=$(t);for(let i=0;i<n.length;i++)e.set(n[i],r[i]);return e}function z(t,e,n=!1){if(n&&-1!==$(t).indexOf(String(e)))return!0;const r=V(t);return-1!==r.indexOf(+e)||-1!==r.indexOf(e)||-1!==r.indexOf(String(e))}function H(t,e,n=!1){if(n&&-1!==$(t).indexOf(String(e)))return t[String(e)];const r=V(t);return-1!==r.indexOf(e)?e:-1!==r.indexOf(+e)?+e:-1!==r.indexOf(String(e))?String(e):void 0}function*q(t){if(Array.isArray(t))for(let e=0;e<t.length;e++)yield e;else for(const e in t)t.hasOwnProperty(e)&&(yield e)}function*Y(t){if(Array.isArray(t))for(let e=0;e<t.length;e++)yield[e,t[e]];else for(const e in t)t.hasOwnProperty(e)&&(yield[e,t[e]])}class G{constructor(){this.context=new Map,this.maxReservedVariable=1e4,this.preCode=""}reserveVariable(t="var",e){for(let n=0;n<this.maxReservedVariable;n++){const r=t+"_"+n;if(!this.context.has(r))return this.context.set(r,e),r}throw new Error(`Too many context variables (max ${this.maxReservedVariable})`)}raw(t){return new Function(...this.context.keys(),t)(...this.context.values())}build(t,...e){t=`\n            ${this.preCode}\n            return function self(${e.join(", ")}){ \n                ${t}\n            };\n        `;try{return new Function(...this.context.keys(),t)(...this.context.values())}catch(n){throw new Error("Could not build function: "+n+t)}}buildAsync(t,...e){t=`\n            ${this.preCode}\n            return async function self(${e.join(", ")}){ \n                ${t}\n            };\n        `;try{return new Function(...this.context.keys(),t)(...this.context.values())}catch(n){throw new Error("Could not build function: "+n+t)}}}function W(t){return t.charAt(0).toUpperCase()+t.slice(1)}function J(t,e=5){let n=Date.now(),r=!1,i=[],o=!1;function s(){const a=Date.now();!o&&a-n>1e3/e&&(o=!0,t(...i),r=!1,n=Date.now(),o=!1),r&&requestAnimationFrame(s)}return(...t)=>{r=!0,i=t,s()}}const X=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Q=/=[^,]+/gm,K=/=>.*$/gm;function tt(t){if((t=nt(t="string"==typeof t?t:t.toString())).startsWith("class")){const e=t.match(new RegExp("[\t \n{]constructor\\("));return e&&(t=(t=t.substr((e.index||0)+e[0].length)).replace(X,"").replace(K,"").replace(Q,"")).slice(0,t.indexOf("{")).match(/([^\(\){\s,]+)/g)||[]}return(t=t.replace(X,"").replace(K,"").replace(Q,"")).slice(t.indexOf("(")+1,t.indexOf("{")).match(/([^\(\)\{\}\s,]+)/g)||[]}function et(t,e){let n="";const r=(t=nt(t)).match(new RegExp("[\t \n]"+e+"\\("));if(!r)return"";let i=1;t=(t=t.substr((r.index||0)+r[0].length)).substr(t.indexOf("{")+1);for(let o=0;o<t.length;o++){const e=t[o];if("{"===e&&i++,"}"===e&&i--,0===i)return n;"\n"!==e&&"\t"!==e&&" "!==e&&(n+=e)}return n}function nt(t){let e="",n=!1;for(let r=0;r<t.length;r++){const i=t[r];if(n&&"\\"===i)r++;else{if('"'===i){if('"'===n){n=!1;continue}if(!n){n='"';continue}}if("'"===i){if("'"===n){n=!1;continue}if(!n){n="'";continue}}n||(e+=i)}}return e}},22962:(t,e,n)=>{"use strict";const r=n(44288),i=["__proto__","prototype","constructor"];function o(t){const e=t.split("."),n=[];for(let r=0;r<e.length;r++){let t=e[r];for(;"\\"===t[t.length-1]&&void 0!==e[r+1];)t=t.slice(0,-1)+".",t+=e[++r];n.push(t)}return n.some(t=>i.includes(t))?[]:n}t.exports={get(t,e,n){if(!r(t)||"string"!=typeof e)return void 0===n?t:n;const i=o(e);if(0!==i.length){for(let e=0;e<i.length;e++){if(!Object.prototype.propertyIsEnumerable.call(t,i[e]))return n;if(null==(t=t[i[e]])){if(e!==i.length-1)return n;break}}return t}},set(t,e,n){if(!r(t)||"string"!=typeof e)return t;const i=t,s=o(e);for(let o=0;o<s.length;o++){const e=s[o];r(t[e])||(t[e]={}),o===s.length-1&&(t[e]=n),t=t[e]}return i},delete(t,e){if(!r(t)||"string"!=typeof e)return!1;const n=o(e);for(let i=0;i<n.length;i++){const e=n[i];if(i===n.length-1)return delete t[e],!0;if(!r(t=t[e]))return!1}},has(t,e){if(!r(t)||"string"!=typeof e)return!1;const n=o(e);if(0===n.length)return!1;for(let i=0;i<n.length;i++){if(!r(t))return!1;if(!(n[i]in t))return!1;t=t[n[i]]}return!0}}},44288:t=>{"use strict";t.exports=t=>{const e=typeof t;return null!==t&&("object"===e||"function"===e)}},69391:t=>{"use strict";let e=null;function n(t){if(null!==e){const t=e;return e=n.prototype=null,t}return e=n.prototype=null==t?Object.create(null):t,new n}for(let r=0;r<=10;r++)n();t.exports=function(t){return n(t)}},10840:(t,e,n)=>{"use strict";function r(t){const e=Buffer.alloc(t);for(let n=0;n<t;++n)e[n]=Math.floor(256*Math.random());return e}if(Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=void 0,e.randomBytes=r,"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)e.randomBytes=t=>window.crypto.getRandomValues(Buffer.alloc(t));else{try{e.randomBytes=n(44379).randomBytes}catch(i){}e.randomBytes||(e.randomBytes=r)}},74059:(t,e,n)=>{var r;!function(i,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h=Math.round,d=Math.abs,f=Date.now;function p(t,e,n){return setTimeout(w(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(m(t,n[e],n),!0)}function m(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function y(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var v=y(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===a)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),b=y(function(t,e){return v(t,e,!0)},"merge","Use `assign`.");function _(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function x(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function C(t,e){return t===a?e:t}function S(t,e,n){m(A(e),function(e){t.addEventListener(e,n,!1)})}function T(t,e,n){m(A(e),function(e){t.removeEventListener(e,n,!1)})}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function O(t,e){return t.indexOf(e)>-1}function A(t){return t.trim().split(/\s+/g)}function P(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function k(t){return Array.prototype.slice.call(t,0)}function M(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];P(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function I(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return a}var R=1;function D(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var N="ontouchstart"in i,L=I(i,"PointerEvent")!==a,F=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",j="mouse",$=["x","y"],U=["clientX","clientY"];function V(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){x(t.options.enable,[t])&&n.handler(e)},this.init()}function Z(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i==0,s=12&e&&r-i==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=z(e)),i>1&&!n.firstMultiple?n.firstMultiple=z(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=e.center=H(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=W(l,c),e.distance=G(l,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=Y(e.deltaX,e.deltaY);var u,h,p=q(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=d(p.x)>d(p.y)?p.x:p.y,e.scale=s?(u=s.pointers,G((h=r)[0],h[1],U)/G(u[0],u[1],U)):1,e.rotation=s?function(t,e){return W(e[1],e[0],U)+W(t[1],t[0],U)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(l>25||s.velocity===a)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,h=q(l,c,u);r=h.x,i=h.y,n=d(h.x)>d(h.y)?h.x:h.y,o=Y(c,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var g=t.element;E(e.srcEvent.target,g)&&(g=e.srcEvent.target),e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function z(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:H(e),deltaX:t.deltaX,deltaY:t.deltaY}}function H(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function q(t,e,n){return{x:e/t||0,y:n/t||0}}function Y(t,e){return t===e?1:d(t)>=d(e)?t<0?2:4:e<0?8:16}function G(t,e,n){n||(n=$);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function W(t,e,n){return n||(n=$),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(D(this.element),this.evWin,this.domHandler)}};var J={mousedown:1,mousemove:2,mouseup:4},X="mousedown",Q="mousemove mouseup";function K(){this.evEl=X,this.evWin=Q,this.pressed=!1,V.apply(this,arguments)}_(K,V,{handler:function(t){var e=J[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var tt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},et={2:B,3:"pen",4:j,5:"kinect"},nt="pointerdown",rt="pointermove pointerup pointercancel";function it(){this.evEl=nt,this.evWin=rt,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(nt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),_(it,V,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=tt[r],o=et[t.pointerType]||t.pointerType,s=o==B,a=P(e,t.pointerId,"pointerId");1&i&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&i&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8},st="touchstart",at="touchstart touchmove touchend touchcancel";function lt(){this.evTarget=st,this.evWin=at,this.started=!1,V.apply(this,arguments)}function ct(t,e){var n=k(t.touches),r=k(t.changedTouches);return 12&e&&(n=M(n.concat(r),"identifier",!0)),[n,r]}_(lt,V,{handler:function(t){var e=ot[t.type];if(1===e&&(this.started=!0),this.started){var n=ct.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}}});var ut={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=ht,this.targetIds={},V.apply(this,arguments)}function ft(t,e){var n=k(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=k(t.changedTouches),a=[],l=this.target;if(o=n.filter(function(t){return E(t.target,l)}),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[M(o.concat(a),"identifier",!0),a]:void 0}function pt(){V.apply(this,arguments);var t=w(this.handler,this);this.touch=new dt(this.manager,t),this.mouse=new K(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function gt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,mt.call(this,e)):12&t&&mt.call(this,e)}function mt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},2500)}}function yt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}_(dt,V,{handler:function(t){var e=ut[t.type],n=ft.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}}),_(pt,V,{handler:function(t,e,n){var r=n.pointerType==j;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(n.pointerType==B)gt.call(this,e,n);else if(r&&yt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=I(u.style,"touchAction"),bt=vt!==a,_t="compute",wt="auto",xt="manipulation",Ct="none",St="pan-x",Tt="pan-y",Et=function(){if(!bt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();function Ot(t,e){this.manager=t,this.set(e)}Ot.prototype={set:function(t){t==_t&&(t=this.compute()),bt&&this.manager.element.style&&Et[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,function(e){x(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(O(t,Ct))return Ct;var e=O(t,St),n=O(t,Tt);return e&&n?Ct:e||n?e?St:Tt:O(t,xt)?xt:wt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=O(r,Ct)&&!Et.none,o=O(r,Tt)&&!Et["pan-y"],s=O(r,St)&&!Et["pan-x"];if(i&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!s||!o)return i||o&&6&n||s&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var At=32;function Pt(t){this.options=l({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function kt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Mt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function It(t,e){var n=e.manager;return n?n.get(t):t}function Rt(){Pt.apply(this,arguments)}function Dt(){Rt.apply(this,arguments),this.pX=null,this.pY=null}function Nt(){Rt.apply(this,arguments)}function Lt(){Pt.apply(this,arguments),this._timer=null,this._input=null}function Ft(){Rt.apply(this,arguments)}function Bt(){Rt.apply(this,arguments)}function jt(){Pt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function $t(t,e){return(e=e||{}).recognizers=C(e.recognizers,$t.defaults.preset),new Ut(t,e)}function Ut(t,e){this.options=l({},$t.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(L?it:F?dt:N?pt:K))(this,Z),this.touchAction=new Ot(this,this.options.touchAction),Vt(this,!0),m(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Vt(t,e){var n,r=t.element;r.style&&(m(t.options.cssProps,function(i,o){n=I(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}Pt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=It(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=It(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=It(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=It(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+kt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+kt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=At},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!x(this.options.enable,[this,e]))return this.reset(),void(this.state=At);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},_(Rt,Pt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:At}}),_(Dt,Rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Tt),24&t&&e.push(St),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Rt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Mt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),_(Nt,Rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),_(Lt,Pt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=p(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8;return At},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),_(Ft,Rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),_(Bt,Rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Dt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Mt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),_(jt,Pt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||G(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=p(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return At},failTimeout:function(){return this._timer=p(function(){this.state=At},this.options.interval,this),At},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),$t.VERSION="2.0.7",$t.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[Ft,{enable:!1}],[Nt,{enable:!1},["rotate"]],[Bt,{direction:6}],[Dt,{direction:6},["swipe"]],[jt],[jt,{event:"doubletap",taps:2},["tap"]],[Lt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ut.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Pt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=P(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return m(A(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==a){var n=this.handlers;return m(A(t),function(t){e?n[t]&&n[t].splice(P(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Vt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l($t,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:At,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ut,Input:V,TouchAction:Ot,TouchInput:dt,MouseInput:K,PointerEventInput:it,TouchMouseInput:pt,SingleTouchInput:lt,Recognizer:Pt,AttrRecognizer:Rt,Tap:jt,Pan:Dt,Swipe:Bt,Pinch:Nt,Rotate:Ft,Press:Lt,on:S,off:T,each:m,merge:b,extend:v,assign:l,inherit:_,bindFn:w,prefixed:I}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=$t,(r=(function(){return $t}).call(e,n,e,t))===a||(t.exports=r)}(window,document)},41259:(t,e,n)=>{"use strict";n.d(e,{Yd:()=>u});var r=n(62456),i=n(39055),o=n(65341),s=(()=>(function(t){t[t.none=0]="none",t[t.alert=1]="alert",t[t.error=2]="error",t[t.warning=3]="warning",t[t.log=4]="log",t[t.info=5]="info",t[t.debug=6]="debug"}(s||(s={})),s))();let a=(()=>{class t{format(t,e){return e!==s.error&&e!==s.alert||(t=`<red>${t}</red>`),t.includes("<")&&(t=t.replace(/<(\/)?([a-zA-Z]+)>/g,function(t,e,n){return r[n]?"/"===e?r[n].close:r[n].open:t})),t}}return t.colors=["black","red","green","yellow","blue","cyan","magenta","white","gray","grey"],t})();class l{format(t,e){return t.includes("<")&&(t=t.replace(/<(\/)?([a-zA-Z]+)>/g,function(t,e,n){return""})),t}}class c{constructor(t,e){this.parent=t,this.scope=e}scoped(t){return this.parent.scoped(t)}get level(){return void 0!==this.parent.scopedLevel[this.scope]?this.parent.scopedLevel[this.scope]:this.parent.level}set level(t){this.parent.scopedLevel[this.scope]=t}is(t){return t<=this.level}alert(...t){this.parent.alert(`<yellow>${this.scope}</yellow>`,...t)}error(...t){this.parent.error(`<yellow>${this.scope}</yellow>`,...t)}warning(...t){this.parent.warning(`<yellow>${this.scope}</yellow>`,...t)}log(...t){this.parent.log(`<yellow>${this.scope}</yellow>`,...t)}info(...t){this.parent.info(`<yellow>${this.scope}</yellow>`,...t)}debug(...t){this.parent.debug(`<yellow>${this.scope}</yellow>`,...t)}}class u{constructor(t=[],e=[]){this.transport=t,this.formatter=e,this.colorFormatter=new a,this.removeColorFormatter=new l,this.level=s.info,this.scopedLevel={},this.scopes={}}scoped(t){var e;return(e=this.scopes)[t]||(e[t]=new c(this,t))}addTransport(t){this.transport.push(t)}removeTransport(t){(0,o.lH)(this.transport,t)}hasFormatter(t){for(const e of this.formatter)if(e instanceof t)return!0;return!1}addFormatter(t){this.formatter.push(t)}format(t,e){for(const n of this.formatter)t=n.format(t,e);return t}is(t){return t<=this.level}send(t,e){if(!this.is(e))return;let n=this.format(i(...t),e);for(const r of this.transport)r.supportsColor()?r.write(this.colorFormatter.format(n,e),e):r.write(this.removeColorFormatter.format(n,e),e)}alert(...t){this.send(t,s.alert)}error(...t){this.send(t,s.error)}warning(...t){this.send(t,s.warning)}log(...t){this.send(t,s.log)}info(...t){this.send(t,s.info)}debug(...t){this.send(t,s.debug)}}},62456:(t,e,n)=>{"use strict";t=n.nmd(t);const r=(t,e)=>(...n)=>`\x1b[${t(...n)+e}m`,i=(t,e)=>(...n)=>{const r=t(...n);return`\x1b[${38+e};5;${r}m`},o=(t,e)=>(...n)=>{const r=t(...n);return`\x1b[${38+e};2;${r[0]};${r[1]};${r[2]}m`},s=t=>t,a=(t,e,n)=>[t,e,n],l=(t,e,n)=>{Object.defineProperty(t,e,{get:()=>{const r=n();return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0}),r},enumerable:!0,configurable:!0})};let c;const u=(t,e,r,i)=>{void 0===c&&(c=n(8698));const o=i?10:0,s={};for(const[n,a]of Object.entries(c)){const i="ansi16"===n?"ansi":n;n===e?s[i]=t(r,o):"object"==typeof a&&(s[i]=t(a[e],o))}return s};Object.defineProperty(t,"exports",{enumerable:!0,get:function(){const t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(const[n,r]of Object.entries(e)){for(const[n,i]of Object.entries(r))e[n]={open:`\x1b[${i[0]}m`,close:`\x1b[${i[1]}m`},r[n]=e[n],t.set(i[0],i[1]);Object.defineProperty(e,n,{value:r,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1b[39m",e.bgColor.close="\x1b[49m",l(e.color,"ansi",()=>u(r,"ansi16",s,!1)),l(e.color,"ansi256",()=>u(i,"ansi256",s,!1)),l(e.color,"ansi16m",()=>u(o,"rgb",a,!1)),l(e.bgColor,"ansi",()=>u(r,"ansi16",s,!0)),l(e.bgColor,"ansi256",()=>u(i,"ansi256",s,!0)),l(e.bgColor,"ansi16m",()=>u(o,"rgb",a,!0)),e}})},88920:(t,e,n)=>{const r=n(82949),i={};for(const s of Object.keys(r))i[r[s]]=s;const o={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};t.exports=o;for(const s of Object.keys(o)){if(!("channels"in o[s]))throw new Error("missing channels property: "+s);if(!("labels"in o[s]))throw new Error("missing channel labels property: "+s);if(o[s].labels.length!==o[s].channels)throw new Error("channel and label counts mismatch: "+s);const{channels:t,labels:e}=o[s];delete o[s].channels,delete o[s].labels,Object.defineProperty(o[s],"channels",{value:t}),Object.defineProperty(o[s],"labels",{value:e})}o.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=o-i;let a,l;o===i?a=0:e===o?a=(n-r)/s:n===o?a=2+(r-e)/s:r===o&&(a=4+(e-n)/s),a=Math.min(60*a,360),a<0&&(a+=360);const c=(i+o)/2;return l=o===i?0:c<=.5?s/(o+i):s/(2-o-i),[a,100*l,100*c]},o.rgb.hsv=function(t){let e,n,r,i,o;const s=t[0]/255,a=t[1]/255,l=t[2]/255,c=Math.max(s,a,l),u=c-Math.min(s,a,l),h=function(t){return(c-t)/6/u+.5};return 0===u?(i=0,o=0):(o=u/c,e=h(s),n=h(a),r=h(l),s===c?i=r-n:a===c?i=1/3+e-r:l===c&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},o.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const i=o.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[i,100*s,100*r]},o.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.min(1-e,1-n,1-r);return[100*((1-e-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},o.rgb.keyword=function(t){const e=i[t];if(e)return e;let n,o=1/0;for(const i of Object.keys(r)){const e=((s=t)[0]-(a=r[i])[0])**2+(s[1]-a[1])**2+(s[2]-a[2])**2;e<o&&(o=e,n=i)}var s,a;return n},o.keyword.rgb=function(t){return r[t]},o.rgb.xyz=function(t){let e=t[0]/255,n=t[1]/255,r=t[2]/255;return e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,[100*(.4124*e+.3576*n+.1805*r),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},o.rgb.lab=function(t){const e=o.rgb.xyz(t);let n=e[0],r=e[1],i=e[2];return n/=95.047,r/=100,i/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,[116*r-16,500*(n-r),200*(r-i)]},o.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let i,o,s;if(0===n)return s=255*r,[s,s,s];i=r<.5?r*(1+n):r+n-r*n;const a=2*r-i,l=[0,0,0];for(let c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,s=6*o<1?a+6*(i-a)*o:2*o<1?i:3*o<2?a+(i-a)*(2/3-o)*6:a,l[c]=255*s;return l},o.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,i=n;const o=Math.max(r,.01);return r*=2,n*=r<=1?r:2-r,i*=o<=1?o:2-o,[e,100*(0===r?2*i/(o+i):2*n/(r+n)),(r+n)/2*100]},o.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const i=Math.floor(e)%6,o=e-Math.floor(e),s=255*r*(1-n),a=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,s];case 1:return[a,r,s];case 2:return[s,r,l];case 3:return[s,a,r];case 4:return[l,s,r];case 5:return[r,s,a]}},o.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,i=Math.max(r,.01);let o,s;s=(2-n)*r;const a=(2-n)*i;return o=n*i,o/=a<=1?a:2-a,o=o||0,s/=2,[e,100*o,100*s]},o.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const i=n+r;let o;i>1&&(n/=i,r/=i);const s=Math.floor(6*e),a=1-r;o=6*e-s,0!=(1&s)&&(o=1-o);const l=n+o*(a-n);let c,u,h;switch(s){default:case 6:case 0:c=a,u=l,h=n;break;case 1:c=l,u=a,h=n;break;case 2:c=n,u=a,h=l;break;case 3:c=n,u=l,h=a;break;case 4:c=l,u=n,h=a;break;case 5:c=a,u=n,h=l}return[255*c,255*u,255*h]},o.cmyk.rgb=function(t){const e=t[1]/100,n=t[2]/100,r=t[3]/100;return[255*(1-Math.min(1,t[0]/100*(1-r)+r)),255*(1-Math.min(1,e*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r))]},o.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let i,o,s;return i=3.2406*e+-1.5372*n+-.4986*r,o=-.9689*e+1.8758*n+.0415*r,s=.0557*e+-.204*n+1.057*r,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i=Math.min(Math.max(0,i),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[255*i,255*o,255*s]},o.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];return e/=95.047,n/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,[116*n-16,500*(e-n),200*(n-r)]},o.lab.xyz=function(t){let e,n,r;n=(t[0]+16)/116,e=t[1]/500+n,r=n-t[2]/200;const i=n**3,o=e**3,s=r**3;return n=i>.008856?i:(n-16/116)/7.787,e=o>.008856?o:(e-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,e*=95.047,n*=100,r*=108.883,[e,n,r]},o.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let i;return i=360*Math.atan2(r,n)/2/Math.PI,i<0&&(i+=360),[e,Math.sqrt(n*n+r*r),i]},o.lch.lab=function(t){const e=t[1],n=t[2]/360*2*Math.PI;return[t[0],e*Math.cos(n),e*Math.sin(n)]},o.rgb.ansi16=function(t,e=null){const[n,r,i]=t;let s=null===e?o.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),0===s)return 30;let a=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return 2===s&&(a+=60),a},o.hsv.ansi16=function(t){return o.rgb.ansi16(o.hsv.rgb(t),t[2])},o.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},o.ansi16.rgb=function(t){let e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},o.ansi256.rgb=function(t){if(t>=232){const e=10*(t-232)+8;return[e,e,e]}let e;return t-=16,[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},o.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},o.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let n=e[0];3===e[0].length&&(n=n.split("").map(t=>t+t).join(""));const r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},o.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,i=Math.max(Math.max(e,n),r),o=Math.min(Math.min(e,n),r),s=i-o;let a,l;return a=s<1?o/(1-s):0,l=s<=0?0:i===e?(n-r)/s%6:i===n?2+(r-e)/s:4+(e-n)/s,l/=6,l%=1,[360*l,100*s,100*a]},o.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let i=0;return r<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},o.hsv.hcg=function(t){const e=t[2]/100,n=t[1]/100*e;let r=0;return n<1&&(r=(e-n)/(1-n)),[t[0],100*n,100*r]},o.hcg.rgb=function(t){const e=t[1]/100,n=t[2]/100;if(0===e)return[255*n,255*n,255*n];const r=[0,0,0],i=t[0]/360%1*6,o=i%1,s=1-o;let a=0;switch(Math.floor(i)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=s,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=s,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=s}return a=(1-e)*n,[255*(e*r[0]+a),255*(e*r[1]+a),255*(e*r[2]+a)]},o.hcg.hsv=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);let r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},o.hcg.hsl=function(t){const e=t[1]/100,n=t[2]/100*(1-e)+.5*e;let r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},o.hcg.hwb=function(t){const e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},o.hwb.hcg=function(t){const e=1-t[2]/100,n=e-t[1]/100;let r=0;return n<1&&(r=(e-n)/(1-n)),[t[0],100*n,100*r]},o.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},o.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},o.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},o.gray.hsl=function(t){return[0,0,t[0]]},o.gray.hsv=o.gray.hsl,o.gray.hwb=function(t){return[0,100,t[0]]},o.gray.cmyk=function(t){return[0,0,0,t[0]]},o.gray.lab=function(t){return[t[0],0,0]},o.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},o.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},8698:(t,e,n)=>{const r=n(88920),i=n(63717),o={};Object.keys(r).forEach(t=>{o[t]={},Object.defineProperty(o[t],"channels",{value:r[t].channels}),Object.defineProperty(o[t],"labels",{value:r[t].labels});const e=i(t);Object.keys(e).forEach(n=>{const r=e[n];o[t][n]=function(t){const e=function(...e){const n=e[0];if(null==n)return n;n.length>1&&(e=n);const r=t(e);if("object"==typeof r)for(let t=r.length,i=0;i<t;i++)r[i]=Math.round(r[i]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}(r),o[t][n].raw=function(t){const e=function(...e){const n=e[0];return null==n?n:(n.length>1&&(e=n),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)})}),t.exports=o},63717:(t,e,n)=>{const r=n(88920);function i(t,e){return function(n){return e(t(n))}}function o(t,e){const n=[e[t].parent,t];let o=r[e[t].parent][t],s=e[t].parent;for(;e[s].parent;)n.unshift(e[s].parent),o=i(r[e[s].parent][s],o),s=e[s].parent;return o.conversion=n,o}t.exports=function(t){const e=function(t){const e=function(){const t={},e=Object.keys(r);for(let n=e.length,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;){const t=n.pop(),i=Object.keys(r[t]);for(let r=i.length,o=0;o<r;o++){const r=i[o],s=e[r];-1===s.distance&&(s.distance=e[t].distance+1,s.parent=t,n.unshift(r))}}return e}(t),n={},i=Object.keys(e);for(let r=i.length,s=0;s<r;s++){const t=i[s];null!==e[t].parent&&(n[t]=o(t,e))}return n}},82949:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},39055:t=>{t.exports=function(t){var e=/(%?)(%([jds]))/g,n=Array.prototype.slice.call(arguments,1);return n.length&&(t=t.replace(e,function(t,e,r,i){var o=n.shift();switch(i){case"s":o=""+o;break;case"d":o=Number(o);break;case"j":o=JSON.stringify(o)}return e?(n.unshift(o),t):o})),n.length&&(t+=" "+n.join(" ")),""+t.replace(/%{2,2}/g,"%")}},85101:(t,e,n)=>{"use strict";n.d(e,{RR:()=>y,W0:()=>d,Oz:()=>g,NH:()=>b});var r,i=n(92338),o=n(44879),s=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(t,e){return function(n,r){e(n,r,t)}};let c=class{constructor(t,e,n=[]){this.name=t,this.adapter=e,this.serializedSchemas=n}getClassSchemas(){return this.classSchemas||(this.classSchemas=(0,o.Qd)(this.serializedSchemas,"@orm-browser/"+this.name+"/")),this.classSchemas}getEntity(t){for(const e of this.getClassSchemas())if(e.name===t)return e;throw new Error(`No schema for ${t} found`)}};c=s([o.nw.name("orm-browser/database"),l(0,o.t.name("name")),l(1,o.t.name("adapter")),l(2,o.t.array(o.$X).name("serializedSchemas")),a("design:paramtypes",[String,String,Array])],c);let u=class{constructor(t){this.name=t}};u=s([o.nw.name("orm-broser/migration/entity"),l(0,o.t.name("name")),a("design:paramtypes",[String])],u);let h=class{constructor(){this.entites={}}};s([o.t.map(u),a("design:type",Object)],h.prototype,"entites",void 0),h=s([o.nw.name("orm-broser/migration")],h);let d=r=class{constructor(t=""){this.name=t,this.fake=!1,this.reference="create",this.faker="",this.properties={}}getArray(){return this.array||(this.array=new f),this.array}getMap(){return this.map||(this.map=new p),this.map}};s([o.t,a("design:type",Boolean)],d.prototype,"fake",void 0),s([o.t.string,a("design:type",String)],d.prototype,"reference",void 0),s([o.t.any,a("design:type",Object)],d.prototype,"value",void 0),s([o.t.type(()=>f).optional,a("design:type",Object)],d.prototype,"array",void 0),s([o.t.type(()=>p).optional,a("design:type",Object)],d.prototype,"map",void 0),s([o.t.any,a("design:type",String)],d.prototype,"faker",void 0),s([o.t.map(r),a("design:type",Object)],d.prototype,"properties",void 0),d=r=s([o.nw.name("orm-browser/seed/property"),a("design:paramtypes",[String])],d);let f=class{constructor(){this.min=1,this.max=5,this.seed=new d}};s([o.t,a("design:type",Number)],f.prototype,"min",void 0),s([o.t,a("design:type",Number)],f.prototype,"max",void 0),s([o.t.type(d),a("design:type",d)],f.prototype,"seed",void 0),f=s([o.nw.name("orm-browser/seed/property/array")],f);let p=class{constructor(){this.key={fake:!0,faker:"random.word"},this.min=1,this.max=5,this.seed=new d}};s([o.t.any,a("design:type",Object)],p.prototype,"key",void 0),s([o.t,a("design:type",Number)],p.prototype,"min",void 0),s([o.t,a("design:type",Number)],p.prototype,"max",void 0),s([o.t.type(d),a("design:type",d)],p.prototype,"seed",void 0),p=s([o.nw.name("orm-browser/seed/property/map")],p);let g=class{constructor(){this.truncate=!0,this.active=!1,this.amount=1e3,this.properties={}}};s([o.t,a("design:type",Boolean)],g.prototype,"truncate",void 0),s([o.t,a("design:type",Boolean)],g.prototype,"active",void 0),s([o.t,a("design:type",Number)],g.prototype,"amount",void 0),s([o.t.map(d),a("design:type",Object)],g.prototype,"properties",void 0),g=s([o.nw.name("orm-browser/seed/entity")],g);let m=class{constructor(){this.entities={}}};s([o.t.map(g),a("design:type",Object)],m.prototype,"entities",void 0),m=s([o.nw.name("orm-browser/seed/database")],m);const y=(0,i.i4)("orm-browser/controller",[c]);function v(t,e,n){for(const[r,i]of Object.entries(t)){if(i.type!==n)continue;const[t,o]=r.toLowerCase().split(".");if(o&&o.includes(e))return r;if(o&&e.includes(o))return r}}function b(t,e){const n=e.name.toLowerCase();return"date"===e.type?n.includes("birthdate")||n.endsWith("ed")?"date.past":"date.future":"number"===e.type?v(t,n,"number")||"random.number":"boolean"===e.type?"random.boolean":"string"===e.type?n.includes("first")?"name.firstName":n.includes("last")?"name.lastName":n.includes("iban")?"finance.iban":n.includes("bic")?"finance.bic":n.includes("name")?"internet.userName":n.includes("image")?"image.imageUrl":n.includes("mobile")||n.includes("phone")?"phone.phoneNumber":v(t,n,"string")||"random.alphaNumeric":""}},50436:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ky:()=>BrowserState});var _Users_marcschmidt_bude_deepkit_framework_packages_framework_debug_gui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(16304),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(33018),_deepkit_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(65341),_deepkit_orm_browser_api__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(85101),_deepkit_type__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(44879),_deepkit_orm__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(7652),_client__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30754);const storeKeySeparator="\0t\0";class BrowserQuery{constructor(){this.id=0,this.javascript="",this.placeholder="",this.tab="result",this.loading=!1,this.executionTime=0,this.downloadTime=0,this.downloadBytes=0,this.sort={},this.log=[],this.executed=!1,this.inputHeight=40,this.javascriptError=""}setValue(t){this.result=t}eval(){this.javascriptError="";try{const t=new Function(this.javascript)}catch(error){try{eval(this.javascript)}catch(error){this.javascriptError=error}}}}class BrowserEntityState{constructor(t){this.schema=t,this.properties=[],this.queryId=0,this.loading=!1,this.filter=[],this.activeQuery=-1,this.queries=[],this.executionTime=0,this.downloadTime=0,this.downloadBytes=0,this.count=0,this.page=1,this.itemsPerPage=100,this.dbItems=[],this.items=[],this.selection=[],this.deletions={}}get totalPages(){return Math.ceil(this.count/this.itemsPerPage)}addQuery(){const t=new BrowserQuery;t.placeholder=t.javascript=`database.query(${this.schema.getClassName()}).find()`,t.id=++this.queryId,this.queries.push(t),this.activeQuery=this.queries.length-1}removeQuery(t){const e=this.queries.indexOf(t);this.activeQuery>=e&&this.activeQuery--,(0,_deepkit_core__WEBPACK_IMPORTED_MODULE_0__.lH)(this.queries,t),this.queries=this.queries.slice(0)}}let BrowserState=(()=>{class t{constructor(t){this.controllerClient=t,this.databases=[],this.seedSettings={},this.newId=0,this.newItems=new Map,this.newItemsMap=new Map,this.browserEntityState={},this.addedItems={},this.deletions={},this.changes={},this.validationErrors={},this.connectedNewItems=new Map,this.onDataChange=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.vpe,window.state=this}getSeedSettings(t,e,n){const r=this.getStoreKey(e,n);let i=this.seedSettings[r];if(!i){const o=localStorage.getItem("orm-browser/seed-properties/"+e+"/"+n),s=o?JSON.parse(o):{properties:{}},a={};for(const r of this.getEntity(e,n).getProperties()){if(r.backReference)continue;if(r.isParentReference)continue;const e=s[r.name],n=a[r.name]=new _deepkit_orm_browser_api__WEBPACK_IMPORTED_MODULE_1__.W0(r.name);n.fake=(null==e?void 0:e.fake)||!1,n.faker=(null==e?void 0:e.faker)||(0,_deepkit_orm_browser_api__WEBPACK_IMPORTED_MODULE_1__.NH)(t,r)}i=this.seedSettings[r]=new _deepkit_orm_browser_api__WEBPACK_IMPORTED_MODULE_1__.Oz,i.properties=a}return i}storeSeedSettings(t,e){const n=this.getStoreKey(t,e),r=this.seedSettings[n];if(!r)return;const i={};for(const[o,s]of Object.entries(r.properties))i[o]={fake:s.fake,faker:s.faker};localStorage.setItem("orm-browser/seed-properties/"+t+"/"+e,JSON.stringify(i))}resetAll(){this.changes={},this.addedItems={},this.validationErrors={},this.deletions={},this.connectedNewItems.clear(),this.newId=0,this.newItems.clear(),this.newItemsMap.clear()}getBrowserEntityState(t,e){var n;const r=this.getStoreKey(t,e);return(n=this.browserEntityState)[r]||(n[r]=new BrowserEntityState(this.getEntity(t,e)))}getDeletions(t,e){var n;const r=this.getStoreKey(t,e);return(n=this.deletions)[r]||(n[r]={})}getDatabase(t){for(const e of this.databases)if(e.name===t)return e;throw new Error(`Database ${t} not loaded`)}scheduleForDeletion(t,e,n){const r=this.getDeletions(t,e),i=(0,_deepkit_orm__WEBPACK_IMPORTED_MODULE_3__.We)(n);r[i.getLastKnownPKHash()]=i.getLastKnownPK()}unscheduleForDeletion(t,e,n){var r;const i=this.getStoreKey(t,e);delete((r=this.deletions)[i]||(r[i]={}))[(0,_deepkit_orm__WEBPACK_IMPORTED_MODULE_3__.We)(n).getLastKnownPKHash()]}hasChanges(){for(const t in this.changes)if(this.changes.hasOwnProperty(t)){if(!(0,_deepkit_core__WEBPACK_IMPORTED_MODULE_0__.cS)(this.changes[t]))return!0;if(!(0,_deepkit_core__WEBPACK_IMPORTED_MODULE_0__.cS)(this.deletions[t]))return!0}return this.newItems.size>0}hasAddedItems(t,e){const n=this.addedItems[this.getStoreKey(t,e)];return n&&n.length>0}getAddedItems(t,e){const n=this.getStoreKey(t,e);let r=this.addedItems[n];return r||(r=this.addedItems[n]=[]),r}getStoreKey(t,e){return t+storeKeySeparator+e}commit(){var t=this;return(0,_Users_marcschmidt_bude_deepkit_framework_packages_framework_debug_gui_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_6__.Z)(function*(){var e;const n={};for(const r of t.databases)n[r.name]={added:{},removed:{},changed:{},addedIds:{}};for(const r in t.deletions){if(!t.deletions.hasOwnProperty(r))continue;const[e,i]=r.split(storeKeySeparator);n[e].removed[i]=Object.values(t.deletions[r])}for(const r in t.changes){if(!t.changes.hasOwnProperty(r))continue;const[i,o]=r.split(storeKeySeparator),s=(e=n[i].changed)[o]||(e[o]=[]);for(const e of Object.values(t.changes[r]))s.push({pk:e.pk,changes:{$inc:e.changes.$inc,$set:e.changes.$set,$unset:e.changes.$unset}})}for(const r in t.addedItems){if(!t.addedItems.hasOwnProperty(r))continue;const[e,i]=r.split(storeKeySeparator),o=n[e];o.added[i]=t.addedItems[r],o.addedIds[i]=t.addedItems[r].map(e=>t.newItems.get(e)||-1)}yield t.controllerClient.browser.commit(n),t.onDataChange.emit()})()}getEntityFromCacheKey(t){const[e,n]=t.split(storeKeySeparator);return this.getEntity(e,n)}getEntity(t,e){for(const n of this.databases)for(const t of n.getClassSchemas())if(t.name===e)return t;throw new Error(`No entity ${e} in db ${t} found`)}connectNewItem(t,e,n){let r=this.connectedNewItems.get(t);return r||(r=[],this.connectedNewItems.set(t,r)),r.push({row:e,property:n}),r}disconnectForNewItem(t){const e=this.connectedNewItems.get(t);if(e)for(const n of e)n.row[n.property.name]=void 0}registerNewItem(t){const e=++this.newId;this.newItems.set(t,e),this.newItemsMap.set(e,t)}getNewItemId(t){const e=this.newItems.get(t);if(!e)throw new Error("Item is not registered as new");return e}getNewItemIdWrapper(t){const e=this.newItems.get(t);if(!e)throw new Error("Item is not registered as new");return{$___newId:e}}extractIdWrapper(t){return t.$___newId}extractHashFromNewItem(t){return"h\0"+this.newItems.get(t)}extractHashFromIdWrapper(t){return"h\0"+t.$___newId}isIdWrapper(t){return(0,_deepkit_core__WEBPACK_IMPORTED_MODULE_0__.Kn)(t)&&"$___newId"in t}isNew(t){return this.newItems.has(t)}getChangeStore(t,e){var n,r;return(n=this.changes)[r=this.getStoreKey(t,e)]||(n[r]={})}getValidationStore(t,e){let n=this.validationErrors[this.getStoreKey(t,e)];return n||(n=this.validationErrors[this.getStoreKey(t,e)]=new Map),n}changed(t,e,n){const r=this.getEntity(t,e),i=this.getChangeStore(t,e),o=(0,_deepkit_orm__WEBPACK_IMPORTED_MODULE_3__.We)(n),s=o.getSnapshot(),a=(0,_deepkit_type__WEBPACK_IMPORTED_MODULE_2__.R0)(r),l=(0,_deepkit_type__WEBPACK_IMPORTED_MODULE_2__.Fq)(r)(n);delete n[_deepkit_type__WEBPACK_IMPORTED_MODULE_2__.LN];const c=a(s,l,n),u=o.getLastKnownPKHash();c?i[u]={changes:c,pk:o.getLastKnownPK()}:i[u]&&delete i[u]}}return t.\u0275fac=function(e){return new(e||t)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.LFG(_client__WEBPACK_IMPORTED_MODULE_4__.M))},t.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_5__.Yz7({token:t,factory:t.\u0275fac}),t})()},30754:(t,e,n)=>{"use strict";n.d(e,{M:()=>l});var r=n(16304),i=n(85101),o=n(65341),s=n(33018),a=n(92338);let l=(()=>{class t{constructor(t){this.client=t,this.browser=this.client.controller(i.RR)}static getServerHost(){return"4200"===location.port?location.hostname+":9090":location.host}getDatabases(){var t=this;return this.loadDatabases||(this.loadDatabases=(0,o.KR)(function(){var e=(0,r.Z)(function*(e){e(yield t.browser.getDatabases())});return function(t){return e.apply(this,arguments)}}())),this.loadDatabases}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(a.U3))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t})()},7652:(t,e,n)=>{"use strict";n.d(e,{We:()=>c});var r=n(65341),i=n(44879);Error,Error;var o=n(71732);class s{constructor(t){this.classSchema=t,this.snapshot=(0,i.Fq)(this.classSchema),this.primaryKeyExtractor=(0,i.P7)(this.classSchema),this.primaryKeyHashGenerator=(0,i.G8)(this.classSchema),this.simplePrimaryKeyHashGenerator=(0,i.pH)(this.classSchema),this.changeDetector=(0,i.R0)(this.classSchema)}}class a{constructor(t,e){this.classState=t,this.item=e,this.knownInDatabase=!1,this.fromDatabase=!1}[o.inspect.custom](){return`InstanceState<knownInDatabase=${this.knownInDatabase}, fromDatabase=${this.fromDatabase}>`}toString(){return`knownInDatabase: ${this.knownInDatabase}`}getSnapshot(){return this.snapshot||(this.snapshot=this.classState.snapshot(this.item)),this.snapshot}isFromDatabase(){return this.fromDatabase}isKnownInDatabase(){return this.knownInDatabase}markAsFromDatabase(){this.fromDatabase=!0}markAsPersisted(){this.knownInDatabase=!0,this.lastPKHash=void 0,this.snapshot=this.classState.snapshot(this.item),this.item[i.LN]&&this.item[i.LN].clear()}getLastKnownPK(){return this.classState.primaryKeyExtractor(this.snapshot)}getLastKnownPKHash(){return void 0===this.lastPKHash&&(this.lastPKHash=this.classState.primaryKeyHashGenerator(this.snapshot)),this.lastPKHash}markAsDeleted(){this.knownInDatabase=!1}}const l=Symbol("state");function c(t){return function(t,e){return e.constructor.prototype.hasOwnProperty(l)||Object.defineProperty(e.constructor.prototype,l,{writable:!0,enumerable:!1,value:null}),e.constructor.prototype.hasOwnProperty(i.LN)||Object.defineProperty(e.constructor.prototype,i.LN,{writable:!0,enumerable:!1,value:null}),e[l]||(e[l]=new a(t,e)),e[l]}(((e=(0,i.VI)(t)).data.classState||(e.data.classState=new s(e),(0,r.SV)(e.data)),e.data.classState),t);var e}function u(t){return"[object Array]"===Object.prototype.toString.call(t)}function h(t){return t instanceof Date?t.getTime():u(t)?t.map(h):t&&"function"==typeof t.toJSON?t.toJSON():t}function d(t,e){return"function"==typeof t.get?t.get(e):t[e]}function f(t){return function(e,n){if(!u(n)||!n.length)return t(e,n);for(var r=0,i=n.length;r<i;r++)if(t(e,d(n,r)))return!0;return!1}}function p(t,e,n,r){return t.v(t.a,e,n,r)}var g,m={$eq:f(function(t,e){return t(e)}),$ne:(g=function(t,e){return!t(e)},function(t,e){if(!u(e)||!e.length)return g(t,e);for(var n=0,r=e.length;n<r;n++)if(!g(t,d(e,n)))return!1;return!0}),$gt:f(function(t,e){return S(h(e),t)>0}),$gte:f(function(t,e){return S(h(e),t)>=0}),$lt:f(function(t,e){return S(h(e),t)<0}),$lte:f(function(t,e){return S(h(e),t)<=0}),$mod:f(function(t,e){return e%t[0]==t[1]}),$in:function(t,e){if(!(e instanceof Array)){var n=h(e);if(n===e&&"object"==typeof e)for(i=t.length;i--;)if(String(t[i])===String(e)&&"[object Object]"!==String(e))return!0;if(void 0===n)for(i=t.length;i--;)if(null==t[i])return!0;for(i=t.length;i--;){var r=p(C(d(t,i),void 0),e,i,t);if(r&&"[object Object]"!==String(r)&&"[object Object]"!==String(e))return!0}return!!~t.indexOf(n)}for(var i=e.length;i--;)if(~t.indexOf(h(d(e,i))))return!0;return!1},$nin:function(t,e,n,r){return!m.$in(t,e,n,r)},$not:function(t,e,n,r){return!p(t,e,n,r)},$type:function(t,e){return null!=e&&(e instanceof t||e.constructor==t)},$all:function(t,e,n,r){return m.$and(t,e,n,r)},$size:function(t,e){return!!e&&t===e.length},$or:function(t,e,n,r){for(var i=0,o=t.length;i<o;i++)if(p(d(t,i),e,n,r))return!0;return!1},$nor:function(t,e,n,r){return!m.$or(t,e,n,r)},$and:function(t,e,n,r){for(var i=0,o=t.length;i<o;i++)if(!p(d(t,i),e,n,r))return!1;return!0},$regex:f(function(t,e){return"string"==typeof e&&t.test(e)}),$where:function(t,e,n,r){return t.call(e,e,n,r)},$elemMatch:function(t,e,n,r){return u(e)?!!~function(t,e){for(var n=0;n<t.length;n++)if(d(t,n),p(e,d(t,n)))return n;return-1}(e,t):p(t,e,n,r)},$exists:function(t,e,n,r){return r.hasOwnProperty(n)===t}},y={$eq:function(t){return t instanceof RegExp?function(e){return"string"==typeof e&&t.test(e)}:t instanceof Function?t:u(t)&&!t.length?function(t){return u(t)&&!t.length}:null===t?function(t){return null==t}:function(e){return 0===S(h(e),h(t))}},$ne:function(t){return y.$eq(t)},$and:function(t){return t.map(x)},$all:function(t){return y.$and(t)},$or:function(t){return t.map(x)},$nor:function(t){return t.map(x)},$not:function(t){return x(t)},$regex:function(t,e){return new RegExp(t,e.$options)},$where:function(t){return"string"==typeof t?new Function("obj","return "+t):t},$elemMatch:function(t){return x(t)},$exists:function(t){return!!t}};function v(t,e){return{a:t,v:e}}function b(t,e){var n=[];if(_(e,t.k,0,e,n),1===n.length){var r=n[0];return p(t.nv,r[0],r[1],r[2])}for(var i=t&&t.q&&void 0!==t.q.$ne,o=i,s=0;s<n.length;s++){var a=n[s],l=p(t.nv,a[0],a[1],a[2]);i?o&=l:o|=l}return o}function _(t,e,n,r,i){if(n!==e.length&&null!=t){var o=d(e,n);if(u(t)&&isNaN(Number(o)))for(var s=0,a=t.length;s<a;s++)_(d(t,s),e,n,t,i);else _(d(t,o),e,n+1,t,i)}else i.push([t,e[n-1],r])}function w(t,e,n){return{a:{k:t,nv:e,q:n},v:b}}function x(t){var e;(t=h(t))&&(e=t)&&e.constructor===Object||(t={$eq:t});var n=[];for(var r in t){var i=t[r];if("$options"!==r)if(m[r])y[r]&&(i=y[r](i,t)),n.push(v(h(i),m[r]));else{if(36===r.charCodeAt(0))throw new Error("Unknown operation "+r);n.push(w(r.split("."),x(i),i))}}return 1===n.length?n[0]:v(n,m.$and)}function C(t,e){var n=x(t);return e&&(n={a:n,v:function(t,n,r,i){return p(t,e(n),r,i)}}),n}function S(t,e){if(t===e)return 0;if(typeof t==typeof e){if(t>e)return 1;if(t<e)return-1}}n(41259),Error;const T=new class extends(i.$r.fork("memory")){};T.fromClass.register("undefined",(t,e)=>{e.addSetter("null")}),T.toClass.register("undefined",(t,e)=>t.isOptional?e.addSetter("undefined"):t.isNullable?e.addSetter("null"):void 0),T.fromClass.register("null",(t,e)=>{e.addSetter("null")}),T.toClass.register("null",(t,e)=>t.isOptional?e.addSetter("undefined"):t.isNullable?e.addSetter("null"):void 0)},92338:(t,e,n)=>{"use strict";n.d(e,{TY:()=>_t,i4:()=>D,U3:()=>Ce});var r=n(16304),i=n(65341),o=n(44879),s=n(26215),a=n(67574),l=n(79765),c=n(77393);function u(t){return e=>e.lift(new h(t))}class h{constructor(t){this.total=t}call(t,e){return e.subscribe(new d(t,this.total))}}class d extends c.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}var f=n(95639);function p(t){return t&&(0,i.mf)(t.unsubscribe)&&(0,f.b)(t)}function g(t){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(function*(t){"function"==typeof t?yield t():"object"==typeof t&&t.unsubscribe&&(yield t.unsubscribe())})).apply(this,arguments)}var y,v=n(21929),b=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},_=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};class w{constructor(){this.itemsPerPage=50,this.parameters={},this.change=new l.xQ}set(t){this.filter=t.filter,this.skip=t.skip,this.itemsPerPage=t.itemsPerPage||50,this.limit=t.limit,this.sort=t.sort;for(const[e,n]of Object.entries(t.parameters))this.parameters[e]=n}changed(){this.change.next()}hasSort(){return void 0!==this.sort}hasPaging(){return void 0!==this.limit||void 0!==this.skip}}b([o.t.map(o.t.any).optional,_("design:type",Object)],w.prototype,"filter",void 0),b([o.t.number.optional,_("design:type",Number)],w.prototype,"skip",void 0),b([o.t.number,_("design:type",Number)],w.prototype,"itemsPerPage",void 0),b([o.t.number.optional,_("design:type",Number)],w.prototype,"limit",void 0),b([o.t.map(o.t.any),_("design:type",Object)],w.prototype,"parameters",void 0),b([o.t.map(o.t.any).optional,_("design:type",Object)],w.prototype,"sort",void 0);class x{constructor(){this.total=0}}b([o.t,_("design:type",Number)],x.prototype,"total",void 0);const C=Symbol.for("deepkit/collection");class S extends v.t{constructor(t){super(1),this.classType=t,this.event=new l.xQ,this.removed=new l.xQ,this.added=new l.xQ,this[y]=!0,this.teardowns=[],this.items=[],this.itemsMap=new Map,this.state=new x,this.deepChange=new l.xQ,this.model=new w,this.entitySubjects=new Map}getTotal(){return this.state.total}getItemsPerPage(){return this.model.itemsPerPage}getPages(){return Math.ceil(this.getTotal()/this.getItemsPerPage())}getSort(){return this.model.sort}getParameter(t){return this.model.parameters[t]}setParameter(t,e){return this.model.parameters[t]=e,this}orderByField(t,e="asc"){return this.model.sort={[t]:e},this}setPage(t){return this.model.skip=this.getItemsPerPage()*(t-1),this}getPage(){return Math.floor((this.model.skip||0)/this.getItemsPerPage())+1}apply(){return this.model.changed(),this.nextStateChange}getEntitySubject(t){return this.entitySubjects.get(t instanceof this.classType?t.id:t)}has(t){return this.itemsMap.has(t)}get(t){return this.itemsMap.get(t)}setState(t){this.state=t,this.event.next({type:"state",state:t})}setSort(t){this.items.splice(0,this.items.length);for(const e of t){const t=this.itemsMap.get(e);t&&this.items.push(t)}this.event.next({type:"sort",ids:t}),this.loaded()}get nextStateChange(){return this.nextChange||(this.nextChange=new Promise(t=>{this.nextChangeResolver=t})),this.nextChange}unsubscribe(){super.unsubscribe();for(const t of this.teardowns)g(t);for(const t of this.entitySubjects.values())t.unsubscribe();this.teardowns.length=0}addTeardown(t){this.teardowns.push(t)}index(t){return this.items.indexOf(t)}getPageOf(t,e=10){const n=this.index(t);return-1===n?0:Math.floor(n/e)}reset(){this.items=[],this.entitySubjects.clear(),this.itemsMap.clear()}all(){return this.items}count(){return this.items.length}ids(){const t=[];for(const e of this.items)t.push(e.id);return t}empty(){return 0===this.items.length}map(){return this.itemsMap}loaded(){if(this.isStopped)throw new Error("Collection already unsubscribed");this.next(this.items),this.nextChangeResolver&&(this.nextChangeResolver(),this.nextChangeResolver=void 0,this.nextChange=void 0)}set(t,e=!0){for(const n of t)this.itemsMap.has(n.id)||this.added.next(n),this.itemsMap.delete(n.id);for(const n of this.itemsMap.values()){this.removed.next(n);const t=this.entitySubjects.get(n.id);t&&(t.unsubscribe(),this.entitySubjects.delete(n.id))}this.itemsMap.clear(),this.items=t;for(const n of t)this.itemsMap.set(n.id,n);e&&this.event.next({type:"set",items:t})}removeMany(t,e=!0){for(const n of t){const t=this.itemsMap.get(n);if(this.itemsMap.delete(n),t){const e=this.items.indexOf(t);-1!==e&&(this.removed.next(this.items[e]),this.items.splice(e,1))}const e=this.entitySubjects.get(n);e&&(e.unsubscribe(),this.entitySubjects.delete(n))}e&&this.event.next({type:"remove",ids:t})}update(t,e=!0){t=(0,i.kJ)(t)?t:[t];for(const n of t)if(this.itemsMap.has(n.id)){const t=this.items.indexOf(this.itemsMap.get(n.id));this.items[t]=n,this.itemsMap.set(n.id,n)}else this.items.push(n),this.itemsMap.set(n.id,n);e&&this.event.next({type:"update",items:t})}add(t,e=!0){if(!t)throw new Error(`Trying to insert a ${(0,i.gj)(this.classType)} collection item without value`);t=(0,i.kJ)(t)?t:[t];for(const n of t)if(this.added.next(n),this.itemsMap.has(n.id)){const t=this.items.indexOf(this.itemsMap.get(n.id));this.items[t]=n,this.itemsMap.set(n.id,n)}else this.items.push(n),this.itemsMap.set(n.id,n);e&&this.event.next({type:"add",items:t})}remove(t,e=!0){t=(0,i.kJ)(t)?t:[t];for(const n of t){const t=this.itemsMap.get(n);if(!t)continue;this.itemsMap.delete(n);const r=this.entitySubjects.get(n);null==r||r.unsubscribe(),this.entitySubjects.delete(n);const i=this.items.indexOf(t);-1!==i&&this.items.splice(i,1),e&&this.removed.next(t)}e&&this.event.next({type:"remove",ids:t})}}y=C;var T,E,O=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},A=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},P=function(t,e){return function(n,r){e(n,r,t)}};class k extends s.X{constructor(t,e){super(t),this.appendSubject=new l.xQ,this.nextOnAppend=!1,this.unsubscribed=!1,this.teardowns=[],e&&this.teardowns.push(e)}isUnsubscribed(){return this.unsubscribed}get nextStateChange(){return this.nextChange||(this.nextChange=new l.xQ),this.nextChange.toPromise()}addTearDown(t){this.unsubscribed?g(t):this.teardowns.push(t)}getValue(){if(this.hasError)throw this.thrownError;return this._value}next(t){super.next(t),this.nextChange&&(this.nextChange.complete(),delete this.nextChange)}activateNextOnAppend(){this.nextOnAppend=!0}toUTF8(){const t=new k(this.value instanceof Uint8Array?(0,o._E)(this.value,"utf8"):""),e=this.pipe(u(1)).subscribe(e=>{t.next(e instanceof Uint8Array?(0,o._E)(e,"utf8"):"")}),n=this.appendSubject.subscribe(e=>{t.append(e instanceof Uint8Array?(0,o._E)(e,"utf8"):"")});return t.nextOnAppend=this.nextOnAppend,t.addTearDown(()=>{e.unsubscribe(),n.unsubscribe(),this.unsubscribe()}),t}append(t){this.appendSubject.next(t),this.nextOnAppend?t instanceof Uint8Array?this.value instanceof Uint8Array?this.next(Buffer.concat([this.value,t])):this.next(t):this.next(this.getValue()+t):"string"==typeof t&&(this._value||(this._value=""),this._value=this._value+t)}unsubscribe(){if(!this.unsubscribed){this.unsubscribed=!0;for(const t of this.teardowns)g(t);super.unsubscribe()}}}const M=Symbol.for("deepkit/entitySubject");class I extends k{constructor(){super(...arguments),this.patches=new l.xQ,this.delete=new l.xQ,this[T]=!0,this.deleted=!1}get id(){return this.value.id}get onDeletion(){return new a.y(t=>{if(this.deleted)return void t.next();const e=this.delete.subscribe(()=>{t.next(),e.unsubscribe()});return{unsubscribe(){e.unsubscribe()}}})}next(t){if(void 0===t)return this.deleted=!0,this.delete.next(!0),void super.next(this.value);super.next(t)}}T=M;class R{constructor(t,e=[]){this.path=t,this.entities=e}}function D(t,e=[]){return new R(t,e)}let N=class{constructor(t){this.json=t}};N=O([(0,o.JH)("@error:json"),P(0,o.t.any.name("json")),A("design:paramtypes",[Object])],N);let L=class{constructor(t,e,n){this.path=t,this.code=e,this.message=n}toString(){return`${this.path}(${this.code}): ${this.message}`}};L=O([P(0,o.t.name("path")),P(1,o.t.name("code")),P(2,o.t.name("message")),A("design:paramtypes",[String,String,String])],L);let F=E=class extends i.sH{constructor(t){super(t.map(t=>`${t.path}(${t.code}): ${t.message}`).join(",")),this.errors=t}static from(t){return new E(t.map(t=>new L(t.path,t.message,t.code||"")))}};F=E=O([(0,o.JH)("@error:validation"),P(0,o.t.array(L).name("errors")),A("design:paramtypes",[Array])],F);let B=class{constructor(t,e,n,r){this.controller=t,this.action=e,this.arg=n,this.errors=r}get message(){return this.errors.map(t=>`${t.path}: ${t.message} (${t.code})`).join(",")}};B=O([(0,o.JH)("@error:parameter"),P(0,o.t.name("controller")),P(1,o.t.name("action")),P(2,o.t.name("arg")),P(3,o.t.array(L).name("errors")),A("design:paramtypes",[String,String,Number,Array])],B);var j=(()=>(function(t){t[t.Ack=0]="Ack",t[t.Error=1]="Error",t[t.Chunk=2]="Chunk",t[t.ChunkAck=3]="ChunkAck",t[t.Ping=4]="Ping",t[t.Pong=5]="Pong",t[t.Authenticate=6]="Authenticate",t[t.ActionType=7]="ActionType",t[t.Action=8]="Action",t[t.PeerRegister=9]="PeerRegister",t[t.PeerDeregister=10]="PeerDeregister",t[t.ClientId=11]="ClientId",t[t.ClientIdResponse=12]="ClientIdResponse",t[t.AuthenticateResponse=13]="AuthenticateResponse",t[t.ResponseActionType=14]="ResponseActionType",t[t.ResponseActionReturnType=15]="ResponseActionReturnType",t[t.ResponseActionSimple=16]="ResponseActionSimple",t[t.ResponseActionResult=17]="ResponseActionResult",t[t.ActionObservableSubscribe=18]="ActionObservableSubscribe",t[t.ActionObservableUnsubscribe=19]="ActionObservableUnsubscribe",t[t.ActionObservableSubjectUnsubscribe=20]="ActionObservableSubjectUnsubscribe",t[t.ResponseActionObservable=21]="ResponseActionObservable",t[t.ResponseActionBehaviorSubject=22]="ResponseActionBehaviorSubject",t[t.ResponseActionObservableNext=23]="ResponseActionObservableNext",t[t.ResponseActionObservableComplete=24]="ResponseActionObservableComplete",t[t.ResponseActionObservableError=25]="ResponseActionObservableError",t[t.ActionCollectionUnsubscribe=26]="ActionCollectionUnsubscribe",t[t.ActionCollectionModel=27]="ActionCollectionModel",t[t.ResponseActionCollection=28]="ResponseActionCollection",t[t.ResponseActionCollectionModel=29]="ResponseActionCollectionModel",t[t.ResponseActionCollectionSort=30]="ResponseActionCollectionSort",t[t.ResponseActionCollectionState=31]="ResponseActionCollectionState",t[t.ResponseActionCollectionChange=32]="ResponseActionCollectionChange",t[t.ResponseActionCollectionSet=33]="ResponseActionCollectionSet",t[t.ResponseActionCollectionAdd=34]="ResponseActionCollectionAdd",t[t.ResponseActionCollectionRemove=35]="ResponseActionCollectionRemove",t[t.ResponseActionCollectionUpdate=36]="ResponseActionCollectionUpdate",t[t.ResponseEntity=37]="ResponseEntity",t[t.Entity=38]="Entity",t[t.EntityPatch=39]="EntityPatch",t[t.EntityRemove=40]="EntityRemove"}(j||(j={})),j))();const $=o.t.schema({id:o.t.type(Uint8Array)}),U=o.t.schema({id:o.t.number,total:o.t.number,v:o.t.type(Uint8Array)}),V=o.t.schema({id:o.t.number}),Z=o.t.schema({classType:o.t.string,message:o.t.string,stack:o.t.string,properties:o.t.map(o.t.any).optional}),z=Z.extend({id:o.t.number});var H=(()=>(function(t){t[t.observable=0]="observable",t[t.subject=1]="subject",t[t.behaviorSubject=2]="behaviorSubject"}(H||(H={})),H))();o.t.schema({field:o.t.string,direction:o.t.union("asc","desc")});const q=o.t.schema({type:o.t.enum(H)}),Y=o.t.schema({token:o.t.any}),G=o.t.schema({username:o.t.string}),W=o.t.schema({controller:o.t.string,method:o.t.string}),J=o.t.schema({controller:o.t.string,method:o.t.string}),X=o.t.schema({parameters:o.t.array(o.IP),result:o.t.type(o.IP)}),Q=o.t.schema({id:o.t.string}),K=o.t.schema({id:o.t.string}),tt=o.t.schema({ids:o.t.array(o.t.union(o.t.string,o.t.number))}),et=o.t.schema({ids:o.t.array(o.t.union(o.t.string,o.t.number))}),nt=o.t.schema({entityName:o.t.string,ids:o.t.array(o.t.union(o.t.string,o.t.number))}),rt=o.t.schema({entityName:o.t.string,id:o.t.union(o.t.string,o.t.number),version:o.t.number,patch:o.t.type({$set:o.t.map(o.t.any).optional,$unset:o.t.map(o.t.number).optional,$inc:o.t.map(o.t.number).optional})});class it extends Error{constructor(t="Authentication failed"){super(t)}}var ot=n(91463);class st{constructor(t,e,n,r,i,o,s){this.id=t,this.composite=e,this.type=n,this.routeType=r,this.bodyOffset=i,this.bodySize=o,this.buffer=s}getBuffer(){if(!this.buffer)throw new Error("No buffer");return this.buffer}getPeerId(){if(!this.buffer)throw new Error("No buffer");if(3!==this.routeType)throw new Error(`Message is not routed via peer, but ${this.routeType}`);if(this.peerId)return this.peerId;this.peerId="";for(let t=26,e=this.buffer[t];0!==e;t++,e=this.buffer[t])this.peerId+=String.fromCharCode(e);return this.peerId}getSource(){if(!this.buffer)throw new Error("No buffer");if(2!==this.routeType&&3!==this.routeType)throw new Error(`Message is not routed via sourceDest, but ${this.routeType}`);return this.buffer.slice(10,26)}getDestination(){if(!this.buffer)throw new Error("No buffer");if(2!==this.routeType)throw new Error(`Message is not routed via sourceDest, but ${this.routeType}`);return this.buffer.slice(26,42)}getError(){if(!this.buffer)throw new Error("No buffer");return mt((0,ot.KW)(Z)(this.buffer,this.bodyOffset))}isError(){return this.type===j.Error}parseBody(t){if(!this.bodySize)throw new Error("Message has no body");if(!this.buffer)throw new Error("No buffer");if(this.composite)throw new Error("Composite message can not be read directly");return t.jit.bsonEncoder||(0,ot.KW)(t),t.jit.bsonEncoder(this.buffer,this.bodyOffset)}getBodies(){if(!this.composite)throw new Error("Not a composite message");const t=[],e=this.getBuffer(),n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(0,!0);let i=this.bodyOffset;for(;i<r;){const r=n.getUint32(i,!0);i+=4;const o=n.getUint8(i++);t.push(new st(this.id,!1,o,this.routeType,i,r,e)),i+=r}return t}}class at extends st{constructor(t,e){super(t,!1,j.Error,0,0,0),this.id=t,this.error=e}getError(){return this.error}}function lt(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=e.getUint32(0,!0);if(n!==t.byteLength)throw new Error(`Message buffer size wrong. Message size=${n}, buffer size=${t.byteLength}`);const r=e.getUint32(5,!0);let i=9;const o=t[i++];if(3===o)for(i+=16;0!==t[i++];);else 2===o&&(i+=32);const s=1===t[i++],a=t[i++];return new st(r,s,a,o,i,n-i,t)}const ct="undefined"!=typeof Buffer&&"function"==typeof Buffer.allocUnsafe?Buffer.allocUnsafe:t=>new Uint8Array(t);function ut(t,e,n,r,i=0){n&&(n.jit.bsonSizer||(0,ot.NS)(n),n.jit.bsonSerializer||(0,ot.MY)(n));const o=12+(n&&r?n.jit.bsonSizer(r):0),s=new ot.QV(ct(o));return s.writeUint32(o),s.writeByte(1),s.writeUint32(t),s.writeByte(i),s.writeByte(0),s.writeByte(e),n&&r&&n.jit.bsonSerializer(r,s),s.buffer}function ht(t,e,n,r,i,o){const s=i&&o?(0,ot.NS)(i)(o):0,a=10+(16+r.length+1)+1+1+s,l=new ot.QV(ct(a));if(l.writeUint32(a),l.writeByte(1),l.writeUint32(t),l.writeByte(3),16!==n.byteLength)throw new Error(`Source invalid byteLength of ${n.byteLength}`);return l.writeBuffer(n),l.writeAsciiString(r),l.writeNull(),l.writeByte(0),l.writeByte(e),i&&o&&(0,ot.MY)(i)(o,l),l.buffer}class dt{constructor(t,e){this.onMessage=t,this.onChunk=e,this.chunks=new Map,this.progress=new Map,this.chunkAcks=new Map,this.bufferReader=new pt(this.gotMessage.bind(this))}onChunkAck(t,e){this.chunkAcks.set(t,e)}registerProgress(t,e){this.progress.set(t,e)}feed(t,e){this.bufferReader.feed(t,e)}gotMessage(t){const e=lt(t);if(e.type===j.ChunkAck){const t=this.chunkAcks.get(e.id);t&&t()}else if(e.type===j.Chunk){const t=this.progress.get(e.id),n=e.parseBody(U);let r=this.chunks.get(n.id);if(r||(r={buffers:[],loaded:0},this.chunks.set(n.id,r)),r.buffers.push(n.v),r.loaded+=n.v.byteLength,this.onChunk&&this.onChunk(e.id),t&&t.set(n.total,r.loaded),r.loaded===n.total){this.progress.delete(e.id),this.chunks.delete(n.id),this.chunkAcks.delete(n.id);let t=0;const i=ct(n.total);for(const e of r.buffers)i.set(e,t),t+=e.byteLength;this.onMessage(lt(i))}}else{const n=this.progress.get(e.id);n&&(n.set(t.byteLength,t.byteLength),this.progress.delete(e.id)),this.onMessage(e)}}}function ft(t,e=0){return t[e]+256*t[e+1]+65536*t[e+2]+t[e+3]*2**24}class pt{constructor(t){this.onMessage=t,this.currentMessageSize=0}emptyBuffer(){return void 0===this.currentMessage}feed(t,e){if(!t.byteLength)return;if(e||(e=t.byteLength),this.currentMessage){if(this.currentMessage=Buffer.concat([this.currentMessage,t.byteLength===e?t:t.slice(0,e)]),!this.currentMessageSize){if(this.currentMessage.byteLength<4)return;this.currentMessageSize=ft(this.currentMessage)}}else{if(t.byteLength<4)return;this.currentMessage=t.byteLength===e?t:t.slice(0,e),this.currentMessageSize=ft(t)}let n=this.currentMessageSize,r=this.currentMessage;for(;r;){if(n>r.byteLength)return this.currentMessage=new Uint8Array(r),void(this.currentMessageSize=n);if(n===r.byteLength)return this.currentMessageSize=0,this.currentMessage=void 0,void this.onMessage(r);if(n<r.byteLength){const t=r.slice(0,n);if(this.onMessage(t),r=r.slice(n),r.byteLength<4)return void(this.currentMessage=r);const e=ft(r);if(e<=0)throw new Error("message size wrong");n=e}}}}function gt(t){let e,n="",r="";if("string"!=typeof t){const i=(0,o.VI)(t.constructor);r=t.stack||"",i.name&&(n=i.name,i.getPropertiesMap().size&&(e=o.$r.for(i).serialize(t)))}return{classType:n,properties:e,stack:r,message:"string"==typeof t?t:t.message}}function mt(t){if(t.classType){const e=(0,o.zJ)().RegisteredEntities[t.classType];if(!e)throw new Error(`Could not find an entity named ${t.classType} for an error thrown. Make sure the class is loaded and correctly defined using @entity.name(${JSON.stringify(t.classType)})`);const n=(0,o.VI)(e).classType;if(t.properties){const n=o.$r.for((0,o.VI)(e)).deserialize(t.properties);return n.stack=t.stack+"\nat ___SERVER___",n}return new n(t.message)}const e=new Error(t.message);return e.stack=t.stack+"\nat ___SERVER___",e}class yt extends s.X{constructor(){super(0),this.done=!1,this.total=0,this.current=0,this.stats=0,this.lastTime=0,this.finished=new Promise(t=>{this.triggerFinished=t})}setStart(t){this.total=t,this.lastTime=Date.now()}setBatch(t){this.current+=t,this.lastTime=Date.now()}get progress(){return this.done?1:0===this.total?0:this.current/this.total}set(t,e){this.done||(this.total=t,this.current=e,this.done=t===e,this.stats++,this.next(this.total>0?this.current/this.total:0),this.done&&(this.complete(),this.triggerFinished&&this.triggerFinished()))}}class vt extends s.X{constructor(){super(0),this.upload=new yt,this.download=new yt}}class bt{constructor(t,e){this.writer=t,this.reader=e,this.chunkId=0,this.cacheOnFileSystemWhenSizeIsAtLeast=1e6,this.stepBackWhenBackPressureBiggerThan=5e5,this.chunkSize=1e5}close(){this.writer.close()}write(t,e){this.writeFull(t,e).catch(t=>console.log("RpcMessageWriter writeAsync error",t))}writeFull(t,e){var n=this;return(0,r.Z)(function*(){if(t.byteLength>=n.chunkSize){const r=n.chunkId++,i=lt(t);let o=0;for(;o<t.byteLength;){const s=t.slice(o,o+n.chunkSize),a=ut(i.id,j.Chunk,U,{id:r,total:t.byteLength,v:s});o+=s.byteLength;const l=new Promise(t=>{n.reader.onChunkAck(i.id,t)});n.writer.write(a),yield l,null==e||e.set(t.byteLength,o)}}else n.writer.write(t),null==e||e.set(t.byteLength,t.byteLength)})()}}class _t{static getNext(){if(_t.nextProgress){const t=_t.nextProgress;return _t.nextProgress=void 0,t}}static track(){const t=new vt;return _t.nextProgress=t,t}}class wt{constructor(t){this.schema=t,this.store=new Map,this.onCreation=new Map}isRegistered(t){return this.store.has(t)}register(t){this.store.set(t.id,{item:t,forks:[]});const e=this.onCreation.get(t.id);if(e){for(const t of e.calls)t();this.onCreation.delete(t.id)}}deregister(t){this.store.delete(t)}getItem(t){var e;return null===(e=this.store.get(t))||void 0===e?void 0:e.item}registerOnCreation(t,e){let n=this.onCreation.get(t);n||(n={calls:[]},this.onCreation.set(t,n)),n.calls.push(e)}onDelete(t){const e=this.store.get(t);if(e){for(const t of e.forks)t.delete.next(!0);this.deregister(t)}}onSet(t,e){const n=this.store.get(t);if(n){n.item=e;for(const t of n.forks)t.next(e)}else this.registerOnCreation(t,()=>this.onSet(t,e))}onPatch(t,e,n){const r=this.store.get(t);if(r){if(r.item.version!==e){if(r.item.version=e,n.$set){const t=o.$r.for(this.schema).patchDeserialize(n.$set);for(const e in t)(0,i.VA)(r.item,e,t[e])}if(n.$inc)for(const t in n.$inc)"version"!==t&&(0,i.VA)(r.item,t,(0,i.aM)(r.item,t)+n.$inc[t]);if(n.$unset)for(const t in n.$unset)(0,i.f_)(r.item,t);for(const t of r.forks)t.patches.next(n),t.next(r.item)}}else this.registerOnCreation(t,()=>this.onPatch(t,e,n))}forkUnregistered(t,e){const n=this.store.get(t);n&&((0,i.lH)(n.forks,e),0===n.forks.length&&this.deregister(t))}createFork(t){let e=this.store.get(t);if(!e)throw new Error("Could not create fork from unknown item "+t);const n=new I(e.item,()=>{this.forkUnregistered(t,n)});return e.forks.push(n),n}getForkCount(t){const e=this.store.get(t);return e?e.forks.length:0}getEntitySubjectCount(){return this.store.size}}class xt{constructor(){this.store=new Map,this.storeByName=new Map}getStore(t){const e=(0,o.VI)(t);let n=this.store.get(e);return n||(n=new wt(e),this.store.set(e,n),this.storeByName.set(e.getName(),n)),n}getStoreByName(t){let e=this.storeByName.get(t);if(!e)throw new Error(`No store for entity ${t}`);return e}createEntitySubject(t,e,n){if(n.type!==j.ResponseEntity)throw new Error("Not a response entity message");const r=n.parseBody(e).v,i=this.getStore(t);return i.isRegistered(r.id)||i.register(r),i.createFork(r.id)}handle(t){for(const e of t.getBodies())switch(e.type){case j.EntityPatch:{const t=e.parseBody(rt);this.getStoreByName(t.entityName).onPatch(t.id,t.version,t.patch);break}case j.EntityRemove:{const t=e.parseBody(nt);for(const e of t.ids)this.getStoreByName(t.entityName).onDelete(e);break}}}}class Ct{constructor(t){this.controller=t,this.state={}}getState(t){let e=this.state[t];return e||(e=this.state[t]={},(0,i.SV)(this.state),e)}}function St(t,e){const n=o.GR.fromJSON(e);n.name="v";const r=(0,o.E4)();r.registerProperty(n),t.resultProperty=n,t.resultSchema=r,t.collectionSchema=(0,o.E4)();const i=new o.GR("v");i.setType("array"),i.templateArgs.push(n),t.collectionSchema.registerProperty(i);const s=V.clone();s.registerProperty(n),t.observableNextSchema=s}class Tt{constructor(t){this.client=t,this.entityState=new xt}action(t,e,n,c={}){var u=this;return(0,i.KR)(function(){var i=(0,r.Z)(function*(r,i){var h;try{const d=_t.getNext(),f=(null===(h=t.getState(e))||void 0===h?void 0:h.types)||(yield u.loadActionTypes(t,e,c)),p={};for(let t=0;t<n.length;t++)p[f.parameters[t]]=n[t];let g,m,y,v,b,_=!1,x=0;const C={};_t.nextProgress=d;const T=u.client.sendMessage(j.Action,f.parameterSchema,{controller:t.controller,method:e,args:p},{peerId:t.peerId,dontWaitForConnection:c.dontWaitForConnection,timeout:c.timeout}).onReply(t=>{try{if(t.type===j.ResponseActionResult){const e=t.getBodies();if(2===e.length){if(e[0].type!==j.ResponseActionReturnType)return i(new Error("RpcTypes.ResponseActionResult should contain as first body RpcTypes.ResponseActionReturnType"));St(f,e[0].parseBody(o.IP)),t=e[1]}else t=e[0]}switch(t.type){case j.ResponseEntity:r(u.entityState.createEntitySubject(f.resultProperty.getResolvedClassSchema(),f.resultSchema,t));break;case j.ResponseActionSimple:{T.release();const e=t.parseBody(f.resultSchema);r(e.v);break}case j.ResponseActionReturnType:St(f,t.parseBody(o.IP));break;case j.ResponseActionObservableError:{const e=t.parseBody(z),n=mt(e);if(g){if(!C[e.id])return;C[e.id].error(n)}else m&&m.error(n);break}case j.ResponseActionObservableComplete:{const e=t.parseBody(V);if(g){if(!C[e.id])return;C[e.id].complete()}else m&&m.complete();break}case j.ResponseActionObservableNext:{const e=t.parseBody(f.observableNextSchema);if(g){if(!C[e.id])return;C[e.id].next(e.v)}else m?m.next(e.v):(y=e.v,_=!0);break}case j.ResponseActionBehaviorSubject:{const e=t.parseBody(f.observableNextSchema);m=new s.X(e.v),r(m);break}case j.ResponseActionObservable:{g&&console.error("Already got ActionResponseObservable");const e=t.parseBody(q);e.type===H.observable?(g=new a.y(t=>{const e=x++;return C[e]=t,T.send(j.ActionObservableSubscribe,V,{id:e}),{unsubscribe:()=>{delete C[e],T.send(j.ActionObservableUnsubscribe,V,{id:e})}}}),r(g)):e.type===H.subject?(m=new l.xQ,m.unsubscribe=()=>{l.xQ.prototype.unsubscribe.call(m),T.send(j.ActionObservableSubjectUnsubscribe)},_&&(m.next(y),y=void 0),r(m)):e.type===H.behaviorSubject&&(m=new s.X(y),y=void 0,m.unsubscribe=()=>{l.xQ.prototype.unsubscribe.call(m),T.send(j.ActionObservableSubjectUnsubscribe)},r(m));break}case j.ResponseActionCollectionChange:if(!v)throw new Error("No collection loaded yet");if(!f.collectionSchema)throw new Error("no collectionSchema loaded yet");if(!b)throw new Error("no collectionEntityStore loaded yet");u.handleCollection(b,f,v,t.getBodies());break;case j.ResponseActionCollection:{const e=t.getBodies();e[0].type===j.ResponseActionReturnType&&St(f,e[0].parseBody(o.IP));const n=f.resultProperty.getResolvedClassType();v=new S(n),b=u.entityState.getStore(n),v.model.change.subscribe(()=>{T.send(j.ActionCollectionModel,(0,o.VI)(w),v.model)}),v.addTeardown(()=>{T.send(j.ActionCollectionUnsubscribe)}),u.handleCollection(b,f,v,e),r(v);break}case j.Error:{T.release();const e=t.getError();i(e);break}default:console.log(`Unexpected type received ${t.type} ${j[t.type]}`)}}catch(e){console.warn("reply error",t.id,j[t.type],e),i(e)}})}catch(d){i(d)}});return function(t,e){return i.apply(this,arguments)}}())}handleCollection(t,e,n,r){for(const i of r)switch(i.type){case j.ResponseActionCollectionState:{const t=i.parseBody((0,o.VI)(x));n.setState(t);break}case j.ResponseActionCollectionSort:{const t=i.parseBody(et);n.setSort(t.ids);break}case j.ResponseActionCollectionModel:n.model.set(i.parseBody((0,o.VI)(w)));break;case j.ResponseActionCollectionUpdate:case j.ResponseActionCollectionAdd:{if(!e.collectionSchema)continue;const r=i.parseBody(e.collectionSchema).v,o=[];for(const e of r){t.isRegistered(e.id)||t.register(e),i.type===j.ResponseActionCollectionUpdate&&t.onSet(e.id,e);let r=n.entitySubjects.get(e.id);r||(r=t.createFork(e.id),n.entitySubjects.set(e.id,r)),o.push(r.value),r.pipe(u(1)).subscribe(t=>{r.deleted||(n.deepChange.next(t),n.loaded())})}i.type===j.ResponseActionCollectionAdd?n.add(o):i.type===j.ResponseActionCollectionUpdate&&n.update(o);break}case j.ResponseActionCollectionRemove:{const t=i.parseBody(tt).ids;n.remove(t);break}case j.ResponseActionCollectionSet:{if(!e.collectionSchema)continue;const r=i.parseBody(e.collectionSchema).v,o=[];for(const e of r){t.isRegistered(e.id)||t.register(e);const r=t.createFork(e.id);n.entitySubjects.set(e.id,r),o.push(r.value),r.pipe(u(1)).subscribe(t=>{r.deleted||(n.deepChange.next(t),n.loaded())})}n.set(o);break}}n.loaded()}loadActionTypes(t,e,n={}){var s=this;return(0,r.Z)(function*(){const a=t.getState(e);if(a.types)return a.types;if(a.promise)return a.promise;a.promise=(0,i.KR)(function(){var i=(0,r.Z)(function*(r,i){try{const i=yield s.client.sendMessage(j.ActionType,J,{controller:t.controller,method:e},{peerId:t.peerId,dontWaitForConnection:n.dontWaitForConnection,timeout:n.timeout}).firstThenClose(j.ResponseActionType,X),l=[],c=(0,o.E4)();for(const t of i.parameters){const e=o.GR.fromJSON(t);c.registerProperty(e),l.push(t.name)}const u=o.GR.fromJSON(i.result);u.name="v";const h=(0,o.E4)();h.registerProperty(u);const d=V.clone();d.registerProperty(u);const f=(0,o.E4)(),p=new o.GR("v");p.setType("array"),p.templateArgs.push(u),f.registerProperty(p),a.types={parameters:l,parameterSchema:W.extend({args:c}),resultProperty:u,resultSchema:h,observableNextSchema:d,collectionSchema:f},r(a.types)}catch(l){i(l)}});return function(t,e){return i.apply(this,arguments)}}());try{return yield a.promise}catch(l){throw a.promise=void 0,l}})()}}class Et extends i.sH{}class Ot{constructor(t,e){this.continuation=t,this.release=e,this.catchOnReplyCallback=this.onReplyCallback.bind(this)}onReplyCallback(t){this.uncatchedNext=t}next(t){this.onReplyCallback(t)}onReply(t){return this.onReplyCallback=t,this.uncatchedNext&&(t(this.uncatchedNext),this.uncatchedNext=void 0),this}send(t,e,n){return this.continuation(t,e,n),this}ackThenClose(){var t=this;return(0,r.Z)(function*(){return(0,i.KR)((e,n)=>{t.onReply(r=>(t.onReplyCallback=t.catchOnReplyCallback,t.release(),r.type===j.Ack?e(void 0):r.isError()?n(r.getError()):void n(new Et(`Expected message type Ack, but received ${r.type}`))))})})()}waitNextMessage(){var t=this;return(0,r.Z)(function*(){return(0,i.KR)((e,n)=>{t.onReply(n=>(t.onReplyCallback=t.catchOnReplyCallback,e(n)))})})()}waitNext(t,e){var n=this;return(0,r.Z)(function*(){return(0,i.KR)((r,i)=>{n.onReply(o=>(n.onReplyCallback=n.catchOnReplyCallback,o.type===t?r(e?o.parseBody(e):void 0):o.isError()?(n.release(),i(o.getError())):void i(new Et(`Expected message type ${t}, but received ${o.type}`))))})})()}firstThenClose(t,e){var n=this;return(0,r.Z)(function*(){return(0,i.KR)((r,i)=>{n.onReply(o=>(n.onReplyCallback=n.catchOnReplyCallback,n.release(),o.type===t?r(e?o.parseBody(e):o):o.isError()?(n.release(),i(o.getError())):void i(new Et(`Expected message type ${t}, but received ${o.type}`))))})})()}}class At{constructor(){this.actions=new Map}getPath(){return this.definition?this.definition.path:this.name||""}}class Pt{constructor(){this.groups=[]}}const kt=(0,o.$W)(class{constructor(){this.t=new At}controller(t){"string"==typeof t?this.t.name=t:this.t.definition=t}addAction(t,e){this.t.actions.set(t,e)}}),Mt=(0,o.Fy)(class{constructor(){this.t=new Pt}onDecorator(t,e){this.t.name=e,this.t.classType=t,kt.addAction(e,this.t)(t)}action(){}group(...t){this.t.groups.push(...t)}});(0,o.b)(kt,Mt);class It{constructor(t,e,n,r){this.controllers=t,this.injector=e,this.security=n,this.sessionState=r,this.cachedActionsTypes={},this.observableSubjects={},this.collections={},this.observables={}}handleActionTypes(t,e){var n=this;return(0,r.Z)(function*(){const r=t.parseBody(J),i=yield n.loadTypes(r.controller,r.method);e.reply(j.ResponseActionType,X,{parameters:i.parameters.map(t=>t.toJSON()),result:i.resultSchema.getProperty("v").toJSON()})})()}onClose(){var t=this;return(0,r.Z)(function*(){for(const e of Object.values(t.collections))e.collection.closed||(e.unsubscribe(),e.collection.unsubscribe());for(const e of Object.values(t.observables))for(const t of Object.values(e.subscriptions))t.sub&&!t.sub.closed&&t.sub.unsubscribe();for(const e of Object.values(t.observableSubjects))e.subject.closed||e.subject.complete()})()}loadTypes(t,e){var n=this;return(0,r.Z)(function*(){const r=t+"!"+e;let s=n.cachedActionsTypes[r];if(s)return s;const l=n.controllers.get(t);if(!l)throw new Error(`No controller registered for id ${t}`);const c=function(t){var e,n;return null!==(n=null===(e=kt._fetch(t))||void 0===e?void 0:e.actions)&&void 0!==n?n:new Map}(l).get(e);if(!c)throw new Error(`Action unknown ${e}`);if(!(yield n.security.hasControllerAccess(n.sessionState.getSession(),c)))throw new Error(`Access denied to action ${e}`);const u=function(t,e){return(0,o.VI)(t).getMethodProperties(e)}(l,e),h=(0,o.E4)();for(let t=0;t<u.length;t++)h.registerProperty(u[t]);let d=(0,o.VI)(l).getMethod(e).clone();if(d.classType){const t=d.templateArgs[0];t?d=t.clone():((0,i.Jn)(d.classType,a.y)||(0,i.Jn)(d.classType,S)||(0,i.Jn)(d.classType,Promise)||(0,i.Jn)(d.classType,I))&&(d.type="any",d.typeSet=!1)}d.name="v",d.isOptional=!0;const f=V.clone();f.registerProperty(d);const p=(0,o.E4)();return p.registerProperty(d),s=n.cachedActionsTypes[r]={parameters:u,parameterSchema:o.t.schema({args:h}),resultSchema:p,resultProperty:d,resultPropertyChanged:0,parametersDeserialize:(0,o.GD)(h,o.$r),parametersValidate:(0,o.jx)(h),observableNextSchema:f},(0,i.SV)(n.cachedActionsTypes),s})()}handle(t,e){var n=this;return(0,r.Z)(function*(){switch(t.type){case j.ActionObservableSubscribe:{const r=n.observables[t.id];if(!r)return e.error(new Error("No observable found"));const{types:s,classType:a,method:l}=r,c=t.parseBody(V);if(r.subscriptions[c.id])return e.error(new Error("Subscription already created"));const u={active:!0};r.subscriptions[c.id]=u,u.sub=r.observable.subscribe(t=>{const n=Rt(t,s.resultProperty);n&&(s.observableNextSchema=V.clone(),s.observableNextSchema.registerProperty(n),s.resultProperty=n,s.resultPropertyChanged++,10===s.resultPropertyChanged&&console.warn(`The emitted next value of the Observable of method ${(0,i.IP)(a,l)} changed 10 times. You should add a @t.union() annotation to improve serialization performance.`),e.reply(j.ResponseActionReturnType,o.IP,n.toJSON())),u.active&&e.reply(j.ResponseActionObservableNext,s.observableNextSchema,{id:c.id,v:t})},t=>{const n=gt(t);e.reply(j.ResponseActionObservableError,z,{...n,id:c.id})},()=>{e.reply(j.ResponseActionObservableComplete,V,{id:c.id})});break}case j.ActionCollectionUnsubscribe:{const r=n.collections[t.id];if(!r)return e.error(new Error("No collection found"));r.unsubscribe(),delete n.collections[t.id];break}case j.ActionCollectionModel:{const r=n.collections[t.id];if(!r)return e.error(new Error("No collection found"));const i=t.parseBody((0,o.VI)(w));r.collection.model.set(i),r.collection.model.changed();break}case j.ActionObservableUnsubscribe:{const r=n.observables[t.id];if(!r)return e.error(new Error("No observable found"));const i=t.parseBody(V),o=r.subscriptions[i.id];if(!o)return e.error(new Error("No subscription found"));o.active=!1,o.sub&&o.sub.unsubscribe(),delete r.subscriptions[i.id];break}case j.ActionObservableSubjectUnsubscribe:{const r=n.observableSubjects[t.id];if(!r)return e.error(new Error("No observable found"));r.completedByClient=!0,r.subject.complete(),delete n.observableSubjects[t.id];break}}})()}handleAction(t,e){var n=this;return(0,r.Z)(function*(){const r=t.parseBody(J),s=n.controllers.get(r.controller);if(!s)throw new Error(`No controller registered for id ${r.controller}`);const a=yield n.loadTypes(r.controller,r.method),l=t.parseBody(a.parameterSchema),c=n.injector.get(s),u=a.parametersDeserialize(l.args),h=a.parametersValidate(u);if(h.length)return e.error(new F(h));try{const u=yield c[r.method](...Object.values(l.args));if((d=u)&&(0,i.Kn)(d)&&d.hasOwnProperty(M)){const t=Rt(u.value,a.resultProperty);t&&(a.resultSchema=(0,o.E4)(),a.resultSchema.registerProperty(t),a.resultProperty=t,a.resultPropertyChanged++,e.reply(j.ResponseActionReturnType,o.IP,t.toJSON())),e.reply(j.ResponseEntity,a.resultSchema,{v:u.value})}else if(function(t){return!!t&&(0,i.Kn)(t)&&t.hasOwnProperty(C)}(u)){const r=u,s=new o.GR("v");s.setFromJSType(r.classType),a.resultSchema=(0,o.E4)(),a.resultSchema.registerProperty(s),a.resultProperty=s,a.collectionSchema=(0,o.E4)();const l=new o.GR("v");l.setType("array"),l.templateArgs.push(s),a.collectionSchema.registerProperty(l),a.resultPropertyChanged++,e.composite(j.ResponseActionCollection).add(j.ResponseActionReturnType,o.IP,s.toJSON()).add(j.ResponseActionCollectionModel,w,r.model).add(j.ResponseActionCollectionState,x,r.state).add(j.ResponseActionCollectionSet,a.collectionSchema,{v:r.all()}).send();let c=!1;const h=r.event.subscribe((0,i.ef)(t=>{if(c)return;const n=e.composite(j.ResponseActionCollectionChange);for(const e of t)"add"===e.type?n.add(j.ResponseActionCollectionAdd,a.collectionSchema,{v:e.items}):"remove"===e.type?n.add(j.ResponseActionCollectionRemove,tt,{ids:e.ids}):"update"===e.type?n.add(j.ResponseActionCollectionUpdate,a.collectionSchema,{v:e.items}):"set"===e.type?n.add(j.ResponseActionCollectionSet,a.collectionSchema,{v:r.all()}):"state"===e.type?n.add(j.ResponseActionCollectionState,x,r.state):"sort"===e.type&&n.add(j.ResponseActionCollectionSort,et,{ids:e.ids});n.send()}));r.addTeardown(()=>{const e=n.collections[t.id];e&&e.unsubscribe()}),n.collections[t.id]={collection:r,unsubscribe:()=>{c||(c=!0,h.unsubscribe(),r.unsubscribe())}}}else if((0,f.b)(u)){n.observables[t.id]={observable:u,subscriptions:{},types:a,classType:s,method:r.method};let l=H.observable;p(u)&&(l=H.subject,n.observableSubjects[t.id]={subject:u,completedByClient:!1,subscription:u.subscribe(n=>{if("class"===a.resultProperty.type&&a.resultProperty.classType&&n&&!(n instanceof a.resultProperty.classType))return void console.warn(`The subject in action ${(0,i.IP)(s,r.method)} has a class type assigned of ${(0,i.gj)(a.resultProperty.classType)} but emitted something different of type ${(0,i.TG)(n)}. Either annotate the method with t.union() or make sure it emits the correct type.`);const l=Rt(n,a.resultProperty);l&&(a.observableNextSchema=V.clone(),a.observableNextSchema.registerProperty(l),a.resultProperty=l,a.resultPropertyChanged++,10===a.resultPropertyChanged&&console.warn(`The emitted next value of the Observable of method ${(0,i.IP)(s,r.method)} changed 10 times. You should add a @t.union() annotation to improve serialization performance.`),e.reply(j.ResponseActionReturnType,o.IP,l.toJSON())),e.reply(j.ResponseActionObservableNext,a.observableNextSchema,{id:t.id,v:n})},n=>{const r=gt(n);e.reply(j.ResponseActionObservableError,z,{...r,id:t.id})},()=>{const r=n.observableSubjects[t.id];r&&r.completedByClient||e.reply(j.ResponseActionObservableComplete,V,{id:t.id})})},function(t){return t&&(0,i.mf)(t.getValue)&&p(t)}(u)&&(l=H.behaviorSubject)),e.reply(j.ResponseActionObservable,q,{type:l})}else{const t=Rt(u,a.resultProperty);if(t){console.warn(`The result type of method ${(0,i.IP)(s,r.method)} changed from ${a.resultProperty.toString()} to ${t.toString()}. You should add a @t annotation to improve serialization performance.`),a.resultSchema=(0,o.E4)(),a.resultSchema.registerProperty(t),a.resultProperty=t,a.resultPropertyChanged++;const n=e.composite(j.ResponseActionResult);n.add(j.ResponseActionReturnType,o.IP,t.toJSON()),n.add(j.ResponseActionSimple,a.resultSchema,{v:u}),n.send()}else e.reply(j.ResponseActionSimple,a.resultSchema,{v:u})}}catch(g){e.error(g)}var d})()}}function Rt(t,e){if(function(t,e){return null!=t&&("number"===e.type&&"number"!=typeof t&&"bigint"!=typeof t||"string"===e.type&&"string"!=typeof t||"uuid"===e.type&&"string"!=typeof t||"objectId"===e.type&&"string"!=typeof t||"boolean"===e.type&&"boolean"!=typeof t||!("date"!==e.type||t instanceof Date)||!("arrayBuffer"!==e.type||t instanceof ArrayBuffer)||"map"===e.type&&!(0,i.PO)(t)||"array"===e.type&&!(0,i.kJ)(t)||"any"===e.type&&!1===e.typeSet||!("class"!==e.type||t instanceof e.getResolvedClassType()))}(t,e)){const e=new o.GR("v");return e.setFromJSValue(t),e}}class Dt{constructor(t,e){this.username=t,this.token=e}isAnonymous(){return void 0===this.token}}class Nt{hasControllerAccess(t,e){return(0,r.Z)(function*(){return!0})()}isAllowedToRegisterAsPeer(t,e){return(0,r.Z)(function*(){return!0})()}isAllowedToSendToPeer(t,e){return(0,r.Z)(function*(){return!0})()}authenticate(t){return(0,r.Z)(function*(){throw new Error("Authentication not implemented")})()}}class Lt{constructor(){this.session=new Dt("anon",void 0)}setSession(t){this.session=t}getSession(){return this.session}}class Ft{constructor(t=[]){this.tags=t}resolve(t){return this.tags.filter(e=>e.tag instanceof t)}}class Bt{constructor(t,e){this.provider=t,this.tag=e}}class jt{constructor(t=[]){this.services=t}createTagProvider(t){return new Bt(t,this)}static provide(t){const e=new this;return(0,i.HV)(t)?e.createTagProvider({provide:t}):e.createTagProvider(t)}}function $t(t){return t.provide&&t.hasOwnProperty("useValue")}function Ut(t){return t.provide&&!$t(t)&&!Vt(t)&&!Zt(t)}function Vt(t){return t.provide&&t.hasOwnProperty("useExisting")}function Zt(t){return t.provide&&t.hasOwnProperty("useFactory")}class zt{constructor(t,e){this.name=t,this.config=e,this.setupProviderRegistry=new ce}getName(){return this.name}getConfig(){return this.config}setConfig(t){Object.assign(this.config,t)}getConfiguredProviderRegistry(){return this.setupProviderRegistry}setupProvider(t){return ue(t,this.setupProviderRegistry)}}class Ht{constructor(t,e){this.config=t,this.name=e}}class qt{constructor(t,e){Object.defineProperties(this,{config:{enumerable:!1,value:t},names:{enumerable:!1,value:e},bag:{enumerable:!1,writable:!0}});for(const n of e)Object.defineProperty(this,n,{enumerable:!0,get:()=>this.bag?this.bag[n]:void 0})}valueOf(){return{...this}}}class Yt{constructor(t){this.to=t}}class Gt extends i.sH{}class Wt extends i.sH{}class Jt extends i.sH{}function Xt(t){return null===t?"null":void 0===t?"undefined":t instanceof Bt?"Tag("+(0,i.gj)(t.provider.provide)+")":(0,i.HV)(t)?(0,i.gj)(t):(0,i.mf)(t.toString)?t.toString():t+""}let Qt=[],Kt=[];class te{constructor(t=[],e=[],n=new he,r,i=new Ft){this.providers=t,this.parents=e,this.injectorContext=n,this.configuredProviderRegistry=r,this.tagRegistry=i,this.circularCheck=!0,this.resolved=[],this.configuredProviderRegistry||(this.configuredProviderRegistry=n.configuredProviderRegistry),this.providers.length&&(this.retriever=this.buildRetriever())}retriever(t,e,n){for(const r of t.parents){const t="retriever"in r?r.retriever(r,e,n):r.get(e,n);if(void 0!==t)return t}}fork(t,e){const n=new te(void 0,t||this.parents,e,this.configuredProviderRegistry,this.tagRegistry);return n.providers=this.providers,n.retriever=this.retriever,n}addProviders(...t){this.providers.push(...t),this.retriever=this.buildRetriever()}isRoot(){return 0===this.parents.length}createFactoryProperty(t,e,n,r,s){const a=t.data["deepkit/inject"];let l=t.resolveClassType;const c=a&&a.optional;if(a&&a.token&&(l=(0,i.mf)(a.token)?a.token():a.token),l instanceof class{constructor(t){this.schema=t}setModule(t){this.module=t}hasModule(){return void 0!==this.module}getModule(){if(!this.module)throw new Error("ConfigDefinition module not set. Make sure your config is assigned to a single module. See createModule({config: x}).");return this.module}getConfigOrDefaults(){return this.module?this.module.getConfig():o.$r.for(this.schema).validatedDeserialize({})}all(){const t=this;return class extends qt{constructor(){super(t,[...t.schema.getProperties()].map(t=>t.name))}}}slice(t){const e=this;return class extends qt{constructor(){super(e,t)}}}token(t){return new Ht(this,t)}}){if(l.hasModule()){const t=this.injectorContext.getModule(l.getModule().getName());return e.reserveVariable("fullConfig",t.getConfig())}return e.reserveVariable("fullConfig",l.getConfigOrDefaults())}if(l instanceof Ht){if(l.config.hasModule()){const t=this.injectorContext.getModule(l.config.getModule().getName()).getConfig();return e.reserveVariable(l.name,t[l.name])}{const t=l.config.getConfigOrDefaults();return e.reserveVariable(l.name,t[l.name])}}if(!(0,i.HV)(l)||Object.getPrototypeOf(Object.getPrototypeOf(l))!==qt&&Object.getPrototypeOf(l)!==qt){if(l===Ft)return e.reserveVariable("tagRegistry",this.tagRegistry);if((0,i.Jn)(l,jt))return`new ${e.reserveVariable("token",l)}(${e.reserveVariable("tagRegistry",this.tagRegistry.resolve(l))}.map(v => frontInjector.retriever(frontInjector, v, frontInjector)))`;{if(void 0===l)throw new Error(`Argument type of '${t.name}' at position ${r} is undefined. Imported reflect-metadata correctly? For circular references use @inject(() => T) ${t.name}:T.`);const i=e.reserveVariable("token",l);return`frontInjector.retriever(frontInjector, ${i}, frontInjector) ${c?"":`|| ${s}(${n}, ${JSON.stringify(t.name)}, ${r}, ${i})`}`}}{const t=new l;if(!t.bag){if(t.config.hasModule()){const e=this.injectorContext.getModule(t.config.getModule().getName());t.bag=e.getConfig()}else t.bag=t.config.getConfigOrDefaults();return e.reserveVariable("configSlice",t)}}return"undefined"}createFactory(t,e){const n=(0,o.VI)(e),r=[],i=[],s=t.reserveVariable("classType",e);for(const o of n.getMethodProperties("constructor"))r.push(this.createFactoryProperty(o,t,s,r.length,"constructorParameterNotFound"));for(const o of n.getProperties())"deepkit/inject"in o.data&&"constructor"!==o.methodName&&i.push(`v.${o.name} = ${this.createFactoryProperty(o,t,s,r.length,"propertyParameterNotFound")};`);return`v = new ${s}(${r.join(",")});\n${i.join("\n")}`}buildRetriever(){var t;const e=new i.Ri,n=[],r=[];this.resolved=[],n.push(`\n            case ${e.reserveVariable("injectorContextClassType",he)}: return injector.injectorContext;\n            case ${e.reserveVariable("injectorClassType",te)}: return injector;\n        `);let o=0;const s=new Map;for(const l of this.providers)l instanceof Bt?s.set(l,l):$t(l)||Ut(l)||Vt(l)||Zt(l)?s.set(l.provide,l):(0,i.HV)(l)&&s.set(l,l);for(let l of s.values()){const s=o++;this.resolved.push(void 0);let a,c=!1,u="";const h=l instanceof Bt?l:void 0;if(l instanceof Bt&&(l=l.provider),$t(l))c=!0===l.transient,a=l.provide,u=`v = ${e.reserveVariable("useValue",l.useValue)};`;else if(Ut(l))c=!0===l.transient,a=l.provide,u=this.createFactory(e,l.useClass||l.provide);else if(Vt(l))c=!0===l.transient,a=l.provide,u=this.createFactory(e,l.useExisting);else if(Zt(l)){c=!0===l.transient,a=l.provide;const t=(l.deps||[]).map(t=>`frontInjector.get(${e.reserveVariable("dep",t)}, frontInjector)`);u=`v = ${e.reserveVariable("factory",l.useFactory)}(${t.join(", ")});`}else{if(!(0,i.HV)(l))throw new Error("Invalid provider");a=l,u=this.createFactory(e,l)}h&&(a=h);const d=e.reserveVariable("token",a),f=e.reserveVariable("creating",!1),p=null===(t=this.configuredProviderRegistry)||void 0===t?void 0:t.get(a),g=[];if(p)for(const t of p){if("stop"===t.type)break;if("call"===t.type){const n=[],r="symbol"==typeof t.methodName?"["+e.reserveVariable("arg",t.methodName)+"]":t.methodName;for(const i of t.args)n.push(i instanceof Yt?`frontInjector.get(${e.reserveVariable("forward",i.to)})`:`${e.reserveVariable("arg",i)}`);g.push(`v.${r}(${n.join(", ")});`)}if("property"===t.type){const n="symbol"==typeof t.property?"["+e.reserveVariable("property",t.property)+"]":t.property,r=t.value instanceof Yt?`frontInjector.get(${e.reserveVariable("forward",t.value.to)})`:e.reserveVariable("value",t.value);g.push(`v.${n} = ${r};`)}}else g.push("//no custom provider setup");r.push(`${f} = false;`),n.push(`\n                //${Xt(a)}\n                case ${d}: {\n                    ${c?"let v;":`let v = injector.resolved[${s}]; if (v !== undefined) return v;`}\n                    CircularDetector.push(${d});\n                    if (${f}) {\n                        throwCircularDependency();\n                    }\n                    ${f} = true;\n                    ${u}\n                    ${c?"":`injector.resolved[${s}] = v;`}\n                    ${f} = false;\n                    ${g.join("\n")}\n                    CircularDetector.pop();\n                    return v;\n                }\n            `)}const a=[];for(let i=0;i<this.parents.length;i++)a.push(`\n                {\n                    const v = ${"retriever"in this.parents[i]?`injector.parents[${i}].retriever(injector.parents[${i}], `:`injector.parents[${i}].get(`}token, frontInjector);\n                    if (v !== undefined) return v;\n                }\n            `);return e.context.set("CircularDetector",Qt),e.context.set("throwCircularDependency",re),e.context.set("CircularDetectorResets",Kt),e.context.set("constructorParameterNotFound",ee),e.context.set("propertyParameterNotFound",ne),e.preCode=`\n            CircularDetectorResets.push(() => {\n                ${r.join("\n")};\n            });\n        `,e.build(`\n        frontInjector = frontInjector || injector;\n\n        switch (token) {\n            ${n.join("\n")}\n        }\n\n        ${a.join("\n")}\n\n        return undefined;\n        `,"injector","token","frontInjector")}get(t,e){const n=this.retriever(this,t,e||this);if(void 0!==n)return n;for(const r of Kt)r();throw new Wt(`Could not resolve injector token ${Xt(t)}`)}}function ee(t,e,n,r){const o=[];for(let i=0;i<n-1;i++)o.push("\u2713");o.push("?");for(const i of Kt)i();throw new Jt(`Unknown constructor argument ${e} of ${(0,i.gj)(t)}(${o.join(", ")}). Make sure '${Xt(r)}' is provided.`)}function ne(t,e,n,r){for(const i of Kt)i();throw new Jt(`Unknown property parameter ${e} of ${(0,i.gj)(t)}. Make sure '${Xt(r)}' is provided.`)}function re(){const t=Qt.map(Xt).join(" -> ");Qt.length=0;for(const e of Kt)e();throw new Gt(`Circular dependency found ${t}`)}class ie extends te{constructor(t){super(),this.providers=t}fork(t){return this}retriever(t,e){for(const n of this.providers)if(n.provide===e)return"useFactory"in n?n.useFactory():n.useValue}get(t,e){const n=this.retriever(this,t);if(void 0===n)throw new Wt(`Could not resolve injector token ${Xt(t)}`);return n}}class oe{constructor(){this.contexts=[]}get size(){return this.contexts.length}get(t){return this.contexts[t]}set(t,e){this.contexts[t]=e}}class se{constructor(t){this.size=t,this.caches={}}getCache(t){let e=this.caches[t];return e||(e=new ae(this.size),this.caches[t]=e),e}}class ae{constructor(t){this.size=t,this.injectors=new Array(this.size)}get(t){return this.injectors[t]}set(t,e){this.injectors[t]=e}}class le{constructor(t,e,n){this.module=t,this.id=e,this.parent=n,this.providers=[]}}class ce{constructor(){this.calls=new Map}add(t,...e){this.get(t).push(...e)}get(t){let e=this.calls.get(t);return e||(e=[],this.calls.set(t,e)),e}clone(){const t=new ce;for(const[e,n]of this.calls.entries())t.calls.set(e,n.slice());return t}}function ue(t,e){const n=new Proxy({},{get:(r,i)=>(...r)=>(e.add(t,{type:"call",methodName:i,args:r}),n),set:(n,r,i)=>(e.add(t,{type:"property",property:r,value:i}),!0)});return n}class he{constructor(t=new oe,e="module",n=new ce,r,i,o={},s,a=new Ft){this.contextManager=t,this.scope=e,this.configuredProviderRegistry=n,this.parent=r,this.additionalInjectorParent=i,this.modules=o,this.tagRegistry=a,this.injectors=new Array(this.contextManager.contexts.length),this.scopeCaches=s||new se(this.contextManager.size),this.cache=this.scopeCaches.getCache(this.scope)}getModule(t){if(!this.modules[t])throw new Error(`No Module with name ${t} registered`);return this.modules[t]}registerModule(t,e){if(this.modules[t.getName()])throw new Error(`Module ${t.getName()} already registered`);e&&e.setModule(t),this.modules[t.getName()]=t;for(const[n,r]of t.getConfiguredProviderRegistry().calls)this.configuredProviderRegistry.add(n,...r)}setupProvider(t){return ue(t,this.configuredProviderRegistry)}getModuleNames(){return Object.keys(this.modules)}static forProviders(t){const e=new oe,n=new le(new zt("",{}),0);return e.set(0,n),n.providers.push(...t),new he(e)}getInjector(t){let e=this.injectors[t];if(e)return e;const n=[];n.push(this.parent?this.parent.getInjector(t):new te),this.additionalInjectorParent&&n.push(this.additionalInjectorParent.fork(void 0,this));const r=this.contextManager.get(t);if(r.parent&&n.push(this.getInjector(r.parent.id)),e=this.cache.get(t),e)return e=e.fork(n,this),this.injectors[t]=e;const o=function(t,e){const n=[];function r(t){return(0,i.HV)(t),t}for(const s of t)(0,i.HV)(s)||(0,i.HV)(s)?"module"===e&&n.push(s):((o=s).provide&&o.hasOwnProperty("scope")?s.scope:"module")===e&&n.push(r(s));var o;return n}(r.providers,this.scope);return e=new te(o,n,this,this.configuredProviderRegistry,this.tagRegistry),this.injectors[t]=e,this.cache.set(t,e),e}get(t,e){const n="object"==typeof t||"function"==typeof t?t[he.contextSymbol]:void 0;return this.getInjector(n?n.id:0).get(t,e)}createChildScope(t,e){return new he(this.contextManager,t,this.configuredProviderRegistry,this,e,this.modules,this.scopeCaches,this.tagRegistry)}}he.contextSymbol=Symbol("context");var de=n(41259);class fe{constructor(t,e,n,r,i,o=0){this.type=t,this.id=e,this.writer=n,this.clientId=r,this.source=i,this.routeType=o,this.messages=[]}add(t,e,n){return this.messages.push({type:t,schema:e?(0,o.VI)(e):void 0,body:n}),this}send(){this.writer.write(this.clientId&&this.source?function(t,e,n,r,i){let o=0;for(const l of i)o+=5+(l.schema&&l.body?(0,ot.NS)(l.schema)(l.body):0);const s=44+o,a=new ot.QV(ct(s));if(a.writeUint32(s),a.writeByte(1),a.writeUint32(t),a.writeByte(2),16!==e.byteLength)throw new Error(`Source invalid byteLength of ${e.byteLength}`);if(16!==n.byteLength)throw new Error(`Destination invalid byteLength of ${n.byteLength}`);a.writeBuffer(e),a.writeBuffer(n),a.writeByte(1),a.writeByte(r);for(const l of i)a.writeUint32(l.schema&&l.body?(0,ot.NS)(l.schema)(l.body):0),a.writeByte(l.type),l.schema&&l.body&&(0,ot.MY)(l.schema)(l.body,a);return a.buffer}(this.id,this.clientId,this.source,this.type,this.messages):function(t,e,n,r=0){let i=0;for(const a of n)i+=5+(a.schema&&a.body?(0,ot.NS)(a.schema)(a.body):0);const o=12+i,s=new ot.QV(ct(o));s.writeUint32(o),s.writeByte(1),s.writeUint32(t),s.writeByte(r),s.writeByte(1),s.writeByte(e);for(const a of n)s.writeUint32(a.schema&&a.body?(0,ot.NS)(a.schema)(a.body):0),s.writeByte(a.type),a.schema&&a.body&&(0,ot.MY)(a.schema)(a.body,s);return s.buffer}(this.id,this.type,this.messages,this.routeType))}}class pe{constructor(t,e,n,r){this.writer=t,this.id=e,this.clientId=n,this.source=r,this.routeType=0}messageFactory(t,e,n){return e instanceof Uint8Array?this.source&&this.clientId?function(t,e,n,r,i){const o=44+i.byteLength,s=new ot.QV(ct(o));if(s.writeUint32(o),s.writeByte(1),s.writeUint32(t),s.writeByte(2),16!==n.byteLength)throw new Error(`Source invalid byteLength of ${n.byteLength}`);if(16!==r.byteLength)throw new Error(`Destination invalid byteLength of ${r.byteLength}`);return s.writeBuffer(n),s.writeBuffer(r),s.writeByte(0),s.writeByte(e),s.writeBuffer(i),s.buffer}(this.id,t,this.clientId,this.source,e):function(t,e,n,r=0){const i=12+n.byteLength,o=new ot.QV(ct(i));return o.writeUint32(i),o.writeByte(1),o.writeUint32(t),o.writeByte(r),o.writeByte(0),o.writeByte(e),o.writeBuffer(n),o.buffer}(this.id,t,e,this.routeType):this.source&&this.clientId?function(t,e,n,r,i,o){const s=44+(i&&o?(0,ot.NS)(i)(o):0),a=new ot.QV(ct(s));if(a.writeUint32(s),a.writeByte(1),a.writeUint32(t),a.writeByte(2),16!==n.byteLength)throw new Error(`Source invalid byteLength of ${n.byteLength}`);if(16!==r.byteLength)throw new Error(`Destination invalid byteLength of ${r.byteLength}`);return a.writeBuffer(n),a.writeBuffer(r),a.writeByte(0),a.writeByte(e),i&&o&&(0,ot.MY)(i)(o,a),a.buffer}(this.id,t,this.clientId,this.source,e,n):ut(this.id,t,e,n,this.routeType)}ack(){this.writer.write(this.messageFactory(j.Ack))}error(t){const e=gt(t);this.writer.write(this.messageFactory(j.Error,Z,e))}reply(t,e,n){this.writer.write(this.messageFactory(t,e,n))}composite(t){return new fe(t,this.id,this.writer,this.clientId,this.source)}}class ge{constructor(){this.registeredPeers=new Map}isRegistered(t){var e=this;return(0,r.Z)(function*(){return e.registeredPeers.has(t)})()}deregister(t){var e=this;return(0,r.Z)(function*(){e.registeredPeers.delete("string"==typeof t?t:(0,o.Wb)(t))})()}register(t,e){this.registeredPeers.set("string"==typeof t?t:(0,o.Wb)(t),e)}redirect(t){if(3==t.routeType){const e=t.getPeerId(),n=this.registeredPeers.get(e);if(!n)return void console.log("NO writer found for peer",e);n.write(t.getBuffer())}if(2==t.routeType){const e=t.getDestination(),n=(0,o.Wb)(e),r=this.registeredPeers.get(n);if(!r)return void console.log("NO writer found for destination",n);r.write(t.getBuffer())}}}class me{constructor(){this.connections=[]}broadcast(t){for(const e of this.connections)e.writer.write(t)}}class ye extends class{constructor(t,e){this.transportWriter=t,this.connections=e,this.messageId=0,this.sessionState=new Lt,this.reader=new dt(this.handleMessage.bind(this),t=>{this.writer.write(ut(t,j.ChunkAck))}),this.actionClient=new Tt(this),this.id=(0,o.Ti)(ct(16)),this.replies=new Map,this.writer=new bt(this.transportWriter,this.reader),this.timeoutTimers=[],this.connections.connections.push(this),this.onClose=new Promise(t=>{this.onCloseResolve=t})}clientAddress(){return this.transportWriter.clientAddress?this.transportWriter.clientAddress():void 0}createMessageBuilder(){return new pe(this.writer,this.messageId++)}setTimeout(t,e){const n=setTimeout(()=>{t(),(0,i.lH)(this.timeoutTimers,n)},e);return this.timeoutTimers.push(n),n}close(){for(const t of this.timeoutTimers)clearTimeout(t);this.onCloseResolve&&this.onCloseResolve(),(0,i.lH)(this.connections.connections,this),this.writer.close()}feed(t,e){this.reader.feed(t,e)}handleMessage(t){if(1===t.routeType){const e=this.replies.get(t.id);if(e)return void e(t)}const e=new pe(this.writer,t.id);this.onMessage(t,e)}controller(t,e=60){const n=new Ct("string"==typeof t?t:t.path);return new Proxy(this,{get:(t,e)=>(...t)=>this.actionClient.action(n,e,t)})}sendMessage(t,e,n){const r=this.messageId++,i=new Ot((t,e,n)=>{const i=ut(r,t,e,n,1);this.writer.write(i)},()=>{this.replies.delete(r)});this.replies.set(r,t=>i.next(t));const o=ut(r,t,e,n,1);return this.writer.write(o),i}}{constructor(t,e,n,r=new Nt,i,o,s=new de.Yd){super(t,e),this.controllers=n,this.security=r,this.injector=i,this.peerExchange=o,this.logger=s,this.actionHandler=new It(this.controllers,this.injector,this.security,this.sessionState),this.routeType=0,this.onClose.then(()=>this.actionHandler.onClose()),this.peerExchange.register(this.id,this.writer)}onMessage(t){var e=this;return(0,r.Z)(function*(){if(3==t.routeType&&t.getPeerId()!==e.myPeerId)return(yield e.security.isAllowedToSendToPeer(e.sessionState.getSession(),t.getPeerId()))?void e.peerExchange.redirect(t):void new pe(e.writer,t.id).error(new Error("Access denied"));if(2==t.routeType)return void e.peerExchange.redirect(t);if(t.type===j.Ping)return void e.writer.write(ut(t.id,j.Pong));const n=new pe(e.writer,t.id,e.id,3===t.routeType?t.getSource():void 0);n.routeType=e.routeType;try{if(0===t.routeType)switch(t.type){case j.ClientId:return n.reply(j.ClientIdResponse,$,{id:e.id});case j.PeerRegister:return yield e.registerAsPeer(t,n);case j.PeerDeregister:return e.deregisterAsPeer(t,n)}switch(t.type){case j.Authenticate:return yield e.authenticate(t,n);case j.ActionType:return yield e.actionHandler.handleActionTypes(t,n);case j.Action:return yield e.actionHandler.handleAction(t,n);default:return yield e.actionHandler.handle(t,n)}}catch(r){n.error(r)}})()}authenticate(t,e){var n=this;return(0,r.Z)(function*(){const r=t.parseBody(Y);try{const t=yield n.security.authenticate(r.token);n.sessionState.setSession(t),e.reply(j.AuthenticateResponse,G,{username:t.username})}catch(i){if(i instanceof it)throw new Error(i.message);throw n.logger.error("authenticate failed",i),new it}})()}deregisterAsPeer(t,e){var n=this;return(0,r.Z)(function*(){const r=t.parseBody(Q);try{if(r.id!==n.myPeerId)return e.error(new Error("Not registered as that peer"));n.myPeerId=void 0,yield n.peerExchange.deregister(r.id),e.ack()}catch(i){n.logger.error("deregisterAsPeer failed",i),e.error(new Error("Failed"))}})()}registerAsPeer(t,e){var n=this;return(0,r.Z)(function*(){const r=t.parseBody(Q);try{if(yield n.peerExchange.isRegistered(r.id))return e.error(new Error(`Peer ${r.id} already registereed`));if(!(yield n.security.isAllowedToRegisterAsPeer(n.sessionState.getSession(),r.id)))return void e.error(new Error("Access denied"));yield n.peerExchange.register(r.id,n.writer),n.myPeerId=r.id,e.ack()}catch(i){n.logger.error("registerAsPeer failed",i),e.error(new Error("Failed"))}})()}}class ve{constructor(t,e=new Nt,n=new de.Yd){this.security=e,this.logger=n,this.controllers=new Map,this.peerExchange=new ge,this.connections=new me,this.onConnectionListeners=[],this.injector=t||he.forProviders([])}onConnection(t){return this.onConnectionListeners.push(t),()=>{(0,i.lH)(this.onConnectionListeners,t)}}registerController(t,e,n=!0){n&&(this.injector instanceof he&&this.injector.contextManager.get(0).providers.push({provide:e,scope:"rpc"}),this.injector instanceof te&&this.injector.addProviders(e)),this.controllers.set("string"==typeof t?t:t.path,e)}createConnection(t,e){let n;if(!e){const t=new ie([{provide:ye,useFactory:()=>n},{provide:Lt,useFactory:()=>n.sessionState}]);let r=this.injector;r instanceof he&&(r=r.createChildScope("rpc")),e=new te([],[t,r])}n=new ye(t,this.connections,this.controllers,this.security,e,this.peerExchange,this.logger);for(const r of this.onConnectionListeners)r(n,e,this.logger);return n}}class be extends Error{constructor(t="Offline"){super(t)}}class _e{constructor(t){this.token=t}get(){return this.token}set(t){this.token=t}has(){return void 0!==this.token}}class we{constructor(t){this.transport=t,this.connectionTries=0,this.connectionId=0,this.connected=!1,this.connection=new s.X(!1),this.reconnected=new l.xQ,this.disconnected=new l.xQ,this.reader=new dt(t=>this.onMessage(t),t=>{this.writer&&this.writer.write(ut(t,j.ChunkAck))})}bufferedAmount(){var t;return(null===(t=this.transportConnection)||void 0===t?void 0:t.bufferedAmount)?this.transportConnection.bufferedAmount():0}clientAddress(){var t;return(null===(t=this.transportConnection)||void 0===t?void 0:t.clientAddress)?this.transportConnection.clientAddress():"unknown"}isConnected(){return this.connected}onError(){this.onDisconnect()}onDisconnect(){this.id=void 0,this.connectionPromise=void 0,this.connected&&(this.connection.next(!1),this.disconnected.next(this.connectionId),this.connectionId++,this.connected=!1)}onConnect(){this.connection.next(!0),this.connectionId>0&&this.reconnected.next(this.connectionId)}onHandshake(){return(0,r.Z)(function*(){})()}onAuthenticate(){return(0,r.Z)(function*(){})()}onMessage(t){}disconnect(){this.transportConnection&&(this.transportConnection.close(),this.transportConnection=void 0),this.onDisconnect()}doConnect(){var t=this;return(0,r.Z)(function*(){return t.connectionTries++,t.transportConnection&&(t.transportConnection.close(),t.transportConnection=void 0),(0,i.KR)(function(){var e=(0,r.Z)(function*(e,n){try{yield t.transport.connect({onClose:()=>{t.onDisconnect()},onConnected:(i=(0,r.Z)(function*(r){t.transportConnection=r,t.writer=new bt({write(t){r.send(t)},close(){r.close()},clientAddress:r.clientAddress?()=>r.clientAddress():void 0,bufferedAmount:r.bufferedAmount?()=>r.bufferedAmount():void 0},t.reader),t.connected=!1,t.connectionTries=0;try{t.id=yield t.onHandshake(),yield t.onAuthenticate()}catch(i){return t.connected=!1,t.connectionTries=0,void n(i)}t.connected=!0,t.onConnect(),e(void 0)}),function(t){return i.apply(this,arguments)}),onError:e=>{t.onError(),n(new be(`Could not connect: ${e.message}`))},onData:(e,n)=>{t.reader.feed(e,n)}})}catch(o){n(o)}var i});return function(t,n){return e.apply(this,arguments)}}())})()}connect(){var t=this;return(0,r.Z)(function*(){for(;t.connectionPromise;)yield t.connectionPromise,yield(0,i._v)(.01);if(!t.connected){t.connectionPromise=t.doConnect();try{yield t.connectionPromise}finally{delete t.connectionPromise}}})()}send(t,e){if(void 0===this.writer)throw new Error("Transport connection not created yet");try{this.writer.write(t,e)}catch(n){throw new be(n)}}}class xe{constructor(t,e,n){this.actionClient=t,this.peerId=e,this.onDisconnect=n}controller(t,e={}){const n=new Ct("string"==typeof t?t:t.path);return n.peerId=this.peerId,new Proxy(this,{get:(t,r)=>(...t)=>this.actionClient.action(n,r,t,e)})}disconnect(){this.onDisconnect(this.peerId)}}class Ce extends class extends class{constructor(t){this.transport=t,this.messageId=1,this.replies=new Map,this.actionClient=new Tt(this),this.token=new _e(void 0),this.transporter=new we(this.transport),this.transporter.onMessage=this.onMessage.bind(this),this.transporter.onHandshake=this.onHandshake.bind(this),this.transporter.onAuthenticate=this.onAuthenticate.bind(this)}onAuthenticate(){var t=this;return(0,r.Z)(function*(){if(!t.token.has())return;const e=yield t.sendMessage(j.Authenticate,Y,{token:t.token.get()},{dontWaitForConnection:!0}).waitNextMessage();if(e.isError())throw e.getError();if(e.type!==j.AuthenticateResponse)throw new Error("Invalid response");{const n=e.parseBody(G);t.username=n.username}})()}onHandshake(){return(0,r.Z)(function*(){})()}getId(){throw new Error("RpcBaseClient does not load its client id, and thus does not support peer message")}onMessage(t){if(t.type===j.Entity)this.actionClient.entityState.handle(t);else{const e=this.replies.get(t.id);if(!e)throw new Error("No callback for "+t.id);e&&e(t)}}sendMessage(t,e,n,r={}){const i=this.messageId++,o=r&&r.connectionId?r.connectionId:this.transporter.connectionId,s=!!r.dontWaitForConnection,a=new Ot((t,e,n)=>{if(o===this.transporter.connectionId){const r=ut(i,t,e,n);this.transporter.send(r)}},()=>{this.replies.delete(i)});this.replies.set(i,t=>a.next(t));const l=_t.getNext();if(l&&this.transporter.reader.registerProgress(i,l.download),s||this.transporter.isConnected()){const o=r&&r.peerId?ht(i,t,this.getId(),r.peerId,e,n):ut(i,t,e,n);this.transporter.send(o,null==l?void 0:l.upload)}else this.transporter.connect().then(()=>{const o=r&&r.peerId?ht(i,t,this.getId(),r.peerId,e,n):ut(i,t,e,n);this.transporter.send(o,null==l?void 0:l.upload)},t=>{a.next(new at(i,t))});return a}connect(){var t=this;return(0,r.Z)(function*(){return yield t.transporter.connect(),t})()}disconnect(){this.transporter.disconnect()}}{constructor(){super(...arguments),this.peerConnections=new Map,this.peerKernelConnection=new Map}onHandshake(){var t=this;return(0,r.Z)(function*(){return t.clientKernelConnection=void 0,(yield t.sendMessage(j.ClientId,void 0,void 0,{dontWaitForConnection:!0}).firstThenClose(j.ClientIdResponse,$)).id})()}ping(){var t=this;return(0,r.Z)(function*(){yield t.sendMessage(j.Ping).waitNext(j.Pong)})()}onMessage(t){if(3===t.routeType){if(!this.peerKernel)return;const e=t.getPeerId();if(this.registeredAsPeer!==e)return;let n=this.peerKernelConnection.get(e);if(!n){const t=this.peerKernel.createConnection({close:()=>{n&&n.close(),this.peerKernelConnection.delete(e)},write:t=>{this.transporter.send(t)}});if(!(t instanceof ye))throw new Error("Expected RpcKernelConnection from peerKernel.createConnection");n=t,n.myPeerId=e,this.peerKernelConnection.set(e,n)}n.handleMessage(t)}else{if(1===t.routeType&&this.clientKernel){if(!this.clientKernelConnection){const t=this.clientKernel.createConnection({write:t=>{this.transporter.send(t)},close:()=>{this.transporter.disconnect()},clientAddress:()=>this.transporter.clientAddress(),bufferedAmount:()=>this.transporter.bufferedAmount()});if(!(t instanceof ye))throw new Error("Expected RpcKernelConnection from clientKernel.createConnection");this.clientKernelConnection=t}return this.clientKernelConnection.routeType=1,void this.clientKernelConnection.handleMessage(t)}super.onMessage(t)}}getId(){if(!this.transporter.id)throw new Error("Not fully connected yet");return this.transporter.id}registerPeerController(t,e){if(!this.peerKernel)throw new Error("Not registered as peer. Call registerAsPeer() first");this.peerKernel.registerController("string"==typeof t?t:t.path,e)}registerController(t,e){this.clientKernel||(this.clientKernel=new ve),this.clientKernel.registerController("string"==typeof t?t:t.path,e)}registerAsPeer(t){var e=this;return(0,r.Z)(function*(){if(e.registeredAsPeer)throw new Error("Already registered as a peer");return e.peerKernel=new ve,yield e.sendMessage(j.PeerRegister,Q,{id:t}).firstThenClose(j.Ack),e.registeredAsPeer=t,{deregister:(n=(0,r.Z)(function*(){yield e.sendMessage(j.PeerDeregister,K,{id:t}).firstThenClose(j.Ack),e.registeredAsPeer=void 0}),function(){return n.apply(this,arguments)})};var n})()}peer(t){let e=this.peerConnections.get(t);return e||(e=new xe(this.actionClient,t,()=>{this.peerConnections.delete(t)}),this.peerConnections.set(t,e),e)}controller(t,e={}){const n=new Ct("string"==typeof t?t:t.path);return new Proxy(this,{get:(t,r)=>(...t)=>this.actionClient.action(n,r,t,e)})}}{constructor(t){super(new Se(t))}static fromCurrentHost(t=""){return new this(`${location.protocol.startsWith("https")?"wss":"ws"}://${location.host}/${t}`)}}class Se{constructor(t){this.url=t}connect(t){var e=this;return(0,r.Z)(function*(){const n=new("undefined"==typeof WebSocket&&require?require("ws"):WebSocket)(e.url);n.binaryType="arraybuffer",n.onmessage=e=>{t.onData(new Uint8Array(e.data))},n.onclose=()=>{t.onClose()},n.onerror=e=>{t.onError(e)},n.onopen=(0,r.Z)(function*(){t.onConnected({clientAddress:()=>e.url,bufferedAmount:()=>n.bufferedAmount,close(){n.close()},send(t){n.send(t)}})})})()}}},44879:(t,e,n)=>{"use strict";n.d(e,{oe:()=>St,JH:()=>nt,HH:()=>$,GR:()=>Ct,uN:()=>mt,_E:()=>Nt,LN:()=>he,$W:()=>x,E4:()=>At,Fy:()=>C,Qd:()=>ce,nw:()=>rt,R0:()=>xe,VI:()=>Ot,Fq:()=>fe,zJ:()=>vt,P7:()=>pe,G8:()=>ge,pH:()=>ye,uM:()=>jt,GD:()=>U,jx:()=>X,$r:()=>Kt,LA:()=>$t,b:()=>w,lv:()=>It,d8:()=>ee,IP:()=>ae,$X:()=>le,Wb:()=>v,t:()=>dt,hw:()=>o,JZ:()=>xt,Gu:()=>Ft,Ti:()=>y});var r=n(35901);const i=new Map;i.set(String,"string"),i.set(Number,"number"),i.set(Date,"date"),i.set(Boolean,"boolean"),i.set(BigInt,"bigint"),i.set(Int8Array,"Int8Array"),i.set(r.lW,"Uint8Array"),i.set(Uint8Array,"Uint8Array"),i.set(Uint8ClampedArray,"Uint8ClampedArray"),i.set(Int16Array,"Int16Array"),i.set(Uint16Array,"Uint16Array"),i.set(Int32Array,"Int32Array"),i.set(Uint32Array,"Uint32Array"),i.set(Float32Array,"Float32Array"),i.set(Float64Array,"Float64Array"),i.set(ArrayBuffer,"arrayBuffer");const o=new Map;o.set("Int8Array",Int8Array),o.set("Uint8Array",Uint8Array),o.set("Uint8ClampedArray",Uint8ClampedArray),o.set("Int16Array",Int16Array),o.set("Uint16Array",Uint16Array),o.set("Int32Array",Int32Array),o.set("Uint32Array",Uint32Array),o.set("Float32Array",Float32Array),o.set("Float64Array",Float64Array);const s=[...o.keys(),"arrayBuffer"];var a,l=n(65341),c=new Uint8Array(16);function u(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(c)}const h=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,d=function(t){return"string"==typeof t&&h.test(t)};for(var f=[],p=0;p<256;++p)f.push((p+256).toString(16).substr(1));const g=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(f[t[e+0]]+f[t[e+1]]+f[t[e+2]]+f[t[e+3]]+"-"+f[t[e+4]]+f[t[e+5]]+"-"+f[t[e+6]]+f[t[e+7]]+"-"+f[t[e+8]]+f[t[e+9]]+"-"+f[t[e+10]]+f[t[e+11]]+f[t[e+12]]+f[t[e+13]]+f[t[e+14]]+f[t[e+15]]).toLowerCase();if(!d(n))throw TypeError("Stringified UUID is invalid");return n},m=function(t,e,n){var r=(t=t||{}).random||(t.rng||u)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return g(r)};function y(t,e=0){return m(void 0,t,e),t}function v(t,e=0){return g(t,e)}function b(t){return!(!t||"number"!=typeof t.length||"function"!=typeof t.reduce)}function _(t,e,n,r=!1,i){const o=function(t,i,o){const s=n(e,t,i,o);if(r)return s},s=[];Object.defineProperty(o,"_methods",{value:s}),i&&Object.defineProperty(o,i,{value:!0});let a=t;for(;a.prototype;){let l=a.prototype;for(const a of Object.getOwnPropertyNames(l)){if("constructor"===a)continue;if("onDecorator"===a)continue;const c=Object.getOwnPropertyDescriptor(l,a);s.push(a),Object.defineProperty(o,a,c&&c.get?{configurable:!0,enumerable:!1,get:()=>_(t,[...e,{name:a}],n,r,i)}:{configurable:!0,enumerable:!1,get:()=>(...o)=>_(t,[...e,{name:a,args:o}],n,r,i)})}a=Object.getPrototypeOf(a)}return o}function w(...t){const e={};for(const n of t)for(const t of n._methods)Object.defineProperty(e,t,{get:()=>n[t]});return e}function x(t){const e=new Map,n=_(t,[],function(n,r){var i;const o=null!==(i=e.get(r))&&void 0!==i?i:new t(r);for(const t of n)t.args&&o[t.name].bind(o)(...t.args);o.onDecorator&&o.onDecorator(r),e.set(r,o)});return Object.defineProperty(n,"_fetch",{configurable:!0,enumerable:!1,get:()=>t=>{const n=e.get(t);return n?n.t:void 0}}),n}function C(t){const e=new Map,n=_(t,[],function(n,r,i,o){var s;if(!i)throw new Error("Property decorators can only be used on class properties");let a=e.get(r=r.constructor);a||(a=new Map,e.set(r,a));const l=i+"$$"+("number"==typeof o?o:""),c=null!==(s=a.get(l))&&void 0!==s?s:new t(r,i);for(const t of n)t.args&&c[t.name].bind(c)(...t.args);c.onDecorator&&c.onDecorator(r,i,"number"==typeof o?o:void 0),a.set(l,c)});return Object.defineProperty(n,"_fetch",{configurable:!0,enumerable:!1,get:()=>(t,n,r)=>{const i=e.get(t),o=i?i.get(n+"$$"+("number"==typeof r?r:"")):void 0;return o?o.t:void 0}}),n}class S{constructor(t,e,n,r,i){this.originalSetter=t,this.originalAccessor=e,this.rootContext=n,this.jitStack=r,this.serializerCompilers=i,this.template="",this.ended=!1,this.setter="",this.accessor="",this.setter=t,this.accessor=e}addSetter(t){this.template+=`\n${this.setter} = ${t};`,this.accessor=this.setter}forceEnd(){this.ended=!0}setVariable(t,e){return t=T(this.rootContext,t),void 0!==e&&this.rootContext.set(t,e),t}setContext(t){for(const e in t)t.hasOwnProperty(e)&&this.rootContext.set(e,t[e])}addCodeForSetter(t){this.template+="\n"+t,this.accessor=this.setter}hasSetterCode(){return!!this.template}}function T(t,e="var",n){for(let r=0;r<1e4;r++){const i=e+"_"+r;if(!t.has(i))return t.set(i,void 0),t.set(i,n),i}throw new Error("Too many context variables")}function E(t,e,n,r,i,o,s){const a=new S(r,i,t,e,s);return n(o,a),a.template}function O(t,e,n,r,i,o,s="",a=""){const l=r.get("undefined"),c=r.get("null");s=s||(l?E(i,o,l,t,e,n,r):""),a=a||(c?E(i,o,c,t,e,n,r):"");const u=r.get(n.type);let h="";h=u?E(i,o,u,t,e,n,r):`\n        //no compiler for ${n.type}\n        ${t} = ${e};`;let d="";const f=r.serializer.fromClass===r,p=r.serializer.toClass===r;if(f){const e=n.serialization.get(r.serializer.name)||n.serialization.get("all");if(e){const n=T(i,"transformer");i.set(n,e),d=`${t} = ${n}(${t})`}}if(p){const e=n.deserialization.get(r.serializer.name)||n.deserialization.get("all");if(e){const n=T(i,"transformer");i.set(n,e),d=`${t} = ${n}(${t})`}}let g=f?"null":"undefined";return n.hasDefaultValue||void 0===n.defaultValue?!n.isOptional&&n.isNullable&&(g="null"):g=`${T(i,"defaultValue",n.defaultValue)}()`,`\n        if (${e} === undefined) {\n            ${t} = ${g}; \n            ${s}\n        } else if (${e} === null) {\n            //null acts on transport layer as telling an explicitely set undefined\n            //this is to support actual undefined as value across a transport layer. Otherwise it\n            //would be impossible to set a already set value to undefined back (since JSON.stringify() omits that information)\n            if (${n.isNullable}) {\n                ${t} = null;\n                ${a}\n            } else {\n                if (${n.isOptional}) ${t} = ${g};\n                ${s}\n            }\n        } else {\n            ${h}\n            ${d}\n        }\n    `}const A=new Map;function P(t,e){A.set(t,e)}function k(t,e,n){const r=t.getProperty(e).exclude;return"all"===r||r===n}function M(t,e){if(t)for(let n=t.length-1;n>=0;n--)if(t[n]instanceof e)return t[n]}const I=new Map;function R(t,e){if(t.getPropertiesMap().has(e))return t.getPropertiesMap().get(e);let n=I.get(t.classType);if(n||(n={},I.set(t.classType,n)),n[e])return n[e];const r=""===e?[]:e.split(".");if(1===r.length)return t.getProperty(r[0]);for(let i=0;i<r.length;i++){const o=r[i];if(!t.hasProperty(o))throw new Error(`Invalid path ${e} in class ${t.getClassName()}.`);let s=t.getProperty(o);if("class"===s.type&&s.isResolvedClassTypeIsDecorated()){const t=Ot(s.getResolvedClassType());s=t.getProperty(t.decorator)}if(!s.isMap&&!s.isArray){if("class"===s.type)return n[e]=R(Ot(s.getResolvedClassType()),r.slice(i+1).join("."));throw new Error(`Invalid path ${e} in class ${t.getClassName()}.`)}if("class"===s.getSubType().type){if(r[i+2])return n[e]=R(Ot(s.getSubType().getResolvedClassType()),r.slice(i+2).join("."));if(r[i+1])return n[e]=s.getSubType()}else if(r[i+1])return n[e]=s.getSubType()}throw new Error(`Invalid path ${e} in class ${t.getClassName()}.`)}function D(t,e){const n=t.jit;return n[e.fromClassSymbol]||(n[e.fromClassSymbol]=function(t,e){const n=new Map,r=new $,i=O("result","_value",t,e.fromClass,n,r),o=`\n        return function(_value, _options, _stack, _depth) {\n            var result;\n            //createJITConverterFromPropertySchema ${t.name} ${t.type}\n            ${i}\n            return result;\n        }\n        `;return new Function(...n.keys(),o).bind(void 0,...n.values())()}(t,e),(0,l.SV)(n),n[e.fromClassSymbol])}function N(t,e){const n=t.jit;return n[e.toClassSymbol]||(n[e.toClassSymbol]=function(t,e){const n=new Map,r=new $,i=O("result","_value",t,e.toClass,n,r),o=`\n        return function(_value, _parents, _options) {\n            var result, _state;\n            function getParents() {\n                return _parents;\n            }\n            if (!_parents) _parents = [];\n            //createJITConverterFromPropertySchema ${t.name} ${t.type}\n            ${i}\n            return result;\n        }\n        `;return new Function(...n.keys(),o).bind(void 0,...n.values())()}(t,e),(0,l.SV)(n),n[e.toClassSymbol])}function L(t,e,n,r){r.set("findParent",M);const i=T(r);r.set(i,n.resolveClassType);const o=`${e} = findParent(_parents, ${i});`;return n.isUndefinedAllowed()?o:`\n    ${o}\n    if (!${e})\n        throw new Error('${t.getClassPropertyName(n.name)} is defined as @f.parentReference and ' +\n                    'NOT @f.optional, but no parent found. Add @f.optional or provide ${n.name} in parents to fix that.');\n    `}class F{constructor(){this.onFullLoadCallbacks=[]}}function B(t,e){if(!t.groups&&!t.groupsExclude)return!0;if(t.groupsExclude){if(0===t.groupsExclude.length&&0===e.length)return!1;for(const n of t.groupsExclude)if(e.includes(n))return!1}if(t.groups){if(0===t.groups.length&&0===e.length)return!0;for(const n of t.groups)if(e.includes(n))return!0;return!1}return!0}function j(t,e,n){const r=t.jit;return r[e.fromClassSymbol]||(r[e.fromClassSymbol]=function(t,e,n=new $){const r=new Map,i=n.prepare(t);let o="";if(t.decorator){const i=t.getProperty(t.decorator);o=`\n        return function(_instance, _options, _stack, _depth) {\n            var result, _state;\n            ${O("result",`_instance.${t.decorator}`,i,e.fromClass,r,n)}\n            return result;\n        }\n        `}else{const i=[];for(const o of t.getProperties()){if(o.isParentReference)continue;if(k(t,o.name,e.name))continue;let s="";if(o.hasManualDefaultValue()||"literal"===o.type)if(void 0!==o.defaultValue){const t=T(r,"defaultValue",o.defaultValue);s=`_data.${o.name} = ${t}();`}else"literal"!==o.type||o.isOptional||(s=`_data.${o.name} = ${JSON.stringify(o.literalValue)};`);else o.isNullable&&(s=`_data.${o.name} = null;`);i.push(`\n            //${o.name}:${o.type}\n            if (!_options || isGroupAllowed(_options, ${JSON.stringify(o.groupNames)})){\n                if (${JSON.stringify(o.name)} in _instance) {\n                    ${O(`_data.${o.name}`,`_instance.${o.name}`,o,e.fromClass,r,n)}\n                } else {\n                    ${s}\n                }\n            }\n            `)}let s="",a="";t.hasCircularReference()&&(s="\n            if (_stack) {\n                if (_stack.includes(_instance)) return undefined;\n            } else {\n                _stack = [];\n            }\n            _stack.push(_instance);\n            ",a="_stack.pop();"),o=`\n        return function self(_instance, _options, _stack, _depth) {\n            ${s}\n            var _data = {};\n            _depth = !_depth ? 1 : _depth + 1;\n            var _oldUnpopulatedCheck = _global.unpopulatedCheck;\n            _global.unpopulatedCheck = UnpopulatedCheckNone;\n\n            ${i.join("\n")}\n\n            _global.unpopulatedCheck = _oldUnpopulatedCheck;\n\n            ${a}\n\n            return _data;\n        }\n        `}r.set("_classType",t.classType),r.set("_global",vt()),r.set("UnpopulatedCheckNone",mt.None),r.set("isGroupAllowed",B);try{const t=new Function(...r.keys(),o)(...r.values());return i(t),t}catch(s){throw console.log("jit code",o),s}}(t,e,n||new $),(0,l.SV)(r),r[e.fromClassSymbol])}class ${constructor(){this.schemaStack=[]}getStack(){return this.stack||(this.stack=new Map),this.stack}has(t){return this.getStack().has(t)}get(t){return this.getStack().get(t)}getOrCreate(t,e){const n=this.getStack();if(n.has(t))return n.get(t);const r={fn:e()};return n.set(t,r),r}get currentSchema(){return this.schemaStack[this.schemaStack.length-1]}prepare(t){if(this.getStack().has(t))throw new Error("Circular jit building detected: "+t.getClassName());this.schemaStack.push(t);const e={fn:void 0};return this.getStack().set(t,e),t=>{this.schemaStack.pop(),e.fn=t}}}function U(t,e,n){const r=t.jit;return r[e.toClassSymbol]||(r[e.toClassSymbol]=function(t,e,n=new $){const r=new Map,i=n.prepare(t),o=[],s=[],a=[],l={},c=t.getMethodProperties("constructor");for(const g of c)l[g.name]=!0,s.push(t.decorator&&g.name===t.decorator?`\n                //constructor parameter ${g.name}, decorated\n                var c_${g.name} = _data;\n                ${O(`c_${g.name}`,`c_${g.name}`,g,e.toClass,r,n)}\n            `:g.isParentReference?`var c_${g.name}; `+L(t,`c_${g.name}`,g,r):`\n                //constructor parameter ${g.name}\n                var c_${g.name} = _data[${JSON.stringify(g.name)}];\n                ${O(`c_${g.name}`,`c_${g.name}`,g,e.toClass,r,n)}\n            `),a.push(`c_${g.name}`);for(const g of t.getProperties())if(!l[g.name]&&!k(t,g.name,e.name))if(g.isParentReference)o.push(L(t,`_instance.${g.name}`,g,r));else{let t="";if(g.hasManualDefaultValue()||"literal"===g.type)if(void 0!==g.defaultValue){const e=T(r,"defaultValue",g.defaultValue);t=`_instance.${g.name} = ${e}();`}else"literal"!==g.type||g.isOptional||(t=`_instance.${g.name} = ${JSON.stringify(g.literalValue)};`);else g.isNullable&&(t=`_instance.${g.name} = null;`);o.push(`\n            if (!_options || isGroupAllowed(_options, ${JSON.stringify(g.groupNames)})) {\n                if (${JSON.stringify(g.name)} in _data) {\n                    ${O(`_instance.${g.name}`,`_data.${g.name}`,g,e.toClass,r,n)}\n                } else {\n                    ${t}\n                }\n            }\n            `)}const u=[];for(const g of t.onLoad)u.push(g.options.fullLoad?`\n                _state.onFullLoadCallbacks.push(_instance.${g.methodName}.bind(_instance));\n            `:`\n                _instance.${g.methodName}();\n            `);let h="",d="";t.hasFullLoadHooks()&&(h="var hadState = !!_state;",d="\n            if (!hadState && _state.onFullLoadCallbacks.length) {\n                //we are at the end, so call fullLoad hooks\n                //IE11 compatible way\n                _state.onFullLoadCallbacks.forEach(function(cb){cb();});\n            }\n        ");const f=`\n        return function(_data, _options, _parents, _state) {\n            var _instance, parentsWithItem;\n            _parents = _parents || (_options ? _options.parents : []);\n            function getParents() {\n                if (parentsWithItem) return parentsWithItem;\n                parentsWithItem = _parents ? _parents.slice(0) : [];\n                parentsWithItem.push(_instance);\n                return parentsWithItem;\n            }\n            ${h}\n            _state = _state || new ToClassState();\n            ${s.join("\n")}\n            _instance = new _classType(${a.join(", ")});\n            ${o.join("\n")}\n            ${u.join("\n")}\n            ${d}\n            return _instance;\n        }\n    `;r.set("_classType",t.classType),r.set("ToClassState",F),r.set("isGroupAllowed",B);try{const t=new Function(...r.keys(),f)(...r.values());return i(t),t}catch(p){throw console.log("jit code",f),p}}(t,e,n||new $),(0,l.SV)(r),r[e.toClassSymbol])}function V(t,e){const n=t.jit;return n[e.partialToClassSymbol]||(n[e.partialToClassSymbol]=function(t,e){const n=new Map,r=new $;n.set("isGroupAllowed",B);const i=[];for(const s of t.getProperties())s.isParentReference||k(t,s.name,e.name)||i.push(`\n            if (!_options || isGroupAllowed(_options, ${JSON.stringify(s.groupNames)})){\n            if (_data.hasOwnProperty(${JSON.stringify(s.name)})) {\n                ${O(`_result.${s.name}`,`_data.${s.name}`,s,e.toClass,n,r)}\n            }\n            }\n        `);const o=`\n        return function(_data, _options, _parents) {\n            var _result = {}, _state;\n            function getParents() {\n                return _parents;\n            }\n            if (!_parents) _parents = [];\n\n            ${i.join("\n")}\n            return _result;\n        }\n    `;return new Function(...n.keys(),o).bind(void 0,...n.values())()}(t,e),(0,l.SV)(n),n[e.partialToClassSymbol])}function Z(t,e){const n=t.jit;return n[e.partialFromClassSymbol]||(n[e.partialFromClassSymbol]=function(t,e){const n=new Map,r=new $;n.set("isGroupAllowed",B);const i=[];for(const s of t.getProperties())s.isParentReference||k(t,s.name,e.name)||i.push(`\n            if (!_options || isGroupAllowed(_options, ${JSON.stringify(s.groupNames)})){\n            if (_data.hasOwnProperty(${JSON.stringify(s.name)})) {\n                ${O(`_result.${s.name}`,`_data.${s.name}`,s,e.fromClass,n,r)}\n            }\n            }\n        `);n.set("_global",vt()),n.set("UnpopulatedCheckNone",mt.None);const o=`\n        return function(_data, _options, _stack, _depth) {\n            var _result = {};\n            _depth = !_depth ? 1 : _depth + 1;\n\n            var _oldUnpopulatedCheck = _global.unpopulatedCheck;\n            _global.unpopulatedCheck = UnpopulatedCheckNone;\n\n            ${i.join("\n")}\n\n            _global.unpopulatedCheck = _oldUnpopulatedCheck;\n            return _result;\n        }\n    `;return new Function(...n.keys(),o).bind(void 0,...n.values())()}(t,e),(0,l.SV)(n),n[e.partialFromClassSymbol])}const z=new WeakMap,H=new Map,q=new Map;class Y{constructor(t,e,n){this.path=t,this.code=e,this.message=n}toString(t=""){return`${(t?t+".":"")+this.path}(${this.code}): ${this.message}`}}class G{constructor(t,e){this.code=t,this.message=e}}function W(t,e,n,r,i){let o=A.get(n.type);if(n.noValidation)return"";const s=n.isUndefinedAllowed()?"":`_errors.push(new ValidationError(${t}, 'required', 'Required value is undefined'));`,a=n.isNullable?"":`_errors.push(new ValidationError(${t}, 'required', 'Required value is null'));`;function l(t,e){if(!n.validators.length)return"";const i=T(r,"schema_"+n.name);r.set(i,n),r.set("PropertyValidatorError",G),r.set("ValidationFailedItem",Y);const o=[];for(const s of n.validators){let n=q.get(s);n||(n=new s,q.set(s,n));const a=T(r,"validator");r.set(a,n),o.push(`\n            try {\n                ${a}.validate(${t}, ${i}, _classType);\n            } catch (error) {\n                if (error instanceof PropertyValidatorError) {\n                    _errors.push(new ValidationFailedItem(${e}, error.code, error.message || String(error)));\n                } else {\n                    _errors.push(new ValidationFailedItem(${e}, 'error', error.message || String(error)));\n                }\n            }`)}return o.join("\n")}const c=`l${t.split(".").length}`;if(r.set(c,0),n.isArray)return`\n            //property ${n.name}, ${n.type} ${n.isUndefinedAllowed()}\n            if (${e} === unpopulatedSymbol) {\n            } else {\n                if (${e} === undefined) {\n                    ${s}\n                } else if (${e} === null) {\n                    ${a}\n                } else if (${e}.length !== undefined && 'string' !== typeof ${e} && 'function' === typeof ${e}.slice) {\n                    ${c} = ${e}.length;\n                    while (${c}--) {\n                        //make sure all elements have the correct type\n                        ${W(`${t} + '.' + ${c}`,`${e}[${c}]`,n.getSubType(),r,i)}\n                    }\n                } else {\n                    _errors.push(new ValidationError(${t}, 'invalid_type', 'Type is not an array'));\n                }\n\n                ${l(`${e}`,`${t}`)}\n            }\n        `;if(n.isMap)return`\n            //property ${n.name}, ${n.type}\n            if (${e} === unpopulatedSymbol) {\n            } else {\n                if (${e} === undefined) {\n                    ${s}\n                } else if (${e} === null) {\n                    ${a}\n                } else if ('object' === typeof ${e} && 'function' !== typeof ${e}.slice) {\n                    for (${c} in ${e}) {\n                        if (!${e}.hasOwnProperty(${c})) continue;\n                        ${W(`${t} + '.' + ${c}`,`${e}[${c}]`,n.getSubType(),r,i)}\n                    }\n                } else {\n                    _errors.push(new ValidationError(${t}, 'invalid_type', 'Type is not an object'));\n                }\n\n                ${l(`${e}`,`${t}`)}\n            }\n        `;if(n.isPartial){const i=T(r);return r.set("jitValidatePartial",Q),r.set(i,n.getSubType().resolveClassType),`\n        //property ${n.name}, ${n.type}\n        if (${e} === unpopulatedSymbol) {\n        } else {\n            if (${e} === undefined) {\n                ${s}\n            } else if (${e} === null) {\n                ${a}\n            } else if ('object' === typeof ${e} && 'function' !== typeof ${e}.slice) {\n                jitValidatePartial(${i}, ${e}, _path, _errors);\n            } else {\n                _errors.push(new ValidationError(${t}, 'invalid_type', 'Type is not an object'));\n            }\n\n            ${l(`${e}`,`${t}`)};\n        }\n        `}return o?`\n        //property ${n.name}, ${n.type}\n        if (${e} === unpopulatedSymbol) {\n        } else {\n            if (${e} === undefined) {\n                ${s}\n            } else if (${e} === null) {\n                ${a}\n            } else {\n                ${function(t,e,n,r,i,o){const s=r(i,o,{reserveVariable:t=>T(e,t),context:e,path:t,raise:(e,n)=>`_errors.push(new ValidationError(${t}, ${JSON.stringify(e)}, ${JSON.stringify(n)}))`},n);if("string"==typeof s)return s;if(s.context instanceof Map)for(const[a,l]of s.context.entries())e.set(a,l);else for(const a in s.context)s.context.hasOwnProperty(a)&&e.set(a,s.context[a]);return s.template}(t,r,i,o,e,n)}\n            }\n\n            ${l(e,t)}\n        }\n        `:`\n        if (${e} === unpopulatedSymbol) {\n        } else if (${e} === undefined) {\n            ${s}\n        } else if (${e} === null) {\n            ${a}\n        }\n\n        ${l(e,t)}\n        `}function J(t,e){if("class"===t.type){const e=Ot(t.resolveClassType);e.decorator&&(t=e.getProperty(e.decorator))}const n=H.get(t);if(n)return n;const r=new Map,i=new $;r.set("_classType",e),r.set("ValidationError",Y),r.set("_globalStore",vt()),r.set("ReturnSymbol",mt.ReturnSymbol),r.set("unpopulatedSymbol",xt);const o=`\n        return function(_data, _path, _errors, _overwritePath) {\n            const _oldPopulatedCheck = _globalStore.unpopulatedCheck;\n            _globalStore.unpopulatedCheck = ReturnSymbol;\n            _path = _path === undefined ? undefined : _path;\n            _errors = _errors ? _errors : [];\n            const _stack = [];\n            ${W(`(_overwritePath || (_path === undefined ? '${t.name}' : _path))`,"_data",t,r,i)}\n            _globalStore.unpopulatedCheck = _oldPopulatedCheck;\n            return _errors;\n        }\n        `;try{const e=new Function(...r.keys(),o).bind(void 0,...r.values())();return H.set(t,e),e}catch(s){throw console.log("jit code",o),s}}function X(t,e=new $){t=t instanceof St?t:Ot(t);const n=z.get(t);if(n&&n.buildId===t.buildId)return n;const r=new Map,i=e.prepare(t),o=[];for(let l of t.getProperties()){const t=l;let n=!1;if("class"===l.type){const t=l.getResolvedClassSchema();t.decorator&&(l=t.getProperty(t.decorator),n=!0)}let i=`_data.${t.name}`;if(n){const e="resolvedClassType_"+t.name;r.set(e,t.resolveClassType),i=`_data.${t.name} instanceof ${e} ? _data.${t.name}.${l.name} : _data.${t.name}`}o.push(`\n            var value = ${i};\n            ${W(`_path + '${t.name}'`,"value",l,r,e)}\n        `)}r.set("_classType",t.classType),r.set("ValidationError",Y),r.set("_globalStore",vt()),r.set("ReturnSymbol",mt.ReturnSymbol),r.set("unpopulatedSymbol",xt),r.set("isPlainObject",l.PO);const s=`\n        return function(_data, _path, _errors, _stack) {\n            const _oldPopulatedCheck = _globalStore.unpopulatedCheck;\n            _globalStore.unpopulatedCheck = ReturnSymbol;\n            _path = _path ? _path + '.' : '';\n            _errors = _errors || [];\n            ${t.hasCircularDependency()?"_stack = _stack || []; _stack.push(_data);":""}\n            ${o.join("\n")}\n            _globalStore.unpopulatedCheck = _oldPopulatedCheck;\n            return _errors;\n        }\n        `,a=new Function(...r.keys(),s).bind(void 0,...r.values())();return i(a),a.buildId=t.buildId,z.set(t,a),a}function Q(t,e,n,r){r=r||[];const i=Ot(t);for(const o in e){if(!e.hasOwnProperty(o))continue;const s=n?n+"."+o:o;J(i.getPropertiesMap().get(o)||R(i,o),t)(e[o],"",r,s)}return r}var K=n(46659);const tt={pattern:t=>e=>{if("string"==typeof e&&!t.exec(e))throw new G("pattern",`Pattern ${t.source} does not match`)},alpha:(t="en-US")=>e=>{if("string"==typeof e&&!K.isAlpha(e,t))throw new G("alpha","Not alpha")},alphanumeric:(t="en-US")=>e=>{if("string"==typeof e&&!K.isAlphanumeric(e,t))throw new G("alphanumeric","Not alphanumeric")},ascii:()=>t=>{if("string"==typeof t&&!K.isAscii(t))throw new G("ascii","Not ASCII")},dataURI:()=>t=>{if("string"==typeof t&&!K.isDataURI(t))throw new G("dataURI","Not a data URI")},decimal:t=>e=>{if("string"==typeof e&&!K.isDecimal(e,t))throw new G("decimal","Not a decimal")},multipleOf:t=>e=>{if("number"==typeof e&&e%t!=0)throw new G("multipleOf","Not a multiple of "+t)},minLength:t=>e=>{if(("string"==typeof e||(0,l.kJ)(e))&&!(e.length>=t))throw new G("minLength","Min length is "+t)},maxLength:t=>e=>{if(("string"==typeof e||(0,l.kJ)(e))&&!(e.length<=t))throw new G("maxLength","Max length is "+t)},includes:t=>e=>{if(("string"==typeof e||(0,l.kJ)(e))&&!e.includes(t))throw new G("includes",`Needs to include '${t}'`)},excludes:t=>e=>{if(("string"==typeof e||(0,l.kJ)(e))&&e.includes(t))throw new G("excludes",`Needs to exclude '${t}'`)},minimum:t=>e=>{if(("number"==typeof e||"bigint"==typeof e)&&e<t)throw new G("minimum","Number needs to be greater than or equal to "+t)},exclusiveMinimum:t=>e=>{if(("number"==typeof e||"bigint"==typeof e)&&e<=t)throw new G("minimum","Number needs to be greater than "+t)},maximum:t=>e=>{if(("number"==typeof e||"bigint"==typeof e)&&e>t)throw new G("maximum","Number needs to be smaller than or equal to "+t)},exclusiveMaximum:t=>e=>{if(("number"==typeof e||"bigint"==typeof e)&&e>=t)throw new G("maximum","Number needs to be smaller than "+t)},positive:(t=!0)=>e=>{if(("number"==typeof e||"bigint"==typeof e)&&!(e>0||t&&0===e))throw new G("positive","Number needs to be positive")},negative:(t=!0)=>e=>{if(("number"==typeof e||"bigint"==typeof e)&&!(e<0||t&&0===e))throw new G("negative","Number needs to be negative")}};function et(t){return"function"==typeof t&&"function"==typeof t.name&&"function"==typeof t.optional}function nt(t,e){return n=>{if(vt().RegisteredEntities[t])throw new Error(`deepkit/type entity with name '${t}' already registered.\n            This could be caused by the fact that you used a name twice or that you loaded the entity\n            via different imports.`);vt().RegisteredEntities[t]=n,Et(n).name=t,Et(n).collectionName=e}}const rt=x(class{constructor(t){this.t=new St(class{}),this.t=Ot(t)}name(t){if(this.t.name=t,vt().RegisteredEntities[t])throw new Error(`deepkit/type entity with name '${t}' already registered.\n            This could be caused by the fact that you used a name twice or that you loaded the entity\n            via different imports.`);vt().RegisteredEntities[t]=this.t,this.t.name=t}description(t){this.t.description=t}collectionName(t){this.t.collectionName=t}singleTableInheritance(t={}){this.t.singleTableInheritance=t}});function it(t){return class{validate(e,n,r){return t(e,n,r)}}}function ot(t,e="",n=[],r=!1){function i(){r&&(e="",n=[])}function o(e,r,i,o){const s=new Ct(r||String(i),o);for(const t of n)t(e,s);return(0,l.hj)(i)&&e.prototype&&(e=e.prototype),t(e,s,void 0),s}const s=(r,s,a)=>{if(i(),void 0===s&&void 0===a)return;let c;r===Object&&o(r,s,a);let u="constructor";const h=Et(r),d=s&&Reflect.hasMetadata&&Reflect.hasMetadata("design:returntype",r,s)&&!(0,l.hj)(a);if((0,l.hj)(a)){u=s||"constructor";const t=h.getMethodsParamNames(u),n=h.getMethodsParamNamesAutoResolved(u);if(!e&&t[a]&&(e=t[a]),e&&(t[a]&&t[a]!==e||n[a]&&n[a]!==e))throw new Error(`Defining multiple deepkit/type decorators with different names at arguments of ${(0,l.gj)(r)}::${u} #${a} is forbidden. @t.asName('name') is required. Got ${t[a]||n[a]} !== ${e}`);if(e)t[a]=e;else if("constructor"===u){const t=(0,l.rR)(r.prototype.constructor);(e=t[a])&&(n[a]=e)}if("constructor"===u){const t=Reflect.getMetadata&&Reflect.getMetadata("design:paramtypes",r);t&&(c=t[a])}else{const t=Reflect.getMetadata&&Reflect.getMetadata("design:paramtypes",r,u);t&&(c=t[a])}}else s&&(c=Reflect.getMetadata&&Reflect.getMetadata("design:type",r,s),d&&(c=Reflect.getMetadata&&Reflect.getMetadata("design:returntype",r,s))),!e&&s&&(e=s);const f=h.getOrCreateMethodProperties(u);let p;if(d&&s){if(e&&s!==e)throw new Error(`${s} asName not allowed on methods.`);h.methods[s]||(h.methods[s]=new Ct(s)),p=h.methods[s]}else if((0,l.hj)(a))if("constructor"===u){if(!h.getPropertiesMap().has(e)){const t=new Ct(e);t.methodName="constructor",h.registerProperty(t)}p=h.getPropertiesMap().get(e),f[a]=p}else{if(!f[a]){if(!r[u])throw new Error(`Decorator @t used on a methods argument where the method does not exist. If you manually instantiate t, make sure to pass the Prototype for properties. ${(0,l.IP)(r,u)} #${a}`);const t=(0,l.rR)(r[u])[a]||String(a);f[a]=new Ct(t),f[a].methodName=u}p=f[a]}else{if(!e)throw new Error(`Could not resolve property name for class property on ${(0,l.gj)(r)}`);p=h.getPropertiesMap().get(e)||new Ct(e),h.registerProperty(p)}for(const t of n)t(r,p);(0,l.hj)(a)&&r.prototype&&(r=r.prototype),t(r,p,c)};Object.defineProperty(s,"name",{get:()=>e=>(i(),ot(t,e,n))});for(const[a,l]of Object.entries(tt))Object.defineProperty(s,a,{get:()=>(...r)=>(i(),ot(t,e,[...n,(t,e)=>{e.validators.push(it(l(...r)))}]))});return Object.defineProperty(s,"optional",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.isOptional=!0}]))}),Object.defineProperty(s,"required",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.isOptional=!1,e.manuallySetToRequired=!0}]))}),Object.defineProperty(s,"nullable",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.isNullable=!0}]))}),Object.defineProperty(s,"discriminant",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{Et(t).discriminant=e.name,e.isDiscriminant=!0}]))}),s.default=r=>(i(),ot(t,e,[...n,at(r)])),s.transform=(r,o="all")=>(i(),ot(t,e,[...n,(t,e)=>{e.serialization.set(o,r),e.deserialization.set(o,r)}])),s.serialize=(r,o="all")=>(i(),ot(t,e,[...n,(t,e)=>{e.serialization.set(o,r)}])),s.deserialize=(r,o="all")=>(i(),ot(t,e,[...n,(t,e)=>{e.deserialization.set(o,r)}])),s.description=r=>(i(),ot(t,e,[...n,(t,e)=>{e.description=r}])),s.exclude=(r="all")=>(i(),ot(t,e,[...n,ct(r)])),Object.defineProperty(s,"primary",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{Et(t),e.isId=!0}]))}),Object.defineProperty(s,"autoIncrement",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.isAutoIncrement=!0,e.defaultValue=()=>0}]))}),Object.defineProperty(s,"noValidation",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.noValidation=!0}]))}),s.index=(r,o)=>(i(),ot(t,e,[...n,ft(r,o)])),s.data=(r,o)=>(i(),ot(t,e,[...n,pt(r,o)])),s.group=(...r)=>(i(),ot(t,e,[...n,lt(...r)])),Object.defineProperty(s,"mongoId",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.setType("objectId"),"_id"===e.name&&(e.isOptional=!0)}]))}),Object.defineProperty(s,"uuid",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.setType("uuid")}]))}),Object.defineProperty(s,"decorated",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{Et(t).decorator=e.name,e.isDecorated=!0}]))}),Object.defineProperty(s,"parentReference",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.isParentReference=!0}]))}),s.use=r=>(i(),ot(t,e,[...n,r])),s.reference=r=>(i(),ot(t,e,[...n,(t,e)=>{if(e.isArray||e.isMap)throw new Error("Reference can not be of type array or map. Inverse the relation, or use backReference()");e.isReference=!0,r&&r.onDelete&&(e.referenceOptions.onDelete=r.onDelete),r&&r.onUpdate&&(e.referenceOptions.onUpdate=r.onUpdate),Ot(t).registerReference(e)}])),Object.defineProperty(s,"string",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.setType("string")}]))}),Object.defineProperty(s,"number",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.setType("number")}]))}),Object.defineProperty(s,"bigint",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.setType("bigint")}]))}),Object.defineProperty(s,"date",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.setType("date")}]))}),Object.defineProperty(s,"boolean",{get:()=>(i(),ot(t,e,[...n,(t,e)=>{e.setType("boolean")}]))}),s.backReference=r=>(i(),ot(t,e,[...n,(t,e)=>{e.backReference=r||{},Ot(t).registerReference(e)}])),s.generic=s.template=(...r)=>(i(),ot(t,e,[...n,(t,e)=>{e.templateArgs=[];for(const[n,i]of(0,l.hs)(r)){const t=e.name+"_"+n;if("string"==typeof i||"number"==typeof i||"boolean"==typeof i){const n=ht.literal(i).buildPropertySchema(t,e);e.templateArgs.push(n)}else if(et(i)){const n=i.buildPropertySchema(t);e.templateArgs.push(n)}else if(i instanceof St)e.templateArgs.push(ht.type(i.classType).buildPropertySchema(t,e));else if((0,l.PO)(i)){const n=ht.schema(i);e.templateArgs.push(ht.type(n.classType).buildPropertySchema(t,e))}else{const n=new Ct(t,e);n.setFromJSType(i),e.templateArgs.push(n)}}}])),s.buildPropertySchema=function(t="unknown",e){return o(Object,t,void 0,e)},s.toString=function(){return o(Object,e).toString()},s.mysql=r=>(i(),ot(t,e,[...n,(t,e)=>{e.data.mysql=r}])),s.postgres=r=>(i(),ot(t,e,[...n,(t,e)=>{e.data.postgres=r}])),s.sqlite=r=>(i(),ot(t,e,[...n,(t,e)=>{e.data.sqlite=r}])),s.validator=(...r)=>{i();const o=[];for(const t of r)(0,l.HV)(t)?o.push(t):o.push(it(t));return ot(t,e,[...n,(t,e)=>{e.validators.push(...o)}])},s}function st(t,e=!1){return ot(t,"",[],e)}function at(t){return(e,n)=>{n.defaultValue=b(t)?()=>t.slice(0):(0,l.PO)(t)?()=>({...t}):(0,l.mf)(t)?t:()=>t}}function lt(...t){return(e,n)=>{n.groupNames=t}}function ct(t="all"){return(e,n)=>{n.exclude=t}}function ut(t){return st((e,n,r)=>{const i=n.name;"any"!==n.type||n.typeSet||(t?"string"==typeof t?(n.type=t,n.typeSet=!0):t instanceof St?(n.type="class",n.classType=t.classType,n.typeSet=!0):(0,l.PO)(t)?(n.type="class",n.classType=ht.schema(t).classType,n.typeSet=!0):n.setFromJSType(t):r!==Array&&n.setFromJSType(r));const o=(0,l.gj)(e)+(n.methodName?"::"+n.methodName:"")+"::"+i;function s(t){return t===Object?"Object":t===String?"String":t===Number?"Number":t===Boolean?"Boolean":t===Array?"Array":t===Date?"Date":(0,l.mf)(t)?"ForwardRef":void 0===t?"undefined":"any"===t?"any":"union"===t?"union":(0,l.gj)(t)}if(r!==Promise&&void 0!==r&&"any"!==t){if(n.typeSet&&n.isArray&&r!==Array)throw new Error(`${o} type mismatch. Given ${n}, but declared is ${s(r)}. Please use the correct type in @t.type(T).`);if(n.typeSet&&!n.isArray&&r===Array)throw new Error(`${o} type mismatch. Given ${n}, but declared is ${s(r)}. Please use @t.array(MyType) or @t.array(() => MyType), e.g. @t.array(String) for '${i}: string[]'.`);if(n.typeSet&&n.isMap&&r!==Object)throw new Error(`${o} type mismatch. Given ${n}, but declared is ${s(r)}. Please use the correct type in @t.type(TYPE).`);if(!n.typeSet&&r===Array)throw new Error(`${o} type mismatch. Given nothing, but declared is Array. You have to specify what type is in that array.  When you don't declare a type in TypeScript or types are excluded, you need to pass a type manually via @t.array(t.string).\nIf you don't have a type, use @t.any.`);if(!n.typeSet&&r===Object)throw new Error(`${o} type mismatch. Given ${n}, but declared is Object or undefined. Please note that Typescript's reflection system does not support type hints based on interfaces or custom types, but only classes and primitives (String, Number, Boolean, Date). When you don't declare a type in TypeScript or types are excluded, you need to pass a type manually via @t.string.\nIf you don't have a type, use @t.any. If you reference a class with circular dependency, use @t.type(() => MyType).`)}},!0)}const ht=ut();ht.schema=function(t,e={},n){var r;let i;n&&(i=n instanceof St?n.classType:n);const o=At(i?class extends i{}:null!==(r=e.classType)&&void 0!==r?r:class{},e.name);if(o.fromClass=!1,o.collectionName=e.collectionName,!t)throw new Error("No props given");for(const[s,a]of Object.entries(t))if("string"==typeof a||"number"==typeof a||"boolean"==typeof a)o.addProperty(s,ht.literal(a));else if(et(a))o.addProperty(s,a);else if(a instanceof St)o.addProperty(s,ht.type(a.classType));else{const t=ht.schema(a,{name:s});o.addProperty(s,ht.type(t.classType))}return o},ht.extendSchema=function(t,e,n={}){return ht.schema(e,n,t)},ht.class=function(t,e={},n){return ht.schema(t,e).classType},ht.extendClass=function(t,e,n={}){return ht.schema(e,n,t).classType},ht.array=function(t){return ut("array").template(t)},ht.map=function(t,e=ht.any){return ut("map").template(e,t)},ht.any=ut("any"),ht.type=function(t){return ut(t)},ht.literal=function(t){return ut("literal").use((e,n)=>{n.type="literal",n.literalValue=t})},ht.union=function(...t){return ut("union").use((t,e)=>{e.setType("union")}).generic(...t)},ht.partial=function(t){let e=t instanceof St?t.clone():new St(class{});e=(0,l.PO)(t)?dt.schema(t):Ot(t).clone();for(const n of e.getProperties())n.isOptional=!0;return ut("partial").generic(e)},ht.enum=function(t,e=!1){return ut("enum").use((n,r)=>{r.setFromJSType(t),r.type="enum",r.allowLabelsAsValue=e})};const dt=ht;function ft(t,e){return(n,r)=>{const i=Et(n);if(r.methodName&&"constructor"!==r.methodName)throw new Error("Index could not be used on method arguments.");t=t||{};const o=i.indices.get(e=e||r.name),s=[];o&&s.push(...o.fields),s.push(r.name),o&&(t=Object.assign({},o.options,t)),i.indices.set(e,{fields:s,options:t})}}function pt(t,e){return(n,r)=>{r.data[t]=e}}function gt(t){if(!t.singleTableInheritance)throw new Error(`${t.getClassName()} has no singleTableInheritance enabled.`);return t.singleTableInheritance.type||t.name||t.getClassName().toLowerCase()}var mt=(()=>(function(t){t[t.None=0]="None",t[t.Throw=1]="Throw",t[t.ReturnSymbol=2]="ReturnSymbol"}(mt||(mt={})),mt))();const yt={RegisteredEntities:{},unpopulatedCheck:mt.Throw,enableForwardRefDetection:!0};function vt(){return yt}function bt(t){return(0,l.mf)(t)?t():t}class _t{constructor(t){this.forwardRef=t}}function wt(t){if(t instanceof _t)return t.forwardRef();try{return t()}catch(e){return}}const xt=Symbol("unpopulated");class Ct{constructor(t,e){this.name=t,this.parent=e,this.type="any",this.noValidation=!1,this.jit={},this.groupNames=[],this.isOptional=!1,this.isNullable=!1,this.manuallySetToRequired=!1,this.isDiscriminant=!1,this.allowLabelsAsValue=!1,this.isParentReference=!1,this.validators=[],this.isReference=!1,this.referenceOptions={onDelete:"CASCADE",onUpdate:"CASCADE"},this.hasDefaultValue=!1,this.templateArgs=[],this.isReferenceKey=!1,this.typeSet=!1,this.isDecorated=!1,this.isId=!1,this.isAutoIncrement=!1,this.symbol=Symbol(this.name),this.data={},this.description="",this.serialization=new Map,this.deserialization=new Map}hasManualDefaultValue(){return!this.hasDefaultValue&&void 0!==this.defaultValue}hasCircularDependency(t,e=[],n=[]){if(this.isParentReference)return!1;if("class"===this.type){const n=Ot(this.resolveClassType);return n===t||n.hasCircularDependency(t,e)}if(n.includes(this))return!0;n.push(this);for(const r of this.templateArgs)if(r.hasCircularDependency(t,e,n))return!0;return!1}isUndefinedAllowed(){return this.isOptional||"any"===this.type||this.hasManualDefaultValue()||this.hasDefaultValue}get isArray(){return"array"===this.type}get isMap(){return"map"===this.type}get isPatch(){return"partial"===this.type}get isPartial(){return"partial"===this.type}get isTypedArray(){return o.has(this.type)}get isBinary(){return"arrayBuffer"===this.type||this.isTypedArray}setType(t){this.type=t,this.typeSet=!0}getDefaultValue(){return this.literalValue?this.literalValue:this.defaultValue?(this.lastGeneratedDefaultValue=this.defaultValue(),this.lastGeneratedDefaultValue):this.extractedDefaultValue}toString(t=!0){let e=this.isOptional&&t?"?":"";if(this.isNullable&&(e+="|null"),"array"===this.type)return`${this.templateArgs[0]}[]${e}`;if("map"===this.type)return`Map<${this.templateArgs[0]}, ${this.templateArgs[1]}>${e}`;if("partial"===this.type)return`Partial<${this.templateArgs[0]}>${e}`;if("union"===this.type)return this.templateArgs.map(t=>t.toString()).join(" | ")+e;if("enum"===this.type)return"enum"+e;if("class"===this.type){if(this.classTypeName)return this.classTypeName+e;if(this.classTypeForwardRef){const t=wt(this.classTypeForwardRef);return t?(0,l.gj)(t)+e:"ForwardedRef"+e}return this.classType?(0,l.gj)(this.classType)+e:"[not-loaded]"+e}return`${this.type}${e}`}getSubType(){if("partial"===this.type)return this.templateArgs[0];if("array"===this.type)return this.templateArgs[0];if("map"===this.type)return this.templateArgs[1];throw new Error("No array or map type")}setClassType(t){this.classType=t}toJSON(){const t={name:this.name,type:this.type};if(void 0!==this.literalValue&&(t.literalValue=this.literalValue),void 0!==this.extractedDefaultValue&&(t.extractedDefaultValue=this.extractedDefaultValue),this.isDecorated&&(t.isDecorated=!0),this.isDiscriminant&&(t.isDiscriminant=!0),this.isParentReference&&(t.isParentReference=!0),this.isOptional&&(t.isOptional=!0),this.isId&&(t.isId=!0),this.allowLabelsAsValue&&(t.allowLabelsAsValue=!0),this.typeSet&&(t.typeSet=!0),this.methodName&&(t.methodName=this.methodName),this.groupNames.length&&(t.groupNames=this.groupNames),this.defaultValue&&(t.defaultValue=this.defaultValue()),this.isReference&&(t.isReference=this.isReference),"enum"===this.type&&(t.enum=this.getResolvedClassType()),this.isAutoIncrement&&(t.autoIncrement=!0),t.noValidation=this.noValidation,this.templateArgs.length&&(t.templateArgs=this.templateArgs.map(t=>t.toJSON())),this.backReference){let e="";this.backReference.via&&(e=Ot(bt(this.backReference.via)).getName()),t.backReference={mappedBy:this.backReference.mappedBy,via:e}}const e=this.getResolvedClassTypeForValidType();if(e){const n=Ot(e).name;n?t.classType=n:t.classTypeName=(0,l.gj)(e)}return t}static fromJSON(t,e,n=!0){const r=new Ct(t.name);if(r.type=t.type,r.literalValue=t.literalValue,r.extractedDefaultValue=t.extractedDefaultValue,t.isDecorated&&(r.isDecorated=!0),t.isParentReference&&(r.isParentReference=!0),t.isDiscriminant&&(r.isDiscriminant=!0),t.isOptional&&(r.isOptional=!0),t.isId&&(r.isId=!0),t.allowLabelsAsValue&&(r.allowLabelsAsValue=!0),t.typeSet&&(r.typeSet=!0),t.methodName&&(r.methodName=t.methodName),t.groupNames&&(r.groupNames=t.groupNames),t.noValidation&&(r.noValidation=t.noValidation),t.isReference&&(r.isReference=t.isReference),t.autoIncrement&&(r.isAutoIncrement=t.autoIncrement),t.enum&&(r.classType=t.enum),t.defaultValue&&(r.defaultValue=()=>t.defaultValue),t.templateArgs&&(r.templateArgs=t.templateArgs.map(t=>Ct.fromJSON(t,r,n))),t.backReference&&(r.backReference={mappedBy:t.backReference.mappedBy},t.backReference.via)){const e=vt().RegisteredEntities[t.backReference.via];if(e)r.backReference.via=Ot(e).classType;else if(n)throw new Error(`Could not unserialize type information for ${r.methodName?r.methodName+".":""}${r.name}, got entity name ${t.backReference.via} . Make sure given entity is loaded (imported at least once globally) and correctly annoated using @entity.name('${t.backReference.via}')`)}if(t.classType){const e=vt().RegisteredEntities[t.classType];if(e)r.classType=Ot(e).classType;else if(n)throw new Error(`Could not unserialize type information for ${r.methodName?r.methodName+".":""}${r.name}, got entity name ${t.classType} . Make sure given entity is loaded (imported at least once globally) and correctly annoated using @entity.name('${t.classType}')`)}return r.classTypeName=t.classTypeName,r}static getTypeFromJSType(t){return t&&i.has(t)?i.get(t):"any"}setFromJSValue(t){null!=t&&this.setFromJSType(t.constructor)}setFromJSType(t,e=vt().enableForwardRefDetection){if(null!=t)return this.type=Ct.getTypeFromJSType(t),this.typeSet="any"!==this.type,t===Array?(this.type="array",this.typeSet=!0,void(this.templateArgs[0]=new Ct("0",this))):void(!i.has(t)&&"any"!==t&&t!==Array&&t!==Object&&(this.type="class",this.classType=t,e&&(0,l.mf)(t)&&!(0,l.RL)(t)&&(this.classTypeForwardRef=t,this.classType=void 0),t instanceof _t&&(this.classTypeForwardRef=t,this.classType=void 0),this.typeSet=!0))}getForeignKeyName(){return this.name}getResolvedClassSchema(){return Ot(this.getResolvedClassType())}clone(){const t=new Ct(this.name,this.parent);for(const e of(0,l.d1)(this))t[e]=this[e];return t.data={...this.data},t.symbol=Symbol(this.name),t.classType=this.classType,t.templateArgs=this.templateArgs.slice(0),t.serialization=new Map(this.serialization),t.deserialization=new Map(this.deserialization),t}getTemplateArg(t){return this.templateArgs?this.templateArgs[t]:void 0}get resolveClassType(){if("class"===this.type||"enum"===this.type)return this.getResolvedClassType()}getResolvedClassTypeForValidType(){if("class"===this.type||"enum"===this.type)return this.getResolvedClassType()}isResolvedClassTypeIsDecorated(){if("class"===this.type){const t=Ot(this.getResolvedClassType());return Boolean(t.decorator)}return!1}getResolvedClassType(){if(this.isArray||this.isMap||this.isPartial)return this.getSubType().getResolvedClassType();if(this.classTypeResolved)return this.classTypeResolved;if(this.classTypeForwardRef){if(this.classTypeResolved=wt(this.classTypeForwardRef),this.classTypeResolved)return this.classTypeResolved;throw new Error(`ForwardRef returns no value for field ${this.name}`)}if(!this.classType||b(this.classType))throw new Error(`No ClassType given for field ${this.name}. Use @t.type(() => MyClass) for circular dependencies. Did you \`import 'reflect-metadata'\` in your root script?`);return this.classType}}class St{constructor(t){if(this.buildId=0,this.subClasses=[],this.methodProperties=new Map,this.methods={},this.jit={},this.data={},this.symbol=Symbol("ClassSchema"),this.initializedMethods=new Set,this.propertiesMap=new Map,this.properties=[],this.propertyNames=[],this.methodsParamNames=new Map,this.methodsParamNamesAutoResolved=new Map,this.indices=new Map,this.references=new Set,this.referenceInitialized=!1,this.onLoad=[],this.hasFullLoadHooksCheck=!1,this.detectedDefaultValueProperties=[],this.assignedInConstructor=[],this.extractedDefaultValues={},this.fromClass=!0,!t)throw new Error("No classType given");this.classType=t,this.parseDefaults()}isCustomClass(){return this.classType!==Object}toString(){return`<ClassSchema ${this.getClassName()}>\n`+this.properties.map(t=>"   "+t.name+"="+t.toString()).join("\n")+"\n</ClassSchema>"}getAssignedSingleTableInheritanceSubClassesByIdentifier(){if(!this.subClasses.length)return;const t=this.getSingleTableInheritanceDiscriminant();for(const e of this.subClasses)if(e.singleTableInheritance){this.assignedSingleTableInheritanceSubClassesByIdentifier||(this.assignedSingleTableInheritanceSubClassesByIdentifier={});const n=e.getProperty(t.name).getDefaultValue()||gt(e);this.assignedSingleTableInheritanceSubClassesByIdentifier[n]=e}if(1===this.subClasses.length)throw new Error("wat");return this.assignedSingleTableInheritanceSubClassesByIdentifier}hasSingleTableInheritanceSubClasses(){return void 0!==this.getAssignedSingleTableInheritanceSubClassesByIdentifier()}getSingleTableInheritanceDiscriminant(){if(this.data.singleTableInheritanceProperty)return this.data.singleTableInheritanceProperty;let t=function(t){let e;for(const n of t){if(e&&!n.discriminant)throw new Error(`${e.schema.getClassName()} has a discriminant on '${e.property.name}' but ${n.getClassName()} has none.`);if(e&&n.discriminant&&n.discriminant!==e.property.name)throw new Error(`${e.schema.getClassName()} has a discriminant on '${e.property.name}' but ${n.getClassName()} has one on '${n.discriminant}'.`);!e&&n.discriminant&&(e={schema:n,property:n.getProperty(n.discriminant)})}return e?e.property.name:void 0}(this.subClasses);if(t||(t=function(t){const e={};for(const n of t)for(const t of n.getProperties())if("literal"===t.type)if(e[t.name]){let r=e[t.name];if(r.found++,r.values.includes(t.literalValue)){const e=r.schemas[r.values.indexOf(t.literalValue)];if(e!==n)throw new Error(`${n.getClassName()} has a literal on ${t.name} that is already used by ${e.getClassName()}.`)}r.values.push(t.literalValue),r.schemas.push(n)}else e[t.name]={found:1,values:[t.literalValue],schemas:[n]};for(const[n,r]of Object.entries(e))if(r.found===t.length)return n}(this.subClasses)),!t)throw new Error(`Sub classes of ${this.getClassName()} single-table inheritance [${this.subClasses.map(t=>t.getClassName())}] have no common discriminant or common literal. Please define one.`);return this.data.singleTableInheritanceProperty=this.getProperty(t)}parseDefaults(){const t=this.classType.toString(),e=t.startsWith("class")?(0,l.L8)(t,"constructor"):t,n=RegExp(String.raw`this\.([^ \t\.=]+)[^=]*=([^ \n\t;]+)?`,"g");let r;for(;null!==(r=n.exec(e));){const t=r[1],e=r[2];this.assignedInConstructor.push(t),t!==e&&this.detectedDefaultValueProperties.push(t)}}getCollectionName(){const t=this.collectionName||this.name;if(!t)throw new Error(`No entity name set for ${this.getClassName()}`);return t}getClassPropertyName(t){return this.getClassName()+"."+t}getName(){if(!this.name)throw new Error(`Class ${this.getClassName()} has no entity name set`);return this.name}getClassName(){return(0,l.gj)(this.classType)}getJit(t,e){let n=this.jit[t];return void 0!==n||(n=e(this),this.jit[t]=n,(0,l.SV)(this.jit)),n}hasFullLoadHooks(){if(this.hasFullLoadHooksCheck)return!1;this.hasFullLoadHooksCheck=!0;for(const t of this.properties)if("class"===t.type&&t.getResolvedClassSchema().hasFullLoadHooks())return!0;return this.hasFullLoadHooksCheck=!1,!!this.onLoad.find(t=>!!t.options.fullLoad)}hasCircularDependency(t,e=[]){if(t=t||this,e.includes(this))return!0;e.push(this);for(const n of this.properties)if(!n.isParentReference&&n.hasCircularDependency(t,e))return!0;return!1}addIndex(t,e,n){e=e||t.join("_"),this.indices.set(e,{fields:t,options:n||{}})}clone(t){t||(t=class{});const e=new St(t);t.prototype[Tt]=e,e.name=this.name,e.name=this.name,e.collectionName=this.collectionName,e.databaseSchemaName=this.databaseSchemaName,e.decorator=this.decorator,e.discriminant=this.discriminant,e.fromClass=this.fromClass,e.singleTableInheritance=this.singleTableInheritance?{...this.singleTableInheritance}:void 0,e.subClasses=this.subClasses.slice(),e.superClass=this.superClass,e.propertiesMap=new Map,e.properties=[];for(const[n,r]of this.propertiesMap){const t=r.clone();e.propertiesMap.set(n,t),e.properties.push(t)}e.methodProperties=new Map;for(const[n,r]of this.methodProperties.entries()){const t=[];for(const n of r)t.push(e.propertiesMap.get(n.name)||n.clone());e.methodProperties.set(n,t)}e.propertyNames=this.propertyNames.slice(0),e.methodsParamNames=new Map,e.methodsParamNamesAutoResolved=new Map;for(const[n,r]of this.methodsParamNames.entries())e.methodsParamNames.set(n,r.slice(0));for(const[n,r]of this.methodsParamNamesAutoResolved.entries())e.methodsParamNamesAutoResolved.set(n,r.slice(0));e.indices=new Map;for(const[n,r]of this.indices.entries())e.indices.set(n,{...r});e.onLoad=[];for(const n of this.onLoad)e.onLoad.push({...n});return e}addProperty(t,e){e(this.classType,t),this.resetCache()}removeProperty(t){const e=this.propertiesMap.get(t);e&&(this.propertiesMap.delete(t),(0,l.lH)(this.properties,e),(0,l.lH)(this.propertyNames,t))}registerProperty(t){this.fromClass&&!t.methodName&&(t.hasDefaultValue=this.detectedDefaultValueProperties.includes(t.name),this.extractedDefaultValues[t.name]&&(t.extractedDefaultValue=this.extractedDefaultValues[t.name]),t.manuallySetToRequired||t.hasDefaultValue||this.assignedInConstructor.includes(t.name)||(t.isOptional=!0));const e=this.methodProperties.get("constructor");if(e)for(let n=0;n<e.length;n++)e[n]&&e[n].name===t.name&&(e[n]=t);this.propertiesMap.has(t.name)?(0,l.lH)(this.properties,this.propertiesMap.get(t.name)):this.propertyNames.push(t.name),this.propertiesMap.set(t.name,t),this.properties.push(t)}resetCache(){this.jit={},this.primaryKeys=void 0,this.autoIncrements=void 0,this.buildId++}addMethodProperty(t,e,n){n(this.classType,t,e),this.buildId++}getMethodProperties(t){return this.initializeMethod(t),this.methodProperties.get(t)||[]}getMethod(t){if(this.initializeMethod(t),!this.methods[t])throw new Error(`Method ${t} not found on ${this.getClassName()}`);return this.methods[t]}extractForeignKeyToPrimaryKey(t,e){const n={},r=this.getPrimaryFields();if(1===r.length)n[r[0].name]=e[t.name];else for(const i of r)n[i.name]=e[t.name+(0,l.kC)(i.name)];return n}extractPrimaryKey(t){const e={};for(const n of this.getPrimaryFields())e[n.name]=t[n.name];return e}getPrimaryField(){const t=this.getPrimaryFields();if(0===t.length)throw new Error(`Class ${(0,l.gj)(this.classType)} has no primary field. Use @t.primary to define one.`);if(t.length>1)throw new Error(`Class ${(0,l.gj)(this.classType)} has multiple primary fields. This is not supported.`);return t[0]}hasCircularReference(t=[]){if(t.includes(this))return!0;t.push(this);for(const e of this.properties){if("partial"===e.type&&"class"===e.getSubType().type&&e.getSubType().getResolvedClassSchema().hasCircularReference(t))return!0;if("map"===e.type&&"class"===e.getSubType().type&&e.getSubType().getResolvedClassSchema().hasCircularReference(t))return!0;if("array"===e.type&&"class"===e.getSubType().type&&e.getSubType().getResolvedClassSchema().hasCircularReference(t))return!0;if("class"===e.type&&e.getResolvedClassSchema().hasCircularReference(t))return!0}return t.pop(),!1}getPrimaryFieldName(){return this.getPrimaryField().name}getAutoIncrementField(){for(const t of this.properties)if(t.isAutoIncrement)return t}hasPrimaryFields(){return this.primaryKeys||this.getPrimaryFields(),this.primaryKeys.length>0}getPrimaryFields(){if(this.primaryKeys)return this.primaryKeys;this.primaryKeys=[];for(const t of this.properties)t.isId&&this.primaryKeys.push(t);return this.primaryKeys}hasMethod(t){return!!this.methods[t]}registerReference(t){this.references.add(t)}isSchemaOf(t){const e=Ot(t);if(this===e)return!0;if(e.classType){let t=Object.getPrototypeOf(this.classType.prototype);for(;t&&t!==Object.prototype;){if(Ot(t)===e)return!0;t=Object.getPrototypeOf(t)}}return!1}exclude(...t){const e=this.clone();for(const n of t)e.removeProperty(n);return e}include(...t){const e=this.clone();for(const n of this.propertiesMap.keys())t.includes(n)||e.removeProperty(n);return e}extend(t,e){const n=this.clone(),r=dt.schema(t);for(const i of r.properties)n.registerProperty(i);return n}initializeMethod(t){if(!this.initializedMethods.has(t)){if(!("constructor"===t||Reflect.getMetadata&&Reflect.hasMetadata("design:returntype",this.classType.prototype,t)))throw new Error(`Method ${this.getClassPropertyName(t)} has no decorators used or is not defined, so reflection does not work. Use @t on the method or arguments. Is emitDecoratorMetadata enabled? Correctly 'reflect-metadata' imported? Return type annotated?`);if("constructor"!==t&&!this.methods[t]){const e=Reflect.getMetadata&&Reflect.getMetadata("design:returntype",this.classType.prototype,t);this.methods[t]=new Ct(t),this.methods[t].setFromJSType(e),this.methods[t].typeSet=!1}const e=this.getOrCreateMethodProperties(t),n="constructor"===t?Reflect.getMetadata&&Reflect.getMetadata("design:paramtypes",this.classType):Reflect.getMetadata&&Reflect.getMetadata("design:paramtypes",this.classType.prototype,t),r=(0,l.rR)(this.classType.prototype[t]);for(const[i,o]of(0,l.hs)(n))e[i]||(e[i]=new Ct(r[i]||String(i)),e[i].methodName=t,n[i]!==Object&&(e[i].setFromJSType(o,!1),e[i].typeSet=!1));this.initializedMethods.add(t)}}getOrCreateMethodProperties(t){return this.methodProperties.has(t)||this.methodProperties.set(t,[]),this.methodProperties.get(t)}getProperties(){return this.properties}getPropertiesMap(){return this.propertiesMap}getMethodsParamNames(t){return this.methodsParamNames.has(t)||this.methodsParamNames.set(t,[]),this.methodsParamNames.get(t)}getMethodsParamNamesAutoResolved(t){return this.methodsParamNamesAutoResolved.has(t)||this.methodsParamNamesAutoResolved.set(t,[]),this.methodsParamNamesAutoResolved.get(t)}getDiscriminantPropertySchema(){if(!this.discriminant)throw new Error(`No discriminant property found at class ${this.getClassName()}`);return this.getProperty(this.discriminant)}getDecoratedPropertySchema(){if(!this.decorator)throw new Error("No decorated property found");return this.getProperty(this.decorator)}getIndex(t){return this.indices.get(t)}getPropertyOrUndefined(t){return this.propertiesMap.get(t)}hasProperty(t){return this.propertiesMap.has(t)}findReverseReference(t,e){if(e.backReference&&e.backReference.mappedBy&&e.getResolvedClassTypeForValidType()===this.classType)return this.getProperty(e.backReference.mappedBy);const n=[];for(const r of this.references)if(r!==e&&(r.isArray||r.getResolvedClassTypeForValidType()===t)&&(!r.isArray||r.getSubType().getResolvedClassTypeForValidType()===t))if(r.backReference&&r.backReference.mappedBy){if(r.backReference.mappedBy===e.name)return r}else if(e.backReference&&e.backReference.mappedBy&&!e.backReference.via){if(e.backReference.mappedBy===r.name)return r}else e.backReference&&e.backReference.via&&r.backReference&&r.backReference.via?bt(e.backReference.via)===bt(r.backReference.via)&&n.push(r):e.backReference&&e.isArray&&!e.backReference.via&&r.isArray||n.push(r);if(n.length>1)throw new Error(`Class ${(0,l.gj)(this.classType)} has multiple potential reverse references [${n.map(t=>t.name).join(", ")}] for ${e.name} to class ${(0,l.gj)(t)}. Please specify each back reference by using 'mappedBy', e.g. @t.backReference({mappedBy: 'fieldNameOnTheOtherSide'} so its not ambiguous anymore.`);if(1===n.length)return n[0];throw new Error(`Class ${(0,l.gj)(this.classType)} has no reference to class ${(0,l.gj)(t)} defined.`)}getPropertiesByGroup(...t){const e=[];for(const n of this.properties)for(const r of n.groupNames)if(t.includes(r)){e.push(n);break}return e}getProperty(t){const e=this.propertiesMap.get(t);if(!e)throw new Error(`Property ${this.getClassName()}.${t} not found`);return e}}Symbol();const Tt=Symbol.for("deepkit/type/classSchema");function Et(t){const e=t.prototype?t.prototype:t,n=t.prototype?t:t.constructor;if(e.hasOwnProperty(Tt)||Object.defineProperty(e,Tt,{writable:!0,enumerable:!1}),!e[Tt]){let t=Object.getPrototypeOf(e),r=!1;for(;t&&t!==Object.prototype;){if(t[Tt]){r=!0;const i=t[Tt],o=i.clone(n);o.subClasses=[],e[Tt]=o,o.superClass=i,i.subClasses.push(o);break}t=Object.getPrototypeOf(t)}r||(e[Tt]=new St(n))}return e[Tt]}function Ot(t){if(t instanceof St)return t;const e=t.prototype?t:t.constructor;if(e.prototype.hasOwnProperty(Tt)||Object.defineProperty(e.prototype,Tt,{writable:!0,enumerable:!1}),!e.prototype[Tt]){let t=Object.getPrototypeOf(e.prototype),n=!1;for(;t&&t!==Object.prototype;){if(t[Tt]){n=!0;const r=t[Tt],i=r.clone(e);i.subClasses=[],e.prototype[Tt]=i,i.superClass=r,r.subClasses.push(i);break}t=Object.getPrototypeOf(t)}n||(e.prototype[Tt]=new St(e))}return e.prototype[Tt]}function At(t,e=""){const n=void 0!==t,r=t||class{};e&&Object.defineProperty(r,"name",{value:e});const i=Et(r);return i.name=e,i.fromClass=n,i}function Pt(t){const e=window.atob(t),n=e.length,r=new Uint8Array(new ArrayBuffer(n));for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}function kt(t,e){return"function"==typeof atob?new e(Pt(t).buffer):function(t,e){return new e(t.buffer,t.byteOffset,t.length/e.BYTES_PER_ELEMENT)}(r.lW.from(t,"base64"),e)}function Mt(t){return"function"==typeof atob?Pt(t).buffer:It(r.lW.from(t,"base64"))}function It(t){return ArrayBuffer.isView(t)?t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):t}function Rt(t){return r.lW.from(t).toString("base64")}function Dt(t){return function(t){return t instanceof r.lW?t:r.lW.from(t.buffer,t.byteOffset,t.byteLength)}(t).toString("base64")}function Nt(t,e){return r.lW.from(t).toString(e)}class Lt extends l.sH{constructor(t){super("Validation failed: "+t.map(t=>t.toString()).join(", ")),this.errors=t}static from(t){return new Lt(t.map(t=>new Y(t.path,t.code||"",t.message)))}}function Ft(t,e,n){return X(t)(e,n)}const Bt={literal:1,Uint16Array:2,arrayBuffer:2,Float32Array:2,Float64Array:2,Int8Array:2,Int16Array:2,Int32Array:2,Uint8Array:2,Uint8ClampedArray:2,Uint32Array:2,objectId:2,uuid:2,class:2,date:2,enum:2,boolean:3,string:3,number:3,bigint:3,patch:4,partial:4,union:4,map:4,array:4,any:5};function jt(t,e){const n=t.templateArgs.slice(0);n.sort((t,e)=>Bt[t.type]<Bt[e.type]?-1:Bt[t.type]>Bt[e.type]?1:0);const r=1===n.filter(t=>"class"===t.type).length&&0===n.filter(t=>"map"===t.type).length&&0===n.filter(t=>"patch"===t.type).length&&0===n.filter(t=>"partial"===t.type).length,i=[];for(const o of n){let t=e.get(o.type);if("class"===o.type&&r&&(t=e.get("map")),!t)throw new Error(`No type guard for ${o.type} found`);i.push({property:o,guard:t(o)})}return i}const $t=new Map;function Ut(t,e){$t.set(t,e)}function Vt(t){return t=>ArrayBuffer.isView(t)||t&&"binary"===t.$type}Ut("class",t=>{const e=t.getResolvedClassSchema();if(e.discriminant){const t=e.getProperty(e.discriminant),n="literal"===t.type?t.literalValue:t.getDefaultValue();if(void 0===n)throw new Error(`Discriminant ${e.getClassPropertyName(t.name)} has no default value.`);return e=>e&&e[t.name]===n}for(const n of e.getProperties())if("literal"===n.type)return t=>t&&t[n.name]===n.literalValue;throw new Error(`Type of property ${t.name} (${t.toString()}) has no discriminant or literal set. Could not discriminate the value.`)}),Ut("string",t=>t=>"string"==typeof t),Ut("enum",t=>e=>void 0!==e&&!(0,l.Cz)(t.resolveClassType,e,t.allowLabelsAsValue)),Ut("objectId",t=>t=>"string"==typeof t&&24===t.length),Ut("uuid",t=>t=>"string"==typeof t&&36===t.length&&"-"===t[23]&&"-"===t[19]&&"-"===t[13]&&"-"===t[8]),Ut("arrayBuffer",t=>t=>t instanceof ArrayBuffer||t&&"binary"===t.$type);for(const Ce of o.keys())Ut(Ce,Vt);const Zt=/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}.[0-9]{3}Z$/;function zt(t){return(0,l.Kn)(t)&&qt in t}function Ht(t){if(!(Yt in t))return!1;const e=function(t){return t[Yt]}(t);return!!e&&e.hydrated}Ut("date",t=>t=>t instanceof Date||"string"==typeof t&&null!==Zt.exec(t)),Ut("any",t=>t=>!0),Ut("union",t=>{throw new Error("Union typechecking not implemented. Nested unions thus not supported yet.")}),Ut("array",t=>t=>t&&void 0!==t.length&&"string"!=typeof t||"function"==typeof t.slice),Ut("map",t=>t=>t&&"object"==typeof t&&"function"!=typeof t.slice),Ut("patch",t=>t=>t&&"object"==typeof t&&"function"!=typeof t.slice),Ut("partial",t=>t=>t&&"object"==typeof t&&"function"!=typeof t.slice),Ut("number",t=>t=>"number"==typeof t||"string"==typeof t&&!Number.isNaN(parseInt(t))),Ut("bigint",t=>t=>"bigint"==typeof t||t&&"bigint"===t.$type),Ut("boolean",t=>t=>"boolean"==typeof t||1===t||0===t||"1"===t||"2"===t||"true"===t||"false"===t),Ut("literal",t=>"number"==typeof t.literalValue?e=>0+e===t.literalValue:"string"==typeof t.literalValue?e=>""+e===t.literalValue:!0===t.literalValue?t=>"true"===t||"1"===t||1===t||!0===t:!1===t.literalValue?t=>"false"===t||"0"===t||0===t||!1===t:e=>e===t.literalValue);const qt=Symbol("reference"),Yt=Symbol("reference/item");function Gt(t,e){const n=[],r=Ot(t);qt in t.prototype||(t=Wt(r));for(const o of r.getMethodProperties("constructor"))n.push(e[o.name]);const i=vt().unpopulatedCheck;vt().unpopulatedCheck=mt.None;try{const r=new t(...n);return Object.assign(r,e),r}finally{vt().unpopulatedCheck=i}}function Wt(t){const e=t.classType;if(t.data.referenceClass)return t.data.referenceClass;const n=class extends e{};Object.defineProperty(n.prototype,qt,{value:{hydrator:void 0},enumerable:!1}),Object.defineProperty(n.prototype,Yt,{value:null,writable:!0,enumerable:!1}),Object.defineProperty(n.prototype,Tt,{writable:!0,enumerable:!1,value:t}),n.buildId=t.buildId;const r=vt();Object.defineProperty(n,"name",{value:t.getClassName()+"Reference"}),t.data.referenceClass=n;for(const i of t.getProperties()){if(i.isId)continue;const e=i.isReference||i.backReference?`Reference ${t.getClassName()}.${i.name} was not loaded. Use joinWith(), useJoinWith(), etc to populate the reference.`:`Can not access ${t.getClassName()}.${i.name} since class was not completely hydrated. Use 'await hydrate(item)' to completely load it.`;Object.defineProperty(n.prototype,i.name,{enumerable:!1,configurable:!0,get(){if(this.hasOwnProperty(i.symbol))return this[i.symbol];if(r.unpopulatedCheck===mt.Throw)throw new Error(e);return r.unpopulatedCheck===mt.ReturnSymbol?xt:void 0},set(t){r.unpopulatedCheck!==mt.None&&Object.defineProperty(this,i.symbol,{enumerable:!1,writable:!0,value:t})}})}return n}P("number",(t,e,n)=>`\n    if ('number' !== typeof ${t}) {\n        if ('string' === typeof ${t}) {\n            if (!Number.isFinite(parseFloat(${t}))) {\n                ${n.raise("invalid_number","No number given")}\n            }\n        } else {\n            ${n.raise("invalid_number","No number given")}\n        }\n    } else if (${t} !== ${t}) {\n        ${n.raise("invalid_number","No valid number given, got NaN")}\n    }\n    `),P("string",(t,e,n)=>`if ('string' !== typeof ${t}) ${n.raise("invalid_string","No string given")};`),P("enum",(t,e,n)=>{const r=e.allowLabelsAsValue,i=n.reserveVariable(),o=(0,l.B8)(e.resolveClassType);if(r)for(const s of(0,l.Zu)(e.resolveClassType))o.push(s);return{template:`\n        var typeValue = ${i};\n        if (undefined !== ${t} && !isValidEnumValue(typeValue, ${t}, ${r})) {\n            ${n.raise("invalid_enum",`Invalid enum value received. Allowed: ${o.join(",")}`)};\n        }\n    `,context:{[i]:e.resolveClassType,isValidEnumValue:l.Cz,getEnumValues:l.B8,getEnumLabels:l.Zu,getValidEnumValue:l.td}}}),P("boolean",(t,e,n)=>`\n    if ('boolean' !== typeof ${t}) {\n        if (${t} === '1' || ${t} === '0' || ${t} === 'true' || ${t} === 'false' || ${t} === 0 || ${t} === 1) {\n        } else {\n            ${n.raise("invalid_boolean","No Boolean given")};\n        }\n    }`),P("uuid",(t,e,n)=>({template:`\n        if ('string' !== typeof ${t} || !${t}.match(uuidValidation)) {\n            ${n.raise("invalid_uuid","No UUID given")};\n        }\n        `,context:{uuidValidation:new RegExp(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i)}})),P("objectId",(t,e,n)=>({template:`\n        if ('string' !== typeof ${t} || !${t}.match(objectIdValidation)) {\n            ${n.raise("invalid_objectId","No Mongo ObjectID given")};\n        }\n        `,context:{objectIdValidation:new RegExp(/^[a-fA-F0-9]{24}$/)}})),P("date",(t,e,n)=>`\n    if (${t} instanceof Date) {\n        if (isNaN(new Date(${t}).getTime())) {\n            ${n.raise("invalid_date","No valid Date given")};\n        }\n    } else if ('string' !== typeof ${t} || !${t}) {\n        ${n.raise("invalid_date","No Date string given")};\n    } else if (isNaN(new Date(${t}).getTime())) {\n        ${n.raise("invalid_date","No valid Date string given")};\n    }\n    `),P("class",(t,e,n,r)=>{const i=n.reserveVariable("jitValidate"),o=Ot(e.resolveClassType);return n.context.set("referenceSymbol",qt),{template:`\n            if ('object' === typeof ${t} && 'function' !== typeof ${t}.slice) {\n                if ((!_stack || _stack.length === 0 || !_stack.includes(${t})) && !(referenceSymbol in ${t})) {\n                    ${i}.fn(${t}, ${n.path}, _errors, _stack);\n                }\n            } else {\n                ${n.raise("invalid_type","Type is not an object")};\n            }\n        `,context:{[i]:r.getOrCreate(o,()=>X(o,r))}}}),P("literal",(t,e,n)=>""),P("union",(t,e,n,r)=>{const i=new Map;let o=["if (false) { }"];for(const s of jt(e,$t)){const e=n.reserveVariable("guard_"+s.property.type);i.set(e,s.guard),o.push(`\n                //guard:${s.property.type}\n                else if (${e}(${t})) {\n                    //validate this type: ${s.property.type}\n                    ${W(n.path,t,s.property,i,r)}\n                }\n            `)}return{template:`\n             ${o.join("\n")}\n             else {\n                if (${t} === null) {\n                    if (!${e.isNullable}) {\n                        ${n.raise("required","Required value is null")};\n                    }\n                } else if (${t} === undefined) {\n                    if (!${e.isUndefinedAllowed()}) {\n                        ${n.raise("required","Required value is undefined")};\n                    }\n                } else {\n                    ${n.raise("invalid_union","No compatible type for union found")};\n                }\n             }\n        `,context:i}});class Jt{constructor(t,e){this.serializer=t,this.parent=e,this.compilers=new Map}append(t,e){const n=this.get(t);this.compilers.set(t,(r,i)=>{var o;if(i.ended)return;if(n){if(n(r,i),i.ended)return;return void e(r,i)}const s=null===(o=this.parent)||void 0===o?void 0:o.get(t);if(s)s(r,i),i.ended||e(r,i);else{if(i.ended)return;e(r,i)}})}prepend(t,e){const n=this.get(t);this.compilers.set(t,(r,i)=>{var o;if(e(r,i),i.ended)return;if(n)return void n(r,i);const s=null===(o=this.parent)||void 0===o?void 0:o.get(t);if(s)s(r,i);else{if(i.ended)return;e(r,i)}})}register(t,e){this.compilers.set(t,e)}reset(t){this.compilers.delete(t)}noop(t){this.compilers.set(t,(t,e)=>{e.addSetter(`${e.accessor}`)})}registerForBinary(t){for(const e of s)this.register(e,t)}fork(t){return new Jt(t,this)}get(t){return this.compilers.get(t)||(this.parent?this.parent.get(t):void 0)}has(t){return!!this.compilers.has(t)||!!this.parent&&this.parent.has(t)}}class Xt{constructor(t){this.name=t,this.toClass=new Jt(this),this.fromClass=new Jt(this),this.toClassSymbol=Symbol("toClass-"+t),this.fromClassSymbol=Symbol("fromClass-"+t),this.partialToClassSymbol=Symbol("partialToClass-"+t),this.partialFromClassSymbol=Symbol("partialFromClass-"+t)}fork(t){const e=this;return class extends Xt{constructor(){super(t),this.toClass=e.toClass.fork(this),this.fromClass=e.fromClass.fork(this)}}}for(t){return new Qt(this,Ot(t))}serializeProperty(t,e){return D(t,this)(e)}deserializeProperty(t,e){return N(t,this)(e)}deserializeMethodResult(t,e){return N(t,this)(e)}}class Qt{constructor(t,e){this.serializer=t,this.schema=e,this._serialize=void 0,this._deserialize=void 0,this._partialSerialize=void 0,this._partialDeserialize=void 0}from(t,...e){return this.serialize(t.for(this.schema).deserialize(...e))}to(t,...e){return t.for(this.schema).serialize(this.deserialize(...e))}fromPartial(t,e,n){return this.partialSerialize(t.for(this.schema).partialDeserialize(e,n))}toPartial(t,e){return t.for(this.schema).partialSerialize(this.partialDeserialize(e))}fromPatch(t,e,n){return this.patchSerialize(t.for(this.schema).patchDeserialize(e,n))}toPatch(t,...e){return t.for(this.schema).patchSerialize(this.patchDeserialize(...e))}serialize(t,e){return this._serialize||(this._serialize=j(this.schema,this.serializer)),this._serialize(t,e)}validatedDeserialize(t,e){this._deserialize||(this._deserialize=U(this.schema,this.serializer));const n=this._deserialize(t,e),r=Ft(this.schema,n);if(r.length)throw new Lt(r);return n}deserialize(t,e,n){return this._deserialize||(this._deserialize=U(this.schema,this.serializer)),this._deserialize(t,e,n)}serializeProperty(t,e){var n;return D(null!==(n=this.schema.getPropertiesMap().get(t))&&void 0!==n?n:R(this.schema,t),this.serializer)(e)}deserializeProperty(t,e){var n;return N(null!==(n=this.schema.getPropertiesMap().get(t))&&void 0!==n?n:R(this.schema,t),this.serializer)(e)}serializeMethodArgument(t,e,n){return D(this.schema.getMethodProperties(t)[e],this.serializer)(n)}deserializeMethodArgument(t,e,n){return N(this.schema.getMethodProperties(t)[e],this.serializer)(n)}serializeMethodResult(t,e){return D(this.schema.getMethod(t),this.serializer)(e)}deserializeMethodResult(t,e){return N(this.schema.getMethod(t),this.serializer)(e)}partialSerialize(t,e){return this._partialSerialize||(this._partialSerialize=Z(this.schema,this.serializer)),this._partialSerialize(t,e)}partialDeserialize(t,e){return this._partialDeserialize||(this._partialDeserialize=V(this.schema,this.serializer)),this._partialDeserialize(t,e)}patchDeserialize(t,e){var n,r;const i={};for(const o in t){if(!t.hasOwnProperty(o))continue;const s=null!==(n=this.schema.getPropertiesMap().get(o))&&void 0!==n?n:R(this.schema,o);i[o]=N(s,this.serializer)(t[o],null!==(r=null==e?void 0:e.parents)&&void 0!==r?r:[],e)}return i}patchSerialize(t,e){var n;const r={};for(const i in t){if(!t.hasOwnProperty(i))continue;const o=null!==(n=this.schema.getPropertiesMap().get(i))&&void 0!==n?n:R(this.schema,i);r[i]=D(o,this.serializer)(t[i],e)}return r}}new class extends Xt{constructor(){super("empty")}};const Kt=new class extends Xt{constructor(){super("json")}};function te(t,e){e.addSetter(`typeof ${e.accessor} === 'string' ? ${e.accessor} : ''+${e.accessor};`)}function ee(t,e,n){return U(Ot(t),Kt)(e,n)}function ne(t){return t&&"binary"===t.$type&&"string"==typeof t.data}function re(t){return t&&"bigint"===t.$type&&"string"==typeof t.data}function ie(t,e){e.addSetter(`typeof ${e.accessor} === 'number' ? ${e.accessor} : +${e.accessor};`)}function oe(t,e){const n=e.setVariable("a"),r=e.setVariable("l");e.addCodeForSetter(`\n    if (${e.accessor}.length === undefined || 'string' === typeof ${e.accessor} || 'function' !== typeof ${e.accessor}.slice) {\n        ${t.isOptional?"":`${e.setter} = [];`}\n    } else {\n         let ${r} = ${e.accessor}.length;\n         let ${n} = ${e.accessor}.slice();\n         while (${r}--) {\n            //make sure all elements have the correct type\n            if (${e.accessor}[${r}] !== undefined && ${e.accessor}[${r}] !== null) {\n                let itemValue;\n                ${O("itemValue",`${n}[${r}]`,t.getSubType(),e.serializerCompilers,e.rootContext,e.jitStack)}\n                if (${!t.getSubType().isOptional} && itemValue === undefined) {\n                    ${n}.splice(${r}, 1);\n                } else {\n                    ${n}[${r}] = itemValue;\n                }\n            }\n         }\n         ${e.setter} = ${n};\n    }\n    `)}function se(t,e){const n=e.setVariable("a"),r=e.setVariable("i");let i=t.isOptional?"":`${e.setter} = {};`;e.addCodeForSetter(`\n        let ${n} = {};\n        //we make sure its a object and not an array\n        if (${e.accessor} && 'object' === typeof ${e.accessor} && 'function' !== typeof ${e.accessor}.slice) {\n            for (let ${r} in ${e.accessor}) {\n                if (!${e.accessor}.hasOwnProperty(${r})) continue;\n                if (${!t.getSubType().isOptional} && ${e.accessor}[${r}] === undefined) {\n                    continue;\n                }\n                ${O(`${n}[${r}]`,`${e.accessor}[${r}]`,t.getSubType(),e.serializerCompilers,e.rootContext,e.jitStack)}\n            }\n            ${e.setter} = ${n};\n        } else {\n            ${i}\n        }\n    `)}Kt.toClass.register("string",te),Kt.fromClass.register("string",te),Kt.toClass.register("number",ie),Kt.fromClass.register("number",ie),Kt.toClass.register("literal",(t,e)=>{const n=e.setVariable("_literal_value_"+t.name,t.literalValue);e.addSetter(n)}),Kt.toClass.register("uuid",(t,e)=>{e.addCodeForSetter(`if ('string' === typeof ${e.accessor}) ${e.setter} = ${e.accessor};`)}),Kt.fromClass.register("uuid",(t,e)=>{e.addCodeForSetter(`if ('string' === typeof ${e.accessor}) ${e.setter} = ${e.accessor};`)}),Kt.toClass.prepend("undefined",(t,e)=>{if("literal"===t.type&&!t.isOptional){const n=e.setVariable("_literal_value_"+t.name,t.literalValue);e.addSetter(n)}}),Kt.fromClass.prepend("undefined",(t,e)=>{if("literal"===t.type&&!t.isOptional){const n=e.setVariable("_literal_value_"+t.name,t.literalValue);e.addSetter(n)}}),Kt.toClass.prepend("null",(t,e)=>{if("literal"===t.type&&!t.isNullable){const n=e.setVariable("_literal_value_"+t.name,t.literalValue);e.addSetter(n)}}),Kt.fromClass.prepend("null",(t,e)=>{if("literal"===t.type&&!t.isNullable){const n=e.setVariable("_literal_value_"+t.name,t.literalValue);e.addSetter(n)}}),Kt.toClass.register("date",(t,e)=>{e.addSetter(`new Date(${e.accessor});`)}),Kt.toClass.register("boolean",(t,e)=>{e.addCodeForSetter(`\n    if ('boolean' === typeof ${e.accessor}) {\n        ${e.setter} = ${e.accessor};\n    } else {\n        if ('true' === ${e.accessor} || '1' === ${e.accessor} || 1 === ${e.accessor}) ${e.setter} = true;\n        if ('false' === ${e.accessor} || '0' === ${e.accessor} || 0 === ${e.accessor}) ${e.setter} = false;\n    }\n    `)}),Kt.toClass.register("enum",(t,e)=>{const n=t.allowLabelsAsValue,r=e.setVariable("typeValue",t.resolveClassType);e.setContext({isValidEnumValue:l.Cz,getEnumValues:l.B8,getEnumLabels:l.Zu,getValidEnumValue:l.td}),e.addCodeForSetter(`\n        var typeValue = ${r};\n        if (undefined !== ${e.accessor} && !isValidEnumValue(typeValue, ${e.accessor}, ${n})) {\n            const valids = getEnumValues(typeValue);\n            if (${n}) {\n                //IE11 compatible way\n                getEnumLabels(typeValue).forEach(function(label){valids.push(label);});\n            }\n            throw new Error('Invalid ENUM given in property ${t.name}: ' + ${e.accessor} + ', valid: ' + valids.join(','));\n        }\n        ${e.setter} = getValidEnumValue(typeValue, ${e.accessor}, ${n});\n    `)}),Kt.toClass.registerForBinary((t,e)=>{e.setContext({base64ToTypedArray:kt}),e.setContext({isBinaryJSON:ne}),e.addSetter(`${e.accessor} instanceof ${t.type} ? ${e.accessor} : (isBinaryJSON(${e.accessor}) ? base64ToTypedArray(${e.accessor}.data, ${t.type}) : new ${t.type}())`)}),Kt.toClass.register("arrayBuffer",(t,e)=>{e.setContext({base64ToArrayBuffer:Mt}),e.setContext({isBinaryJSON:ne}),e.addSetter(`${e.accessor} instanceof ArrayBuffer ? ${e.accessor} : (isBinaryJSON(${e.accessor}) ? base64ToArrayBuffer(${e.accessor}.data): new ArrayBuffer())`)}),Kt.fromClass.registerForBinary((t,e)=>{e.setContext({typedArrayToBase64:Dt}),e.addSetter(`{'$type': 'binary', data: typedArrayToBase64(${e.accessor})}`)}),Kt.fromClass.register("arrayBuffer",(t,e)=>{e.setContext({arrayBufferToBase64:Rt}),e.addSetter(`{'$type': 'binary', data: arrayBufferToBase64(${e.accessor})}`)}),Kt.toClass.register("bigint",(t,e)=>{e.setContext({isBigIntJSON:re}),e.addSetter(`typeof ${e.accessor} === 'bigint' ? ${e.accessor} : (isBigIntJSON(${e.accessor}) ? BigInt('0x' + ${e.accessor}.data): 0n)`)}),Kt.fromClass.register("bigint",(t,e)=>{e.addSetter(`{'$type': 'bigint', data: ${e.accessor}.toString(16)}`)}),Kt.fromClass.register("date",(t,e)=>{e.addSetter(`${e.accessor}.toJSON();`)}),Kt.fromClass.register("array",oe),Kt.toClass.register("array",oe),Kt.fromClass.register("map",se),Kt.toClass.register("map",se),Kt.fromClass.register("class",(t,e)=>{const n=Ot(t.resolveClassType),r=e.setVariable("classToX",e.jitStack.getOrCreate(n,()=>j(n,e.serializerCompilers.serializer,e.jitStack)));e.setContext({isObject:l.Kn,isReference:zt,isReferenceHydrated:Ht});let i=`\n        ${e.setter} = ${r}.fn(${e.accessor}, _options, _stack, _depth);\n    `;t.isReference&&n.hasPrimaryFields()&&(i=`\n        if (isReference(${e.accessor}) && !isReferenceHydrated(${e.accessor})) {\n            ${O(e.setter,`${e.accessor}.${n.getPrimaryField().name}`,n.getPrimaryField(),e.serializerCompilers,e.rootContext,e.jitStack)}\n        } else {\n            ${e.setter} = ${r}.fn(${e.accessor}, _options, _stack, _depth);\n        }\n        `),e.addCodeForSetter(`\n    if (isObject(${e.accessor})) {\n        ${i}\n    } else if (${t.isReference}) {\n        ${e.setter} = ${e.accessor};\n    }\n    `)}),Kt.toClass.register("class",(t,e)=>{if(!t.resolveClassType)throw new Error(`Property ${t.name} has no classType defined`);const n=Ot(t.resolveClassType),r=e.setVariable("xToClass",e.jitStack.getOrCreate(n,()=>U(n,e.serializerCompilers.serializer,e.jitStack)));if(n.decorator)return void e.addSetter(`${r}.fn(${e.accessor}, _options, getParents(), _state)`);e.setContext({isObject:l.Kn,isReference:zt,createReference:Gt});let i="";if(t.isReference){const r=e.setVariable("referenceClassType",Wt(n));i=`\n            if (isObject(${e.accessor})) {\n                ${O(e.setter,e.accessor,t.getResolvedClassSchema().getPrimaryField(),e.serializerCompilers,e.rootContext,e.jitStack)}\n            } else {\n                ${e.setter} = createReference(${r}, {${n.getPrimaryField().name}: ${e.accessor}});\n            }\n        `}e.addCodeForSetter(`\n        //object and not an array\n        if ('object' === typeof ${e.accessor} && 'function' !== typeof ${e.accessor}.slice) {\n            if (isReference(${e.accessor})) {\n                ${e.setter} = ${e.accessor};\n            } else {\n                ${e.setter} = ${r}.fn(${e.accessor}, _options, getParents(), _state);\n            }\n        } else if (${!t.isReference} && 'string' === typeof ${e.accessor} && '{' === ${e.accessor}[0]) {\n            try {\n                ${e.setter} = ${r}.fn(JSON.parse(${e.accessor}), _options, getParents(), _state);\n            } catch (e) {}\n        } else if (${t.isReference}) {\n            ${i}\n        }\n    `)}),Kt.toClass.register("union",(t,e)=>{let n=["if (false) { }"];const r=[];for(const o of jt(t,$t))r.push(o.property.type);let i=`throw new Error('No valid discriminant was found, so could not determine class type. Guard tried: [${r.join(",")}].');`;if(t.isOptional)i="";else if(t.isNullable)i=`${e.setter} = null;`;else if(t.hasManualDefaultValue()){const n=e.setVariable("default",t.defaultValue);i=`${e.setter} = ${n}();`}for(const o of jt(t,$t)){const t=e.setVariable("guard_"+o.property.type,o.guard);n.push(`\n                //guard:${o.property.type}\n                else if (${t}(${e.accessor})) {\n                    ${O(e.setter,e.accessor,o.property,e.serializerCompilers,e.rootContext,e.jitStack)}\n                }\n            `)}e.addCodeForSetter(`\n        ${n.join("\n")}\n        else {\n            ${i}\n        }\n    `)}),Kt.fromClass.register("union",(t,e)=>{let n=["if (false) { }"];const r=[];for(const o of jt(t,$t))r.push(o.property.type);let i=`throw new Error('No valid discriminant was found, so could not determine class type. Guard tried: [${r.join(",")}].');`;if(t.isOptional)i="";else if(t.isNullable)i=`${e.setter} = null;`;else if(t.hasManualDefaultValue()){const n=e.setVariable("default",t.defaultValue);i=`${e.setter} = ${n}();`}for(const o of jt(t,$t)){const t=e.setVariable("guard_"+o.property.type,o.guard);n.push(`\n                //guard:${o.property.type}\n                else if (${t}(${e.accessor})) {\n                    ${O(e.setter,e.accessor,o.property,e.serializerCompilers,e.rootContext,e.jitStack)}\n                }\n            `)}e.addCodeForSetter(`\n        ${n.join("\n")}\n        else {\n            ${i}\n        }\n    `)}),Kt.toClass.register("partial",(t,e)=>{const n=Ot(t.getSubType().resolveClassType),r=e.setVariable("partialXToClass",e.jitStack.getOrCreate(n,()=>V(n,e.serializerCompilers.serializer)));e.addSetter(`${r}.fn(${e.accessor}, _options, getParents(), _state);`)}),Kt.fromClass.register("partial",(t,e)=>{const n=Ot(t.getSubType().resolveClassType),r=e.setVariable("partialClassToX",e.jitStack.getOrCreate(n,()=>Z(n,e.serializerCompilers.serializer)));e.addSetter(`${r}.fn(${e.accessor}, _options, _stack, _depth)`)});const ae=dt.schema({name:dt.string,type:dt.string,literalValue:dt.union(dt.string,dt.number,dt.boolean).optional,isDecorated:dt.literal(!0).optional,isParentReference:dt.literal(!0).optional,isReference:dt.literal(!0).optional,isOptional:dt.literal(!0).optional,isId:dt.literal(!0).optional,autoIncrement:dt.literal(!0).optional,typeSet:dt.literal(!0).optional,isDiscriminant:dt.literal(!0).optional,allowLabelsAsValue:dt.literal(!0).optional,classType:dt.string.optional,defaultValue:dt.any.optional,classTypeName:dt.string.optional,noValidation:dt.boolean.optional,methodName:dt.string.optional,enum:dt.map(dt.any).optional,groupNames:dt.array(dt.string).optional,backReference:dt.type({mappedBy:dt.string.optional,via:dt.string.optional}).optional,templateArgs:dt.array(()=>ae).optional}),le=dt.schema({name:dt.string.optional,embeddedName:dt.string.optional,className:dt.string,collectionName:dt.string.optional,properties:dt.array(ae)});function ce(t,e){const n=[];function r(t){if("class"===t.type&&(t.classType||console.log("Property has invalid classType value",t),t.classType=e+t.classType),t.backReference&&t.backReference.via&&(t.backReference.via=e+t.backReference.via),t.templateArgs)for(const e of Object.values(t.templateArgs))r(e)}const i=vt().RegisteredEntities;for(const o of t)for(const t of Object.values(o.properties))r(t);for(const o of t){const t=At();Object.defineProperty(t.classType,"name",{value:o.className}),t.name=o.name||o.embeddedName,t.collectionName=o.collectionName,n.push(t),i[e+(o.embeddedName||o.name)]=t}for(let o=0;o<n.length;o++)for(const e of Object.values(t[o].properties))n[o].registerProperty(Ct.fromJSON(e));return n}class ue extends class{constructor(t){this.empty=!0,t&&(this.$set=(0,l.cS)(t.$set)?void 0:t.$set,this.$unset=(0,l.cS)(t.$unset)?void 0:t.$unset,this.$inc=(0,l.cS)(t.$inc)?void 0:t.$inc,this.detectEmpty())}clear(){this.empty=!0,this.$set=void 0,this.$unset=void 0,this.$inc=void 0}getReturning(){const t=[];if(this.$inc)for(const e in this.$inc)this.$inc.hasOwnProperty(e)&&t.push(e);return t}detectEmpty(){this.empty=void 0===this.$set&&void 0===this.$unset&&void 0===this.$inc}replaceSet(t){this.$set=(0,l.cS)(t)?void 0:t,this.detectEmpty()}mergeSet(t){if(!(0,l.cS)(t)){this.$set||(this.$set={});for(const e in t)this.$set[e]=t[e];this.detectEmpty()}}increase(t,e=1){this.$inc||(this.$inc={}),this.$inc[t]=e,this.empty=!1}set(t,e){this.$set||(this.$set={}),this.$set[t]=e,this.empty=!1}unset(t,e=!0){this.$unset||(this.$unset={}),this.$unset[t]=e,this.empty=!1}has(t){return Boolean(this.$set&&t in this.$set||this.$unset&&t in this.$unset||this.$inc&&t in this.$inc)}}{constructor(t={},e){super(t),this.item=e}increase(t,e=1){super.increase(t,e),this.item[t]+=e}set(t,e){super.set(t,e),this.item[t]=e}unset(t,e=!0){super.unset(t,e),this.item[t]=void 0}}const he=Symbol("changeSet");function de(t,e,n){const r=new Map,i=new $,o=[];for(const u of e)if(!u.isParentReference&&!k(t,u.name,"json"))if(u.isReference){const t=[];for(const e of u.getResolvedClassSchema().getPrimaryFields())t.push(`\n                //createJITConverterForSnapshot ${u.name}->${e.name} class:snapshot:${u.type} reference\n                ${O(`_result.${u.name}.${e.name}`,`_value.${u.name}.${e.name}`,e,n,r,i)}\n                `);o.push(`\n            //createJITConverterForSnapshot ${u.name} class:snapshot:${u.type} reference\n            if (undefined === _value.${u.name}) {\n                _result.${u.name} = null;\n            } else if (null === _value.${u.name}) {\n                _result.${u.name} = null;\n            } else {\n                _result.${u.name} = {};\n                ${t.join("\n")}\n            }\n            `)}else o.push(`\n            //createJITConverterForSnapshot ${u.name} class:snapshot:${u.type}\n            ${O(`_result.${u.name}`,`_value.${u.name}`,u,n,r,i,`_result.${u.name} = null`,`_result.${u.name} = null`)}\n            `);let s="",a="";t.hasCircularReference()&&(s="\n        if (_stack) {\n            if (_stack.includes(_value)) return undefined;\n        } else {\n            _stack = [];\n        }\n        _stack.push(_value);\n        ",a="_stack.pop();");const l=`\n        return function(_value, _parents, _options, _stack, _depth) {\n            ${s}\n            var _result = {};\n            var oldUnpopulatedCheck = _global.unpopulatedCheck;\n            _global.unpopulatedCheck = UnpopulatedCheckNone;\n            ${o.join("\n")}\n            _global.unpopulatedCheck = oldUnpopulatedCheck;\n            ${a}\n            return _result;\n        }\n        `;r.set("_global",vt()),r.set("UnpopulatedCheckNone",mt.None);const c=new Function(...r.keys(),l).bind(void 0,...r.values())();return c.buildId=t.buildId,c}function fe(t){const e=t.jit;return e.snapshotConverter||(e.snapshotConverter=de(t,t.getProperties(),Kt.fromClass),(0,l.SV)(e)),e.snapshotConverter}function pe(t){const e=t.jit;return e.primaryKey||(e.primaryKey=de(t,t.getPrimaryFields(),Kt.toClass),(0,l.SV)(e)),e.primaryKey}function ge(t,e=Kt){const n=t.jit;return n.pkHash||(n.pkHash={},(0,l.SV)(n)),n.pkHash[e.name]||(n.pkHash[e.name]=function(t,e){const n=new Map,r=[],i=new $;for(const c of t.getPrimaryFields())if(!c.isParentReference)if(c.isReference){const t=[];for(const r of c.getResolvedClassSchema().getPrimaryFields()){if("class"===r.type)throw new Error(`Class as primary key (${c.getResolvedClassSchema().getClassName()}.${r.name}) is not supported`);t.push(`\n                //getPrimaryKeyExtractor ${c.name}->${r.name} class:snapshot:${c.type} reference\n                lastValue = '';\n                ${O("lastValue",`_value.${c.name}.${r.name}`,r,e.toClass,n,i)}\n                ${O("lastValue","lastValue",r,Kt.fromClass,n,i)}\n                _result += '\\0' + lastValue;\n            `)}r.push(`\n            //getPrimaryKeyExtractor ${c.name} class:snapshot:${c.type} reference\n            if (undefined !== _value.${c.name} && null !== _value.${c.name}) {\n                ${t.join("\n")}\n            } else {\n                _result += '\\0';\n            }\n            `)}else{if("class"===c.type)throw new Error(`Class as primary key (${t.getClassName()}.${c.name}) is not supported`);r.push(`\n            //getPrimaryKeyHashGenerator ${c.name} class:plain:${c.type}\n            lastValue = '';\n            ${O("lastValue",`_value.${c.name}`,c,e.toClass,n,i)}\n            ${O("lastValue","lastValue",c,Kt.fromClass,n,i)}\n            _result += '\\0' + lastValue;\n        `)}let o="",s="";t.hasCircularReference()&&(o="\n        if (_stack) {\n            if (_stack.includes(_value)) return undefined;\n        } else {\n            _stack = [];\n        }\n        _stack.push(_value);\n        ",s="_stack.pop();");const a=`\n        return function(_value, _stack) {\n            var _result = '';\n            var lastValue;\n            ${o}\n            ${r.join("\n")}\n            ${s}\n            return _result;\n        }\n    `,l=new Function(...n.keys(),a).bind(void 0,...n.values())();return l.buildId=t.buildId,l}(t,e),(0,l.SV)(n.pkHash)),n.pkHash[e.name]}function me(t){return"\0"+t}function ye(t){return me}function ve(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!be(t[n],e[n]))return!1;return!0}function be(t,e){const n=t&&"string"!=typeof t&&"function"===t.slice&&"number"==typeof t.length,r=e&&"string"!=typeof e&&"function"===e.slice&&"number"==typeof e.length;if(n)return!!r&&ve(t,e);if(r)return!!n&&ve(t,e);const i="object"==typeof t&&null!==t;return i||i?!("object"!=typeof e||null===e)&&function(t,e){for(let n in t)if(t.hasOwnProperty(n)&&!be(t[n],e[n]))return!1;for(let n in e)if(e.hasOwnProperty(n)&&!be(t[n],e[n]))return!1;return!0}(t,e):t===e}function _e(t,e=new $){const n=new Map,r=e.prepare(t);n.set("genericEqual",be),n.set("empty",l.cS);const i=[];function o(t){return`(changeSet.$inc && '${t}' in changeSet.$inc) || (changeSet.$unset && '${t}' in changeSet.$unset)`}function s(t,e,r,i,a,c,u){if(t.isArray){const l=T(n,"l");return`\n                if (!${o(a)}) {\n                if (!${r} && !${e}) {\n\n                } else if ((${r} && !${e}) || (!${r} && ${e})) {\n                    changes.${a} = item.${a};\n                    ${c}\n                } else if (${r}.length !== ${e}.length) {\n                    changes.${a} = item.${a};\n                    ${c}\n                } else {\n                    let ${l} = ${e}.length;\n                    ${c?"":"root:"}\n                    while (${l}--) {\n                         ${s(t.getSubType(),`${e}[${l}]`,`${r}[${l}]`,`${i}[${l}]`,a,"break root;",u)}\n                    }\n                }\n                }\n            `}if(t.isMap||t.isPartial){n.set("getObjectKeysSize",l.Y9);const h=T(n,"i");return`\n                if (!${o(a)}) {\n                if (!${r} && !${e}) {\n\n                } else if ((${r} && !${e}) || (!${r} && ${e})) {\n                    changes.${a} = item.${a};\n                    ${c}\n                } else if (getObjectKeysSize(${r}) !== getObjectKeysSize(${e})) {\n                    changes.${a} = item.${a};\n                    ${c}\n                } else {\n                    ${c?"":"root:"}\n                    for (let ${h} in ${e}) {\n                        if (!${e}.hasOwnProperty(${h})) continue;\n                         ${s(t.getSubType(),`${e}[${h}]`,`${r}[${h}]`,`${i}[${h}]`,a,"break root;",u)}\n                    }\n                }\n                }\n            `}if("class"===t.type){if(t.isReference){const n=[];for(const o of t.getResolvedClassSchema().getPrimaryFields())n.push(`\n                         ${s(o,`${e}.${o.name}`,`${r}.${o.name}`,`${i}.${o.name}`,a,c,u)}\n                    `);return`\n                if (!${o(a)}) {\n                if (!${r} && !${e}) {\n\n                } else if ((${r} && !${e}) || (!${r} && ${e})) {\n                    changes.${a} = item.${a};\n                    ${c}\n                } else {\n                    ${n.join("\n")}\n                }\n                }\n            `}const l=t.getResolvedClassSchema(),h=T(n,"jitChangeDetector");return n.set(h,u.getOrCreate(l,()=>_e(l,u))),`\n                if (!${o(a)}) {\n                    if (!${r} && !${e}) {\n\n                    } else if ((${r} && !${e}) || (!${r} && ${e})) {\n                        changes.${a} = item.${a};\n                        ${c}\n                    } else {\n                        const thisChanged = ${h}.fn(${e}, ${r}, ${i});\n                        if (!empty(thisChanged)) {\n                            changes.${a} = item.${a};\n                            ${c}\n                        }\n                    }\n                }\n            `}return t.isBinary||"any"===t.type||"union"===t.type?`\n                if (!${o(a)}) {\n                    if (!genericEqual(${e}, ${r})) {\n                        changes.${a} = item.${a};\n                        ${c}\n                    }\n                }\n            `:`\n            if (!${o(a)}) {\n                if (${e} !== ${r}) {\n                    changes.${a} = item.${a};\n                    ${c}\n                }\n            }\n            `}for(const l of t.getProperties())l.isParentReference||l.backReference||i.push(s(l,`last.${l.name}`,`current.${l.name}`,"item."+l.name,l.name,"",e));n.set("changeSetSymbol",he),n.set("ItemChanges",ue);const a=`\n        return function(last, current, item) {\n            var changeSet = item[changeSetSymbol] || new ItemChanges(undefined, item);\n            var changes = {};\n            ${i.join("\n")}\n            changeSet.mergeSet(changes);\n            return changeSet.empty ? undefined : changeSet;\n        }\n        `;try{const e=new Function(...n.keys(),a)(...n.values());return r(e),e.buildId=t.buildId,e}catch(c){throw console.log("functionCode",a),c}}const we=Symbol("changeDetector");function xe(t){return t.getJit(we,()=>_e(t))}},2523:(t,e)=>{"use strict";e.byteLength=function(t){var e=l(t),n=e[1];return 3*(e[0]+n)/4-n},e.toByteArray=function(t){var e,n,o=l(t),s=o[0],a=o[1],c=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),u=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;return 2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[u++]=255&e),1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e),c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,l=r-i;a<l;a+=s)o.push(c(t,a,a+s>l?l:a+s));return 1===i?o.push(n[(e=t[r-1])>>2]+n[e<<4&63]+"=="):2===i&&o.push(n[(e=(t[r-2]<<8)+t[r-1])>>10]+n[e>>4&63]+n[e<<2&63]+"="),o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var i,o=[],s=e;s<r;s+=3)o.push(n[(i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},35901:(t,e,n)=>{"use strict";var r=n(2523),i=n(55612),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=l,e.h2=50;var s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|g(t,e),r=a(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(U(t,Uint8Array)){var e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(U(t,ArrayBuffer)||t&&U(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(U(t,SharedArrayBuffer)||t&&U(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return l.from(r,e,n);var i=function(t){if(l.isBuffer(t)){var e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||V(t.length)?a(0):d(t):"Buffer"===t.type&&Array.isArray(t.data)?d(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return u(t),a(t<0?0:0|p(t))}function d(t){for(var e=t.length<0?0:0|p(t.length),n=a(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,l.prototype),r}function p(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function g(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(i)return r?-1:B(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,s=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var u=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(c(t,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(V(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return $(B(e,t.length-n),t,n,r)}function x(t,e,n,r){return $(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function C(t,e,n,r){return $(j(e),t,n,r)}function S(t,e,n,r){return $(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(n=t.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function T(t,e,n){return r.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,l,c=t[i],u=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:s=t[i+2],128==(192&(o=t[i+1]))&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=t[i+2],a=t[i+3],128==(192&(o=t[i+1]))&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(r.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}(l.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(n){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},l.allocUnsafe=function(t){return h(t)},l.allocUnsafeSlow=function(t){return h(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(U(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),U(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(U(o,Uint8Array))i+o.length>r.length?l.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},l.prototype.toLocaleString=l.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.h2;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(t,e,n,r,i){if(U(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(r,i),u=t.slice(e,n),h=0;h<a;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return x(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function k(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=Z[t[o]];return i}function M(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,o){return e=+e,n>>>=0,o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return e=+e,n>>>=0,o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return t>>>=0,e||I(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||I(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||I(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||I(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=l.isBuffer(t)?t:l.from(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var F=/[^+/0-9A-Za-z-_]/g;function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function U(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function V(t){return t!=t}var Z=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()},55612:(t,e)=>{e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*g}},46659:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=Zt(n(14688)),o=Zt(n(25112)),s=Zt(n(8918)),a=Zt(n(15623)),l=Zt(n(68042)),c=Zt(n(31838)),u=Zt(n(64602)),h=Zt(n(79653)),d=Zt(n(53055)),f=Zt(n(56560)),p=Zt(n(92710)),g=Zt(n(13799)),m=Zt(n(6982)),y=Zt(n(88158)),v=Zt(n(22721)),b=Zt(n(90862)),_=Vt(n(99680)),w=Vt(n(72866)),x=Zt(n(77610)),C=Zt(n(68157)),S=Zt(n(18572)),T=Zt(n(52138)),E=Zt(n(30342)),O=Zt(n(12236)),A=Zt(n(36206)),P=Zt(n(19282)),k=Zt(n(34637)),M=Zt(n(2634)),I=Zt(n(32943)),R=Zt(n(36110)),D=Zt(n(38147)),N=Zt(n(41133)),L=Vt(n(78233)),F=Zt(n(60426)),B=Zt(n(51104)),j=Zt(n(48009)),$=Zt(n(99206)),U=Zt(n(24126)),V=Zt(n(93245)),Z=Zt(n(88169)),z=Zt(n(51626)),H=Zt(n(84583)),q=Zt(n(24814)),Y=Zt(n(9037)),G=Zt(n(34316)),W=Zt(n(10583)),J=Zt(n(80420)),X=Zt(n(76891)),Q=Zt(n(49642)),K=Zt(n(33638)),tt=Zt(n(20994)),et=Zt(n(19314)),nt=Zt(n(57500)),rt=Zt(n(25621)),it=Zt(n(61213)),ot=Zt(n(51863)),st=Zt(n(25258)),at=Zt(n(70178)),lt=Zt(n(42248)),ct=Zt(n(22821)),ut=Zt(n(41070)),ht=Zt(n(68075)),dt=Vt(n(99909)),ft=Zt(n(9942)),pt=Zt(n(58740)),gt=Zt(n(18211)),mt=Zt(n(6358)),yt=Zt(n(88758)),vt=Zt(n(21751)),bt=Zt(n(65435)),_t=Zt(n(19377)),wt=Zt(n(66359)),xt=Zt(n(10529)),Ct=Zt(n(44619)),St=Zt(n(7454)),Tt=Zt(n(87674)),Et=Zt(n(80773)),Ot=Vt(n(51759)),At=Zt(n(12281)),Pt=Zt(n(33681)),kt=Zt(n(3668)),Mt=Zt(n(67201)),It=Zt(n(15364)),Rt=Zt(n(64247)),Dt=Zt(n(66189)),Nt=Zt(n(92280)),Lt=Zt(n(81754)),Ft=Zt(n(18132)),Bt=Zt(n(48145)),jt=Zt(n(83109)),$t=Zt(n(20056));function Ut(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Ut=function(){return t},t}function Vt(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=Ut();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}function Zt(t){return t&&t.__esModule?t:{default:t}}var zt={version:"13.5.2",toDate:i.default,toFloat:o.default,toInt:s.default,toBoolean:a.default,equals:l.default,contains:c.default,matches:u.default,isEmail:h.default,isURL:d.default,isMACAddress:f.default,isIP:p.default,isIPRange:g.default,isFQDN:m.default,isBoolean:v.default,isIBAN:H.default,isBIC:q.default,isAlpha:_.default,isAlphaLocales:_.locales,isAlphanumeric:w.default,isAlphanumericLocales:w.locales,isNumeric:x.default,isPassportNumber:C.default,isPort:S.default,isLowercase:T.default,isUppercase:E.default,isAscii:A.default,isFullWidth:P.default,isHalfWidth:k.default,isVariableWidth:M.default,isMultibyte:I.default,isSemVer:R.default,isSurrogatePair:D.default,isInt:N.default,isIMEI:O.default,isFloat:L.default,isFloatLocales:L.locales,isDecimal:F.default,isHexadecimal:B.default,isOctal:j.default,isDivisibleBy:$.default,isHexColor:U.default,isRgbColor:V.default,isHSL:Z.default,isISRC:z.default,isMD5:Y.default,isHash:G.default,isJWT:W.default,isJSON:J.default,isEmpty:X.default,isLength:Q.default,isLocale:b.default,isByteLength:K.default,isUUID:tt.default,isMongoId:et.default,isAfter:nt.default,isBefore:rt.default,isIn:it.default,isCreditCard:ot.default,isIdentityCard:st.default,isEAN:at.default,isISIN:lt.default,isISBN:ct.default,isISSN:ut.default,isMobilePhone:dt.default,isMobilePhoneLocales:dt.locales,isPostalCode:Ot.default,isPostalCodeLocales:Ot.locales,isEthereumAddress:ft.default,isCurrency:pt.default,isBtcAddress:gt.default,isISO8601:mt.default,isRFC3339:yt.default,isISO31661Alpha2:vt.default,isISO31661Alpha3:bt.default,isBase32:_t.default,isBase58:wt.default,isBase64:xt.default,isDataURI:Ct.default,isMagnetURI:St.default,isMimeType:Tt.default,isLatLong:Et.default,ltrim:At.default,rtrim:Pt.default,trim:kt.default,escape:Mt.default,unescape:It.default,stripLow:Rt.default,whitelist:Dt.default,blacklist:Nt.default,isWhitelisted:Lt.default,normalizeEmail:Ft.default,toString:toString,isSlug:Bt.default,isStrongPassword:jt.default,isTaxID:ht.default,isDate:y.default,isVAT:$t.default};e.default=zt,t.exports=e.default,t.exports.default=e.default},17637:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.commaDecimal=e.dotDecimal=e.farsiLocales=e.arabicLocales=e.englishLocales=e.decimal=e.alphanumeric=e.alpha=void 0;var n={"en-US":/^[A-Z]+$/i,"az-AZ":/^[A-VXYZ\xc7\u018f\u011e\u0130\u0131\xd6\u015e\xdc]+$/i,"bg-BG":/^[\u0410-\u042f]+$/i,"cs-CZ":/^[A-Z\xc1\u010c\u010e\xc9\u011a\xcd\u0147\xd3\u0158\u0160\u0164\xda\u016e\xdd\u017d]+$/i,"da-DK":/^[A-Z\xc6\xd8\xc5]+$/i,"de-DE":/^[A-Z\xc4\xd6\xdc\xdf]+$/i,"el-GR":/^[\u0391-\u03ce]+$/i,"es-ES":/^[A-Z\xc1\xc9\xcd\xd1\xd3\xda\xdc]+$/i,"fa-IR":/^[\u0627\u0628\u067e\u062a\u062b\u062c\u0686\u062d\u062e\u062f\u0630\u0631\u0632\u0698\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u06a9\u06af\u0644\u0645\u0646\u0648\u0647\u06cc]+$/i,"fr-FR":/^[A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178]+$/i,"it-IT":/^[A-Z\xc0\xc9\xc8\xcc\xce\xd3\xd2\xd9]+$/i,"nb-NO":/^[A-Z\xc6\xd8\xc5]+$/i,"nl-NL":/^[A-Z\xc1\xc9\xcb\xcf\xd3\xd6\xdc\xda]+$/i,"nn-NO":/^[A-Z\xc6\xd8\xc5]+$/i,"hu-HU":/^[A-Z\xc1\xc9\xcd\xd3\xd6\u0150\xda\xdc\u0170]+$/i,"pl-PL":/^[A-Z\u0104\u0106\u0118\u015a\u0141\u0143\xd3\u017b\u0179]+$/i,"pt-PT":/^[A-Z\xc3\xc1\xc0\xc2\xc4\xc7\xc9\xca\xcb\xcd\xcf\xd5\xd3\xd4\xd6\xda\xdc]+$/i,"ru-RU":/^[\u0410-\u042f\u0401]+$/i,"sl-SI":/^[A-Z\u010c\u0106\u0110\u0160\u017d]+$/i,"sk-SK":/^[A-Z\xc1\u010c\u010e\xc9\xcd\u0147\xd3\u0160\u0164\xda\xdd\u017d\u0139\u0154\u013d\xc4\xd4]+$/i,"sr-RS@latin":/^[A-Z\u010c\u0106\u017d\u0160\u0110]+$/i,"sr-RS":/^[\u0410-\u042f\u0402\u0408\u0409\u040a\u040b\u040f]+$/i,"sv-SE":/^[A-Z\xc5\xc4\xd6]+$/i,"th-TH":/^[\u0e01-\u0e50\s]+$/i,"tr-TR":/^[A-Z\xc7\u011e\u0130\u0131\xd6\u015e\xdc]+$/i,"uk-UA":/^[\u0410-\u0429\u042c\u042e\u042f\u0404I\u0407\u0490\u0456]+$/i,"vi-VN":/^[A-Z\xc0\xc1\u1ea0\u1ea2\xc3\xc2\u1ea6\u1ea4\u1eac\u1ea8\u1eaa\u0102\u1eb0\u1eae\u1eb6\u1eb2\u1eb4\u0110\xc8\xc9\u1eb8\u1eba\u1ebc\xca\u1ec0\u1ebe\u1ec6\u1ec2\u1ec4\xcc\xcd\u1eca\u1ec8\u0128\xd2\xd3\u1ecc\u1ece\xd5\xd4\u1ed2\u1ed0\u1ed8\u1ed4\u1ed6\u01a0\u1edc\u1eda\u1ee2\u1ede\u1ee0\xd9\xda\u1ee4\u1ee6\u0168\u01af\u1eea\u1ee8\u1ef0\u1eec\u1eee\u1ef2\xdd\u1ef4\u1ef6\u1ef8]+$/i,"ku-IQ":/^[\u0626\u0627\u0628\u067e\u062a\u062c\u0686\u062d\u062e\u062f\u0631\u0695\u0632\u0698\u0633\u0634\u0639\u063a\u0641\u06a4\u0642\u06a9\u06af\u0644\u06b5\u0645\u0646\u0648\u06c6\u06be\u06d5\u06cc\u06ce\u064a\u0637\u0624\u062b\u0622\u0625\u0623\u0643\u0636\u0635\u0629\u0638\u0630]+$/i,ar:/^[\u0621\u0622\u0623\u0624\u0625\u0626\u0627\u0628\u0629\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u0649\u064a\u064b\u064c\u064d\u064e\u064f\u0650\u0651\u0652\u0670]+$/,he:/^[\u05d0-\u05ea]+$/,fa:/^['\u0622\u0627\u0621\u0623\u0624\u0626\u0628\u067e\u062a\u062b\u062c\u0686\u062d\u062e\u062f\u0630\u0631\u0632\u0698\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u06a9\u06af\u0644\u0645\u0646\u0648\u0647\u0629\u06cc']+$/i};e.alpha=n;var r={"en-US":/^[0-9A-Z]+$/i,"az-AZ":/^[0-9A-VXYZ\xc7\u018f\u011e\u0130\u0131\xd6\u015e\xdc]+$/i,"bg-BG":/^[0-9\u0410-\u042f]+$/i,"cs-CZ":/^[0-9A-Z\xc1\u010c\u010e\xc9\u011a\xcd\u0147\xd3\u0158\u0160\u0164\xda\u016e\xdd\u017d]+$/i,"da-DK":/^[0-9A-Z\xc6\xd8\xc5]+$/i,"de-DE":/^[0-9A-Z\xc4\xd6\xdc\xdf]+$/i,"el-GR":/^[0-9\u0391-\u03c9]+$/i,"es-ES":/^[0-9A-Z\xc1\xc9\xcd\xd1\xd3\xda\xdc]+$/i,"fr-FR":/^[0-9A-Z\xc0\xc2\xc6\xc7\xc9\xc8\xca\xcb\xcf\xce\xd4\u0152\xd9\xdb\xdc\u0178]+$/i,"it-IT":/^[0-9A-Z\xc0\xc9\xc8\xcc\xce\xd3\xd2\xd9]+$/i,"hu-HU":/^[0-9A-Z\xc1\xc9\xcd\xd3\xd6\u0150\xda\xdc\u0170]+$/i,"nb-NO":/^[0-9A-Z\xc6\xd8\xc5]+$/i,"nl-NL":/^[0-9A-Z\xc1\xc9\xcb\xcf\xd3\xd6\xdc\xda]+$/i,"nn-NO":/^[0-9A-Z\xc6\xd8\xc5]+$/i,"pl-PL":/^[0-9A-Z\u0104\u0106\u0118\u015a\u0141\u0143\xd3\u017b\u0179]+$/i,"pt-PT":/^[0-9A-Z\xc3\xc1\xc0\xc2\xc4\xc7\xc9\xca\xcb\xcd\xcf\xd5\xd3\xd4\xd6\xda\xdc]+$/i,"ru-RU":/^[0-9\u0410-\u042f\u0401]+$/i,"sl-SI":/^[0-9A-Z\u010c\u0106\u0110\u0160\u017d]+$/i,"sk-SK":/^[0-9A-Z\xc1\u010c\u010e\xc9\xcd\u0147\xd3\u0160\u0164\xda\xdd\u017d\u0139\u0154\u013d\xc4\xd4]+$/i,"sr-RS@latin":/^[0-9A-Z\u010c\u0106\u017d\u0160\u0110]+$/i,"sr-RS":/^[0-9\u0410-\u042f\u0402\u0408\u0409\u040a\u040b\u040f]+$/i,"sv-SE":/^[0-9A-Z\xc5\xc4\xd6]+$/i,"th-TH":/^[\u0e01-\u0e59\s]+$/i,"tr-TR":/^[0-9A-Z\xc7\u011e\u0130\u0131\xd6\u015e\xdc]+$/i,"uk-UA":/^[0-9\u0410-\u0429\u042c\u042e\u042f\u0404I\u0407\u0490\u0456]+$/i,"ku-IQ":/^[\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u06690-9\u0626\u0627\u0628\u067e\u062a\u062c\u0686\u062d\u062e\u062f\u0631\u0695\u0632\u0698\u0633\u0634\u0639\u063a\u0641\u06a4\u0642\u06a9\u06af\u0644\u06b5\u0645\u0646\u0648\u06c6\u06be\u06d5\u06cc\u06ce\u064a\u0637\u0624\u062b\u0622\u0625\u0623\u0643\u0636\u0635\u0629\u0638\u0630]+$/i,"vi-VN":/^[0-9A-Z\xc0\xc1\u1ea0\u1ea2\xc3\xc2\u1ea6\u1ea4\u1eac\u1ea8\u1eaa\u0102\u1eb0\u1eae\u1eb6\u1eb2\u1eb4\u0110\xc8\xc9\u1eb8\u1eba\u1ebc\xca\u1ec0\u1ebe\u1ec6\u1ec2\u1ec4\xcc\xcd\u1eca\u1ec8\u0128\xd2\xd3\u1ecc\u1ece\xd5\xd4\u1ed2\u1ed0\u1ed8\u1ed4\u1ed6\u01a0\u1edc\u1eda\u1ee2\u1ede\u1ee0\xd9\xda\u1ee4\u1ee6\u0168\u01af\u1eea\u1ee8\u1ef0\u1eec\u1eee\u1ef2\xdd\u1ef4\u1ef6\u1ef8]+$/i,ar:/^[\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u06690-9\u0621\u0622\u0623\u0624\u0625\u0626\u0627\u0628\u0629\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u0649\u064a\u064b\u064c\u064d\u064e\u064f\u0650\u0651\u0652\u0670]+$/,he:/^[0-9\u05d0-\u05ea]+$/,fa:/^['0-9\u0622\u0627\u0621\u0623\u0624\u0626\u0628\u067e\u062a\u062b\u062c\u0686\u062d\u062e\u062f\u0630\u0631\u0632\u0698\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u06a9\u06af\u0644\u0645\u0646\u0648\u0647\u0629\u06cc\u06f1\u06f2\u06f3\u06f4\u06f5\u06f6\u06f7\u06f8\u06f9\u06f0']+$/i};e.alphanumeric=r;var i={"en-US":".",ar:"\u066b"};e.decimal=i;var o=["AU","GB","HK","IN","NZ","ZA","ZM"];e.englishLocales=o;for(var s,a=0;a<o.length;a++)n[s="en-".concat(o[a])]=n["en-US"],r[s]=r["en-US"],i[s]=i["en-US"];var l=["AE","BH","DZ","EG","IQ","JO","KW","LB","LY","MA","QM","QA","SA","SD","SY","TN","YE"];e.arabicLocales=l;for(var c,u=0;u<l.length;u++)n[c="ar-".concat(l[u])]=n.ar,r[c]=r.ar,i[c]=i.ar;var h=["IR","AF"];e.farsiLocales=h;for(var d,f=0;f<h.length;f++)r[d="fa-".concat(h[f])]=r.fa,i[d]=i.ar;var p=["ar-EG","ar-LB","ar-LY"];e.dotDecimal=p;var g=["bg-BG","cs-CZ","da-DK","de-DE","el-GR","en-ZM","es-ES","fr-CA","fr-FR","id-ID","it-IT","ku-IQ","hu-HU","nb-NO","nn-NO","nl-NL","pl-PL","pt-PT","ru-RU","sl-SI","sr-RS@latin","sr-RS","sv-SE","tr-TR","uk-UA","vi-VN"];e.commaDecimal=g;for(var m=0;m<p.length;m++)i[p[m]]=i["en-US"];for(var y=0;y<g.length;y++)i[g[y]]=",";n["fr-CA"]=n["fr-FR"],r["fr-CA"]=r["fr-FR"],n["pt-BR"]=n["pt-PT"],r["pt-BR"]=r["pt-PT"],i["pt-BR"]=i["pt-PT"],n["pl-Pl"]=n["pl-PL"],r["pl-Pl"]=r["pl-PL"],i["pl-Pl"]=i["pl-PL"],n["fa-AF"]=n.fa},92280:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(t),t.replace(new RegExp("[".concat(e,"]+"),"g"),"")};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},31838:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){return(0,r.default)(t),(n=(0,o.default)(n,a)).ignoreCase?t.toLowerCase().indexOf((0,i.default)(e).toLowerCase())>=0:t.indexOf((0,i.default)(e))>=0};var r=s(n(27717)),i=s(n(19173)),o=s(n(3957));function s(t){return t&&t.__esModule?t:{default:t}}var a={ignoreCase:!1};t.exports=e.default,t.exports.default=e.default},68042:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(t),t===e};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},67201:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},57500:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,r.default)(t);var n=(0,i.default)(e),o=(0,i.default)(t);return!!(o&&n&&o>n)};var r=o(n(27717)),i=o(n(14688));function o(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default,t.exports.default=e.default},99680:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.default)(t);var r=t,s=n.ignore;if(s)if(s instanceof RegExp)r=r.replace(s,"");else{if("string"!=typeof s)throw new Error("ignore should be instance of a String or RegExp");r=r.replace(new RegExp("[".concat(s.replace(/[-[\]{}()*+?.,\\^$|#\\s]/g,"\\$&"),"]"),"g"),"")}if(e in o.alpha)return o.alpha[e].test(r);throw new Error("Invalid locale '".concat(e,"'"))},e.locales=void 0;var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=n(17637),s=Object.keys(o.alpha);e.locales=s},72866:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";if((0,i.default)(t),e in o.alphanumeric)return o.alphanumeric[e].test(t);throw new Error("Invalid locale '".concat(e,"'"))},e.locales=void 0;var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=n(17637),s=Object.keys(o.alphanumeric);e.locales=s},36206:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[\x00-\x7F]+$/;t.exports=e.default,t.exports.default=e.default},24814:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[A-z]{4}[A-z]{2}\w{2}(\w{3})?$/;t.exports=e.default,t.exports.default=e.default},19377:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),!(t.length%8!=0||!o.test(t))};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[A-Z2-7]+=*$/;t.exports=e.default,t.exports.default=e.default},66359:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),!!o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[A-HJ-NP-Za-km-z1-9]*$/;t.exports=e.default,t.exports.default=e.default},10529:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,r.default)(t),e=(0,i.default)(e,l);var n=t.length;if(e.urlSafe)return a.test(t);if(n%4!=0||s.test(t))return!1;var o=t.indexOf("=");return-1===o||o===n-1||o===n-2&&"="===t[n-1]};var r=o(n(27717)),i=o(n(3957));function o(t){return t&&t.__esModule?t:{default:t}}var s=/[^A-Z0-9+\/=]/i,a=/^[A-Z0-9_\-]*$/i,l={urlSafe:!1};t.exports=e.default,t.exports.default=e.default},25621:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String(new Date);(0,r.default)(t);var n=(0,i.default)(e),o=(0,i.default)(t);return!!(o&&n&&o<n)};var r=o(n(27717)),i=o(n(14688));function o(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default,t.exports.default=e.default},22721:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),["true","false","1","0"].indexOf(t)>=0};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},18211:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(bc1|[13])[a-zA-HJ-NP-Z0-9]{25,39}$/;t.exports=e.default,t.exports.default=e.default},33638:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n,r;(0,i.default)(t),"object"===o(e)?(n=e.min||0,r=e.max):(n=arguments[1],r=arguments[2]);var s=encodeURI(t).split(/%..|./).length-1;return s>=n&&(void 0===r||s<=r)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=e.default,t.exports.default=e.default},51863:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){(0,i.default)(t);var e=t.replace(/[- ]+/g,"");if(!o.test(e))return!1;for(var n,r,s,a=0,l=e.length-1;l>=0;l--)n=e.substring(l,l+1),r=parseInt(n,10),a+=s&&(r*=2)>=10?r%10+1:r,s=!s;return!(a%10!=0||!e)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(?:4[0-9]{12}(?:[0-9]{3,6})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12,15}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11}|6[27][0-9]{14})$/;t.exports=e.default,t.exports.default=e.default},58740:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(t),function(t){var e="\\d{".concat(t.digits_after_decimal[0],"}");t.digits_after_decimal.forEach(function(t,n){0!==n&&(e="".concat(e,"|\\d{").concat(t,"}"))});var n="(".concat(t.symbol.replace(/\W/,function(t){return"\\".concat(t)}),")").concat(t.require_symbol?"":"?"),r="-?",i="[1-9]\\d{0,2}(\\".concat(t.thousands_separator,"\\d{3})*"),o="(".concat(["0","[1-9]\\d*",i].join("|"),")?"),s="(\\".concat(t.decimal_separator,"(").concat(e,"))").concat(t.require_decimal?"":"?"),a=o+(t.allow_decimal||t.require_decimal?s:"");return t.allow_negatives&&!t.parens_for_negatives&&(t.negative_sign_after_digits?a+=r:t.negative_sign_before_digits&&(a=r+a)),t.allow_negative_sign_placeholder?a="( (?!\\-))?".concat(a):t.allow_space_after_symbol?a=" ?".concat(a):t.allow_space_after_digits&&(a+="( (?!$))?"),t.symbol_after_digits?a+=n:a=n+a,t.allow_negatives&&(t.parens_for_negatives?a="(\\(".concat(a,"\\)|").concat(a,")"):t.negative_sign_before_digits||t.negative_sign_after_digits||(a=r+a)),new RegExp("^(?!-? )(?=.*\\d)".concat(a,"$"))}(e=(0,r.default)(e,s)).test(t)};var r=o(n(3957)),i=o(n(27717));function o(t){return t&&t.__esModule?t:{default:t}}var s={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};t.exports=e.default,t.exports.default=e.default},44619:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){(0,i.default)(t);var e=t.split(",");if(e.length<2)return!1;var n=e.shift().trim().split(";"),r=n.shift();if("data:"!==r.substr(0,5))return!1;var l=r.substr(5);if(""!==l&&!o.test(l))return!1;for(var c=0;c<n.length;c++)if(c===n.length-1&&"base64"===n[c].toLowerCase());else if(!s.test(n[c]))return!1;for(var u=0;u<e.length;u++)if(!a.test(e[u]))return!1;return!0};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[a-z]+\/[a-z0-9\-\+]+$/i,s=/^[a-z\-]+=[a-z0-9\-]+$/i,a=/^[a-z0-9!\$&'\(\)\*\+,;=\-\._~:@\/\?%\s]*$/i;t.exports=e.default,t.exports.default=e.default},88158:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(e=(0,i.default)("string"==typeof e?{format:e}:e,a),"string"==typeof t&&/(^(y{4}|y{2})[\/-](m{1,2})[\/-](d{1,2})$)|(^(m{1,2})[\/-](d{1,2})[\/-]((y{4}|y{2})$))|(^(d{1,2})[\/-](m{1,2})[\/-]((y{4}|y{2})$))/gi.test(e.format)){var n,r=e.delimiters.find(function(t){return-1!==e.format.indexOf(t)}),s=e.strictMode?r:e.delimiters.find(function(e){return-1!==t.indexOf(e)}),l={},c=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=o(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,s=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw s}}}}(function(t,e){for(var n=[],r=Math.min(t.length,e.length),i=0;i<r;i++)n.push([t[i],e[i]]);return n}(t.split(s),e.format.toLowerCase().split(r)));try{for(c.s();!(n=c.n()).done;){var u=function(t){if(Array.isArray(t))return t}(f=n.value)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),2!==n.length);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(f)||o(f,2)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),h=u[0],d=u[1];if(h.length!==d.length)return!1;l[d.charAt(0)]=h}}catch(p){c.e(p)}finally{c.f()}return new Date("".concat(l.m,"/").concat(l.d,"/").concat(l.y)).getDate()===+l.d}var f;return!e.strictMode&&"[object Date]"===Object.prototype.toString.call(t)&&isFinite(t)};var r,i=(r=n(3957))&&r.__esModule?r:{default:r};function o(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};t.exports=e.default,t.exports.default=e.default},60426:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,i.default)(t),(e=(0,r.default)(e,l)).locale in s.decimal)return!(0,o.default)(c,t.replace(/ /g,""))&&function(t){return new RegExp("^[-+]?([0-9]+)?(\\".concat(s.decimal[t.locale],"[0-9]{").concat(t.decimal_digits,"})").concat(t.force_decimal?"":"?","$"))}(e).test(t);throw new Error("Invalid locale '".concat(e.locale,"'"))};var r=a(n(3957)),i=a(n(27717)),o=a(n(59700)),s=n(17637);function a(t){return t&&t.__esModule?t:{default:t}}var l={force_decimal:!1,decimal_digits:"1,",locale:"en-US"},c=["","-","+"];t.exports=e.default,t.exports.default=e.default},99206:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,r.default)(t),(0,i.default)(t)%parseInt(e,10)==0};var r=o(n(27717)),i=o(n(25112));function o(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default,t.exports.default=e.default},70178:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){(0,i.default)(t);var e,n,r=Number(t.slice(-1));return o.test(t)&&r===((n=10-(e=t).slice(0,-1).split("").map(function(t,n){return Number(t)*function(t,e){return 8===t?e%2==0?3:1:e%2==0?1:3}(e.length,n)}).reduce(function(t,e){return t+e},0)%10)<10?n:0)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(\d{8}|\d{13})$/;t.exports=e.default,t.exports.default=e.default},79653:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,r.default)(t),(e=(0,i.default)(e,u)).require_display_name||e.allow_display_name){var n=t.match(h);if(n){var l,y=function(t){if(Array.isArray(t))return t}(v=n)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),3!==n.length);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(v)||function(t,e){if(t){if("string"==typeof t)return c(t,3);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,3):void 0}}(v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();if(t=y[2],(l=y[1]).endsWith(" ")&&(l=l.substr(0,l.length-1)),!function(t){var e=t.match(/^"(.+)"$/i),n=e?e[1]:t;if(!n.trim())return!1;if(/[\.";<>]/.test(n)){if(!e)return!1;if(n.split('"').length!==n.split('\\"').length)return!1}return!0}(l))return!1}else if(e.require_display_name)return!1}var v;if(!e.ignore_max_length&&t.length>254)return!1;var b=t.split("@"),_=b.pop(),w=b.join("@"),x=_.toLowerCase();if(e.domain_specific_validation&&("gmail.com"===x||"googlemail.com"===x)){var C=(w=w.toLowerCase()).split("+")[0];if(!(0,o.default)(C.replace(".",""),{min:6,max:30}))return!1;for(var S=C.split("."),T=0;T<S.length;T++)if(!f.test(S[T]))return!1}if(!(!1!==e.ignore_max_length||(0,o.default)(w,{max:64})&&(0,o.default)(_,{max:254})))return!1;if(!(0,s.default)(_,{require_tld:e.require_tld})){if(!e.allow_ip_domain)return!1;if(!(0,a.default)(_)){if(!_.startsWith("[")||!_.endsWith("]"))return!1;var E=_.substr(1,_.length-2);if(0===E.length||!(0,a.default)(E))return!1}}if('"'===w[0])return w=w.slice(1,w.length-1),e.allow_utf8_local_part?m.test(w):p.test(w);for(var O=e.allow_utf8_local_part?g:d,A=w.split("."),P=0;P<A.length;P++)if(!O.test(A[P]))return!1;return!e.blacklisted_chars||-1===w.search(new RegExp("[".concat(e.blacklisted_chars,"]+"),"g"))};var r=l(n(27717)),i=l(n(3957)),o=l(n(33638)),s=l(n(6982)),a=l(n(92710));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1},h=/^([^\x00-\x1F\x7F-\x9F\cX]+)<(.+)>$/i,d=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,f=/^[a-z\d]+$/,p=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,g=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,m=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;t.exports=e.default,t.exports.default=e.default},76891:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,r.default)(t),0===((e=(0,i.default)(e,s)).ignore_whitespace?t.trim().length:t.length)};var r=o(n(27717)),i=o(n(3957));function o(t){return t&&t.__esModule?t:{default:t}}var s={ignore_whitespace:!1};t.exports=e.default,t.exports.default=e.default},9942:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(0x)[0-9a-f]{40}$/i;t.exports=e.default,t.exports.default=e.default},6982:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,r.default)(t),(e=(0,i.default)(e,s)).allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));var n=t.split("."),o=n[n.length-1];if(e.require_tld){if(n.length<2)return!1;if(!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(o))return!1;if(/[\s\u2002-\u200B\u202F\u205F\u3000\uFEFF\uDB40\uDC20\u00A9\uFFFD]/.test(o))return!1}return!(!e.allow_numeric_tld&&/^\d+$/.test(o))&&n.every(function(t){return!(t.length>63||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(t)||/[\uff01-\uff5e]/.test(t)||/^-|-$/.test(t)||!e.allow_underscores&&/_/.test(t))})};var r=o(n(27717)),i=o(n(3957));function o(t){return t&&t.__esModule?t:{default:t}}var s={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1};t.exports=e.default,t.exports.default=e.default},78233:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,i.default)(t),e=e||{};var n=new RegExp("^(?:[-+])?(?:[0-9]+)?(?:\\".concat(e.locale?o.decimal[e.locale]:".","[0-9]*)?(?:[eE][\\+\\-]?(?:[0-9]+))?$"));if(""===t||"."===t||"-"===t||"+"===t)return!1;var r=parseFloat(t.replace(",","."));return n.test(t)&&(!e.hasOwnProperty("min")||r>=e.min)&&(!e.hasOwnProperty("max")||r<=e.max)&&(!e.hasOwnProperty("lt")||r<e.lt)&&(!e.hasOwnProperty("gt")||r>e.gt)},e.locales=void 0;var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=n(17637),s=Object.keys(o.decimal);e.locales=s},19282:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)},e.fullWidth=void 0;var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;e.fullWidth=o},88169:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)||s.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(hsl)a?\(\s*((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn|\s*)(\s*,\s*(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s*(,\s*((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s*)?\)$/i,s=/^(hsl)a?\(\s*((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?))(deg|grad|rad|turn|\s)(\s*(\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%){2}\s*(\/\s*((\+|\-)?([0-9]+(\.[0-9]+)?(e(\+|\-)?[0-9]+)?|\.[0-9]+(e(\+|\-)?[0-9]+)?)%?)\s*)?\)$/i;t.exports=e.default,t.exports.default=e.default},34637:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)},e.halfWidth=void 0;var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/;e.halfWidth=o},34316:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(t),new RegExp("^[a-fA-F0-9]{".concat(o[e],"}$")).test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};t.exports=e.default,t.exports.default=e.default},24126:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^#?([0-9A-F]{3}|[0-9A-F]{4}|[0-9A-F]{6}|[0-9A-F]{8})$/i;t.exports=e.default,t.exports.default=e.default},51104:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(0x|0h)?[0-9A-F]+$/i;t.exports=e.default,t.exports.default=e.default},84583:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),function(t){var e=t.replace(/[\s\-]+/gi,"").toUpperCase(),n=e.slice(0,2).toUpperCase();return n in o&&o[n].test(e)}(t)&&function(t){var e=t.replace(/[^A-Z0-9]+/gi,"").toUpperCase();return 1===(e.slice(4)+e.slice(0,4)).replace(/[A-Z]/g,function(t){return t.charCodeAt(0)-55}).match(/\d{1,7}/g).reduce(function(t,e){return Number(t+e)%97},"")}(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o={AD:/^(AD[0-9]{2})\d{8}[A-Z0-9]{12}$/,AE:/^(AE[0-9]{2})\d{3}\d{16}$/,AL:/^(AL[0-9]{2})\d{8}[A-Z0-9]{16}$/,AT:/^(AT[0-9]{2})\d{16}$/,AZ:/^(AZ[0-9]{2})[A-Z0-9]{4}\d{20}$/,BA:/^(BA[0-9]{2})\d{16}$/,BE:/^(BE[0-9]{2})\d{12}$/,BG:/^(BG[0-9]{2})[A-Z]{4}\d{6}[A-Z0-9]{8}$/,BH:/^(BH[0-9]{2})[A-Z]{4}[A-Z0-9]{14}$/,BR:/^(BR[0-9]{2})\d{23}[A-Z]{1}[A-Z0-9]{1}$/,BY:/^(BY[0-9]{2})[A-Z0-9]{4}\d{20}$/,CH:/^(CH[0-9]{2})\d{5}[A-Z0-9]{12}$/,CR:/^(CR[0-9]{2})\d{18}$/,CY:/^(CY[0-9]{2})\d{8}[A-Z0-9]{16}$/,CZ:/^(CZ[0-9]{2})\d{20}$/,DE:/^(DE[0-9]{2})\d{18}$/,DK:/^(DK[0-9]{2})\d{14}$/,DO:/^(DO[0-9]{2})[A-Z]{4}\d{20}$/,EE:/^(EE[0-9]{2})\d{16}$/,EG:/^(EG[0-9]{2})\d{25}$/,ES:/^(ES[0-9]{2})\d{20}$/,FI:/^(FI[0-9]{2})\d{14}$/,FO:/^(FO[0-9]{2})\d{14}$/,FR:/^(FR[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,GB:/^(GB[0-9]{2})[A-Z]{4}\d{14}$/,GE:/^(GE[0-9]{2})[A-Z0-9]{2}\d{16}$/,GI:/^(GI[0-9]{2})[A-Z]{4}[A-Z0-9]{15}$/,GL:/^(GL[0-9]{2})\d{14}$/,GR:/^(GR[0-9]{2})\d{7}[A-Z0-9]{16}$/,GT:/^(GT[0-9]{2})[A-Z0-9]{4}[A-Z0-9]{20}$/,HR:/^(HR[0-9]{2})\d{17}$/,HU:/^(HU[0-9]{2})\d{24}$/,IE:/^(IE[0-9]{2})[A-Z0-9]{4}\d{14}$/,IL:/^(IL[0-9]{2})\d{19}$/,IQ:/^(IQ[0-9]{2})[A-Z]{4}\d{15}$/,IR:/^(IR[0-9]{2})0\d{2}0\d{18}$/,IS:/^(IS[0-9]{2})\d{22}$/,IT:/^(IT[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,JO:/^(JO[0-9]{2})[A-Z]{4}\d{22}$/,KW:/^(KW[0-9]{2})[A-Z]{4}[A-Z0-9]{22}$/,KZ:/^(KZ[0-9]{2})\d{3}[A-Z0-9]{13}$/,LB:/^(LB[0-9]{2})\d{4}[A-Z0-9]{20}$/,LC:/^(LC[0-9]{2})[A-Z]{4}[A-Z0-9]{24}$/,LI:/^(LI[0-9]{2})\d{5}[A-Z0-9]{12}$/,LT:/^(LT[0-9]{2})\d{16}$/,LU:/^(LU[0-9]{2})\d{3}[A-Z0-9]{13}$/,LV:/^(LV[0-9]{2})[A-Z]{4}[A-Z0-9]{13}$/,MC:/^(MC[0-9]{2})\d{10}[A-Z0-9]{11}\d{2}$/,MD:/^(MD[0-9]{2})[A-Z0-9]{20}$/,ME:/^(ME[0-9]{2})\d{18}$/,MK:/^(MK[0-9]{2})\d{3}[A-Z0-9]{10}\d{2}$/,MR:/^(MR[0-9]{2})\d{23}$/,MT:/^(MT[0-9]{2})[A-Z]{4}\d{5}[A-Z0-9]{18}$/,MU:/^(MU[0-9]{2})[A-Z]{4}\d{19}[A-Z]{3}$/,NL:/^(NL[0-9]{2})[A-Z]{4}\d{10}$/,NO:/^(NO[0-9]{2})\d{11}$/,PK:/^(PK[0-9]{2})[A-Z0-9]{4}\d{16}$/,PL:/^(PL[0-9]{2})\d{24}$/,PS:/^(PS[0-9]{2})[A-Z0-9]{4}\d{21}$/,PT:/^(PT[0-9]{2})\d{21}$/,QA:/^(QA[0-9]{2})[A-Z]{4}[A-Z0-9]{21}$/,RO:/^(RO[0-9]{2})[A-Z]{4}[A-Z0-9]{16}$/,RS:/^(RS[0-9]{2})\d{18}$/,SA:/^(SA[0-9]{2})\d{2}[A-Z0-9]{18}$/,SC:/^(SC[0-9]{2})[A-Z]{4}\d{20}[A-Z]{3}$/,SE:/^(SE[0-9]{2})\d{20}$/,SI:/^(SI[0-9]{2})\d{15}$/,SK:/^(SK[0-9]{2})\d{20}$/,SM:/^(SM[0-9]{2})[A-Z]{1}\d{10}[A-Z0-9]{12}$/,SV:/^(SV[0-9]{2})[A-Z0-9]{4}\d{20}$/,TL:/^(TL[0-9]{2})\d{19}$/,TN:/^(TN[0-9]{2})\d{20}$/,TR:/^(TR[0-9]{2})\d{5}[A-Z0-9]{17}$/,UA:/^(UA[0-9]{2})\d{6}[A-Z0-9]{19}$/,VA:/^(VA[0-9]{2})\d{18}$/,VG:/^(VG[0-9]{2})[A-Z0-9]{4}\d{16}$/,XK:/^(XK[0-9]{2})\d{16}$/};t.exports=e.default,t.exports.default=e.default},12236:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,i.default)(t);var n=o;if((e=e||{}).allow_hyphens&&(n=s),!n.test(t))return!1;t=t.replace(/-/g,"");for(var r=0,a=2,l=0;l<14;l++){var c=t.substring(14-l-1,14-l),u=parseInt(c,10)*a;r+=u>=10?u%10+1:u,1===a?a+=1:a-=1}return(10-r%10)%10===parseInt(t.substring(14,15),10)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[0-9]{15}$/,s=/^\d{2}-\d{6}-\d{6}-\d{1}$/;t.exports=e.default,t.exports.default=e.default},92710:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,i.default)(e),!(n=String(n)))return t(e,4)||t(e,6);if("4"===n){if(!o.test(e))return!1;var r=e.split(".").sort(function(t,e){return t-e});return r[3]<=255}if("6"===n){var a=[e];if(e.includes("%")){if(2!==(a=e.split("%")).length)return!1;if(!a[0].includes(":"))return!1;if(""===a[1])return!1}var l=a[0].split(":"),c=!1,u=t(l[l.length-1],4),h=u?7:8;if(l.length>h)return!1;if("::"===e)return!0;"::"===e.substr(0,2)?(l.shift(),l.shift(),c=!0):"::"===e.substr(e.length-2)&&(l.pop(),l.pop(),c=!0);for(var d=0;d<l.length;++d)if(""===l[d]&&d>0&&d<l.length-1){if(c)return!1;c=!0}else if(u&&d===l.length-1);else if(!s.test(l[d]))return!1;return c?l.length>=1:l.length===h}return!1};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/,s=/^[0-9A-F]{1,4}$/i;t.exports=e.default,t.exports.default=e.default},13799:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){(0,r.default)(t);var e=t.split("/");return 2===e.length&&!!s.test(e[1])&&!(e[1].length>1&&e[1].startsWith("0"))&&(0,i.default)(e[0],4)&&e[1]<=32&&e[1]>=0};var r=o(n(27717)),i=o(n(92710));function o(t){return t&&t.__esModule?t:{default:t}}var s=/^\d{1,2}$/;t.exports=e.default,t.exports.default=e.default},22821:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,i.default)(e),!(n=String(n)))return t(e,10)||t(e,13);var r,l=e.replace(/[\s-]+/g,""),c=0;if("10"===n){if(!o.test(l))return!1;for(r=0;r<9;r++)c+=(r+1)*l.charAt(r);if("X"===l.charAt(9)?c+=100:c+=10*l.charAt(9),c%11==0)return!!l}else if("13"===n){if(!s.test(l))return!1;for(r=0;r<12;r++)c+=a[r%2]*l.charAt(r);if(l.charAt(12)-(10-c%10)%10==0)return!!l}return!1};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(?:[0-9]{9}X|[0-9]{10})$/,s=/^(?:[0-9]{13})$/,a=[1,3];t.exports=e.default,t.exports.default=e.default},42248:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if((0,i.default)(t),!o.test(t))return!1;for(var e,n,r=t.replace(/[A-Z]/g,function(t){return parseInt(t,36)}),s=0,a=!0,l=r.length-2;l>=0;l--)e=r.substring(l,l+1),n=parseInt(e,10),s+=a&&(n*=2)>=10?n+1:n,a=!a;return parseInt(t.substr(t.length-1),10)===(1e4-s)%10};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;t.exports=e.default,t.exports.default=e.default},21751:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,r.default)(t),(0,i.default)(s,t.toUpperCase())};var r=o(n(27717)),i=o(n(59700));function o(t){return t&&t.__esModule?t:{default:t}}var s=["AD","AE","AF","AG","AI","AL","AM","AO","AQ","AR","AS","AT","AU","AW","AX","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BL","BM","BN","BO","BQ","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CW","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MF","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","SS","ST","SV","SX","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW"];t.exports=e.default,t.exports.default=e.default},65435:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,r.default)(t),(0,i.default)(s,t.toUpperCase())};var r=o(n(27717)),i=o(n(59700));function o(t){return t&&t.__esModule?t:{default:t}}var s=["AFG","ALA","ALB","DZA","ASM","AND","AGO","AIA","ATA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BES","BIH","BWA","BVT","BRA","IOT","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHL","CHN","CXR","CCK","COL","COM","COG","COD","COK","CRI","CIV","HRV","CUB","CUW","CYP","CZE","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","FLK","FRO","FJI","FIN","FRA","GUF","PYF","ATF","GAB","GMB","GEO","DEU","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HMD","VAT","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MYT","MEX","FSM","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PSE","PAN","PNG","PRY","PER","PHL","PCN","POL","PRT","PRI","QAT","REU","ROU","RUS","RWA","BLM","SHN","KNA","LCA","MAF","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SYC","SLE","SGP","SXM","SVK","SVN","SLB","SOM","ZAF","SGS","SSD","ESP","LKA","SDN","SUR","SJM","SWZ","SWE","CHE","SYR","TWN","TJK","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","UGA","UKR","ARE","GBR","USA","UMI","URY","UZB","VUT","VEN","VNM","VGB","VIR","WLF","ESH","YEM","ZMB","ZWE"];t.exports=e.default,t.exports.default=e.default},6358:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(t);var n=e.strictSeparator?s.test(t):o.test(t);return n&&e.strict?a(t):n};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,s=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-3])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T]((([01]\d|2[0-3])((:?)[0-5]\d)?|24:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,a=function(t){var e=t.match(/^(\d{4})-?(\d{3})([ T]{1}\.*|$)/);if(e){var n=Number(e[1]),r=Number(e[2]);return n%4==0&&n%100!=0||n%400==0?r<=366:r<=365}var i=t.match(/(\d{4})-?(\d{0,2})-?(\d*)/).map(Number),o=i[1],s=i[2],a=i[3],l=s?"0".concat(s).slice(-2):s,c=a?"0".concat(a).slice(-2):a,u=new Date("".concat(o,"-").concat(l||"01","-").concat(c||"01"));return!s||!a||u.getUTCFullYear()===o&&u.getUTCMonth()+1===s&&u.getUTCDate()===a};t.exports=e.default,t.exports.default=e.default},51626:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[A-Z]{2}[0-9A-Z]{3}\d{2}\d{5}$/;t.exports=e.default,t.exports.default=e.default},41070:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.default)(t);var n=o;if(n=e.require_hyphen?n.replace("?",""):n,!(n=e.case_sensitive?new RegExp(n):new RegExp(n,"i")).test(t))return!1;for(var r=t.replace("-","").toUpperCase(),s=0,a=0;a<r.length;a++){var l=r[a];s+=("X"===l?10:+l)*(8-a)}return s%11==0};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o="^\\d{4}-?\\d{3}[\\dX]$";t.exports=e.default,t.exports.default=e.default},25258:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,i.default)(t),e in o)return o[e](t);if("any"===e){for(var n in o)if(o.hasOwnProperty(n)&&(0,o[n])(t))return!0;return!1}throw new Error("Invalid locale '".concat(e,"'"))};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o={ES:function(t){(0,i.default)(t);var e={X:0,Y:1,Z:2},n=t.trim().toUpperCase();if(!/^[0-9X-Z][0-9]{7}[TRWAGMYFPDXBNJZSQVHLCKE]$/.test(n))return!1;var r=n.slice(0,-1).replace(/[X,Y,Z]/g,function(t){return e[t]});return n.endsWith(["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][r%23])},IN:function(t){var e=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],n=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],r=t.trim();if(!/^[1-9]\d{3}\s?\d{4}\s?\d{4}$/.test(r))return!1;var i=0;return r.replace(/\s/g,"").split("").map(Number).reverse().forEach(function(t,r){i=e[i][n[r%8][t]]}),0===i},IT:function(t){return 9===t.length&&"CA00000AA"!==t&&t.search(/C[A-Z][0-9]{5}[A-Z]{2}/i)>-1},NO:function(t){var e=t.trim();if(isNaN(Number(e)))return!1;if(11!==e.length)return!1;if("00000000000"===e)return!1;var n=e.split("").map(Number),r=(11-(3*n[0]+7*n[1]+6*n[2]+1*n[3]+8*n[4]+9*n[5]+4*n[6]+5*n[7]+2*n[8])%11)%11;return r===n[9]&&(11-(5*n[0]+4*n[1]+3*n[2]+2*n[3]+7*n[4]+6*n[5]+5*n[6]+4*n[7]+3*n[8]+2*r)%11)%11===n[10]},"he-IL":function(t){var e=t.trim();if(!/^\d{9}$/.test(e))return!1;for(var n,r=e,i=0,o=0;o<r.length;o++)i+=(n=Number(r[o])*(o%2+1))>9?n-9:n;return i%10==0},"ar-TN":function(t){var e=t.trim();return!!/^\d{8}$/.test(e)},"zh-CN":function(t){var e,n=["11","12","13","14","15","21","22","23","31","32","33","34","35","36","37","41","42","43","44","45","46","50","51","52","53","54","61","62","63","64","65","71","81","82","91"],r=["7","9","10","5","8","4","2","1","6","3","7","9","10","5","8","4","2"],i=["1","0","X","9","8","7","6","5","4","3","2"],o=function(t){return n.includes(t)},s=function(t){var e=parseInt(t.substring(0,4),10),n=parseInt(t.substring(4,6),10),r=parseInt(t.substring(6),10),i=new Date(e,n-1,r);return!(i>new Date)&&i.getFullYear()===e&&i.getMonth()===n-1&&i.getDate()===r};return!!/^\d{15}|(\d{17}(\d|x|X))$/.test(e=t)&&(15===e.length?function(t){var e=/^[1-9]\d{7}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}$/.test(t);if(!e)return!1;var n=t.substring(0,2);if(!(e=o(n)))return!1;var r="19".concat(t.substring(6,12));return!!(e=s(r))}(e):function(t){var e=/^[1-9]\d{5}[1-9]\d{3}((0[1-9])|(1[0-2]))((0[1-9])|([1-2][0-9])|(3[0-1]))\d{3}(\d|x|X)$/.test(t);if(!e)return!1;var n=t.substring(0,2);if(!(e=o(n)))return!1;var a=t.substring(6,14);return!!(e=s(a))&&function(t){return function(t){for(var e=t.substring(0,17),n=0,o=0;o<17;o++)n+=parseInt(e.charAt(o),10)*parseInt(r[o],10);return i[n%11]}(t)===t.charAt(17).toUpperCase()}(t)}(e))},"zh-TW":function(t){var e={A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:34,J:18,K:19,L:20,M:21,N:22,O:35,P:23,Q:24,R:25,S:26,T:27,U:28,V:29,W:32,X:30,Y:31,Z:33},n=t.trim().toUpperCase();return!!/^[A-Z][0-9]{9}$/.test(n)&&Array.from(n).reduce(function(t,n,r){if(0===r){var i=e[n];return i%10*9+Math.floor(i/10)}return 9===r?(10-t%10-Number(n))%10==0:t+Number(n)*(9-r)},0)}};t.exports=e.default,t.exports.default=e.default},61213:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n;if((0,r.default)(t),"[object Array]"===Object.prototype.toString.call(e)){var o=[];for(n in e)({}).hasOwnProperty.call(e,n)&&(o[n]=(0,i.default)(e[n]));return o.indexOf(t)>=0}return"object"===s(e)?e.hasOwnProperty(t):!(!e||"function"!=typeof e.indexOf)&&e.indexOf(t)>=0};var r=o(n(27717)),i=o(n(19173));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=e.default,t.exports.default=e.default},41133:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,i.default)(t);var n=(e=e||{}).hasOwnProperty("allow_leading_zeroes")&&!e.allow_leading_zeroes?o:s,r=!e.hasOwnProperty("min")||t>=e.min,a=!e.hasOwnProperty("max")||t<=e.max,l=!e.hasOwnProperty("lt")||t<e.lt,c=!e.hasOwnProperty("gt")||t>e.gt;return n.test(t)&&r&&a&&l&&c};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,s=/^[-+]?[0-9]+$/;t.exports=e.default,t.exports.default=e.default},80420:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,r.default)(t);try{e=(0,i.default)(e,a);var n=[];e.allow_primitives&&(n=[null,!1,!0]);var o=JSON.parse(t);return n.includes(o)||!!o&&"object"===s(o)}catch(l){}return!1};var r=o(n(27717)),i=o(n(3957));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a={allow_primitives:!1};t.exports=e.default,t.exports.default=e.default},10583:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){(0,r.default)(t);var e=t.split("."),n=e.length;return!(n>3||n<2)&&e.reduce(function(t,e){return t&&(0,i.default)(e,{urlSafe:!0})},!0)};var r=o(n(27717)),i=o(n(10529));function o(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default,t.exports.default=e.default},80773:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,r.default)(t),e=(0,i.default)(e,u),!t.includes(","))return!1;var n=t.split(",");return!(n[0].startsWith("(")&&!n[1].endsWith(")")||n[1].endsWith(")")&&!n[0].startsWith("("))&&(e.checkDMS?l.test(n[0])&&c.test(n[1]):s.test(n[0])&&a.test(n[1]))};var r=o(n(27717)),i=o(n(3957));function o(t){return t&&t.__esModule?t:{default:t}}var s=/^\(?[+-]?(90(\.0+)?|[1-8]?\d(\.\d+)?)$/,a=/^\s?[+-]?(180(\.0+)?|1[0-7]\d(\.\d+)?|\d{1,2}(\.\d+)?)\)?$/,l=/^(([1-8]?\d)\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|90\D+0\D+0)\D+[NSns]?$/i,c=/^\s*([1-7]?\d{1,2}\D+([1-5]?\d|60)\D+([1-5]?\d|60)(\.\d+)?|180\D+0\D+0)\D+[EWew]?$/i,u={checkDMS:!1};t.exports=e.default,t.exports.default=e.default},49642:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n,r;(0,i.default)(t),"object"===o(e)?(n=e.min||0,r=e.max):(n=arguments[1]||0,r=arguments[2]);var s=t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],a=t.length-s.length;return a>=n&&(void 0===r||a<=r)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=e.default,t.exports.default=e.default},90862:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),"en_US_POSIX"===t||"ca_ES_VALENCIA"===t||o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[A-z]{2,4}([_-]([A-z]{4}|[\d]{3}))?([_-]([A-z]{2}|[\d]{3}))?$/;t.exports=e.default,t.exports.default=e.default},52138:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),t===t.toLowerCase()};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},56560:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(t),e&&e.no_colons?s.test(t):o.test(t)||a.test(t)||l.test(t)||c.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,s=/^([0-9a-fA-F]){12}$/,a=/^([0-9a-fA-F][0-9a-fA-F]-){5}([0-9a-fA-F][0-9a-fA-F])$/,l=/^([0-9a-fA-F][0-9a-fA-F]\s){5}([0-9a-fA-F][0-9a-fA-F])$/,c=/^([0-9a-fA-F]{4}).([0-9a-fA-F]{4}).([0-9a-fA-F]{4})$/;t.exports=e.default,t.exports.default=e.default},9037:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[a-f0-9]{32}$/;t.exports=e.default,t.exports.default=e.default},7454:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t.trim())};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^magnet:\?xt=urn:[a-z0-9]+:[a-z0-9]{32,40}&dn=.+&tr=.+$/i;t.exports=e.default,t.exports.default=e.default},87674:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)||s.test(t)||a.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(application|audio|font|image|message|model|multipart|text|video)\/[a-zA-Z0-9\.\-\+]{1,100}$/i,s=/^text\/[a-zA-Z0-9\.\-\+]{1,100};\s?charset=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?$/i,a=/^multipart\/[a-zA-Z0-9\.\-\+]{1,100}(;\s?(boundary|charset)=("[a-zA-Z0-9\.\-\+\s]{0,70}"|[a-zA-Z0-9\.\-\+]{0,70})(\s?\([a-zA-Z0-9\.\-\+\s]{1,20}\))?){0,2}$/i;t.exports=e.default,t.exports.default=e.default},99909:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if((0,i.default)(t),n&&n.strictMode&&!t.startsWith("+"))return!1;if(Array.isArray(e))return e.some(function(e){return!(!o.hasOwnProperty(e)||!o[e].test(t))});if(e in o)return o[e].test(t);if(!e||"any"===e){for(var r in o)if(o.hasOwnProperty(r)&&o[r].test(t))return!0;return!1}throw new Error("Invalid locale '".concat(e,"'"))},e.locales=void 0;var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o={"am-AM":/^(\+?374|0)((10|[9|7][0-9])\d{6}$|[2-4]\d{7}$)/,"ar-AE":/^((\+?971)|0)?5[024568]\d{7}$/,"ar-BH":/^(\+?973)?(3|6)\d{7}$/,"ar-DZ":/^(\+?213|0)(5|6|7)\d{8}$/,"ar-LB":/^(\+?961)?((3|81)\d{6}|7\d{7})$/,"ar-EG":/^((\+?20)|0)?1[0125]\d{8}$/,"ar-IQ":/^(\+?964|0)?7[0-9]\d{8}$/,"ar-JO":/^(\+?962|0)?7[789]\d{7}$/,"ar-KW":/^(\+?965)[569]\d{7}$/,"ar-LY":/^((\+?218)|0)?(9[1-6]\d{7}|[1-8]\d{7,9})$/,"ar-MA":/^(?:(?:\+|00)212|0)[5-7]\d{8}$/,"ar-SA":/^(!?(\+?966)|0)?5\d{8}$/,"ar-SY":/^(!?(\+?963)|0)?9\d{8}$/,"ar-TN":/^(\+?216)?[2459]\d{7}$/,"az-AZ":/^(\+994|0)(5[015]|7[07]|99)\d{7}$/,"bs-BA":/^((((\+|00)3876)|06))((([0-3]|[5-6])\d{6})|(4\d{7}))$/,"be-BY":/^(\+?375)?(24|25|29|33|44)\d{7}$/,"bg-BG":/^(\+?359|0)?8[789]\d{7}$/,"bn-BD":/^(\+?880|0)1[13456789][0-9]{8}$/,"ca-AD":/^(\+376)?[346]\d{5}$/,"cs-CZ":/^(\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"da-DK":/^(\+?45)?\s?\d{2}\s?\d{2}\s?\d{2}\s?\d{2}$/,"de-DE":/^(\+49)?0?[1|3]([0|5][0-45-9]\d|6([23]|0\d?)|7([0-57-9]|6\d))\d{7}$/,"de-AT":/^(\+43|0)\d{1,4}\d{3,12}$/,"de-CH":/^(\+41|0)(7[5-9])\d{1,7}$/,"de-LU":/^(\+352)?((6\d1)\d{6})$/,"el-GR":/^(\+?30|0)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-GG":/^(\+?44|0)1481\d{6}$/,"en-GH":/^(\+233|0)(20|50|24|54|27|57|26|56|23|28)\d{7}$/,"en-HK":/^(\+?852[-\s]?)?[456789]\d{3}[-\s]?\d{4}$/,"en-MO":/^(\+?853[-\s]?)?[6]\d{3}[-\s]?\d{4}$/,"en-IE":/^(\+?353|0)8[356789]\d{7}$/,"en-IN":/^(\+?91|0)?[6789]\d{9}$/,"en-KE":/^(\+?254|0)(7|1)\d{8}$/,"en-MT":/^(\+?356|0)?(99|79|77|21|27|22|25)[0-9]{6}$/,"en-MU":/^(\+?230|0)?\d{8}$/,"en-NG":/^(\+?234|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)[28]\d{7,9}$/,"en-PK":/^((\+92)|(0092))-{0,1}\d{3}-{0,1}\d{7}$|^\d{11}$|^\d{4}-\d{7}$/,"en-PH":/^(09|\+639)\d{9}$/,"en-RW":/^(\+?250|0)?[7]\d{8}$/,"en-SG":/^(\+65)?[689]\d{7}$/,"en-SL":/^(?:0|94|\+94)?(7(0|1|2|5|6|7|8)( |-)?\d)\d{6}$/,"en-TZ":/^(\+?255|0)?[67]\d{8}$/,"en-UG":/^(\+?256|0)?[7]\d{8}$/,"en-US":/^((\+1|1)?( |-)?)?(\([2-9][0-9]{2}\)|[2-9][0-9]{2})( |-)?([2-9][0-9]{2}( |-)?[0-9]{4})$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"en-ZW":/^(\+263)[0-9]{9}$/,"es-AR":/^\+?549(11|[2368]\d)\d{8}$/,"es-BO":/^(\+?591)?(6|7)\d{7}$/,"es-CO":/^(\+?57)?([1-8]{1}|3[0-9]{2})?[2-9]{1}\d{6}$/,"es-CL":/^(\+?56|0)[2-9]\d{1}\d{7}$/,"es-CR":/^(\+506)?[2-8]\d{7}$/,"es-DO":/^(\+?1)?8[024]9\d{7}$/,"es-HN":/^(\+?504)?[9|8]\d{7}$/,"es-EC":/^(\+?593|0)([2-7]|9[2-9])\d{7}$/,"es-ES":/^(\+?34)?[6|7]\d{8}$/,"es-PE":/^(\+?51)?9\d{8}$/,"es-MX":/^(\+?52)?(1|01)?\d{10,11}$/,"es-PA":/^(\+?507)\d{7,8}$/,"es-PY":/^(\+?595|0)9[9876]\d{7}$/,"es-UY":/^(\+598|0)9[1-9][\d]{6}$/,"et-EE":/^(\+?372)?\s?(5|8[1-4])\s?([0-9]\s?){6,7}$/,"fa-IR":/^(\+?98[\-\s]?|0)9[0-39]\d[\-\s]?\d{3}[\-\s]?\d{4}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5|6)?|50)\s?(\d\s?){4,8}\d$/,"fj-FJ":/^(\+?679)?\s?\d{3}\s?\d{4}$/,"fo-FO":/^(\+?298)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"fr-GF":/^(\+?594|0|00594)[67]\d{8}$/,"fr-GP":/^(\+?590|0|00590)[67]\d{8}$/,"fr-MQ":/^(\+?596|0|00596)[67]\d{8}$/,"fr-RE":/^(\+?262|0|00262)[67]\d{8}$/,"he-IL":/^(\+972|0)([23489]|5[012345689]|77)[1-9]\d{6}$/,"hu-HU":/^(\+?36)(20|30|70)\d{7}$/,"id-ID":/^(\+?62|0)8(1[123456789]|2[1238]|3[1238]|5[12356789]|7[78]|9[56789]|8[123456789])([\s?|\d]{5,11})$/,"it-IT":/^(\+?39)?\s?3\d{2} ?\d{6,7}$/,"it-SM":/^((\+378)|(0549)|(\+390549)|(\+3780549))?6\d{5,9}$/,"ja-JP":/^(\+81[ \-]?(\(0\))?|0)[6789]0[ \-]?\d{4}[ \-]?\d{4}$/,"ka-GE":/^(\+?995)?(5|79)\d{7}$/,"kk-KZ":/^(\+?7|8)?7\d{9}$/,"kl-GL":/^(\+?299)?\s?\d{2}\s?\d{2}\s?\d{2}$/,"ko-KR":/^((\+?82)[ \-]?)?0?1([0|1|6|7|8|9]{1})[ \-]?\d{3,4}[ \-]?\d{4}$/,"lt-LT":/^(\+370|8)\d{8}$/,"ms-MY":/^(\+?6?01){1}(([0145]{1}(\-|\s)?\d{7,8})|([236789]{1}(\s|\-)?\d{7}))$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"ne-NP":/^(\+?977)?9[78]\d{8}$/,"nl-BE":/^(\+?32|0)4?\d{8}$/,"nl-NL":/^(((\+|00)?31\(0\))|((\+|00)?31)|0)6{1}\d{8}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pl-PL":/^(\+?48)? ?[5-8]\d ?\d{3} ?\d{2} ?\d{2}$/,"pt-BR":/^((\+?55\ ?[1-9]{2}\ ?)|(\+?55\ ?\([1-9]{2}\)\ ?)|(0[1-9]{2}\ ?)|(\([1-9]{2}\)\ ?)|([1-9]{2}\ ?))((\d{4}\-?\d{4})|(9[2-9]{1}\d{3}\-?\d{4}))$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ro-RO":/^(\+?4?0)\s?7\d{2}(\/|\s|\.|\-)?\d{3}(\s|\.|\-)?\d{3}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"sl-SI":/^(\+386\s?|0)(\d{1}\s?\d{3}\s?\d{2}\s?\d{2}|\d{2}\s?\d{3}\s?\d{3})$/,"sk-SK":/^(\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,"sq-AL":/^(\+355|0)6[789]\d{6}$/,"sr-RS":/^(\+3816|06)[- \d]{5,9}$/,"sv-SE":/^(\+?46|0)[\s\-]?7[\s\-]?[02369]([\s\-]?\d){7}$/,"th-TH":/^(\+66|66|0)\d{9}$/,"tr-TR":/^(\+?90|0)?5\d{9}$/,"uk-UA":/^(\+?38|8)?0\d{9}$/,"uz-UZ":/^(\+?998)?(6[125-79]|7[1-69]|88|9\d)\d{7}$/,"vi-VN":/^(\+?84|0)((3([2-9]))|(5([2689]))|(7([0|6-9]))|(8([1-6|89]))|(9([0-9])))([0-9]{7})$/,"zh-CN":/^((\+|00)86)?1([3568][0-9]|4[579]|6[67]|7[01235678]|9[012356789])[0-9]{8}$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/};o["en-CA"]=o["en-US"],o["fr-CA"]=o["en-CA"],o["fr-BE"]=o["nl-BE"],o["zh-HK"]=o["en-HK"],o["zh-MO"]=o["en-MO"],o["ga-IE"]=o["en-IE"];var s=Object.keys(o);e.locales=s},19314:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,r.default)(t),(0,i.default)(t)&&24===t.length};var r=o(n(27717)),i=o(n(51104));function o(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default,t.exports.default=e.default},32943:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/[^\x00-\x7F]/;t.exports=e.default,t.exports.default=e.default},77610:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(t),e&&e.no_symbols?s.test(t):new RegExp("^[+-]?([0-9]*[".concat((e||{}).locale?o.decimal[e.locale]:".","])?[0-9]+$")).test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=n(17637),s=/^[0-9]+$/;t.exports=e.default,t.exports.default=e.default},48009:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^(0o)?[0-7]+$/i;t.exports=e.default,t.exports.default=e.default},68157:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,i.default)(t);var n=t.replace(/\s/g,"").toUpperCase();return e.toUpperCase()in o&&o[e].test(n)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o={AM:/^[A-Z]{2}\d{7}$/,AR:/^[A-Z]{3}\d{6}$/,AT:/^[A-Z]\d{7}$/,AU:/^[A-Z]\d{7}$/,BE:/^[A-Z]{2}\d{6}$/,BG:/^\d{9}$/,BY:/^[A-Z]{2}\d{7}$/,CA:/^[A-Z]{2}\d{6}$/,CH:/^[A-Z]\d{7}$/,CN:/^[GE]\d{8}$/,CY:/^[A-Z](\d{6}|\d{8})$/,CZ:/^\d{8}$/,DE:/^[CFGHJKLMNPRTVWXYZ0-9]{9}$/,DK:/^\d{9}$/,DZ:/^\d{9}$/,EE:/^([A-Z]\d{7}|[A-Z]{2}\d{7})$/,ES:/^[A-Z0-9]{2}([A-Z0-9]?)\d{6}$/,FI:/^[A-Z]{2}\d{7}$/,FR:/^\d{2}[A-Z]{2}\d{5}$/,GB:/^\d{9}$/,GR:/^[A-Z]{2}\d{7}$/,HR:/^\d{9}$/,HU:/^[A-Z]{2}(\d{6}|\d{7})$/,IE:/^[A-Z0-9]{2}\d{7}$/,IN:/^[A-Z]{1}-?\d{7}$/,IS:/^(A)\d{7}$/,IT:/^[A-Z0-9]{2}\d{7}$/,JP:/^[A-Z]{2}\d{7}$/,KR:/^[MS]\d{8}$/,LT:/^[A-Z0-9]{8}$/,LU:/^[A-Z0-9]{8}$/,LV:/^[A-Z0-9]{2}\d{7}$/,MT:/^\d{7}$/,NL:/^[A-Z]{2}[A-Z0-9]{6}\d$/,PO:/^[A-Z]{2}\d{7}$/,PT:/^[A-Z]\d{6}$/,RO:/^\d{8,9}$/,RU:/^\d{2}\d{2}\d{6}$/,SE:/^\d{8}$/,SL:/^(P)[A-Z]\d{7}$/,SK:/^[0-9A-Z]\d{7}$/,TR:/^[A-Z]\d{8}$/,UA:/^[A-Z]{2}\d{6}$/,US:/^\d{9}$/};t.exports=e.default,t.exports.default=e.default},18572:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t,{min:0,max:65535})};var r,i=(r=n(41133))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},51759:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,i.default)(t),e in l)return l[e].test(t);if("any"===e){for(var n in l)if(l.hasOwnProperty(n)&&l[n].test(t))return!0;return!1}throw new Error("Invalid locale '".concat(e,"'"))},e.locales=void 0;var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^\d{4}$/,s=/^\d{5}$/,a=/^\d{6}$/,l={AD:/^AD\d{3}$/,AT:o,AU:o,AZ:/^AZ\d{4}$/,BE:o,BG:o,BR:/^\d{5}-\d{3}$/,BY:/2[1-4]{1}\d{4}$/,CA:/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJ-NPRSTV-Z][\s\-]?\d[ABCEGHJ-NPRSTV-Z]\d$/i,CH:o,CN:/^(0[1-7]|1[012356]|2[0-7]|3[0-6]|4[0-7]|5[1-7]|6[1-7]|7[1-5]|8[1345]|9[09])\d{4}$/,CZ:/^\d{3}\s?\d{2}$/,DE:s,DK:o,DO:s,DZ:s,EE:s,ES:/^(5[0-2]{1}|[0-4]{1}\d{1})\d{3}$/,FI:s,FR:/^\d{2}\s?\d{3}$/,GB:/^(gir\s?0aa|[a-z]{1,2}\d[\da-z]?\s?(\d[a-z]{2})?)$/i,GR:/^\d{3}\s?\d{2}$/,HR:/^([1-5]\d{4}$)/,HT:/^HT\d{4}$/,HU:o,ID:s,IE:/^(?!.*(?:o))[A-z]\d[\dw]\s\w{4}$/i,IL:/^(\d{5}|\d{7})$/,IN:/^((?!10|29|35|54|55|65|66|86|87|88|89)[1-9][0-9]{5})$/,IR:/\b(?!(\d)\1{3})[13-9]{4}[1346-9][013-9]{5}\b/,IS:/^\d{3}$/,IT:s,JP:/^\d{3}\-\d{4}$/,KE:s,LI:/^(948[5-9]|949[0-7])$/,LT:/^LT\-\d{5}$/,LU:o,LV:/^LV\-\d{4}$/,MX:s,MT:/^[A-Za-z]{3}\s{0,1}\d{4}$/,MY:s,NL:/^\d{4}\s?[a-z]{2}$/i,NO:o,NP:/^(10|21|22|32|33|34|44|45|56|57)\d{3}$|^(977)$/i,NZ:o,PL:/^\d{2}\-\d{3}$/,PR:/^00[679]\d{2}([ -]\d{4})?$/,PT:/^\d{4}\-\d{3}?$/,RO:a,RU:a,SA:s,SE:/^[1-9]\d{2}\s?\d{2}$/,SG:a,SI:o,SK:/^\d{3}\s?\d{2}$/,TH:s,TN:o,TW:/^\d{3}(\d{2})?$/,UA:s,US:/^\d{5}(-\d{4})?$/,ZA:o,ZM:s},c=Object.keys(l);e.locales=c},88758:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),d.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/([01][0-9]|2[0-3])/,s=/[0-5][0-9]/,a=new RegExp("[-+]".concat(o.source,":").concat(s.source)),l=new RegExp("([zZ]|".concat(a.source,")")),c=new RegExp("".concat(o.source,":").concat(s.source,":").concat(/([0-5][0-9]|60)/.source).concat(/(\.[0-9]+)?/.source)),u=new RegExp("".concat(/[0-9]{4}/.source,"-").concat(/(0[1-9]|1[0-2])/.source,"-").concat(/([12]\d|0[1-9]|3[01])/.source)),h=new RegExp("".concat(c.source).concat(l.source)),d=new RegExp("".concat(u.source,"[ tT]").concat(h.source));t.exports=e.default,t.exports.default=e.default},93245:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,i.default)(t),e?o.test(t)||s.test(t)||a.test(t)||l.test(t):o.test(t)||s.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^rgb\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){2}([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\)$/,s=/^rgba\((([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)$/,a=/^rgb\((([0-9]%|[1-9][0-9]%|100%),){2}([0-9]%|[1-9][0-9]%|100%)\)/,l=/^rgba\((([0-9]%|[1-9][0-9]%|100%),){3}(0?\.\d|1(\.0)?|0(\.0)?)\)/;t.exports=e.default,t.exports.default=e.default},36110:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,r.default)(t),o.test(t)};var r=i(n(27717));function i(t){return t&&t.__esModule?t:{default:t}}var o=(0,i(n(12381)).default)(["^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)","(?:-((?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-z-][0-9a-z-]*))*))","?(?:\\+([0-9a-z-]+(?:\\.[0-9a-z-]+)*))?$"],"i");t.exports=e.default,t.exports.default=e.default},48145:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/^[^\s-_](?!.*?[-_]{2,})([a-z0-9-\\]{1,})[^\s]*[^-_\s]$/;t.exports=e.default,t.exports.default=e.default},83109:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,i.default)(t);var n=h(t);return(e=(0,r.default)(e||{},u)).returnScore?d(n,e):n.length>=e.minLength&&n.lowercaseCount>=e.minLowercase&&n.uppercaseCount>=e.minUppercase&&n.numberCount>=e.minNumbers&&n.symbolCount>=e.minSymbols};var r=o(n(3957)),i=o(n(27717));function o(t){return t&&t.__esModule?t:{default:t}}var s=/^[A-Z]$/,a=/^[a-z]$/,l=/^[0-9]$/,c=/^[-#!$%^&*()_+|~=`{}\[\]:";'<>?,.\/ ]$/,u={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function h(t){var e,n=(e={},Array.from(t).forEach(function(t){e[t]?e[t]+=1:e[t]=1}),e),r={length:t.length,uniqueChars:Object.keys(n).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(n).forEach(function(t){s.test(t)?r.uppercaseCount+=n[t]:a.test(t)?r.lowercaseCount+=n[t]:l.test(t)?r.numberCount+=n[t]:c.test(t)&&(r.symbolCount+=n[t])}),r}function d(t,e){var n=0;return n+=t.uniqueChars*e.pointsPerUnique,n+=(t.length-t.uniqueChars)*e.pointsPerRepeat,t.lowercaseCount>0&&(n+=e.pointsForContainingLower),t.uppercaseCount>0&&(n+=e.pointsForContainingUpper),t.numberCount>0&&(n+=e.pointsForContainingNumber),t.symbolCount>0&&(n+=e.pointsForContainingSymbol),n}t.exports=e.default,t.exports.default=e.default},38147:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;t.exports=e.default,t.exports.default=e.default},68075:(t,e,n)=>{"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";(0,i.default)(t);var n=t.slice(0);if(e in d)return e in g&&(n=n.replace(g[e],"")),!!d[e].test(n)&&(!(e in f)||f[e](n));throw new Error("Invalid locale '".concat(e,"'"))};var i=l(n(27717)),o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var s=i?Object.getOwnPropertyDescriptor(t,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}(n(4670)),s=l(n(88158));function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var u={andover:["10","12"],atlanta:["60","67"],austin:["50","53"],brookhaven:["01","02","03","04","05","06","11","13","14","16","21","22","23","25","34","51","52","54","55","56","57","58","59","65"],cincinnati:["30","32","35","36","37","38","61"],fresno:["15","24"],internet:["20","26","27","45","46","47"],kansas:["40","44"],memphis:["94","95"],ogden:["80","90"],philadelphia:["33","39","41","42","43","46","48","62","63","64","66","68","71","72","73","74","75","76","77","81","82","83","84","85","86","87","88","91","92","93","98","99"],sba:["31"]};function h(t){for(var e=!1,n=!1,r=0;r<3;r++)if(!e&&/[AEIOU]/.test(t[r]))e=!0;else if(!n&&e&&"X"===t[r])n=!0;else if(r>0){if(e&&!n&&!/[AEIOU]/.test(t[r]))return!1;if(n&&!/X/.test(t[r]))return!1}return!0}var d={"bg-BG":/^\d{10}$/,"cs-CZ":/^\d{6}\/{0,1}\d{3,4}$/,"de-AT":/^\d{9}$/,"de-DE":/^[1-9]\d{10}$/,"dk-DK":/^\d{6}-{0,1}\d{4}$/,"el-CY":/^[09]\d{7}[A-Z]$/,"el-GR":/^([0-4]|[7-9])\d{8}$/,"en-GB":/^\d{10}$|^(?!GB|NK|TN|ZZ)(?![DFIQUV])[A-Z](?![DFIQUVO])[A-Z]\d{6}[ABCD ]$/i,"en-IE":/^\d{7}[A-W][A-IW]{0,1}$/i,"en-US":/^\d{2}[- ]{0,1}\d{7}$/,"es-ES":/^(\d{0,8}|[XYZKLM]\d{7})[A-HJ-NP-TV-Z]$/i,"et-EE":/^[1-6]\d{6}(00[1-9]|0[1-9][0-9]|[1-6][0-9]{2}|70[0-9]|710)\d$/,"fi-FI":/^\d{6}[-+A]\d{3}[0-9A-FHJ-NPR-Y]$/i,"fr-BE":/^\d{11}$/,"fr-FR":/^[0-3]\d{12}$|^[0-3]\d\s\d{2}(\s\d{3}){3}$/,"fr-LU":/^\d{13}$/,"hr-HR":/^\d{11}$/,"hu-HU":/^8\d{9}$/,"it-IT":/^[A-Z]{6}[L-NP-V0-9]{2}[A-EHLMPRST][L-NP-V0-9]{2}[A-ILMZ][L-NP-V0-9]{3}[A-Z]$/i,"lv-LV":/^\d{6}-{0,1}\d{5}$/,"mt-MT":/^\d{3,7}[APMGLHBZ]$|^([1-8])\1\d{7}$/i,"nl-NL":/^\d{9}$/,"pl-PL":/^\d{10,11}$/,"pt-PT":/^\d{9}$/,"ro-RO":/^\d{13}$/,"sk-SK":/^\d{6}\/{0,1}\d{3,4}$/,"sl-SI":/^[1-9]\d{7}$/,"sv-SE":/^(\d{6}[-+]{0,1}\d{4}|(18|19|20)\d{6}[-+]{0,1}\d{4})$/};d["lb-LU"]=d["fr-LU"],d["lt-LT"]=d["et-EE"],d["nl-BE"]=d["fr-BE"];var f={"bg-BG":function(t){var e=t.slice(0,2),n=parseInt(t.slice(2,4),10);n>40?(n-=40,e="20".concat(e)):n>20?(n-=20,e="18".concat(e)):e="19".concat(e),n<10&&(n="0".concat(n));var r="".concat(e,"/").concat(n,"/").concat(t.slice(4,6));if(!(0,s.default)(r,"YYYY/MM/DD"))return!1;for(var i=t.split("").map(function(t){return parseInt(t,10)}),o=[2,4,8,5,10,9,7,3,6],a=0,l=0;l<o.length;l++)a+=i[l]*o[l];return(a=a%11==10?0:a%11)===i[9]},"cs-CZ":function(t){t=t.replace(/\W/,"");var e=parseInt(t.slice(0,2),10);if(10===t.length)e=e<54?"20".concat(e):"19".concat(e);else{if("000"===t.slice(6))return!1;if(!(e<54))return!1;e="19".concat(e)}3===e.length&&(e=[e.slice(0,2),"0",e.slice(2)].join(""));var n=parseInt(t.slice(2,4),10);if(n>50&&(n-=50),n>20){if(parseInt(e,10)<2004)return!1;n-=20}n<10&&(n="0".concat(n));var r="".concat(e,"/").concat(n,"/").concat(t.slice(4,6));if(!(0,s.default)(r,"YYYY/MM/DD"))return!1;if(10===t.length&&parseInt(t,10)%11!=0){var i=parseInt(t.slice(0,9),10)%11;if(!(parseInt(e,10)<1986&&10===i))return!1;if(0!==parseInt(t.slice(9),10))return!1}return!0},"de-AT":function(t){return o.luhnCheck(t)},"de-DE":function(t){for(var e=t.split("").map(function(t){return parseInt(t,10)}),n=[],r=0;r<e.length-1;r++){n.push("");for(var i=0;i<e.length-1;i++)e[r]===e[i]&&(n[r]+=i)}if(2!==(n=n.filter(function(t){return t.length>1})).length&&3!==n.length)return!1;if(3===n[0].length){for(var s=n[0].split("").map(function(t){return parseInt(t,10)}),a=0,l=0;l<s.length-1;l++)s[l]+1===s[l+1]&&(a+=1);if(2===a)return!1}return o.iso7064Check(t)},"dk-DK":function(t){t=t.replace(/\W/,"");var e=parseInt(t.slice(4,6),10);switch(t.slice(6,7)){case"0":case"1":case"2":case"3":e="19".concat(e);break;case"4":case"9":e=e<37?"20".concat(e):"19".concat(e);break;default:if(e<37)e="20".concat(e);else{if(!(e>58))return!1;e="18".concat(e)}}3===e.length&&(e=[e.slice(0,2),"0",e.slice(2)].join(""));var n="".concat(e,"/").concat(t.slice(2,4),"/").concat(t.slice(0,2));if(!(0,s.default)(n,"YYYY/MM/DD"))return!1;for(var r=t.split("").map(function(t){return parseInt(t,10)}),i=0,o=4,a=0;a<9;a++)i+=r[a]*o,1==(o-=1)&&(o=7);return 1!=(i%=11)&&(0===i?0===r[9]:r[9]===11-i)},"el-CY":function(t){for(var e=t.slice(0,8).split("").map(function(t){return parseInt(t,10)}),n=0,r=1;r<e.length;r+=2)n+=e[r];for(var i=0;i<e.length;i+=2)e[i]<2?n+=1-e[i]:(n+=2*(e[i]-2)+5,e[i]>4&&(n+=2));return String.fromCharCode(n%26+65)===t.charAt(8)},"el-GR":function(t){for(var e=t.split("").map(function(t){return parseInt(t,10)}),n=0,r=0;r<8;r++)n+=e[r]*Math.pow(2,8-r);return n%11===e[8]},"en-IE":function(t){var e=o.reverseMultiplyAndSum(t.split("").slice(0,7).map(function(t){return parseInt(t,10)}),8);return 9===t.length&&"W"!==t[8]&&(e+=9*(t[8].charCodeAt(0)-64)),0==(e%=23)?"W"===t[7].toUpperCase():t[7].toUpperCase()===String.fromCharCode(64+e)},"en-US":function(t){return-1!==function(){var t,e=[];for(var n in u)u.hasOwnProperty(n)&&e.push.apply(e,function(t){if(Array.isArray(t))return c(t)}(t=u[n])||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return e}().indexOf(t.substr(0,2))},"es-ES":function(t){var e=t.toUpperCase().split("");if(isNaN(parseInt(e[0],10))&&e.length>1){var n=0;switch(e[0]){case"Y":n=1;break;case"Z":n=2}e.splice(0,1,n)}else for(;e.length<9;)e.unshift(0);e=e.join("");var r=parseInt(e.slice(0,8),10)%23;return e[8]===["T","R","W","A","G","M","Y","F","P","D","X","B","N","J","Z","S","Q","V","H","L","C","K","E"][r]},"et-EE":function(t){var e=t.slice(1,3);switch(t.slice(0,1)){case"1":case"2":e="18".concat(e);break;case"3":case"4":e="19".concat(e);break;default:e="20".concat(e)}var n="".concat(e,"/").concat(t.slice(3,5),"/").concat(t.slice(5,7));if(!(0,s.default)(n,"YYYY/MM/DD"))return!1;for(var r=t.split("").map(function(t){return parseInt(t,10)}),i=0,o=1,a=0;a<10;a++)i+=r[a]*o,10===(o+=1)&&(o=1);if(i%11==10){i=0,o=3;for(var l=0;l<10;l++)i+=r[l]*o,10===(o+=1)&&(o=1);if(i%11==10)return 0===r[10]}return i%11===r[10]},"fi-FI":function(t){var e=t.slice(4,6);switch(t.slice(6,7)){case"+":e="18".concat(e);break;case"-":e="19".concat(e);break;default:e="20".concat(e)}var n="".concat(e,"/").concat(t.slice(2,4),"/").concat(t.slice(0,2));if(!(0,s.default)(n,"YYYY/MM/DD"))return!1;var r=parseInt(t.slice(0,6)+t.slice(7,10),10)%31;return r<10?r===parseInt(t.slice(10),10):["A","B","C","D","E","F","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y"][r-=10]===t.slice(10)},"fr-BE":function(t){if("00"!==t.slice(2,4)||"00"!==t.slice(4,6)){var e="".concat(t.slice(0,2),"/").concat(t.slice(2,4),"/").concat(t.slice(4,6));if(!(0,s.default)(e,"YY/MM/DD"))return!1}var n=97-parseInt(t.slice(0,9),10)%97,r=parseInt(t.slice(9,11),10);return n===r||(n=97-parseInt("2".concat(t.slice(0,9)),10)%97)===r},"fr-FR":function(t){return t=t.replace(/\s/g,""),parseInt(t.slice(0,10),10)%511===parseInt(t.slice(10,13),10)},"fr-LU":function(t){var e="".concat(t.slice(0,4),"/").concat(t.slice(4,6),"/").concat(t.slice(6,8));return!!(0,s.default)(e,"YYYY/MM/DD")&&!!o.luhnCheck(t.slice(0,12))&&o.verhoeffCheck("".concat(t.slice(0,11)).concat(t[12]))},"hr-HR":function(t){return o.iso7064Check(t)},"hu-HU":function(t){for(var e=t.split("").map(function(t){return parseInt(t,10)}),n=8,r=1;r<9;r++)n+=e[r]*(r+1);return n%11===e[9]},"it-IT":function(t){var e=t.toUpperCase().split("");if(!h(e.slice(0,3)))return!1;if(!h(e.slice(3,6)))return!1;for(var n={L:"0",M:"1",N:"2",P:"3",Q:"4",R:"5",S:"6",T:"7",U:"8",V:"9"},r=0,i=[6,7,9,10,12,13,14];r<i.length;r++){var o=i[r];e[o]in n&&e.splice(o,1,n[e[o]])}var a={A:"01",B:"02",C:"03",D:"04",E:"05",H:"06",L:"07",M:"08",P:"09",R:"10",S:"11",T:"12"}[e[8]],l=parseInt(e[9]+e[10],10);l>40&&(l-=40),l<10&&(l="0".concat(l));var c="".concat(e[6]).concat(e[7],"/").concat(a,"/").concat(l);if(!(0,s.default)(c,"YY/MM/DD"))return!1;for(var u=0,d=1;d<e.length-1;d+=2){var f=parseInt(e[d],10);isNaN(f)&&(f=e[d].charCodeAt(0)-65),u+=f}for(var p={A:1,B:0,C:5,D:7,E:9,F:13,G:15,H:17,I:19,J:21,K:2,L:4,M:18,N:20,O:11,P:3,Q:6,R:8,S:12,T:14,U:16,V:10,W:22,X:25,Y:24,Z:23,0:1,1:0},g=0;g<e.length-1;g+=2){var m=0;if(e[g]in p)m=p[e[g]];else{var y=parseInt(e[g],10);m=2*y+1,y>4&&(m+=2)}u+=m}return String.fromCharCode(65+u%26)===e[15]},"lv-LV":function(t){var e=(t=t.replace(/\W/,"")).slice(0,2);if("32"!==e){if("00"!==t.slice(2,4)){var n=t.slice(4,6);switch(t[6]){case"0":n="18".concat(n);break;case"1":n="19".concat(n);break;default:n="20".concat(n)}var r="".concat(n,"/").concat(t.slice(2,4),"/").concat(e);if(!(0,s.default)(r,"YYYY/MM/DD"))return!1}for(var i=1101,o=[1,6,3,7,9,10,5,8,4,2],a=0;a<t.length-1;a++)i-=parseInt(t[a],10)*o[a];return parseInt(t[10],10)===i%11}return!0},"mt-MT":function(t){if(9!==t.length){for(var e=t.toUpperCase().split("");e.length<8;)e.unshift(0);switch(t[7]){case"A":case"P":if(0===parseInt(e[6],10))return!1;break;default:var n=parseInt(e.join("").slice(0,5),10);if(n>32e3)return!1;if(n===parseInt(e.join("").slice(5,7),10))return!1}}return!0},"nl-NL":function(t){return o.reverseMultiplyAndSum(t.split("").slice(0,8).map(function(t){return parseInt(t,10)}),9)%11===parseInt(t[8],10)},"pl-PL":function(t){if(10===t.length){for(var e=[6,5,7,2,3,4,5,6,7],n=0,r=0;r<e.length;r++)n+=parseInt(t[r],10)*e[r];return 10!=(n%=11)&&n===parseInt(t[9],10)}var i=t.slice(0,2),o=parseInt(t.slice(2,4),10);o>80?(i="18".concat(i),o-=80):o>60?(i="22".concat(i),o-=60):o>40?(i="21".concat(i),o-=40):o>20?(i="20".concat(i),o-=20):i="19".concat(i),o<10&&(o="0".concat(o));var a="".concat(i,"/").concat(o,"/").concat(t.slice(4,6));if(!(0,s.default)(a,"YYYY/MM/DD"))return!1;for(var l=0,c=1,u=0;u<t.length-1;u++)l+=parseInt(t[u],10)*c%10,(c+=2)>10?c=1:5===c&&(c+=2);return(l=10-l%10)===parseInt(t[10],10)},"pt-PT":function(t){var e=11-o.reverseMultiplyAndSum(t.split("").slice(0,8).map(function(t){return parseInt(t,10)}),9)%11;return e>9?0===parseInt(t[8],10):e===parseInt(t[8],10)},"ro-RO":function(t){if("9000"!==t.slice(0,4)){var e=t.slice(1,3);switch(t[0]){case"1":case"2":e="19".concat(e);break;case"3":case"4":e="18".concat(e);break;case"5":case"6":e="20".concat(e)}var n="".concat(e,"/").concat(t.slice(3,5),"/").concat(t.slice(5,7));if(8===n.length){if(!(0,s.default)(n,"YY/MM/DD"))return!1}else if(!(0,s.default)(n,"YYYY/MM/DD"))return!1;for(var r=t.split("").map(function(t){return parseInt(t,10)}),i=[2,7,9,1,4,6,3,5,8,2,7,9],o=0,a=0;a<i.length;a++)o+=r[a]*i[a];return o%11==10?1===r[12]:r[12]===o%11}return!0},"sk-SK":function(t){if(9===t.length){if("000"===(t=t.replace(/\W/,"")).slice(6))return!1;var e=parseInt(t.slice(0,2),10);if(e>53)return!1;e=e<10?"190".concat(e):"19".concat(e);var n=parseInt(t.slice(2,4),10);n>50&&(n-=50),n<10&&(n="0".concat(n));var r="".concat(e,"/").concat(n,"/").concat(t.slice(4,6));if(!(0,s.default)(r,"YYYY/MM/DD"))return!1}return!0},"sl-SI":function(t){var e=11-o.reverseMultiplyAndSum(t.split("").slice(0,7).map(function(t){return parseInt(t,10)}),8)%11;return 10===e?0===parseInt(t[7],10):e===parseInt(t[7],10)},"sv-SE":function(t){var e=t.slice(0);t.length>11&&(e=e.slice(2));var n="",r=e.slice(2,4),i=parseInt(e.slice(4,6),10);if(t.length>11)n=t.slice(0,4);else if(n=t.slice(0,2),11===t.length&&i<60){var a=(new Date).getFullYear().toString(),l=parseInt(a.slice(0,2),10);if(a=parseInt(a,10),"-"===t[6])n=parseInt("".concat(l).concat(n),10)>a?"".concat(l-1).concat(n):"".concat(l).concat(n);else if(n="".concat(l-1).concat(n),a-parseInt(n,10)<100)return!1}i>60&&(i-=60),i<10&&(i="0".concat(i));var c="".concat(n,"/").concat(r,"/").concat(i);if(8===c.length){if(!(0,s.default)(c,"YY/MM/DD"))return!1}else if(!(0,s.default)(c,"YYYY/MM/DD"))return!1;return o.luhnCheck(t.replace(/\W/,""))}};f["lb-LU"]=f["fr-LU"],f["lt-LT"]=f["et-EE"],f["nl-BE"]=f["fr-BE"];var p=/[-\\\/!@#$%\^&\*\(\)\+\=\[\]]+/g,g={"de-AT":p,"de-DE":/[\/\\]/g,"fr-BE":p};g["nl-BE"]=g["fr-BE"],t.exports=e.default,t.exports.default=e.default},53055:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,r.default)(t),!t||/[\s<>]/.test(t))return!1;if(0===t.indexOf("mailto:"))return!1;if((e=(0,s.default)(e,l)).validate_length&&t.length>=2083)return!1;var n,a,h,d,f,p,g,m;if(g=t.split("#"),t=g.shift(),g=t.split("?"),t=g.shift(),(g=t.split("://")).length>1){if(n=g.shift().toLowerCase(),e.require_valid_protocol&&-1===e.protocols.indexOf(n))return!1}else{if(e.require_protocol)return!1;if("//"===t.substr(0,2)){if(!e.allow_protocol_relative_urls)return!1;g[0]=t.substr(2)}}if(""===(t=g.join("://")))return!1;if(g=t.split("/"),""===(t=g.shift())&&!e.require_host)return!0;if((g=t.split("@")).length>1){if(e.disallow_auth)return!1;if(-1===(a=g.shift()).indexOf(":")||a.indexOf(":")>=0&&a.split(":").length>2)return!1}p=null,m=null;var y=(d=g.join("@")).match(c);if(y?(h="",m=y[1],p=y[2]||null):(h=(g=d.split(":")).shift(),g.length&&(p=g.join(":"))),null!==p){if(f=parseInt(p,10),!/^[0-9]+$/.test(p)||f<=0||f>65535)return!1}else if(e.require_port)return!1;return!(!((0,o.default)(h)||(0,i.default)(h,e)||m&&(0,o.default)(m,6))||(h=h||m,e.host_whitelist&&!u(h,e.host_whitelist)||e.host_blacklist&&u(h,e.host_blacklist)))};var r=a(n(27717)),i=a(n(6982)),o=a(n(92710)),s=a(n(3957));function a(t){return t&&t.__esModule?t:{default:t}}var l={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,validate_length:!0},c=/^\[([^\]]+)\](?::([0-9]+))?$/;function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(t===r||"[object RegExp]"===Object.prototype.toString.call(r)&&r.test(t))return!0}return!1}t.exports=e.default,t.exports.default=e.default},20994:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";(0,i.default)(t);var n=o[e];return n&&n.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};t.exports=e.default,t.exports.default=e.default},30342:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),t===t.toUpperCase()};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},20056:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if((0,i.default)(t),(0,i.default)(e),e in o)return o[e].test(t);throw new Error("Invalid country code: '".concat(e,"'"))},e.vatMatchers=void 0;var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o={GB:/^GB((\d{3} \d{4} ([0-8][0-9]|9[0-6]))|(\d{9} \d{3})|(((GD[0-4])|(HA[5-9]))[0-9]{2}))$/};e.vatMatchers=o},2634:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),o.fullWidth.test(t)&&s.halfWidth.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r},o=n(19282),s=n(34637);t.exports=e.default,t.exports.default=e.default},81754:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,i.default)(t);for(var n=t.length-1;n>=0;n--)if(-1===e.indexOf(t[n]))return!1;return!0};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},12281:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,i.default)(t);var n=e?new RegExp("^[".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+"),"g"):/^\s+/g;return t.replace(n,"")};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},64602:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){return(0,i.default)(t),"[object RegExp]"!==Object.prototype.toString.call(e)&&(e=new RegExp(e,n)),e.test(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},18132:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e=(0,i.default)(e,o);var n=t.split("@"),r=n.pop(),h=[n.join("@"),r];if(h[1]=h[1].toLowerCase(),"gmail.com"===h[1]||"googlemail.com"===h[1]){if(e.gmail_remove_subaddress&&(h[0]=h[0].split("+")[0]),e.gmail_remove_dots&&(h[0]=h[0].replace(/\.+/g,u)),!h[0].length)return!1;(e.all_lowercase||e.gmail_lowercase)&&(h[0]=h[0].toLowerCase()),h[1]=e.gmail_convert_googlemaildotcom?"gmail.com":h[1]}else if(s.indexOf(h[1])>=0){if(e.icloud_remove_subaddress&&(h[0]=h[0].split("+")[0]),!h[0].length)return!1;(e.all_lowercase||e.icloud_lowercase)&&(h[0]=h[0].toLowerCase())}else if(a.indexOf(h[1])>=0){if(e.outlookdotcom_remove_subaddress&&(h[0]=h[0].split("+")[0]),!h[0].length)return!1;(e.all_lowercase||e.outlookdotcom_lowercase)&&(h[0]=h[0].toLowerCase())}else if(l.indexOf(h[1])>=0){if(e.yahoo_remove_subaddress){var d=h[0].split("-");h[0]=d.length>1?d.slice(0,-1).join("-"):d[0]}if(!h[0].length)return!1;(e.all_lowercase||e.yahoo_lowercase)&&(h[0]=h[0].toLowerCase())}else c.indexOf(h[1])>=0?((e.all_lowercase||e.yandex_lowercase)&&(h[0]=h[0].toLowerCase()),h[1]="yandex.ru"):e.all_lowercase&&(h[0]=h[0].toLowerCase());return h.join("@")};var r,i=(r=n(3957))&&r.__esModule?r:{default:r},o={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},s=["icloud.com","me.com"],a=["hotmail.at","hotmail.be","hotmail.ca","hotmail.cl","hotmail.co.il","hotmail.co.nz","hotmail.co.th","hotmail.co.uk","hotmail.com","hotmail.com.ar","hotmail.com.au","hotmail.com.br","hotmail.com.gr","hotmail.com.mx","hotmail.com.pe","hotmail.com.tr","hotmail.com.vn","hotmail.cz","hotmail.de","hotmail.dk","hotmail.es","hotmail.fr","hotmail.hu","hotmail.id","hotmail.ie","hotmail.in","hotmail.it","hotmail.jp","hotmail.kr","hotmail.lv","hotmail.my","hotmail.ph","hotmail.pt","hotmail.sa","hotmail.sg","hotmail.sk","live.be","live.co.uk","live.com","live.com.ar","live.com.mx","live.de","live.es","live.eu","live.fr","live.it","live.nl","msn.com","outlook.at","outlook.be","outlook.cl","outlook.co.il","outlook.co.nz","outlook.co.th","outlook.com","outlook.com.ar","outlook.com.au","outlook.com.br","outlook.com.gr","outlook.com.pe","outlook.com.tr","outlook.com.vn","outlook.cz","outlook.de","outlook.dk","outlook.es","outlook.fr","outlook.hu","outlook.id","outlook.ie","outlook.in","outlook.it","outlook.jp","outlook.kr","outlook.lv","outlook.my","outlook.ph","outlook.pt","outlook.sa","outlook.sg","outlook.sk","passport.com"],l=["rocketmail.com","yahoo.ca","yahoo.co.uk","yahoo.com","yahoo.de","yahoo.fr","yahoo.in","yahoo.it","ymail.com"],c=["yandex.ru","yandex.ua","yandex.kz","yandex.com","yandex.by","ya.ru"];function u(t){return t.length>1?t:""}t.exports=e.default,t.exports.default=e.default},33681:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){(0,i.default)(t);var n=e?new RegExp("[".concat(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"]+$"),"g"):/\s+$/g;return t.replace(n,"")};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},64247:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,r.default)(t),(0,i.default)(t,e?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F")};var r=o(n(27717)),i=o(n(92280));function o(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default,t.exports.default=e.default},15623:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(t),e?"1"===t||/^true$/i.test(t):"0"!==t&&!/^false$/i.test(t)&&""!==t};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},14688:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),t=Date.parse(t),isNaN(t)?null:new Date(t)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},25112:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t)?parseFloat(t):NaN};var r,i=(r=n(78233))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},8918:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(t),parseInt(t,e||10)};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},3668:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,r.default)((0,i.default)(t,e),e)};var r=o(n(33681)),i=o(n(12281));function o(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default,t.exports.default=e.default},15364:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,i.default)(t),t.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`")};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},4670:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iso7064Check=function(t){for(var e=10,n=0;n<t.length-1;n++)e=(parseInt(t[n],10)+e)%10==0?9:(parseInt(t[n],10)+e)%10*2%11;return(e=1===e?0:11-e)===parseInt(t[10],10)},e.luhnCheck=function(t){for(var e=0,n=!1,r=t.length-1;r>=0;r--){if(n){var i=2*parseInt(t[r],10);e+=i>9?i.toString().split("").map(function(t){return parseInt(t,10)}).reduce(function(t,e){return t+e},0):i}else e+=parseInt(t[r],10);n=!n}return e%10==0},e.reverseMultiplyAndSum=function(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*(e-r);return n},e.verhoeffCheck=function(t){for(var e=[[0,1,2,3,4,5,6,7,8,9],[1,2,3,4,0,6,7,8,9,5],[2,3,4,0,1,7,8,9,5,6],[3,4,0,1,2,8,9,5,6,7],[4,0,1,2,3,9,5,6,7,8],[5,9,8,7,6,0,4,3,2,1],[6,5,9,8,7,1,0,4,3,2],[7,6,5,9,8,2,1,0,4,3],[8,7,6,5,9,3,2,1,0,4],[9,8,7,6,5,4,3,2,1,0]],n=[[0,1,2,3,4,5,6,7,8,9],[1,5,7,6,2,8,3,0,9,4],[5,8,0,3,7,9,6,1,4,2],[8,9,1,6,0,4,3,5,2,7],[9,4,5,3,1,2,6,8,7,0],[4,2,8,6,5,7,3,9,0,1],[2,7,9,3,8,0,6,4,1,5],[7,0,4,6,9,1,3,2,5,8]],r=t.split("").reverse().join(""),i=0,o=0;o<r.length;o++)i=e[i][n[o%8][parseInt(r[o],10)]];return 0===i}},27717:(t,e)=>{"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(!("string"==typeof t||t instanceof String)){var e=n(t);throw null===t?e="null":"object"===e&&(e=t.constructor.name),new TypeError("Expected a string but received a ".concat(e))}},t.exports=e.default,t.exports.default=e.default},59700:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t,e){return t.some(function(t){return e===t})},t.exports=e.default,t.exports.default=e.default},3957:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t},t.exports=e.default,t.exports.default=e.default},12381:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.join("");return new RegExp(n,e)},t.exports=e.default,t.exports.default=e.default},19173:(t,e)=>{"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return"object"===n(t)&&null!==t?t="function"==typeof t.toString?t.toString():"[object Object]":(null==t||isNaN(t)&&!t.length)&&(t=""),String(t)},t.exports=e.default,t.exports.default=e.default},66189:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return(0,i.default)(t),t.replace(new RegExp("[^".concat(e,"]+"),"g"),"")};var r,i=(r=n(27717))&&r.__esModule?r:{default:r};t.exports=e.default,t.exports.default=e.default},4237:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||t,s),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=this._events[n?n+t:t];if(!e)return[];if(e.fn)return[e.fn];for(var r=0,i=e.length,o=new Array(i);r<i;r++)o[r]=e[r].fn;return o},a.prototype.listenerCount=function(t){var e=this._events[n?n+t:t];return e?e.fn?1:e.length:0},a.prototype.emit=function(t,e,r,i,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var l,c,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,i),!0;case 5:return u.fn.call(u.context,e,r,i,o),!0;case 6:return u.fn.call(u.context,e,r,i,o,s),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,r);break;case 4:u[c].fn.call(u[c].context,e,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==e||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?this._events[e=n?n+t:t]&&s(this,e):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},41708:(t,e,n)=>{var r=n(22241),i={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};function o(){}function s(){var t=new Set,e=new Set,n=0;return{next:r,cancel:r,clearAll:function(){t.clear(),e.clear(),cancelAnimationFrame(n),n=0}};function r(t){e.add(t),n||(n=requestAnimationFrame(i))}function i(){n=0;var r=e;e=t,(t=r).forEach(function(t){t()}),t.clear()}}t.exports=function(t,e,n){var r=Object.create(null),s=Object.create(null),a="function"==typeof(n=n||{}).easing?n.easing:i[n.easing];a||(n.easing&&console.warn("Unknown easing function in amator: "+n.easing),a=i.ease);var l="function"==typeof n.step?n.step:o,c="function"==typeof n.done?n.done:o,u=function(t){if(!t)return"undefined"!=typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(t){return setTimeout(t,1e3/60)},cancel:function(t){return clearTimeout(t)}};if("function"!=typeof t.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof t.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return t}(n.scheduler),h=Object.keys(e);h.forEach(function(n){r[n]=t[n],s[n]=e[n]-t[n]});var d,f=Math.max(1,.06*("number"==typeof n.duration?n.duration:400)),p=0;return d=u.next(function e(){var n=a(p/f);p+=1,function(e){h.forEach(function(n){t[n]=s[n]*e+r[n]})}(n),p<=f?(d=u.next(e),l(t)):(d=0,setTimeout(function(){c(t)},0))}),{cancel:function(){u.cancel(d),d=0}}},t.exports.makeAggregateRaf=s,t.exports.sharedScheduler=s()},22241:t=>{var e=.1,n="function"==typeof Float32Array;function r(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function o(t){return 3*t}function s(t,e,n){return((r(e,n)*t+i(e,n))*t+o(e))*t}function a(t,e,n){return 3*r(e,n)*t*t+2*i(e,n)*t+o(e)}function l(t){return t}t.exports=function(t,r,i,o){if(!(0<=t&&t<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===r&&i===o)return l;for(var c=n?new Float32Array(11):new Array(11),u=0;u<11;++u)c[u]=s(u*e,t,i);return function(n){return 0===n?0:1===n?1:s(function(n){for(var r=0,o=1;10!==o&&c[o]<=n;++o)r+=e;--o;var l=r+(n-c[o])/(c[o+1]-c[o])*e,u=a(l,t,i);return u>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var o=a(e,n,r);if(0===o)return e;e-=(s(e,n,r)-t)/o}return e}(n,l,t,i):0===u?l:function(t,e,n,r,i){var o,a,l=0;do{(o=s(a=e+(n-e)/2,r,i)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++l<10);return a}(n,r,r+e,t,i)}(n),r,o)}}},3875:(t,e,n)=>{"use strict";var r=n(2523),i=n(55612),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},e.INSPECT_MAX_BYTES=50;var s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return c(t,e,n)}function c(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|g(t,e),r=a(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(U(t,Uint8Array)){var e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(U(t,ArrayBuffer)||t&&U(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(U(t,SharedArrayBuffer)||t&&U(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return l.from(r,e,n);var i=function(t){if(l.isBuffer(t)){var e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||V(t.length)?a(0):d(t):"Buffer"===t.type&&Array.isArray(t.data)?d(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return u(t),a(t<0?0:0|p(t))}function d(t){for(var e=t.length<0?0:0|p(t.length),n=a(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,l.prototype),r}function p(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function g(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||U(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(i)return r?-1:B(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return E(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return P(this,e,n);case"base64":return T(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function v(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),V(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){var o,s=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var u=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(c(t,o+d)!==c(e,d)){h=!1;break}if(h)return o}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(V(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return $(B(e,t.length-n),t,n,r)}function x(t,e,n,r){return $(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function C(t,e,n,r){return $(j(e),t,n,r)}function S(t,e,n,r){return $(function(t,e){for(var n,r,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(n=t.charCodeAt(o))>>8,i.push(n%256),i.push(r);return i}(e,t.length-n),t,n,r)}function T(t,e,n){return r.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,l,c=t[i],u=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:s=t[i+2],128==(192&(o=t[i+1]))&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=t[i+2],a=t[i+3],128==(192&(o=t[i+1]))&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(r.push((u-=65536)>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}e.kMaxLength=s,(l.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(n){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,n){return c(t,e,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,n){return function(t,e,n){return u(t),t<=0?a(t):void 0!==e?"string"==typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},l.allocUnsafe=function(t){return h(t)},l.allocUnsafeSlow=function(t){return h(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(U(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),U(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(U(o,Uint8Array))i+o.length>r.length?l.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},l.prototype.toLocaleString=l.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?E(this,0,t):m.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(t,e,n,r,i){if(U(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(r,i),u=t.slice(e,n),h=0;h<a;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return v(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return v(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return x(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function k(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=Z[t[o]];return i}function M(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,o){return e=+e,n>>>=0,o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,o){return e=+e,n>>>=0,o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return t>>>=0,e||I(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||I(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||I(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||I(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||R(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=l.isBuffer(t)?t:l.from(t,r),a=s.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var F=/[^+/0-9A-Za-z-_]/g;function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function U(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function V(t){return t!=t}var Z=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}()},20218:(t,e,n)=>{t.exports={graphlib:n(77759),layout:n(98090),debug:n(71544),util:{time:n(71824).time,notime:n(71824).notime},version:n(56854)}},66467:(t,e,n)=>{"use strict";var r=n(32712),i=n(43199);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),function o(s){r.has(i,s)||(i[s]=!0,n[s]=!0,r.forEach(t.outEdges(s),function(t){r.has(n,t.w)?e.push(t):o(t.w)}),delete n[s])}),e}(t);r.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})},undo:function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}}},89752:(t,e,n)=>{var r=n(32712),i=n(71824);function o(t,e,n,r,o,s){var a=o[e][s-1],l=i.addDummyNode(t,"border",{width:0,height:0,rank:s,borderType:e},n);o[e][s]=l,t.setParent(l,r),a&&t.setEdge(a,l,{weight:1})}t.exports=function(t){r.forEach(t.children(),function e(n){var i=t.children(n),s=t.node(n);if(i.length&&r.forEach(i,e),r.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,l=s.maxRank+1;a<l;++a)o(t,"borderLeft","_bl",n,s,a),o(t,"borderRight","_br",n,s,a)}})}},16232:(t,e,n)=>{"use strict";var r=n(32712);function i(t){r.forEach(t.nodes(),function(e){o(t.node(e))}),r.forEach(t.edges(),function(e){o(t.edge(e))})}function o(t){var e=t.width;t.width=t.height,t.height=e}function s(t){t.y=-t.y}function a(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){r.forEach(t.nodes(),function(e){s(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,s),r.has(n,"y")&&s(n)})}(t),"lr"!==e&&"rl"!==e||(function(t){r.forEach(t.nodes(),function(e){a(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.forEach(n.points,a),r.has(n,"x")&&a(n)})}(t),i(t))}}},48190:t=>{function e(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function r(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=e,e.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},e.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},e.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,r)),n=n._prev;return"["+t.join(", ")+"]"}},71544:(t,e,n)=>{var r=n(32712),i=n(71824),o=n(77759).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new o({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){n.setNode("layer"+e,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}}},77759:(t,e,n)=>{var r;try{r=n(30)}catch(i){}r||(r=window.graphlib),t.exports=r},43199:(t,e,n)=>{var r=n(32712),i=n(77759).Graph,o=n(48190);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new i,s=0,a=0;r.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),r.forEach(t.edges(),function(t){var r=n.edge(t.v,t.w)||0,i=e(t);n.setEdge(t.v,t.w,r+i),a=Math.max(a,n.node(t.v).out+=i),s=Math.max(s,n.node(t.w).in+=i)});var c=r.range(a+s+3).map(function(){return new o}),u=s+1;return r.forEach(n.nodes(),function(t){l(c,u,n.node(t))}),{graph:n,buckets:c,zeroIdx:u}}(t,e||s),c=function(t,e,n){for(var r,i=[],o=e[e.length-1],s=e[0];t.nodeCount();){for(;r=s.dequeue();)a(t,e,n,r);for(;r=o.dequeue();)a(t,e,n,r);if(t.nodeCount())for(var l=e.length-2;l>0;--l)if(r=e[l].dequeue()){i=i.concat(a(t,e,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(c,function(e){return t.outEdges(e.v,e.w)}),!0)};var s=r.constant(1);function a(t,e,n,i,o){var s=o?[]:void 0;return r.forEach(t.inEdges(i.v),function(r){var i=t.edge(r),a=t.node(r.v);o&&s.push({v:r.v,w:r.w}),a.out-=i,l(e,n,a)}),r.forEach(t.outEdges(i.v),function(r){var i=t.edge(r),o=t.node(r.w);o.in-=i,l(e,n,o)}),t.removeNode(i.v),s}function l(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}},98090:(t,e,n)=>{"use strict";var r=n(32712),i=n(66467),o=n(68284),s=n(42445),a=n(71824).normalizeRanks,l=n(62375),c=n(71824).removeEmptyRanks,u=n(25970),h=n(89752),d=n(16232),f=n(91989),p=n(46685),g=n(71824),m=n(77759).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?g.time:g.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new m({multigraph:!0,compound:!0}),n=E(t.graph());return e.setGraph(r.merge({},v,T(n,y),r.pick(n,b))),r.forEach(t.nodes(),function(n){var i=E(t.node(n));e.setNode(n,r.defaults(T(i,_),w)),e.setParent(n,t.parent(n))}),r.forEach(t.edges(),function(n){var i=E(t.edge(n));e.setEdge(n,r.merge({},C,T(i,x),r.pick(i,S)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,r.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){r.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){i.run(t)}),e("    nestingGraph.run",function(){u.run(t)}),e("    rank",function(){s(g.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i=t.node(e.w);g.addDummyNode(t,"edge-proxy",{rank:(i.rank-r.rank)/2+r.rank,e:e},"_ep")}})}(t)}),e("    removeEmptyRanks",function(){c(t)}),e("    nestingGraph.cleanup",function(){u.cleanup(t)}),e("    normalizeRanks",function(){a(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;r.forEach(t.nodes(),function(n){var i=t.node(n);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=r.max(e,i.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){o.run(t)}),e("    parentDummyChains",function(){l(t)}),e("    addBorderSegments",function(){h(t)}),e("    order",function(){f(t)}),e("    insertSelfEdges",function(){!function(t){var e=g.buildLayerMatrix(t);r.forEach(e,function(e){var n=0;r.forEach(e,function(e,i){var o=t.node(e);o.order=i+n,r.forEach(o.selfEdges,function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++n,e:e.e,label:e.label},"_se")}),delete o.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){d.adjust(t)}),e("    position",function(){p(t)}),e("    positionSelfEdges",function(){!function(t){r.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,s=n.x-i,a=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*s/3,y:o-a},{x:i+5*s/6,y:o-a},{x:i+s,y:o},{x:i+5*s/6,y:o+a},{x:i+2*s/3,y:o+a}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){r.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),i=t.node(n.borderTop),o=t.node(n.borderBottom),s=t.node(r.last(n.borderLeft)),a=t.node(r.last(n.borderRight));n.width=Math.abs(a.x-s.x),n.height=Math.abs(o.y-i.y),n.x=s.x+n.width/2,n.y=i.y+n.height/2}}),r.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){o.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){d.undo(t)}),e("    translateGraph",function(){!function(t){var e=Number.POSITIVE_INFINITY,n=0,i=Number.POSITIVE_INFINITY,o=0,s=t.graph(),a=s.marginx||0,l=s.marginy||0;function c(t){var r=t.x,s=t.y,a=t.width,l=t.height;e=Math.min(e,r-a/2),n=Math.max(n,r+a/2),i=Math.min(i,s-l/2),o=Math.max(o,s+l/2)}r.forEach(t.nodes(),function(e){c(t.node(e))}),r.forEach(t.edges(),function(e){var n=t.edge(e);r.has(n,"x")&&c(n)}),e-=a,i-=l,r.forEach(t.nodes(),function(n){var r=t.node(n);r.x-=e,r.y-=i}),r.forEach(t.edges(),function(n){var o=t.edge(n);r.forEach(o.points,function(t){t.x-=e,t.y-=i}),r.has(o,"x")&&(o.x-=e),r.has(o,"y")&&(o.y-=i)}),s.width=n-e+a,s.height=o-i+l}(t)}),e("    assignNodeIntersects",function(){!function(t){r.forEach(t.edges(),function(e){var n,r,i=t.edge(e),o=t.node(e.v),s=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=s,r=o),i.points.unshift(g.intersectRect(o,n)),i.points.push(g.intersectRect(s,r))})}(t)}),e("    reversePoints",function(){!function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){i.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){r.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),r.forEach(t.edges(),function(n){var i=t.edge(n),o=e.edge(n);i.points=o.points,r.has(o,"x")&&(i.x=o.x,i.y=o.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var y=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],_=["width","height"],w={width:0,height:0},x=["minlen","weight","width","height","labeloffset"],C={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},S=["labelpos"];function T(t,e){return r.mapValues(r.pick(t,e),Number)}function E(t){var e={};return r.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}},32712:(t,e,n)=>{var r;try{r={cloneDeep:n(37524),constant:n(45654),defaults:n(36726),each:n(33718),filter:n(33834),find:n(98990),flatten:n(94694),forEach:n(64733),forIn:n(88577),has:n(32335),isUndefined:n(29569),last:n(27842),map:n(89718),mapValues:n(10182),max:n(31334),merge:n(3912),min:n(41518),minBy:n(5353),now:n(30765),pick:n(31133),range:n(21221),reduce:n(86101),sortBy:n(70280),uniqueId:n(65927),values:n(23348),zipObject:n(31507)}}catch(i){}r||(r=window._),t.exports=r},25970:(t,e,n)=>{var r=n(32712),i=n(71824);function o(t,e,n,s,a,l,c){var u=t.children(c);if(u.length){var h=i.addBorderNode(t,"_bt"),d=i.addBorderNode(t,"_bb"),f=t.node(c);t.setParent(h,c),f.borderTop=h,t.setParent(d,c),f.borderBottom=d,r.forEach(u,function(r){o(t,e,n,s,a,l,r);var i=t.node(r),u=i.borderTop?i.borderTop:r,f=i.borderBottom?i.borderBottom:r,p=i.borderTop?s:2*s,g=u!==f?1:a-l[c]+1;t.setEdge(h,u,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(f,d,{weight:p,minlen:g,nestingEdge:!0})}),t.parent(c)||t.setEdge(e,h,{weight:0,minlen:a+l[c]})}else c!==e&&t.setEdge(e,c,{weight:0,minlen:n})}t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),n=function(t){var e={};function n(i,o){var s=t.children(i);s&&s.length&&r.forEach(s,function(t){n(t,o+1)}),e[i]=o}return r.forEach(t.children(),function(t){n(t,1)}),e}(t),s=r.max(r.values(n))-1,a=2*s+1;t.graph().nestingRoot=e,r.forEach(t.edges(),function(e){t.edge(e).minlen*=a});var l=function(t){return r.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;r.forEach(t.children(),function(r){o(t,e,a,l,s,n,r)}),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,r.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}}},68284:(t,e,n)=>{"use strict";var r=n(32712),i=n(71824);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){!function(t,e){var n,r,o,s=e.v,a=t.node(s).rank,l=e.w,c=t.node(l).rank,u=e.name,h=t.edge(e),d=h.labelRank;if(c!==a+1){for(t.removeEdge(e),o=0,++a;a<c;++o,++a)h.points=[],n=i.addDummyNode(t,"edge",r={width:0,height:0,edgeLabel:h,edgeObj:e,rank:a},"_d"),a===d&&(r.width=h.width,r.height=h.height,r.dummy="edge-label",r.labelpos=h.labelpos),t.setEdge(s,n,{weight:h.weight},u),0===o&&t.graph().dummyChains.push(n),s=n;t.setEdge(s,l,{weight:h.weight},u)}}(t,e)})},undo:function(t){r.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),r=t.node(e=n)})}}},16600:(t,e,n)=>{var r=n(32712);t.exports=function(t,e,n){var i,o={};r.forEach(n,function(n){for(var r,s,a=t.parent(n);a;){if((r=t.parent(a))?(s=o[r],o[r]=a):(s=i,i=a),s&&s!==a)return void e.setEdge(s,a);a=r}})}},28372:(t,e,n)=>{var r=n(32712);t.exports=function(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}},61273:(t,e,n)=>{var r=n(32712),i=n(77759).Graph;t.exports=function(t,e,n){var o=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),s=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(i){var a=t.node(i),l=t.parent(i);(a.rank===e||a.minRank<=e&&e<=a.maxRank)&&(s.setNode(i),s.setParent(i,l||o),r.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,o=s.edge(n,i),a=r.isUndefined(o)?0:o.weight;s.setEdge(n,i,{weight:t.edge(e).weight+a})}),r.has(a,"minRank")&&s.setNode(i,{borderLeft:a.borderLeft[e],borderRight:a.borderRight[e]}))}),s}},87021:(t,e,n)=>{"use strict";var r=n(32712);function i(t,e,n){for(var i=r.zipObject(n,r.map(n,function(t,e){return e})),o=r.flatten(r.map(e,function(e){return r.sortBy(r.map(t.outEdges(e),function(e){return{pos:i[e.w],weight:t.edge(e).weight}}),"pos")}),!0),s=1;s<n.length;)s<<=1;var a=2*s-1;s-=1;var l=r.map(new Array(a),function(){return 0}),c=0;return r.forEach(o.forEach(function(t){var e=t.pos+s;l[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=l[e+1]),l[e=e-1>>1]+=t.weight;c+=t.weight*n})),c}t.exports=function(t,e){for(var n=0,r=1;r<e.length;++r)n+=i(t,e[r-1],e[r]);return n}},91989:(t,e,n)=>{"use strict";var r=n(32712),i=n(4189),o=n(87021),s=n(19939),a=n(61273),l=n(16600),c=n(77759).Graph,u=n(71824);function h(t,e,n){return r.map(e,function(e){return a(t,e,n)})}function d(t,e){var n=new c;r.forEach(t,function(t){var i=t.graph().root,o=s(t,i,n,e);r.forEach(o.vs,function(e,n){t.node(e).order=n}),l(t,n,o.vs)})}function f(t,e){r.forEach(e,function(e){r.forEach(e,function(e,n){t.node(e).order=n})})}t.exports=function(t){var e=u.maxRank(t),n=h(t,r.range(1,e+1),"inEdges"),s=h(t,r.range(e-1,-1,-1),"outEdges"),a=i(t);f(t,a);for(var l,c=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){d(p%2?n:s,p%4>=2),a=u.buildLayerMatrix(t);var m=o(t,a);m<c&&(g=0,l=r.cloneDeep(a),c=m)}f(t,l)}},4189:(t,e,n)=>{"use strict";var r=n(32712);t.exports=function(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),i=r.max(r.map(n,function(e){return t.node(e).rank})),o=r.map(r.range(i+1),function(){return[]}),s=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(s,function n(i){if(!r.has(e,i)){e[i]=!0;var s=t.node(i);o[s.rank].push(i),r.forEach(t.successors(i),n)}}),o}},90965:(t,e,n)=>{"use strict";var r=n(32712);t.exports=function(t,e){var n={};return r.forEach(t,function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))}),function(t){var e=[];function n(t){return function(e){var n,i,o,s;e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&(o=0,s=0,(n=t).weight&&(o+=n.barycenter*n.weight,s+=n.weight),(i=e).weight&&(o+=i.barycenter*i.weight,s+=i.weight),n.vs=i.vs.concat(n.vs),n.barycenter=o/s,n.weight=s,n.i=Math.min(i.i,n.i),i.merged=!0)}}function i(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(;t.length;){var o=t.pop();e.push(o),r.forEach(o.in.reverse(),n(o)),r.forEach(o.out,i(o))}return r.map(r.filter(e,function(t){return!t.merged}),function(t){return r.pick(t,["vs","i","barycenter","weight"])})}(r.filter(n,function(t){return!t.indegree}))}},19939:(t,e,n)=>{var r=n(32712),i=n(28372),o=n(90965),s=n(95291);t.exports=function t(e,n,a,l){var c=e.children(n),u=e.node(n),h=u?u.borderLeft:void 0,d=u?u.borderRight:void 0,f={};h&&(c=r.filter(c,function(t){return t!==h&&t!==d}));var p=i(e,c);r.forEach(p,function(n){if(e.children(n.v).length){var i=t(e,n.v,a,l);f[n.v]=i,r.has(i,"barycenter")&&(s=i,r.isUndefined((o=n).barycenter)?(o.barycenter=s.barycenter,o.weight=s.weight):(o.barycenter=(o.barycenter*o.weight+s.barycenter*s.weight)/(o.weight+s.weight),o.weight+=s.weight))}var o,s});var g=o(p,a);!function(t,e){r.forEach(t,function(t){t.vs=r.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(g,f);var m=s(g,l);if(h&&(m.vs=r.flatten([h,m.vs,d],!0),e.predecessors(h).length)){var y=e.node(e.predecessors(h)[0]),v=e.node(e.predecessors(d)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+v.order)/(m.weight+2),m.weight+=2}return m}},95291:(t,e,n)=>{var r=n(32712),i=n(71824);function o(t,e,n){for(var i;e.length&&(i=r.last(e)).i<=n;)e.pop(),t.push(i.vs),n++;return n}t.exports=function(t,e){var n,s=i.partition(t,function(t){return r.has(t,"barycenter")}),a=s.lhs,l=r.sortBy(s.rhs,function(t){return-t.i}),c=[],u=0,h=0,d=0;a.sort((n=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:n?e.i-t.i:t.i-e.i})),d=o(c,l,d),r.forEach(a,function(t){d+=t.vs.length,c.push(t.vs),u+=t.barycenter*t.weight,h+=t.weight,d=o(c,l,d)});var f={vs:r.flatten(c,!0)};return h&&(f.barycenter=u/h,f.weight=h),f}},62375:(t,e,n)=>{var r=n(32712);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),function i(o){var s=n;r.forEach(t.children(o),i),e[o]={low:s,lim:n++}}),e}(t);r.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,o=function(t,e,n,r){var i,o,s=[],a=[],l=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),s.push(i)}while(i&&(e[i].low>l||c>e[i].lim));for(o=i,i=r;(i=t.parent(i))!==o;)a.push(i);return{path:s.concat(a.reverse()),lca:o}}(t,e,i.v,i.w),s=o.path,a=o.lca,l=0,c=s[l],u=!0;n!==i.w;){if(r=t.node(n),u){for(;(c=s[l])!==a&&t.node(c).maxRank<r.rank;)l++;c===a&&(u=!1)}if(!u){for(;l<s.length-1&&t.node(c=s[l+1]).minRank<=r.rank;)l++;c=s[l]}t.setParent(n,c),n=t.successors(n)[0]}})}},1331:(t,e,n)=>{"use strict";var r=n(32712),i=n(77759).Graph,o=n(71824);function s(t,e){var n={};return r.reduce(e,function(e,i){var o=0,s=0,a=e.length,c=r.last(i);return r.forEach(i,function(e,u){var h=function(t,e){if(t.node(e).dummy)return r.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),d=h?t.node(h).order:a;(h||e===c)&&(r.forEach(i.slice(s,u+1),function(e){r.forEach(t.predecessors(e),function(r){var i=t.node(r),s=i.order;!(s<o||d<s)||i.dummy&&t.node(e).dummy||l(n,r,e)})}),s=u+1,o=d)}),i}),n}function a(t,e){var n={};function i(e,i,o,s,a){var c;r.forEach(r.range(i,o),function(i){t.node(c=e[i]).dummy&&r.forEach(t.predecessors(c),function(e){var r=t.node(e);r.dummy&&(r.order<s||r.order>a)&&l(n,e,c)})})}return r.reduce(e,function(e,n){var o,s=-1,a=0;return r.forEach(n,function(r,l){if("border"===t.node(r).dummy){var c=t.predecessors(r);c.length&&(o=t.node(c[0]).order,i(n,a,l,s,o),a=l,s=o)}i(n,a,n.length,o,e.length)}),n}),n}function l(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function c(t,e,n){if(e>n){var i=e;e=n,n=i}return r.has(t[e],n)}function u(t,e,n,i){var o={},s={},a={};return r.forEach(e,function(t){r.forEach(t,function(t,e){o[t]=t,s[t]=t,a[t]=e})}),r.forEach(e,function(t){var e=-1;r.forEach(t,function(t){var l=i(t);if(l.length)for(var u=((l=r.sortBy(l,function(t){return a[t]})).length-1)/2,h=Math.floor(u),d=Math.ceil(u);h<=d;++h){var f=l[h];s[t]===t&&e<a[f]&&!c(n,t,f)&&(s[f]=t,s[t]=o[t]=o[f],e=a[f])}})}),{root:o,align:s}}function h(t,e,n,o,s){var a={},l=function(t,e,n,o){var s=new i,a=t.graph(),l=function(t,e,n){return function(i,o,s){var a,l=i.node(o),c=i.node(s),u=0;if(u+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":a=-l.width/2;break;case"r":a=l.width/2}if(a&&(u+=n?a:-a),a=0,u+=(l.dummy?e:t)/2,u+=(c.dummy?e:t)/2,u+=c.width/2,r.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":a=c.width/2;break;case"r":a=-c.width/2}return a&&(u+=n?a:-a),a=0,u}}(a.nodesep,a.edgesep,o);return r.forEach(e,function(e){var i;r.forEach(e,function(e){var r=n[e];if(s.setNode(r),i){var o=n[i],a=s.edge(o,r);s.setEdge(o,r,Math.max(l(t,e,i),a||0))}i=e})}),s}(t,e,n,s),c=s?"borderLeft":"borderRight";function u(t,e){for(var n=l.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}return u(function(t){a[t]=l.inEdges(t).reduce(function(t,e){return Math.max(t,a[e.v]+l.edge(e))},0)},l.predecessors.bind(l)),u(function(e){var n=l.outEdges(e).reduce(function(t,e){return Math.min(t,a[e.w]-l.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(a[e]=Math.max(a[e],n))},l.successors.bind(l)),r.forEach(o,function(t){a[t]=a[n[t]]}),a}function d(t,e){return r.minBy(r.values(e),function(e){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return r.forIn(e,function(e,r){var o=function(t,e){return t.node(e).width}(t,r)/2;n=Math.max(e+o,n),i=Math.min(e-o,i)}),n-i})}function f(t,e){var n=r.values(e),i=r.min(n),o=r.max(n);r.forEach(["u","d"],function(n){r.forEach(["l","r"],function(s){var a,l=n+s,c=t[l];if(c!==e){var u=r.values(c);(a="l"===s?i-r.min(u):o-r.max(u))&&(t[l]=r.mapValues(c,function(t){return t+a}))}})})}function p(t,e){return r.mapValues(t.ul,function(n,i){if(e)return t[e.toLowerCase()][i];var o=r.sortBy(r.map(t,i));return(o[1]+o[2])/2})}t.exports={positionX:function(t){var e,n=o.buildLayerMatrix(t),i=r.merge(s(t,n),a(t,n)),l={};r.forEach(["u","d"],function(o){e="u"===o?n:r.values(n).reverse(),r.forEach(["l","r"],function(n){"r"===n&&(e=r.map(e,function(t){return r.values(t).reverse()}));var s=("u"===o?t.predecessors:t.successors).bind(t),a=u(0,e,i,s),c=h(t,e,a.root,a.align,"r"===n);"r"===n&&(c=r.mapValues(c,function(t){return-t})),l[o+n]=c})});var c=d(t,l);return f(l,c),p(l,t.graph().align)},findType1Conflicts:s,findType2Conflicts:a,addConflict:l,hasConflict:c,verticalAlignment:u,horizontalCompaction:h,alignCoordinates:f,findSmallestWidthAlignment:d,balance:p}},46685:(t,e,n)=>{"use strict";var r=n(32712),i=n(71824),o=n(1331).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,o=0;r.forEach(e,function(e){var i=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=o+i/2}),o+=i+n})})(t=i.asNonCompoundGraph(t)),r.forEach(o(t),function(e,n){t.node(n).x=e})}},25936:(t,e,n)=>{"use strict";var r=n(32712),i=n(77759).Graph,o=n(21618).slack;function s(t,e){return r.forEach(t.nodes(),function n(i){r.forEach(e.nodeEdges(i),function(r){var s=r.v,a=i===s?r.w:s;t.hasNode(a)||o(e,r)||(t.setNode(a,{}),t.setEdge(i,a,{}),n(a))})}),t.nodeCount()}function a(t,e){return r.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return o(e,n)})}function l(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}t.exports=function(t){var e,n,r=new i({directed:!1}),c=t.nodes()[0],u=t.nodeCount();for(r.setNode(c,{});s(r,t)<u;)e=a(r,t),n=r.hasNode(e.v)?o(t,e):-o(t,e),l(r,t,n);return r}},42445:(t,e,n)=>{"use strict";var r=n(21618).longestPath,i=n(25936),o=n(61844);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":a(t);break;case"tight-tree":!function(t){r(t),i(t)}(t);break;case"longest-path":s(t);break;default:a(t)}};var s=r;function a(t){o(t)}},61844:(t,e,n)=>{"use strict";var r=n(32712),i=n(25936),o=n(21618).slack,s=n(21618).longestPath,a=n(77759).alg.preorder,l=n(77759).alg.postorder,c=n(71824).simplify;function u(t){t=c(t),s(t);var e,n=i(t);for(f(n),h(n,t);e=g(n);)y(n,t,e,m(n,t,e))}function h(t,e){var n=l(t,t.nodes());n=n.slice(0,n.length-1),r.forEach(n,function(n){!function(t,e,n){var r=t.node(n);t.edge(n,r.parent).cutvalue=d(t,e,n)}(t,e,n)})}function d(t,e,n){var i=t.node(n).parent,o=!0,s=e.edge(n,i),a=0;return s||(o=!1,s=e.edge(i,n)),a=s.weight,r.forEach(e.nodeEdges(n),function(r){var s=r.v===n,l=s?r.w:r.v;if(l!==i){var c=s===o,u=e.edge(r).weight;if(a+=c?u:-u,t.hasEdge(n,l)){var h=t.edge(n,l).cutvalue;a+=c?-h:h}}}),a}function f(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,n,i,o){var s=n,a=t.node(i);return e[i]=!0,r.forEach(t.neighbors(i),function(o){r.has(e,o)||(n=p(t,e,n,o,i))}),a.low=s,a.lim=n++,o?a.parent=o:delete a.parent,n}function g(t){return r.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function m(t,e,n){var i=n.v,s=n.w;e.hasEdge(i,s)||(i=n.w,s=n.v);var a=t.node(i),l=t.node(s),c=a,u=!1;a.lim>l.lim&&(c=l,u=!0);var h=r.filter(e.edges(),function(e){return u===v(0,t.node(e.v),c)&&u!==v(0,t.node(e.w),c)});return r.minBy(h,function(t){return o(e,t)})}function y(t,e,n,i){t.removeEdge(n.v,n.w),t.setEdge(i.v,i.w,{}),f(t),h(t,e),function(t,e){var n=r.find(t.nodes(),function(t){return!e.node(t).parent}),i=a(t,n);i=i.slice(1),r.forEach(i,function(n){var r=t.node(n).parent,i=e.edge(n,r),o=!1;i||(i=e.edge(r,n),o=!0),e.node(n).rank=e.node(r).rank+(o?i.minlen:-i.minlen)})}(t,e)}function v(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}t.exports=u,u.initLowLimValues=f,u.initCutValues=h,u.calcCutValue=d,u.leaveEdge=g,u.enterEdge=m,u.exchangeEdges=y},21618:(t,e,n)=>{"use strict";var r=n(32712);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),function n(i){var o=t.node(i);if(r.has(e,i))return o.rank;e[i]=!0;var s=r.min(r.map(t.outEdges(i),function(e){return n(e.w)-t.edge(e).minlen}));return s!==Number.POSITIVE_INFINITY&&null!=s||(s=0),o.rank=s})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},71824:(t,e,n)=>{"use strict";var r=n(32712),i=n(77759).Graph;function o(t,e,n,i){var o;do{o=r.uniqueId(i)}while(t.hasNode(o));return n.dummy=e,t.setNode(o,n),o}function s(t){return r.max(r.map(t.nodes(),function(e){var n=t.node(e).rank;if(!r.isUndefined(n))return n}))}t.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return r.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return r.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),r.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=r.map(t.nodes(),function(e){var n={};return r.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return r.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,o=t.y,s=e.x-i,a=e.y-o,l=t.width/2,c=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(a)*l>Math.abs(s)*c?(a<0&&(c=-c),n=c*s/a,r=c):(s<0&&(l=-l),n=l,r=l*a/s),{x:i+n,y:o+r}},buildLayerMatrix:function(t){var e=r.map(r.range(s(t)+1),function(){return[]});return r.forEach(t.nodes(),function(n){var i=t.node(n),o=i.rank;r.isUndefined(o)||(e[o][i.order]=n)}),e},normalizeRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank}));r.forEach(t.nodes(),function(n){var i=t.node(n);r.has(i,"rank")&&(i.rank-=e)})},removeEmptyRanks:function(t){var e=r.min(r.map(t.nodes(),function(e){return t.node(e).rank})),n=[];r.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var i=0,o=t.graph().nodeRankFactor;r.forEach(n,function(e,n){r.isUndefined(e)&&n%o!=0?--i:i&&r.forEach(e,function(e){t.node(e).rank+=i})})},addBorderNode:function(t,e,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),o(t,"border",i,e)},maxRank:s,partition:function(t,e){var n={lhs:[],rhs:[]};return r.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=r.now();try{return e()}finally{console.log(t+" time: "+(r.now()-n)+"ms")}},notime:function(t,e){return e()}}},56854:t=>{t.exports="0.8.5"},41604:t=>{"use strict";function e(t,e,o){o=o||2;var s,a,l,h,d,p,g,m=e&&e.length,y=m?e[0]*o:t.length,v=n(t,0,y,o,!0),b=[];if(!v||v.next===v.prev)return b;if(m&&(v=function(t,e,i,o){var s,a,l,h=[];for(s=0,a=e.length;s<a;s++)(l=n(t,e[s]*o,s<a-1?e[s+1]*o:t.length,o,!1))===l.next&&(l.steiner=!0),h.push(f(l));for(h.sort(c),s=0;s<h.length;s++)u(h[s],i),i=r(i,i.next);return i}(t,e,v,o)),t.length>80*o){s=l=t[0],a=h=t[1];for(var _=o;_<y;_+=o)(d=t[_])<s&&(s=d),(p=t[_+1])<a&&(a=p),d>l&&(l=d),p>h&&(h=p);g=0!==(g=Math.max(l-s,h-a))?1/g:0}return i(v,b,o,s,a,g),b}function n(t,e,n,r,i){var o,s;if(i===E(t,e,n,r)>0)for(o=e;o<n;o+=r)s=C(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=C(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(S(s),s=s.next),s}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!y(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,c,u,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(t,c,u,h);for(var p,g,m=t;t.prev!==t.next;)if(p=t.prev,g=t.next,h?s(t,c,u,h):o(t))e.push(p.i/n),e.push(t.i/n),e.push(g.i/n),S(t),t=g.next,m=g.next;else if((t=g)===m){f?1===f?i(t=a(r(t),e,n),e,n,c,u,h,2):2===f&&l(t,e,n,c,u,h):i(r(t),e,n,c,u,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(p(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(t,e,n,r){var i=t.prev,o=t,s=t.next;if(m(i,o,s)>=0)return!1;for(var a=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,c=d(i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,e,n,r),u=d(a,l,e,n,r),h=t.prevZ,f=t.nextZ;h&&h.z>=c&&f&&f.z<=u;){if(h!==t.prev&&h!==t.next&&p(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&m(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==t.prev&&f!==t.next&&p(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=c;){if(h!==t.prev&&h!==t.next&&p(i.x,i.y,o.x,o.y,s.x,s.y,h.x,h.y)&&m(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=u;){if(f!==t.prev&&f!==t.next&&p(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&m(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function a(t,e,n){var i=t;do{var o=i.prev,s=i.next.next;!y(o,s)&&v(o,i,i.next,s)&&w(o,s)&&w(s,o)&&(e.push(o.i/n),e.push(i.i/n),e.push(s.i/n),S(i),S(i.next),i=t=s),i=i.next}while(i!==t);return r(i)}function l(t,e,n,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var u=x(l,c);return l=r(l,l.next),u=r(u,u.next),i(l,e,n,o,s,a),void i(u,e,n,o,s,a)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function u(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n;var l,c=n,u=n.x,d=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=u&&i!==r.x&&p(o<d?i:s,o,u,d,o<d?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),w(r,t)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=l)),r=r.next}while(r!==c);return n}(t,e)){var n=x(e,t);r(e,e.next),r(n,n.next)}}function h(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function p(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&v(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||y(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,n,r){var i=_(m(t,e,n)),o=_(m(t,e,r)),s=_(m(n,r,t)),a=_(m(n,r,e));return i!==o&&s!==a||!(0!==i||!b(t,n,e))||!(0!==o||!b(t,r,e))||!(0!==s||!b(n,t,r))||!(0!==a||!b(n,e,r))}function b(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function w(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function x(t,e){var n=new T(t.i,t.x,t.y),r=new T(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function C(t,e,n,r){var i=new T(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(E(t,0,i?e[0]*n:t.length,n));if(i)for(var s=0,a=e.length;s<a;s++)o-=Math.abs(E(t,e[s]*n,s<a-1?e[s+1]*n:t.length,n));var l=0;for(s=0;s<r.length;s+=3){var c=r[s]*n,u=r[s+1]*n,h=r[s+2]*n;l+=Math.abs((t[c]-t[h])*(t[u+1]-t[c+1])-(t[c]-t[u])*(t[h+1]-t[c+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&n.holes.push(r+=t[i-1].length)}return n}},52167:function(t,e,n){var r;!function(i){var o=i.Promise,s=o&&"resolve"in o&&"reject"in o&&"all"in o&&"race"in o&&function(){var t;return new o(function(e){t=e}),"function"==typeof t}();e?(e.Promise=s?o:E,e.Polyfill=E):void 0===(r=(function(){return s?o:E}).call(e,n,e,t))||(t.exports=r);var a="pending",l="sealed",c="fulfilled",u="rejected",h=function(){};function d(t){return"[object Array]"===Object.prototype.toString.call(t)}var f,p="undefined"!=typeof setImmediate?setImmediate:setTimeout,g=[];function m(){for(var t=0;t<g.length;t++)g[t][0](g[t][1]);g=[],f=!1}function y(t,e){g.push([t,e]),f||(f=!0,p(m,0))}function v(t){var e=t.owner,n=e.state_,r=e.data_,i=t[n],o=t.then;if("function"==typeof i){n=c;try{r=i(r)}catch(s){x(o,s)}}b(o,r)||(n===c&&_(o,r),n===u&&x(o,r))}function b(t,e){var n;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(e&&("function"==typeof e||"object"==typeof e)){var r=e.then;if("function"==typeof r)return r.call(e,function(r){n||(n=!0,e!==r?_(t,r):w(t,r))},function(e){n||(n=!0,x(t,e))}),!0}}catch(i){return n||x(t,i),!0}return!1}function _(t,e){t!==e&&b(t,e)||w(t,e)}function w(t,e){t.state_===a&&(t.state_=l,t.data_=e,y(S,t))}function x(t,e){t.state_===a&&(t.state_=l,t.data_=e,y(T,t))}function C(t){var e=t.then_;t.then_=void 0;for(var n=0;n<e.length;n++)v(e[n])}function S(t){t.state_=c,C(t)}function T(t){t.state_=u,C(t)}function E(t){if("function"!=typeof t)throw new TypeError("Promise constructor takes a function argument");if(this instanceof E==0)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(t,e){function n(t){x(e,t)}try{t(function(t){_(e,t)},n)}catch(r){n(r)}}(t,this)}E.prototype={constructor:E,state_:a,then_:null,data_:void 0,then:function(t,e){var n={owner:this,then:new this.constructor(h),fulfilled:t,rejected:e};return this.state_===c||this.state_===u?y(v,n):this.then_.push(n),n.then},catch:function(t){return this.then(null,t)}},E.all=function(t){if(!d(t))throw new TypeError("You must pass an array to Promise.all().");return new this(function(e,n){var r=[],i=0;function o(t){return i++,function(n){r[t]=n,--i||e(r)}}for(var s,a=0;a<t.length;a++)(s=t[a])&&"function"==typeof s.then?s.then(o(a),n):r[a]=s;i||e(r)})},E.race=function(t){if(!d(t))throw new TypeError("You must pass an array to Promise.race().");return new this(function(e,n){for(var r,i=0;i<t.length;i++)(r=t[i])&&"function"==typeof r.then?r.then(e,n):e(r)})},E.resolve=function(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(e){e(t)})},E.reject=function(t){return new this(function(e,n){n(t)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this)},93105:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var i=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,t.exports.once=function(t,e){return new Promise(function(n,r){function i(n){t.removeListener(e,o),r(n)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),n([].slice.call(arguments))}g(t,e,o,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&g(t,"error",e,{once:!0})}(t,i)})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function c(t,e,n,r){var i,o,s;if(a(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),void 0===s)s=o[e]=n,++t._eventsCount;else if("function"==typeof s?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=l(t))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,console&&console.warn&&console.warn(c)}return t}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):p(i,i.length)}function f(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function g(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)})}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||i(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[t];if(void 0===l)return!1;if("function"==typeof l)r(l,this,e);else{var c=l.length,u=p(l,c);for(n=0;n<c;++n)r(u[n],this,e)}return!0},o.prototype.on=o.prototype.addListener=function(t,e){return c(this,t,e,!1)},o.prototype.prependListener=function(t,e){return c(this,t,e,!0)},o.prototype.once=function(t,e){return a(e),this.on(t,h(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return a(e),this.prependListener(t,h(this,t,e)),this},o.prototype.off=o.prototype.removeListener=function(t,e){var n,r,i,o,s;if(a(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,s||e)}return this},o.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},o.prototype.listeners=function(t){return d(this,t,!0)},o.prototype.rawListeners=function(t){return d(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},49457:function(t,e){var n,r;void 0===(r="function"==typeof(n=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(t,o,s){var a=i.URL||i.webkitURL,l=document.createElement("a");l.download=o=o||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?r(l):n(l.href)?e(t,o,s):r(l,l.target="_blank")):(l.href=a.createObjectURL(t),setTimeout(function(){a.revokeObjectURL(l.href)},4e4),setTimeout(function(){r(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,i,o){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),i);else if(n(t))e(t,i,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){r(s)})}}:function(t,n,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,l=/constructor/i.test(i.HTMLElement)||i.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&l||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},u.readAsDataURL(t)}else{var h=i.URL||i.webkitURL,d=h.createObjectURL(t);s?s.location=d:location.href=d,s=null,setTimeout(function(){h.revokeObjectURL(d)},4e4)}});i.saveAs=s.saveAs=s,t.exports=s})?n.apply(e,[]):n)||(t.exports=r)},93042:(t,e,n)=>{"use strict";var r=n(91052).default;const{ReadableWebToNodeStream:i}=n(64738),o=n(15343),s=n(87708);function a(){return(a=r(function*(t){const e=new i(t),n=yield s.fromStream(e);return yield e.close(),n})).apply(this,arguments)}function l(){return(l=r(function*(t){const e=yield c(t);return s.fromBuffer(e)})).apply(this,arguments)}function c(t){return new Promise((e,n)=>{const r=new FileReader;r.addEventListener("loadend",t=>{let n=t.target.result;n instanceof ArrayBuffer&&(n=o(new Uint8Array(t.target.result))),e(n)}),r.addEventListener("error",t=>{n(new Error(t.message))}),r.addEventListener("abort",t=>{n(new Error(t.type))}),r.readAsArrayBuffer(t)})}Object.assign(t.exports,s,{fromStream:function(t){return a.apply(this,arguments)},fromBlob:function(t){return l.apply(this,arguments)}})},87708:(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";var _asyncToGenerator=__webpack_require__(91052).default;const Token=__webpack_require__(67249),strtok3=__webpack_require__(82899),{stringToBytes:stringToBytes,tarHeaderChecksumMatches:tarHeaderChecksumMatches,uint32SyncSafeToken:uint32SyncSafeToken}=__webpack_require__(49970),supported=__webpack_require__(63917),minimumBytes=4100;function fromStream(t){return _fromStream.apply(this,arguments)}function _fromStream(){return(_fromStream=_asyncToGenerator(function*(t){const e=yield strtok3.fromStream(t);try{return yield fromTokenizer(e)}finally{yield e.close()}})).apply(this,arguments)}function fromBuffer(t){return _fromBuffer.apply(this,arguments)}function _fromBuffer(){return(_fromBuffer=_asyncToGenerator(function*(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Buffer.isBuffer(t)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof t}\``);const e=t instanceof Buffer?t:Buffer.from(t);if(e&&e.length>1)return fromTokenizer(strtok3.fromBuffer(e))})).apply(this,arguments)}function _check(t,e,n){n={offset:0,...n};for(const[r,i]of e.entries())if(n.mask){if(i!==(n.mask[r]&t[r+n.offset]))return!1}else if(i!==t[r+n.offset])return!1;return!0}function fromTokenizer(t){return _fromTokenizer2.apply(this,arguments)}function _fromTokenizer2(){return(_fromTokenizer2=_asyncToGenerator(function*(t){try{return _fromTokenizer(t)}catch(e){if(!(e instanceof strtok3.EndOfStreamError))throw e}})).apply(this,arguments)}function _fromTokenizer(t){return _fromTokenizer3.apply(this,arguments)}function _fromTokenizer3(){return(_fromTokenizer3=_asyncToGenerator(function*(t){let e=Buffer.alloc(minimumBytes);const n=(t,n)=>_check(e,t,n),r=(t,e)=>n(stringToBytes(t),e);if(t.fileInfo.size||(t.fileInfo.size=Number.MAX_SAFE_INTEGER),yield t.peekBuffer(e,{length:12,mayBeLess:!0}),n([66,77]))return{ext:"bmp",mime:"image/bmp"};if(n([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(n([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(n([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(n([37,33]))return yield t.peekBuffer(e,{length:24,mayBeLess:!0}),r("PS-Adobe-",{offset:2})&&r(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(n([31,160])||n([31,157]))return{ext:"Z",mime:"application/x-compress"};if(n([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(n([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(n([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(n([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(r("ID3")){yield t.ignore(6);const e=yield t.readToken(uint32SyncSafeToken);return t.position+e>t.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(yield t.ignore(e),fromTokenizer(t))}if(r("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((67===e[0]||70===e[0])&&n([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(n([71,73,70]))return{ext:"gif",mime:"image/gif"};if(r("FLIF"))return{ext:"flif",mime:"image/flif"};if(r("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(r("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(r("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(r("FORM"))return{ext:"aif",mime:"audio/aiff"};if(r("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(n([80,75,3,4])){try{for(;t.position+30<t.fileInfo.size;){yield t.readBuffer(e,{length:30});const n={compressedSize:e.readUInt32LE(18),uncompressedSize:e.readUInt32LE(22),filenameLength:e.readUInt16LE(26),extraFieldLength:e.readUInt16LE(28)};if(n.filename=yield t.readToken(new Token.StringType(n.filenameLength,"utf-8")),yield t.ignore(n.extraFieldLength),"META-INF/mozilla.rsa"===n.filename)return{ext:"xpi",mime:"application/x-xpinstall"};if(n.filename.endsWith(".rels")||n.filename.endsWith(".xml"))switch(n.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}if(n.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(n.filename.startsWith("3D/")&&n.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if("mimetype"===n.filename&&n.compressedSize===n.uncompressedSize)switch(yield t.readToken(new Token.StringType(n.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"}}if(0===n.compressedSize){let n=-1;for(;n<0&&t.position<t.fileInfo.size;)yield t.peekBuffer(e,{mayBeLess:!0}),n=e.indexOf("504B0304",0,"hex"),yield t.ignore(n>=0?n:e.length)}else yield t.ignore(n.compressedSize)}}catch(f){if(!(f instanceof strtok3.EndOfStreamError))throw f}return{ext:"zip",mime:"application/zip"}}if(r("OggS")){yield t.ignore(28);const e=Buffer.alloc(8);return yield t.readBuffer(e),_check(e,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(e,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(e,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(e,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(e,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(e,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(n([80,75])&&(3===e[2]||5===e[2]||7===e[2])&&(4===e[3]||6===e[3]||8===e[3]))return{ext:"zip",mime:"application/zip"};if(r("ftyp",{offset:4})&&0!=(96&e[8])){const t=e.toString("binary",8,12).replace("\0"," ").trim();switch(t){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return t.startsWith("3g")?t.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(r("MThd"))return{ext:"mid",mime:"audio/midi"};if(r("wOFF")&&(n([0,1,0,0],{offset:4})||r("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(r("wOF2")&&(n([0,1,0,0],{offset:4})||r("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(n([212,195,178,161])||n([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(r("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(r("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(r("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(n([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(r("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(r("%PDF")){yield t.ignore(1350);const e=Buffer.alloc(Math.min(10485760,t.fileInfo.size));return yield t.readBuffer(e,{mayBeLess:!0}),e.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(n([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(n([73,73,42,0]))return r("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:n([28,0,254,0],{offset:8})||n([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:n([8,0,0,0],{offset:4})&&(n([45,0,254,0],{offset:8})||n([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(e=Buffer.alloc(24),yield t.peekBuffer(e),(n([16,251,134,1],{offset:4})||n([8,0,0,0],{offset:4}))&&n([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(n([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(r("MAC "))return{ext:"ape",mime:"audio/ape"};if(n([26,69,223,163])){function i(){return o.apply(this,arguments)}function o(){return(o=_asyncToGenerator(function*(){const e=yield t.peekNumber(Token.UINT8);let n=128,r=0;for(;0==(e&n);)++r,n>>=1;const i=Buffer.alloc(r+1);return yield t.readBuffer(i),i})).apply(this,arguments)}function s(){return a.apply(this,arguments)}function a(){return(a=_asyncToGenerator(function*(){const t=yield i(),e=yield i();e[0]^=128>>e.length-1;const n=Math.min(6,e.length);return{id:t.readUIntBE(0,t.length),len:e.readUIntBE(e.length-n,n)}})).apply(this,arguments)}function l(){return(l=_asyncToGenerator(function*(e,n){for(;n>0;){const e=yield s();if(17026===e.id)return t.readToken(new Token.StringType(e.len,"utf-8"));yield t.ignore(e.len),--n}})).apply(this,arguments)}const e=yield s();switch(yield function(t,e){return l.apply(this,arguments)}(1,e.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(n([82,73,70,70])){if(n([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(n([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(n([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(r("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(n([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(r("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(r("MSCF")||r("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(n([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(n([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(n([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(r("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(r("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(n([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(r("IMPM"))return{ext:"it",mime:"audio/x-it"};if(r("-lh0-",{offset:2})||r("-lh1-",{offset:2})||r("-lh2-",{offset:2})||r("-lh3-",{offset:2})||r("-lh4-",{offset:2})||r("-lh5-",{offset:2})||r("-lh6-",{offset:2})||r("-lh7-",{offset:2})||r("-lzs-",{offset:2})||r("-lz4-",{offset:2})||r("-lz5-",{offset:2})||r("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(n([0,0,1,186])){if(n([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(n([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(r("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(n([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(r("<?xml "))return{ext:"xml",mime:"application/xml"};if(r("BEGIN:"))return{ext:"ics",mime:"text/calendar"};if(n([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(n([82,97,114,33,26,7])&&(0===e[6]||1===e[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(r("solid "))return{ext:"stl",mime:"model/stl"};if(r("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(r("!<arch>"))return yield t.ignore(8),"debian-binary"===(yield t.readToken(new Token.StringType(13,"ascii")))?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(n([137,80,78,71,13,10,26,10])){function c(){return u.apply(this,arguments)}function u(){return(u=_asyncToGenerator(function*(){return{length:yield t.readToken(Token.INT32_BE),type:yield t.readToken(new Token.StringType(4,"binary"))}})).apply(this,arguments)}yield t.ignore(8);do{const e=yield c();if(e.length<0)return;switch(e.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:yield t.ignore(e.length+4)}}while(t.position+8<t.fileInfo.size);return{ext:"png",mime:"image/png"}}if(n([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(n([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(n([102,114,101,101],{offset:4})||n([109,100,97,116],{offset:4})||n([109,111,111,118],{offset:4})||n([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(n([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(n([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(n([48,38,178,117,142,102,207,17,166,217])){function h(){return d.apply(this,arguments)}function d(){return(d=_asyncToGenerator(function*(){const e=Buffer.alloc(16);return yield t.readBuffer(e),{id:e,size:yield t.readToken(Token.UINT64_LE)}})).apply(this,arguments)}for(yield t.ignore(30);t.position+24<t.fileInfo.size;){const e=yield h();let n=e.size-24;if(_check(e.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const e=Buffer.alloc(16);if(n-=(yield t.readBuffer(e)),_check(e,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(e,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}yield t.ignore(n)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(n([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((n([126,16,4])||n([126,24,4]))&&n([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(n([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(n([0,0,0,12,106,80,32,32,13,10,135,10]))switch(yield t.ignore(20),yield t.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(n([0,0,1,186])||n([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(n([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(n([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(n([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(n([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(yield t.peekBuffer(e,{length:Math.min(256,t.fileInfo.size),mayBeLess:!0}),r("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(r("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(r("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(n([4,0,0,0])&&e.length>=16){const t=e.readUInt32LE(12);if(t>12&&t<240&&e.length>=t+16)try{const n=e.slice(16,t+16).toString();if(JSON.parse(n).files)return{ext:"asar",mime:"application/x-asar"}}catch(p){}}if(n([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(r("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(n([71],{offset:4})&&(n([71],{offset:192})||n([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(n([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(n([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(n([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(n([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(n([76,80],{offset:34})&&(n([0,0,1],{offset:8})||n([1,0,2],{offset:8})||n([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(n([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(yield t.peekBuffer(e,{length:Math.min(512,t.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(e))return{ext:"tar",mime:"application/x-tar"};if(n([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(r("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};for(let g=0;g<2&&g<e.length-16;g++)if(e.length>=g+2&&n([255,224],{offset:g,mask:[255,224]})){if(n([16],{offset:g+1,mask:[22]}))return n([8],{offset:g+1,mask:[8]}),{ext:"aac",mime:"audio/aac"};if(n([2],{offset:g+1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(n([4],{offset:g+1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(n([6],{offset:g+1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}})).apply(this,arguments)}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",_asyncToGenerator(function*(){const t=new stream.PassThrough;let e;e=stream.pipeline?stream.pipeline(readableStream,t,()=>{}):readableStream.pipe(t);const n=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const e=yield fromBuffer(n);t.fileType=e}catch(r){reject(r)}resolve(e)}))}),fileType={fromStream:fromStream,fromTokenizer:fromTokenizer,fromBuffer:fromBuffer,stream:stream};Object.defineProperty(fileType,"extensions",{get:()=>new Set(supported.extensions)}),Object.defineProperty(fileType,"mimeTypes",{get:()=>new Set(supported.mimeTypes)}),module.exports=fileType},63917:t=>{"use strict";t.exports={extensions:["jpg","png","apng","gif","webp","flif","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf"]}},49970:(t,e)=>{"use strict";e.stringToBytes=t=>[...t].map(t=>t.charCodeAt(0)),e.tarHeaderChecksumMatches=(t,e=0)=>{const n=parseInt(t.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(n))return!1;let r=256;for(let i=e;i<e+148;i++)r+=t[i];for(let i=e+156;i<e+512;i++)r+=t[i];return n===r},e.uint32SyncSafeToken={get:(t,e)=>127&t[e+3]|t[e+2]<<7|t[e+1]<<14|t[e]<<21,len:4}},30:(t,e,n)=>{var r=n(28057);t.exports={Graph:r.Graph,json:n(51852),alg:n(29761),version:r.version}},59174:(t,e,n)=>{var r=n(14269);t.exports=function(t){var e,n={},i=[];function o(i){r.has(n,i)||(n[i]=!0,e.push(i),r.each(t.successors(i),o),r.each(t.predecessors(i),o))}return r.each(t.nodes(),function(t){e=[],o(t),e.length&&i.push(e)}),i}},79831:(t,e,n)=>{var r=n(14269);function i(t,e,n,o,s,a){r.has(o,e)||(o[e]=!0,n||a.push(e),r.each(s(e),function(e){i(t,e,n,o,s,a)}),n&&a.push(e))}t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),s=[],a={};return r.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);i(t,e,"post"===n,a,o,s)}),s}},72568:(t,e,n)=>{var r=n(58406),i=n(14269);t.exports=function(t,e,n){return i.transform(t.nodes(),function(i,o){i[o]=r(t,o,e,n)},{})}},58406:(t,e,n)=>{var r=n(14269),i=n(22643);t.exports=function(t,e,n,r){return function(t,e,n,r){var o,s,a={},l=new i,c=function(t){var e=t.v!==o?t.v:t.w,r=a[e],i=n(t),c=s.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<r.distance&&(r.distance=c,r.predecessor=o,l.decrease(e,c))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;a[t]={distance:n},l.add(t,n)});l.size()>0&&(o=l.removeMin(),(s=a[o]).distance!==Number.POSITIVE_INFINITY);)r(o).forEach(c);return a}(t,String(e),n||o,r||function(e){return t.outEdges(e)})};var o=r.constant(1)},52777:(t,e,n)=>{var r=n(14269),i=n(20468);t.exports=function(t){return r.filter(i(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}},6926:(t,e,n)=>{var r=n(14269);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,o=e(n);r[t][i]={distance:o,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var o=r[n];i.forEach(function(n){var r=e[n],i=o[n],s=o[t].distance+r.distance;s<i.distance&&(i.distance=s,i.predecessor=r.predecessor)})})}),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},29761:(t,e,n)=>{t.exports={components:n(59174),dijkstra:n(58406),dijkstraAll:n(72568),findCycles:n(52777),floydWarshall:n(6926),isAcyclic:n(99160),postorder:n(2487),preorder:n(22e3),prim:n(60644),tarjan:n(20468),topsort:n(16501)}},99160:(t,e,n)=>{var r=n(16501);t.exports=function(t){try{r(t)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},2487:(t,e,n)=>{var r=n(79831);t.exports=function(t,e){return r(t,e,"post")}},22e3:(t,e,n)=>{var r=n(79831);t.exports=function(t,e){return r(t,e,"pre")}},60644:(t,e,n)=>{var r=n(14269),i=n(97051),o=n(22643);t.exports=function(t,e){var n,s=new i,a={},l=new o;function c(t){var r=t.v===n?t.w:t.v,i=l.priority(r);if(void 0!==i){var o=e(t);o<i&&(a[r]=n,l.decrease(r,o))}}if(0===t.nodeCount())return s;r.each(t.nodes(),function(t){l.add(t,Number.POSITIVE_INFINITY),s.setNode(t)}),l.decrease(t.nodes()[0],0);for(var u=!1;l.size()>0;){if(n=l.removeMin(),r.has(a,n))s.setEdge(n,a[n]);else{if(u)throw new Error("Input graph is not connected: "+t);u=!0}t.nodeEdges(n).forEach(c)}return s}},20468:(t,e,n)=>{var r=n(14269);t.exports=function(t){var e=0,n=[],i={},o=[];function s(a){var l=i[a]={onStack:!0,lowlink:e,index:e++};if(n.push(a),t.successors(a).forEach(function(t){r.has(i,t)?i[t].onStack&&(l.lowlink=Math.min(l.lowlink,i[t].index)):(s(t),l.lowlink=Math.min(l.lowlink,i[t].lowlink))}),l.lowlink===l.index){var c,u=[];do{c=n.pop(),i[c].onStack=!1,u.push(c)}while(a!==c);o.push(u)}}return t.nodes().forEach(function(t){r.has(i,t)||s(t)}),o}},16501:(t,e,n)=>{var r=n(14269);function i(t){var e={},n={},i=[];if(r.each(t.sinks(),function s(a){if(r.has(n,a))throw new o;r.has(e,a)||(n[a]=!0,e[a]=!0,r.each(t.predecessors(a),s),delete n[a],i.push(a))}),r.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o,o.prototype=new Error},22643:(t,e,n)=>{var r=n(14269);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(t){return t.key})},i.prototype.has=function(t){return r.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!r.has(n,t)){var i=this._arr,o=i.length;return n[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},i.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],o=n[e];n[t]=o,n[e]=i,r[o.key]=t,r[i.key]=e}},97051:(t,e,n)=>{"use strict";var r=n(14269);t.exports=o;var i="\0";function o(t){this._isDirected=!r.has(t,"directed")||t.directed,this._isMultigraph=!!r.has(t,"multigraph")&&t.multigraph,this._isCompound=!!r.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function s(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function l(t,e,n,i){var o=""+e,s=""+n;if(!t&&o>s){var a=o;o=s,s=a}return o+"\x01"+s+"\x01"+(r.isUndefined(i)?"\0":i)}function c(t,e,n,r){var i=""+e,o=""+n;if(!t&&i>o){var s=i;i=o,o=s}var a={v:i,w:o};return r&&(a.name=r),a}function u(t,e){return l(t,e.v,e.w,e.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(t){return this._label=t,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultNodeLabelFn=t,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._in[e])})},o.prototype.sinks=function(){var t=this;return r.filter(this.nodes(),function(e){return r.isEmpty(t._out[e])})},o.prototype.setNodes=function(t,e){var n=arguments,i=this;return r.each(t,function(t){n.length>1?i.setNode(t,e):i.setNode(t)}),this},o.prototype.setNode=function(t,e){return r.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=i,this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},o.prototype.node=function(t){return this._nodes[t]},o.prototype.hasNode=function(t){return r.has(this._nodes,t)},o.prototype.removeNode=function(t){var e=this;if(r.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],r.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),r.each(r.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],r.each(r.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},o.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(e))e=i;else{for(var n=e+="";!r.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},o.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},o.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==i)return e}},o.prototype.children=function(t){if(r.isUndefined(t)&&(t=i),this._isCompound){var e=this._children[t];if(e)return r.keys(e)}else{if(t===i)return this.nodes();if(this.hasNode(t))return[]}},o.prototype.predecessors=function(t){var e=this._preds[t];if(e)return r.keys(e)},o.prototype.successors=function(t){var e=this._sucs[t];if(e)return r.keys(e)},o.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return r.union(e,this.successors(t))},o.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},o.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;r.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),r.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var i={};function o(t){var r=n.parent(t);return void 0===r||e.hasNode(r)?(i[t]=r,r):r in i?i[r]:o(r)}return this._isCompound&&r.each(e.nodes(),function(t){e.setParent(t,o(t))}),e},o.prototype.setDefaultEdgeLabel=function(t){return r.isFunction(t)||(t=r.constant(t)),this._defaultEdgeLabelFn=t,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(t,e){var n=this,i=arguments;return r.reduce(t,function(t,r){return i.length>1?n.setEdge(t,r,e):n.setEdge(t,r),r}),this},o.prototype.setEdge=function(){var t,e,n,i,o=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,n=a.name,2===arguments.length&&(i=arguments[1],o=!0)):(t=a,e=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),t=""+t,e=""+e,r.isUndefined(n)||(n=""+n);var u=l(this._isDirected,t,e,n);if(r.has(this._edgeLabels,u))return o&&(this._edgeLabels[u]=i),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[u]=o?i:this._defaultEdgeLabelFn(t,e,n);var h=c(this._isDirected,t,e,n);return t=h.v,e=h.w,Object.freeze(h),this._edgeObjs[u]=h,s(this._preds[e],t),s(this._sucs[t],e),this._in[e][u]=h,this._out[t][u]=h,this._edgeCount++,this},o.prototype.edge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):l(this._isDirected,t,e,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(t,e,n){var i=1===arguments.length?u(this._isDirected,arguments[0]):l(this._isDirected,t,e,n);return r.has(this._edgeLabels,i)},o.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?u(this._isDirected,arguments[0]):l(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},o.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.v===e}):i}},o.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var i=r.values(n);return e?r.filter(i,function(t){return t.w===e}):i}},o.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},28057:(t,e,n)=>{t.exports={Graph:n(97051),version:n(40751)}},51852:(t,e,n)=>{var r=n(14269),i=n(97051);function o(t){return r.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),o={v:e};return r.isUndefined(n)||(o.value=n),r.isUndefined(i)||(o.parent=i),o})}function s(t){return r.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i})}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:o(t),edges:s(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},14269:(t,e,n)=>{var r;try{r={clone:n(13742),constant:n(45654),each:n(33718),filter:n(33834),has:n(32335),isArray:n(81690),isEmpty:n(12232),isFunction:n(55836),isUndefined:n(29569),keys:n(59108),map:n(89718),reduce:n(86101),size:n(84951),transform:n(3593),union:n(9728),values:n(23348)}}catch(i){}r||(r=window._),t.exports=r},40751:t=>{t.exports="2.1.8"},11524:(t,e,n)=>{var r;!function(i,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],u=o.createElement("div"),h=Math.round,d=Math.abs,f=Date.now;function p(t,e,n){return setTimeout(w(t,n),e)}function g(t,e,n){return!!Array.isArray(t)&&(m(t,n[e],n),!0)}function m(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function y(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==a&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var v=y(function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===a)&&(t[r[i]]=e[r[i]]),i++;return t},"extend","Use `assign`."),b=y(function(t,e){return v(t,e,!0)},"merge","Use `assign`.");function _(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&l(r,n)}function w(t,e){return function(){return t.apply(e,arguments)}}function x(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function C(t,e){return t===a?e:t}function S(t,e,n){m(A(e),function(e){t.addEventListener(e,n,!1)})}function T(t,e,n){m(A(e),function(e){t.removeEventListener(e,n,!1)})}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function O(t,e){return t.indexOf(e)>-1}function A(t){return t.trim().split(/\s+/g)}function P(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function k(t){return Array.prototype.slice.call(t,0)}function M(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];P(i,s)<0&&r.push(t[o]),i[o]=s,o++}return n&&(r=e?r.sort(function(t,n){return t[e]>n[e]}):r.sort()),r}function I(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((r=(n=c[o])?n+i:e)in t)return r;o++}return a}var R=1;function D(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var N="ontouchstart"in i,L=I(i,"PointerEvent")!==a,F=N&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),B="touch",j="mouse",$=["x","y"],U=["clientX","clientY"];function V(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){x(t.options.enable,[t])&&n.handler(e)},this.init()}function Z(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i==0,s=12&e&&r-i==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=z(e)),i>1&&!n.firstMultiple?n.firstMultiple=z(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=e.center=H(r);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=W(l,c),e.distance=G(l,c),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=Y(e.deltaX,e.deltaY);var u,h,p=q(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=p.x,e.overallVelocityY=p.y,e.overallVelocity=d(p.x)>d(p.y)?p.x:p.y,e.scale=s?(u=s.pointers,G((h=r)[0],h[1],U)/G(u[0],u[1],U)):1,e.rotation=s?function(t,e){return W(e[1],e[0],U)+W(t[1],t[0],U)}(s.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(8!=e.eventType&&(l>25||s.velocity===a)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,h=q(l,c,u);r=h.x,i=h.y,n=d(h.x)>d(h.y)?h.x:h.y,o=Y(c,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,i=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var g=t.element;E(e.srcEvent.target,g)&&(g=e.srcEvent.target),e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function z(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:H(e),deltaX:t.deltaX,deltaY:t.deltaY}}function H(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function q(t,e,n){return{x:e/t||0,y:n/t||0}}function Y(t,e){return t===e?1:d(t)>=d(e)?t<0?2:4:e<0?8:16}function G(t,e,n){n||(n=$);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function W(t,e,n){return n||(n=$),180*Math.atan2(e[n[1]]-t[n[1]],e[n[0]]-t[n[0]])/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(D(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(D(this.element),this.evWin,this.domHandler)}};var J={mousedown:1,mousemove:2,mouseup:4},X="mousedown",Q="mousemove mouseup";function K(){this.evEl=X,this.evWin=Q,this.pressed=!1,V.apply(this,arguments)}_(K,V,{handler:function(t){var e=J[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:j,srcEvent:t}))}});var tt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},et={2:B,3:"pen",4:j,5:"kinect"},nt="pointerdown",rt="pointermove pointerup pointercancel";function it(){this.evEl=nt,this.evWin=rt,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(nt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),_(it,V,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=tt[r],o=et[t.pointerType]||t.pointerType,s=o==B,a=P(e,t.pointerId,"pointerId");1&i&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&i&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8},st="touchstart",at="touchstart touchmove touchend touchcancel";function lt(){this.evTarget=st,this.evWin=at,this.started=!1,V.apply(this,arguments)}function ct(t,e){var n=k(t.touches),r=k(t.changedTouches);return 12&e&&(n=M(n.concat(r),"identifier",!0)),[n,r]}_(lt,V,{handler:function(t){var e=ot[t.type];if(1===e&&(this.started=!0),this.started){var n=ct.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}}});var ut={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel";function dt(){this.evTarget=ht,this.targetIds={},V.apply(this,arguments)}function ft(t,e){var n=k(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,s=k(t.changedTouches),a=[],l=this.target;if(o=n.filter(function(t){return E(t.target,l)}),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[M(o.concat(a),"identifier",!0),a]:void 0}function pt(){V.apply(this,arguments);var t=w(this.handler,this);this.touch=new dt(this.manager,t),this.mouse=new K(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function gt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,mt.call(this,e)):12&t&&mt.call(this,e)}function mt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout(function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)},2500)}}function yt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),s=Math.abs(n-i.y);if(o<=25&&s<=25)return!0}return!1}_(dt,V,{handler:function(t){var e=ut[t.type],n=ft.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:B,srcEvent:t})}}),_(pt,V,{handler:function(t,e,n){var r=n.pointerType==j;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(n.pointerType==B)gt.call(this,e,n);else if(r&&yt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var vt=I(u.style,"touchAction"),bt=vt!==a,_t="compute",wt="auto",xt="manipulation",Ct="none",St="pan-x",Tt="pan-y",Et=function(){if(!bt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(n){t[n]=!e||i.CSS.supports("touch-action",n)}),t}();function Ot(t,e){this.manager=t,this.set(e)}Ot.prototype={set:function(t){t==_t&&(t=this.compute()),bt&&this.manager.element.style&&Et[t]&&(this.manager.element.style[vt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,function(e){x(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(O(t,Ct))return Ct;var e=O(t,St),n=O(t,Tt);return e&&n?Ct:e||n?e?St:Tt:O(t,xt)?xt:wt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=O(r,Ct)&&!Et.none,o=O(r,Tt)&&!Et["pan-y"],s=O(r,St)&&!Et["pan-x"];if(i&&1===t.pointers.length&&t.distance<2&&t.deltaTime<250)return;if(!s||!o)return i||o&&6&n||s&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var At=32;function Pt(t){this.options=l({},this.defaults,t||{}),this.id=R++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function kt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Mt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function It(t,e){var n=e.manager;return n?n.get(t):t}function Rt(){Pt.apply(this,arguments)}function Dt(){Rt.apply(this,arguments),this.pX=null,this.pY=null}function Nt(){Rt.apply(this,arguments)}function Lt(){Pt.apply(this,arguments),this._timer=null,this._input=null}function Ft(){Rt.apply(this,arguments)}function Bt(){Rt.apply(this,arguments)}function jt(){Pt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function $t(t,e){return(e=e||{}).recognizers=C(e.recognizers,$t.defaults.preset),new Ut(t,e)}function Ut(t,e){this.options=l({},$t.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(L?it:F?dt:N?pt:K))(this,Z),this.touchAction=new Ot(this,this.options.touchAction),Vt(this,!0),m(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function Vt(t,e){var n,r=t.element;r.style&&(m(t.options.cssProps,function(i,o){n=I(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""}),e||(t.oldCssProps={}))}Pt.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(g(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=It(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return g(t,"dropRecognizeWith",this)||(t=It(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(g(t,"requireFailure",this))return this;var e=this.requireFail;return-1===P(e,t=It(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(g(t,"dropRequireFailure",this))return this;t=It(t,this);var e=P(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+kt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+kt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=At},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!x(this.options.enable,[this,e]))return this.reset(),void(this.state=At);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},_(Rt,Pt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:At}}),_(Dt,Rt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Tt),24&t&&e.push(St),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,s=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===s?1:s<0?8:16,n=s!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Rt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Mt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),_(Nt,Rt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){1!==t.scale&&(t.additionalEvent=this.options.event+(t.scale<1?"in":"out")),this._super.emit.call(this,t)}}),_(Lt,Pt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=p(function(){this.state=8,this.tryEmit()},e.time,this);else if(4&t.eventType)return 8;return At},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),_(Ft,Rt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ct]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),_(Bt,Rt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Dt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=Mt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),_(jt,Pt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[xt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||G(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=p(function(){this.state=8,this.tryEmit()},e.interval,this),2):8}return At},failTimeout:function(){return this._timer=p(function(){this.state=At},this.options.interval,this),At},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),$t.VERSION="2.0.7",$t.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[Ft,{enable:!1}],[Nt,{enable:!1},["rotate"]],[Bt,{direction:6}],[Dt,{direction:6},["swipe"]],[jt],[jt,{event:"doubletap",taps:2},["tap"]],[Lt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Ut.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Pt)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(g(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(g(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=P(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return m(A(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==a){var n=this.handlers;return m(A(t),function(t){e?n[t]&&n[t].splice(P(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Vt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l($t,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:At,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Ut,Input:V,TouchAction:Ot,TouchInput:dt,MouseInput:K,PointerEventInput:it,TouchMouseInput:pt,SingleTouchInput:lt,Recognizer:Pt,AttrRecognizer:Rt,Tap:jt,Pan:Dt,Swipe:Bt,Pinch:Nt,Rotate:Ft,Press:Lt,on:S,off:T,each:m,merge:b,extend:v,assign:l,inherit:_,bindFn:w,prefixed:I}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=$t,(r=(function(){return $t}).call(e,n,e,t))===a||(t.exports=r)}(window,document)},12658:(t,e)=>{e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*g}},59879:t=>{t.exports="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},16658:t=>{t.exports=r,r.strict=i,r.loose=o;var e=Object.prototype.toString,n={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function r(t){return i(t)||o(t)}function i(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function o(t){return n[e.call(t)]}},81235:(t,e,n)=>{var r=n(4153)(n(27038),"DataView");t.exports=r},41505:(t,e,n)=>{var r=n(59410),i=n(21143),o=n(604),s=n(80584),a=n(7792);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},73545:(t,e,n)=>{var r=n(63391),i=n(68971),o=n(18858),s=n(13913),a=n(68944);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},39046:(t,e,n)=>{var r=n(4153)(n(27038),"Map");t.exports=r},93177:(t,e,n)=>{var r=n(70536),i=n(61502),o=n(94960),s=n(61539),a=n(34138);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,t.exports=l},97129:(t,e,n)=>{var r=n(4153)(n(27038),"Promise");t.exports=r},74918:(t,e,n)=>{var r=n(4153)(n(27038),"Set");t.exports=r},48690:(t,e,n)=>{var r=n(93177),i=n(30365),o=n(58235);function s(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,t.exports=s},33667:(t,e,n)=>{var r=n(73545),i=n(18034),o=n(37238),s=n(75887),a=n(81450),l=n(61386);function c(t){var e=this.__data__=new r(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=l,t.exports=c},57333:(t,e,n)=>{var r=n(27038);t.exports=r.Symbol},96820:(t,e,n)=>{var r=n(27038);t.exports=r.Uint8Array},54203:(t,e,n)=>{var r=n(4153)(n(27038),"WeakMap");t.exports=r},81638:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},4500:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},11375:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}},5242:(t,e,n)=>{var r=n(2166);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},80679:t=>{t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},71890:(t,e,n)=>{var r=n(48282),i=n(2952),o=n(81690),s=n(84444),a=n(20968),l=n(47679),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),u=!n&&i(t),h=!n&&!u&&s(t),d=!n&&!u&&!h&&l(t),f=n||u||h||d,p=f?r(t.length,String):[],g=p.length;for(var m in t)!e&&!c.call(t,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||p.push(m);return p}},14992:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},94165:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},89731:t=>{t.exports=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}},8141:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},38956:(t,e,n)=>{var r=n(68840)("length");t.exports=r},63530:(t,e,n)=>{var r=n(92007),i=n(71166);t.exports=function(t,e,n){(void 0!==n&&!i(t[e],n)||void 0===n&&!(e in t))&&r(t,e,n)}},23898:(t,e,n)=>{var r=n(92007),i=n(71166),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&i(s,n)&&(void 0!==n||e in t)||r(t,e,n)}},15758:(t,e,n)=>{var r=n(71166);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},22067:(t,e,n)=>{var r=n(11694),i=n(59108);t.exports=function(t,e){return t&&r(e,i(e),t)}},70882:(t,e,n)=>{var r=n(11694),i=n(42970);t.exports=function(t,e){return t&&r(e,i(e),t)}},92007:(t,e,n)=>{var r=n(20395);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},77007:(t,e,n)=>{var r=n(33667),i=n(4500),o=n(23898),s=n(22067),a=n(70882),l=n(50694),c=n(53595),u=n(14746),h=n(78857),d=n(58605),f=n(51675),p=n(26663),g=n(62963),m=n(32143),y=n(31563),v=n(81690),b=n(84444),_=n(32e3),w=n(53867),x=n(48855),C=n(59108),S=n(42970),T="[object Arguments]",E="[object Function]",O="[object Object]",A={};A[T]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[O]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[E]=A["[object WeakMap]"]=!1,t.exports=function t(e,n,P,k,M,I){var R,D=1&n,N=2&n,L=4&n;if(P&&(R=M?P(e,k,M,I):P(e)),void 0!==R)return R;if(!w(e))return e;var F=v(e);if(F){if(R=g(e),!D)return c(e,R)}else{var B=p(e),j=B==E||"[object GeneratorFunction]"==B;if(b(e))return l(e,D);if(B==O||B==T||j&&!M){if(R=N||j?{}:y(e),!D)return N?h(e,a(R,e)):u(e,s(R,e))}else{if(!A[B])return M?e:{};R=m(e,B,D)}}I||(I=new r);var $=I.get(e);if($)return $;I.set(e,R),x(e)?e.forEach(function(r){R.add(t(r,n,P,r,e,I))}):_(e)&&e.forEach(function(r,i){R.set(i,t(r,n,P,i,e,I))});var U=F?void 0:(L?N?f:d:N?S:C)(e);return i(U||e,function(r,i){U&&(r=e[i=r]),o(R,i,t(r,n,P,i,e,I))}),R}},60920:(t,e,n)=>{var r=n(53867),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},59026:(t,e,n)=>{var r=n(18022),i=n(99889)(r);t.exports=i},96681:(t,e,n)=>{var r=n(7786);t.exports=function(t,e,n){for(var i=-1,o=t.length;++i<o;){var s=t[i],a=e(s);if(null!=a&&(void 0===l?a==a&&!r(a):n(a,l)))var l=a,c=s}return c}},78711:(t,e,n)=>{var r=n(59026);t.exports=function(t,e){var n=[];return r(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}},12229:t=>{t.exports=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},56369:(t,e,n)=>{var r=n(94165),i=n(21006);t.exports=function t(e,n,o,s,a){var l=-1,c=e.length;for(o||(o=i),a||(a=[]);++l<c;){var u=e[l];n>0&&o(u)?n>1?t(u,n-1,o,s,a):r(a,u):s||(a[a.length]=u)}return a}},75290:(t,e,n)=>{var r=n(8269)();t.exports=r},18022:(t,e,n)=>{var r=n(75290),i=n(59108);t.exports=function(t,e){return t&&r(t,e,i)}},93436:(t,e,n)=>{var r=n(64667),i=n(82773);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},19215:(t,e,n)=>{var r=n(94165),i=n(81690);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},72802:(t,e,n)=>{var r=n(57333),i=n(21613),o=n(81244),s=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":s&&s in Object(t)?i(t):o(t)}},78354:t=>{t.exports=function(t,e){return t>e}},20731:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},55333:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},2166:(t,e,n)=>{var r=n(12229),i=n(2469),o=n(54299);t.exports=function(t,e,n){return e==e?o(t,e,n):r(t,i,n)}},77090:(t,e,n)=>{var r=n(72802),i=n(27503);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},30696:(t,e,n)=>{var r=n(36863),i=n(27503);t.exports=function t(e,n,o,s,a){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,s,t,a))}},36863:(t,e,n)=>{var r=n(33667),i=n(27667),o=n(64630),s=n(70838),a=n(26663),l=n(81690),c=n(84444),u=n(47679),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,m,y){var v=l(t),b=l(e),_=v?d:a(t),w=b?d:a(e),x=(_=_==h?f:_)==f,C=(w=w==h?f:w)==f,S=_==w;if(S&&c(t)){if(!c(e))return!1;v=!0,x=!1}if(S&&!x)return y||(y=new r),v||u(t)?i(t,e,n,g,m,y):o(t,e,_,n,g,m,y);if(!(1&n)){var T=x&&p.call(t,"__wrapped__"),E=C&&p.call(e,"__wrapped__");if(T||E){var O=T?t.value():t,A=E?e.value():e;return y||(y=new r),m(O,A,n,g,y)}}return!!S&&(y||(y=new r),s(t,e,n,g,m,y))}},63434:(t,e,n)=>{var r=n(26663),i=n(27503);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},88783:(t,e,n)=>{var r=n(33667),i=n(30696);t.exports=function(t,e,n,o){var s=n.length,a=s,l=!o;if(null==t)return!a;for(t=Object(t);s--;){var c=n[s];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++s<a;){var u=(c=n[s])[0],h=t[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in t))return!1}else{var f=new r;if(o)var p=o(h,d,u,t,e,f);if(!(void 0===p?i(d,h,3,o,f):p))return!1}}return!0}},2469:t=>{t.exports=function(t){return t!=t}},43540:(t,e,n)=>{var r=n(55836),i=n(38466),o=n(53867),s=n(51217),a=/^\[object .+?Constructor\]$/,l=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?l:a).test(s(t))}},67495:(t,e,n)=>{var r=n(26663),i=n(27503);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},99390:(t,e,n)=>{var r=n(72802),i=n(8613),o=n(27503),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!s[r(t)]}},5245:(t,e,n)=>{var r=n(69433),i=n(68608),o=n(80290),s=n(81690),a=n(63354);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?i(t[0],t[1]):r(t):a(t)}},92488:(t,e,n)=>{var r=n(58845),i=n(36700),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},50762:(t,e,n)=>{var r=n(53867),i=n(58845),o=n(25618),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},71054:t=>{t.exports=function(t,e){return t<e}},38641:(t,e,n)=>{var r=n(59026),i=n(93406);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,function(t,r,i){o[++n]=e(t,r,i)}),o}},69433:(t,e,n)=>{var r=n(88783),i=n(48834),o=n(63587);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},68608:(t,e,n)=>{var r=n(30696),i=n(58102),o=n(18303),s=n(99743),a=n(45774),l=n(63587),c=n(82773);t.exports=function(t,e){return s(t)&&a(e)?l(c(t),e):function(n){var s=i(n,t);return void 0===s&&s===e?o(n,t):r(e,s,3)}}},9085:(t,e,n)=>{var r=n(33667),i=n(63530),o=n(75290),s=n(23607),a=n(53867),l=n(42970),c=n(45959);t.exports=function t(e,n,u,h,d){e!==n&&o(n,function(o,l){if(d||(d=new r),a(o))s(e,n,l,u,t,h,d);else{var f=h?h(c(e,l),o,l+"",e,n,d):void 0;void 0===f&&(f=o),i(e,l,f)}},l)}},23607:(t,e,n)=>{var r=n(63530),i=n(50694),o=n(96282),s=n(53595),a=n(31563),l=n(2952),c=n(81690),u=n(82027),h=n(84444),d=n(55836),f=n(53867),p=n(82358),g=n(47679),m=n(45959),y=n(31413);t.exports=function(t,e,n,v,b,_,w){var x=m(t,n),C=m(e,n),S=w.get(C);if(S)r(t,n,S);else{var T=_?_(x,C,n+"",t,e,w):void 0,E=void 0===T;if(E){var O=c(C),A=!O&&h(C),P=!O&&!A&&g(C);T=C,O||A||P?c(x)?T=x:u(x)?T=s(x):A?(E=!1,T=i(C,!0)):P?(E=!1,T=o(C,!0)):T=[]:p(C)||l(C)?(T=x,l(x)?T=y(x):f(x)&&!d(x)||(T=a(C))):E=!1}E&&(w.set(C,T),b(T,C,v,_,w),w.delete(C)),r(t,n,T)}}},37977:(t,e,n)=>{var r=n(14992),i=n(93436),o=n(5245),s=n(38641),a=n(28421),l=n(70544),c=n(15379),u=n(80290),h=n(81690);t.exports=function(t,e,n){e=e.length?r(e,function(t){return h(t)?function(e){return i(e,1===t.length?t[0]:t)}:t}):[u];var d=-1;e=r(e,l(o));var f=s(t,function(t,n,i){return{criteria:r(e,function(e){return e(t)}),index:++d,value:t}});return a(f,function(t,e){return c(t,e,n)})}},36737:(t,e,n)=>{var r=n(72897),i=n(18303);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},72897:(t,e,n)=>{var r=n(93436),i=n(32773),o=n(64667);t.exports=function(t,e,n){for(var s=-1,a=e.length,l={};++s<a;){var c=e[s],u=r(t,c);n(u,c)&&i(l,o(c,t),u)}return l}},68840:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},59866:(t,e,n)=>{var r=n(93436);t.exports=function(t){return function(e){return r(e,t)}}},60863:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,r,i,o){for(var s=-1,a=n(e((r-t)/(i||1)),0),l=Array(a);a--;)l[o?a:++s]=t,t+=i;return l}},85105:t=>{t.exports=function(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}},84441:(t,e,n)=>{var r=n(80290),i=n(15529),o=n(39009);t.exports=function(t,e){return o(i(t,e,r),t+"")}},32773:(t,e,n)=>{var r=n(23898),i=n(64667),o=n(20968),s=n(53867),a=n(82773);t.exports=function(t,e,n,l){if(!s(t))return t;for(var c=-1,u=(e=i(e,t)).length,h=u-1,d=t;null!=d&&++c<u;){var f=a(e[c]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return t;if(c!=h){var g=d[f];void 0===(p=l?l(g,f,d):void 0)&&(p=s(g)?g:o(e[c+1])?[]:{})}r(d,f,p),d=d[f]}return t}},99372:(t,e,n)=>{var r=n(45654),i=n(20395),o=n(80290);t.exports=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:o},28421:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},48282:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},68166:(t,e,n)=>{var r=n(57333),i=n(14992),o=n(81690),s=n(7786),a=r?r.prototype:void 0,l=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(s(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},70544:t=>{t.exports=function(t){return function(e){return t(e)}}},83987:(t,e,n)=>{var r=n(48690),i=n(5242),o=n(80679),s=n(13747),a=n(52252),l=n(57673);t.exports=function(t,e,n){var c=-1,u=i,h=t.length,d=!0,f=[],p=f;if(n)d=!1,u=o;else if(h>=200){var g=e?null:a(t);if(g)return l(g);d=!1,u=s,p=new r}else p=e?[]:f;t:for(;++c<h;){var m=t[c],y=e?e(m):m;if(m=n||0!==m?m:0,d&&y==y){for(var v=p.length;v--;)if(p[v]===y)continue t;e&&p.push(y),f.push(m)}else u(p,y,n)||(p!==f&&p.push(y),f.push(m))}return f}},60253:(t,e,n)=>{var r=n(14992);t.exports=function(t,e){return r(e,function(e){return t[e]})}},25687:t=>{t.exports=function(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;)n(s,t[r],r<o?e[r]:void 0);return s}},13747:t=>{t.exports=function(t,e){return t.has(e)}},8727:(t,e,n)=>{var r=n(80290);t.exports=function(t){return"function"==typeof t?t:r}},64667:(t,e,n)=>{var r=n(81690),i=n(99743),o=n(89775),s=n(41233);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(s(t))}},88461:(t,e,n)=>{var r=n(96820);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},50694:(t,e,n)=>{t=n.nmd(t);var r=n(27038),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=a?a(n):new t.constructor(n);return t.copy(r),r}},59757:(t,e,n)=>{var r=n(88461);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},83615:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},42282:(t,e,n)=>{var r=n(57333),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},96282:(t,e,n)=>{var r=n(88461);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},70809:(t,e,n)=>{var r=n(7786);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,o=t==t,s=r(t),a=void 0!==e,l=null===e,c=e==e,u=r(e);if(!l&&!u&&!s&&t>e||s&&a&&c&&!l&&!u||i&&a&&c||!n&&c||!o)return 1;if(!i&&!s&&!u&&t<e||u&&n&&o&&!i&&!s||l&&n&&o||!a&&o||!c)return-1}return 0}},15379:(t,e,n)=>{var r=n(70809);t.exports=function(t,e,n){for(var i=-1,o=t.criteria,s=e.criteria,a=o.length,l=n.length;++i<a;){var c=r(o[i],s[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return t.index-e.index}},53595:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},11694:(t,e,n)=>{var r=n(23898),i=n(92007);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,l=e.length;++a<l;){var c=e[a],u=o?o(n[c],t[c],c,n,t):void 0;void 0===u&&(u=t[c]),s?i(n,c,u):r(n,c,u)}return n}},14746:(t,e,n)=>{var r=n(11694),i=n(10296);t.exports=function(t,e){return r(t,i(t),e)}},78857:(t,e,n)=>{var r=n(11694),i=n(29572);t.exports=function(t,e){return r(t,i(t),e)}},93412:(t,e,n)=>{var r=n(27038);t.exports=r["__core-js_shared__"]},30906:(t,e,n)=>{var r=n(84441),i=n(71100);t.exports=function(t){return r(function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++r<o;){var l=n[r];l&&t(e,l,r,s)}return e})}},99889:(t,e,n)=>{var r=n(93406);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,s=e?o:-1,a=Object(n);(e?s--:++s<o)&&!1!==i(a[s],s,a););return n}}},8269:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[t?a:++i];if(!1===n(o[l],l,o))break}return e}}},44674:(t,e,n)=>{var r=n(5245),i=n(93406),o=n(59108);t.exports=function(t){return function(e,n,s){var a=Object(e);if(!i(e)){var l=r(n,3);e=o(e),n=function(t){return l(a[t],t,a)}}var c=t(e,n,s);return c>-1?a[l?e[c]:c]:void 0}}},28710:(t,e,n)=>{var r=n(60863),i=n(71100),o=n(5152);t.exports=function(t){return function(e,n,s){return s&&"number"!=typeof s&&i(e,n,s)&&(n=s=void 0),e=o(e),void 0===n?(n=e,e=0):n=o(n),s=void 0===s?e<n?1:-1:o(s),r(e,n,s,t)}}},52252:(t,e,n)=>{var r=n(74918),i=n(49122),o=n(57673),s=r&&1/o(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=s},20395:(t,e,n)=>{var r=n(4153),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},27667:(t,e,n)=>{var r=n(48690),i=n(8141),o=n(13747);t.exports=function(t,e,n,s,a,l){var c=1&n,u=t.length,h=e.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(t),f=l.get(e);if(d&&f)return d==e&&f==t;var p=-1,g=!0,m=2&n?new r:void 0;for(l.set(t,e),l.set(e,t);++p<u;){var y=t[p],v=e[p];if(s)var b=c?s(v,y,p,e,t,l):s(y,v,p,t,e,l);if(void 0!==b){if(b)continue;g=!1;break}if(m){if(!i(e,function(t,e){if(!o(m,e)&&(y===t||a(y,t,n,s,l)))return m.push(e)})){g=!1;break}}else if(y!==v&&!a(y,v,n,s,l)){g=!1;break}}return l.delete(t),l.delete(e),g}},64630:(t,e,n)=>{var r=n(57333),i=n(96820),o=n(71166),s=n(27667),a=n(37461),l=n(57673),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;t.exports=function(t,e,n,r,c,h,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var f=a;case"[object Set]":if(f||(f=l),t.size!=e.size&&!(1&r))return!1;var p=d.get(t);if(p)return p==e;r|=2,d.set(t,e);var g=s(f(t),f(e),r,c,h,d);return d.delete(t),g;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},70838:(t,e,n)=>{var r=n(58605),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,a){var l=1&n,c=r(t),u=c.length;if(u!=r(e).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in e:i.call(e,d)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var g=!0;a.set(t,e),a.set(e,t);for(var m=l;++h<u;){var y=t[d=c[h]],v=e[d];if(o)var b=l?o(v,y,d,e,t,a):o(y,v,d,t,e,a);if(!(void 0===b?y===v||s(y,v,n,o,a):b)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var _=t.constructor,w=e.constructor;_==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(g=!1)}return a.delete(t),a.delete(e),g}},10058:(t,e,n)=>{var r=n(94694),i=n(15529),o=n(39009);t.exports=function(t){return o(i(t,void 0,r),t+"")}},61138:t=>{var e="object"==typeof global&&global&&global.Object===Object&&global;t.exports=e},58605:(t,e,n)=>{var r=n(19215),i=n(10296),o=n(59108);t.exports=function(t){return r(t,o,i)}},51675:(t,e,n)=>{var r=n(19215),i=n(29572),o=n(42970);t.exports=function(t){return r(t,o,i)}},85556:(t,e,n)=>{var r=n(36586);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},48834:(t,e,n)=>{var r=n(45774),i=n(59108);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],s=t[o];e[n]=[o,s,r(s)]}return e}},4153:(t,e,n)=>{var r=n(43540),i=n(36825);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},52398:(t,e,n)=>{var r=n(93332)(Object.getPrototypeOf,Object);t.exports=r},21613:(t,e,n)=>{var r=n(57333),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var r=!0}catch(l){}var i=s.call(t);return r&&(e?t[a]=n:delete t[a]),i}},10296:(t,e,n)=>{var r=n(11375),i=n(65336),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;t.exports=s?function(t){return null==t?[]:(t=Object(t),r(s(t),function(e){return o.call(t,e)}))}:i},29572:(t,e,n)=>{var r=n(94165),i=n(52398),o=n(10296),s=n(65336);t.exports=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:s},26663:(t,e,n)=>{var r=n(81235),i=n(39046),o=n(97129),s=n(74918),a=n(54203),l=n(72802),c=n(51217),u="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",g=c(r),m=c(i),y=c(o),v=c(s),b=c(a),_=l;(r&&_(new r(new ArrayBuffer(1)))!=p||i&&_(new i)!=u||o&&_(o.resolve())!=h||s&&_(new s)!=d||a&&_(new a)!=f)&&(_=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return p;case m:return u;case y:return h;case v:return d;case b:return f}return e}),t.exports=_},36825:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},82138:(t,e,n)=>{var r=n(64667),i=n(2952),o=n(81690),s=n(20968),a=n(8613),l=n(82773);t.exports=function(t,e,n){for(var c=-1,u=(e=r(e,t)).length,h=!1;++c<u;){var d=l(e[c]);if(!(h=null!=t&&n(t,d)))break;t=t[d]}return h||++c!=u?h:!!(u=null==t?0:t.length)&&a(u)&&s(d,u)&&(o(t)||i(t))}},407:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},59410:(t,e,n)=>{var r=n(95969);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},21143:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},604:(t,e,n)=>{var r=n(95969),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},80584:(t,e,n)=>{var r=n(95969),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},7792:(t,e,n)=>{var r=n(95969);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},62963:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},32143:(t,e,n)=>{var r=n(88461),i=n(59757),o=n(83615),s=n(42282),a=n(96282);t.exports=function(t,e,n){var l=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new l(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,n);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(t);case"[object RegExp]":return o(t);case"[object Set]":return new l;case"[object Symbol]":return s(t)}}},31563:(t,e,n)=>{var r=n(60920),i=n(52398),o=n(58845);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},21006:(t,e,n)=>{var r=n(57333),i=n(2952),o=n(81690),s=r?r.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(s&&t&&t[s])}},20968:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},71100:(t,e,n)=>{var r=n(71166),i=n(93406),o=n(20968),s=n(53867);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?i(n)&&o(e,n.length):"string"==a&&e in n)&&r(n[e],t)}},99743:(t,e,n)=>{var r=n(81690),i=n(7786),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},36586:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},38466:(t,e,n)=>{var r,i=n(93412),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},58845:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},45774:(t,e,n)=>{var r=n(53867);t.exports=function(t){return t==t&&!r(t)}},63391:t=>{t.exports=function(){this.__data__=[],this.size=0}},68971:(t,e,n)=>{var r=n(15758),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},18858:(t,e,n)=>{var r=n(15758);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},13913:(t,e,n)=>{var r=n(15758);t.exports=function(t){return r(this.__data__,t)>-1}},68944:(t,e,n)=>{var r=n(15758);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},70536:(t,e,n)=>{var r=n(41505),i=n(73545),o=n(39046);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},61502:(t,e,n)=>{var r=n(85556);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},94960:(t,e,n)=>{var r=n(85556);t.exports=function(t){return r(this,t).get(t)}},61539:(t,e,n)=>{var r=n(85556);t.exports=function(t){return r(this,t).has(t)}},34138:(t,e,n)=>{var r=n(85556);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},37461:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},63587:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},43911:(t,e,n)=>{var r=n(97425);t.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},95969:(t,e,n)=>{var r=n(4153)(Object,"create");t.exports=r},36700:(t,e,n)=>{var r=n(93332)(Object.keys,Object);t.exports=r},25618:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},70938:(t,e,n)=>{t=n.nmd(t);var r=n(61138),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,s=o&&o.exports===i&&r.process,a=function(){try{return o&&o.require&&o.require("util").types||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a},81244:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},93332:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},15529:(t,e,n)=>{var r=n(81638),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=i(o.length-e,0),l=Array(a);++s<a;)l[s]=o[e+s];s=-1;for(var c=Array(e+1);++s<e;)c[s]=o[s];return c[e]=n(l),r(t,this,c)}}},27038:(t,e,n)=>{var r=n(61138),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},45959:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},30365:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},58235:t=>{t.exports=function(t){return this.__data__.has(t)}},57673:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},39009:(t,e,n)=>{var r=n(99372),i=n(44094)(r);t.exports=i},44094:t=>{var e=Date.now;t.exports=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},18034:(t,e,n)=>{var r=n(73545);t.exports=function(){this.__data__=new r,this.size=0}},37238:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},75887:t=>{t.exports=function(t){return this.__data__.get(t)}},81450:t=>{t.exports=function(t){return this.__data__.has(t)}},61386:(t,e,n)=>{var r=n(73545),i=n(39046),o=n(93177);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}},54299:t=>{t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},70122:(t,e,n)=>{var r=n(38956),i=n(407),o=n(75154);t.exports=function(t){return i(t)?o(t):r(t)}},89775:(t,e,n)=>{var r=n(43911),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)}),e});t.exports=s},82773:(t,e,n)=>{var r=n(7786);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},51217:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(n){}try{return t+""}catch(n){}}return""}},75154:t=>{var e="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",s="(?:"+e+"|"+n+")?",a="[\\ufe0e\\ufe0f]?",l=a+s+"(?:\\u200d(?:"+[r,i,o].join("|")+")"+a+s+")*",c="(?:"+[r+e+"?",e,i,o,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(n+"(?="+n+")|"+c+l,"g");t.exports=function(t){for(var e=u.lastIndex=0;u.test(t);)++e;return e}},13742:(t,e,n)=>{var r=n(77007);t.exports=function(t){return r(t,4)}},37524:(t,e,n)=>{var r=n(77007);t.exports=function(t){return r(t,5)}},45654:t=>{t.exports=function(t){return function(){return t}}},36726:(t,e,n)=>{var r=n(84441),i=n(71166),o=n(71100),s=n(42970),a=Object.prototype,l=a.hasOwnProperty,c=r(function(t,e){t=Object(t);var n=-1,r=e.length,c=r>2?e[2]:void 0;for(c&&o(e[0],e[1],c)&&(r=1);++n<r;)for(var u=e[n],h=s(u),d=-1,f=h.length;++d<f;){var p=h[d],g=t[p];(void 0===g||i(g,a[p])&&!l.call(t,p))&&(t[p]=u[p])}return t});t.exports=c},33718:(t,e,n)=>{t.exports=n(64733)},71166:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},33834:(t,e,n)=>{var r=n(11375),i=n(78711),o=n(5245),s=n(81690);t.exports=function(t,e){return(s(t)?r:i)(t,o(e,3))}},98990:(t,e,n)=>{var r=n(44674)(n(84857));t.exports=r},84857:(t,e,n)=>{var r=n(12229),i=n(5245),o=n(32781),s=Math.max;t.exports=function(t,e,n){var a=null==t?0:t.length;if(!a)return-1;var l=null==n?0:o(n);return l<0&&(l=s(a+l,0)),r(t,i(e,3),l)}},94694:(t,e,n)=>{var r=n(56369);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},64733:(t,e,n)=>{var r=n(4500),i=n(59026),o=n(8727),s=n(81690);t.exports=function(t,e){return(s(t)?r:i)(t,o(e))}},88577:(t,e,n)=>{var r=n(75290),i=n(8727),o=n(42970);t.exports=function(t,e){return null==t?t:r(t,i(e),o)}},58102:(t,e,n)=>{var r=n(93436);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},32335:(t,e,n)=>{var r=n(20731),i=n(82138);t.exports=function(t,e){return null!=t&&i(t,e,r)}},18303:(t,e,n)=>{var r=n(55333),i=n(82138);t.exports=function(t,e){return null!=t&&i(t,e,r)}},80290:t=>{t.exports=function(t){return t}},2952:(t,e,n)=>{var r=n(77090),i=n(27503),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(t){return i(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},81690:t=>{t.exports=Array.isArray},93406:(t,e,n)=>{var r=n(55836),i=n(8613);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},82027:(t,e,n)=>{var r=n(93406),i=n(27503);t.exports=function(t){return i(t)&&r(t)}},84444:(t,e,n)=>{t=n.nmd(t);var r=n(27038),i=n(61711),o=e&&!e.nodeType&&e,s=o&&t&&!t.nodeType&&t,a=s&&s.exports===o?r.Buffer:void 0;t.exports=(a?a.isBuffer:void 0)||i},12232:(t,e,n)=>{var r=n(92488),i=n(26663),o=n(2952),s=n(81690),a=n(93406),l=n(84444),c=n(58845),u=n(47679),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||u(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!r(t).length;for(var n in t)if(h.call(t,n))return!1;return!0}},55836:(t,e,n)=>{var r=n(72802),i=n(53867);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},8613:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},32e3:(t,e,n)=>{var r=n(63434),i=n(70544),o=n(70938),s=o&&o.isMap,a=s?i(s):r;t.exports=a},53867:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},27503:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},82358:(t,e,n)=>{var r=n(72802),i=n(52398),o=n(27503),s=Function.prototype.toString,a=Object.prototype.hasOwnProperty,l=s.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=a.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==l}},48855:(t,e,n)=>{var r=n(67495),i=n(70544),o=n(70938),s=o&&o.isSet,a=s?i(s):r;t.exports=a},64871:(t,e,n)=>{var r=n(72802),i=n(81690),o=n(27503);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},7786:(t,e,n)=>{var r=n(72802),i=n(27503);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},47679:(t,e,n)=>{var r=n(99390),i=n(70544),o=n(70938),s=o&&o.isTypedArray,a=s?i(s):r;t.exports=a},29569:t=>{t.exports=function(t){return void 0===t}},59108:(t,e,n)=>{var r=n(71890),i=n(92488),o=n(93406);t.exports=function(t){return o(t)?r(t):i(t)}},42970:(t,e,n)=>{var r=n(71890),i=n(50762),o=n(93406);t.exports=function(t){return o(t)?r(t,!0):i(t)}},27842:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},89718:(t,e,n)=>{var r=n(14992),i=n(5245),o=n(38641),s=n(81690);t.exports=function(t,e){return(s(t)?r:o)(t,i(e,3))}},10182:(t,e,n)=>{var r=n(92007),i=n(18022),o=n(5245);t.exports=function(t,e){var n={};return e=o(e,3),i(t,function(t,i,o){r(n,i,e(t,i,o))}),n}},31334:(t,e,n)=>{var r=n(96681),i=n(78354),o=n(80290);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},97425:(t,e,n)=>{var r=n(93177);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},3912:(t,e,n)=>{var r=n(9085),i=n(30906)(function(t,e,n){r(t,e,n)});t.exports=i},41518:(t,e,n)=>{var r=n(96681),i=n(71054),o=n(80290);t.exports=function(t){return t&&t.length?r(t,o,i):void 0}},5353:(t,e,n)=>{var r=n(96681),i=n(5245),o=n(71054);t.exports=function(t,e){return t&&t.length?r(t,i(e,2),o):void 0}},49122:t=>{t.exports=function(){}},30765:(t,e,n)=>{var r=n(27038);t.exports=function(){return r.Date.now()}},31133:(t,e,n)=>{var r=n(36737),i=n(10058)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},63354:(t,e,n)=>{var r=n(68840),i=n(59866),o=n(99743),s=n(82773);t.exports=function(t){return o(t)?r(s(t)):i(t)}},21221:(t,e,n)=>{var r=n(28710)();t.exports=r},86101:(t,e,n)=>{var r=n(89731),i=n(59026),o=n(5245),s=n(85105),a=n(81690);t.exports=function(t,e,n){var l=a(t)?r:s,c=arguments.length<3;return l(t,o(e,4),n,c,i)}},84951:(t,e,n)=>{var r=n(92488),i=n(26663),o=n(93406),s=n(64871),a=n(70122);t.exports=function(t){if(null==t)return 0;if(o(t))return s(t)?a(t):t.length;var e=i(t);return"[object Map]"==e||"[object Set]"==e?t.size:r(t).length}},70280:(t,e,n)=>{var r=n(56369),i=n(37977),o=n(84441),s=n(71100),a=o(function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])});t.exports=a},65336:t=>{t.exports=function(){return[]}},61711:t=>{t.exports=function(){return!1}},5152:(t,e,n)=>{var r=n(45038);t.exports=function(t){return t?1/0===(t=r(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},32781:(t,e,n)=>{var r=n(5152);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},45038:(t,e,n)=>{var r=n(53867),i=n(7786),o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=a.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):s.test(t)?NaN:+t}},31413:(t,e,n)=>{var r=n(11694),i=n(42970);t.exports=function(t){return r(t,i(t))}},41233:(t,e,n)=>{var r=n(68166);t.exports=function(t){return null==t?"":r(t)}},3593:(t,e,n)=>{var r=n(4500),i=n(60920),o=n(18022),s=n(5245),a=n(52398),l=n(81690),c=n(84444),u=n(55836),h=n(53867),d=n(47679);t.exports=function(t,e,n){var f=l(t),p=f||c(t)||d(t);if(e=s(e,4),null==n){var g=t&&t.constructor;n=p?f?new g:[]:h(t)&&u(g)?i(a(t)):{}}return(p?r:o)(t,function(t,r,i){return e(n,t,r,i)}),n}},9728:(t,e,n)=>{var r=n(56369),i=n(84441),o=n(83987),s=n(82027),a=i(function(t){return o(r(t,1,s,!0))});t.exports=a},65927:(t,e,n)=>{var r=n(41233),i=0;t.exports=function(t){var e=++i;return r(t)+e}},23348:(t,e,n)=>{var r=n(60253),i=n(59108);t.exports=function(t){return null==t?[]:r(t,i(t))}},31507:(t,e,n)=>{var r=n(23898),i=n(25687);t.exports=function(t,e){return i(t||[],e||[],r)}},15972:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e,n,i){void 0===n&&(n=!1),r(this,t),this._fn=e,this._once=n,this._thisArg=i,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function o(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var s=function(){function t(){r(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof i))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return o(this,new i(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return o(this,new i(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof i))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=i,e.default=s,t.exports=e.default},7691:t=>{t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n])if("function"!=typeof r)delete e[n];else for(var i=e[n],o=0;o<i.length;++o)i[o].callback===r&&i.splice(o,1);return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var s=i[o];s.callback.apply(s.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},18228:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,o){for(var s,a,l=i(t),c=1;c<arguments.length;c++){for(var u in s=Object(arguments[c]))n.call(s,u)&&(l[u]=s[u]);if(e){a=e(s);for(var h=0;h<a.length;h++)r.call(s,a[h])&&(l[a[h]]=s[a[h]])}}return l}},61966:(t,e,n)=>{"use strict";var r=n(7647),i=n(41708),o=n(7691),s=n(28129),a=n(76492),l=a(),c=a(!0),u=n(84861),h=n(34888),d=n(79699);function f(t,e){var n=(e=e||{}).controller;if(n||(h.canAttach(t)?n=h(t,e):d.canAttach(t)&&(n=d(t,e))),!n)throw new Error("Cannot create panzoom for the current type of dom element");var a=n.getOwner(),f={x:0,y:0},g=!1,b=new u;n.initTransform&&n.initTransform(b);var _,w="function"==typeof e.filterKey?e.filterKey:m,x="number"==typeof e.pinchSpeed?e.pinchSpeed:1,C=e.bounds,S="number"==typeof e.maxZoom?e.maxZoom:Number.POSITIVE_INFINITY,T="number"==typeof e.minZoom?e.minZoom:0,E="number"==typeof e.boundsPadding?e.boundsPadding:.05,O="number"==typeof e.zoomDoubleClickSpeed?e.zoomDoubleClickSpeed:1.75,A=e.beforeWheel||m,P=e.beforeMouseDown||m,k="number"==typeof e.zoomSpeed?e.zoomSpeed:1,M=p(e.transformOrigin),I=e.enableTextSelection?c:l;!function(t){var e=typeof t;if("undefined"!==e&&"boolean"!==e&&!(y(t.left)&&y(t.top)&&y(t.bottom)&&y(t.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}(C),e.autocenter&&function(){var t,e,r=0,i=0,o=K();if(o)r=o.left,i=o.top,t=o.right-o.left,e=o.bottom-o.top;else{var s=a.getBoundingClientRect();t=s.width,e=s.height}var l=n.getBBox();if(0!==l.width&&0!==l.height){var c=Math.min(t/l.width,e/l.height);b.x=-(l.left+l.width/2)*c+t/2+r,b.y=-(l.top+l.height/2)*c+e/2+i,b.scale=c}}();var R,D,N,L,F,B,j,$,U=0,V=!1,Z=!1;F="smoothScroll"in e&&!e.smoothScroll?{start:m,stop:m,cancel:m}:s(function(){return{x:b.x,y:b.y}},function(t,e){St(),J(t,e)},e.smoothScroll);var z=!1;it();var H={dispose:function(){ot()},moveBy:rt,moveTo:J,smoothMoveTo:function(t,e){rt(t-b.x,e-b.y,!0)},centerOn:function(t){var e=t.ownerSVGElement;if(!e)throw new Error("ui element is required to be within the scene");var n=t.getBoundingClientRect(),r=n.left+n.width/2,i=n.top+n.height/2,o=e.getBoundingClientRect();rt(o.width/2-r,o.height/2-i,!0)},zoomTo:Ct,zoomAbs:nt,smoothZoom:wt,smoothZoomAbs:function(t,e,n){var r={scale:b.scale},o={scale:n};F.cancel(),St(),j=i(r,o,{step:function(n){nt(t,e,n.scale)}})},showRectangle:function(t){var e=a.getBoundingClientRect(),n=W(e.width,e.height),r=t.right-t.left,i=t.bottom-t.top;if(!Number.isFinite(r)||!Number.isFinite(i))throw new Error("Invalid rectangle");var o=Math.min(n.x/r,n.y/i);b.x=-(t.left+r/2)*o+n.x/2,b.y=-(t.top+i/2)*o+n.y/2,b.scale=o},pause:function(){ot(),z=!0},resume:function(){z&&(it(),z=!1)},isPaused:function(){return z},getTransform:function(){return b},getMinZoom:function(){return T},setMinZoom:function(t){T=t},getMaxZoom:function(){return S},setMaxZoom:function(t){S=t},getTransformOrigin:function(){return M},setTransformOrigin:function(t){M=p(t)},getZoomSpeed:function(){return k},setZoomSpeed:function(t){if(!Number.isFinite(t))throw new Error("Zoom speed should be a number");k=t}};o(H);var q="number"==typeof e.initialX?e.initialX:b.x,Y="number"==typeof e.initialY?e.initialY:b.y,G="number"==typeof e.initialZoom?e.initialZoom:b.scale;return q==b.x&&Y==b.y&&G==b.Scale||nt(q,Y,G),H;function W(t,e){if(n.getScreenCTM){var r=n.getScreenCTM(),i=r.d,o=r.f;f.x=t*r.a-r.e,f.y=e*i-o}else f.x=t,f.y=e;return f}function J(t,e){b.x=t,b.y=e,Q(),Pt("pan"),tt()}function X(t,e){J(b.x+t,b.y+e)}function Q(){var t=K();if(t){var e,r,i=!1,o={left:(r={x:(e=n.getBBox()).left*b.scale+b.x,y:e.top*b.scale+b.y}).x,top:r.y,right:e.width*b.scale+r.x,bottom:e.height*b.scale+r.y},s=t.left-o.right;return s>0&&(b.x+=s,i=!0),(s=t.right-o.left)<0&&(b.x+=s,i=!0),(s=t.top-o.bottom)>0&&(b.y+=s,i=!0),(s=t.bottom-o.top)<0&&(b.y+=s,i=!0),i}}function K(){if(C){if("boolean"==typeof C){var t=a.getBoundingClientRect(),e=t.width,n=t.height;return{left:e*E,top:n*E,right:e*(1-E),bottom:n*(1-E)}}return C}}function tt(){g=!0,_=window.requestAnimationFrame(st)}function et(t,e,n){if(v(t)||v(e)||v(n))throw new Error("zoom requires valid numbers");var r=b.scale*n;if(r<T){if(b.scale===T)return;n=T/b.scale}if(r>S){if(b.scale===S)return;n=S/b.scale}var i=W(t,e);b.x=i.x-n*(i.x-b.x),b.y=i.y-n*(i.y-b.y),C&&1===E&&1===T?(b.scale*=n,Q()):Q()||(b.scale*=n),Pt("zoom"),tt()}function nt(t,e,n){et(t,e,n/b.scale)}function rt(t,e,n){if(!n)return X(t,e);B&&B.cancel();var r=0,o=0;B=i({x:0,y:0},{x:t,y:e},{step:function(t){X(t.x-r,t.y-o),r=t.x,o=t.y}})}function it(){a.addEventListener("mousedown",pt,{passive:!1}),a.addEventListener("dblclick",ft,{passive:!1}),a.addEventListener("touchstart",lt,{passive:!1}),a.addEventListener("keydown",at,{passive:!1}),r.addWheelListener(a,bt,{passive:!1}),tt()}function ot(){r.removeWheelListener(a,bt),a.removeEventListener("mousedown",pt),a.removeEventListener("keydown",at),a.removeEventListener("dblclick",ft),a.removeEventListener("touchstart",lt),_&&(window.cancelAnimationFrame(_),_=0),F.cancel(),yt(),vt(),I.release(),Ot()}function st(){g&&(g=!1,n.applyTransform(b),Pt("transform"),_=0)}function at(t){var e=0,n=0,r=0;if(38===t.keyCode?n=1:40===t.keyCode?n=-1:37===t.keyCode?e=1:39===t.keyCode?e=-1:189===t.keyCode||109===t.keyCode?r=1:187!==t.keyCode&&107!==t.keyCode||(r=-1),!w(t,e,n,r)){if(e||n){t.preventDefault(),t.stopPropagation();var i=a.getBoundingClientRect();rt(.05*(o=Math.min(i.width,i.height))*e,.05*o*n)}if(r){var o,s=Tt(100*r);Ct((o=M?xt():{x:(l=a.getBoundingClientRect()).width/2,y:l.height/2}).x,o.y,s)}var l}}function lt(t){if(function(t){e.onTouch&&!e.onTouch(t)||(t.stopPropagation(),t.preventDefault())}(t),1===t.touches.length)return function(t){var e=_t(t.touches[0]);R=e;var n=W(e.x,e.y);D=n.x,N=n.y,F.cancel(),ct()}(t);2===t.touches.length&&(L=dt(t.touches[0],t.touches[1]),$=!0,ct())}function ct(){V||(V=!0,document.addEventListener("touchmove",ut),document.addEventListener("touchend",ht),document.addEventListener("touchcancel",ht))}function ut(t){if(1===t.touches.length){t.stopPropagation();var e=W((u=_t(t.touches[0])).x,u.y),n=e.x-D,r=e.y-N;0!==n&&0!==r&&Et(),D=e.x,N=e.y,rt(n,r)}else if(2===t.touches.length){$=!0;var i=t.touches[0],o=t.touches[1],s=dt(i,o),a=1+(s/L-1)*x,l=_t(i),c=_t(o);if(D=(l.x+c.x)/2,N=(l.y+c.y)/2,M){var u=xt();D=u.x,N=u.y}Ct(D,N,a),L=s,t.stopPropagation(),t.preventDefault()}}function ht(t){if(t.touches.length>0){var e=W((n=_t(t.touches[0])).x,n.y);D=e.x,N=e.y}else{var n,r=new Date;r-U<300&&(M?wt((n=xt()).x,n.y,O):wt(R.x,R.y,O)),U=r,Ot(),vt()}}function dt(t,e){var n=t.clientX-e.clientX,r=t.clientY-e.clientY;return Math.sqrt(n*n+r*r)}function ft(t){!function(t){e.onDoubleClick&&!e.onDoubleClick(t)||(t.preventDefault(),t.stopPropagation())}(t);var n=_t(t);M&&(n=xt()),wt(n.x,n.y,O)}function pt(t){if(!P(t)){if(V)return t.stopPropagation(),!1;if(1===t.button&&null!==window.event||0===t.button){F.cancel();var e=_t(t),n=W(e.x,e.y);return D=n.x,N=n.y,document.addEventListener("mousemove",gt),document.addEventListener("mouseup",mt),I.capture(t.target||t.srcElement),!1}}}function gt(t){if(!V){Et();var e=_t(t),n=W(e.x,e.y),r=n.x-D,i=n.y-N;D=n.x,N=n.y,rt(r,i)}}function mt(){I.release(),Ot(),yt()}function yt(){document.removeEventListener("mousemove",gt),document.removeEventListener("mouseup",mt),Z=!1}function vt(){document.removeEventListener("touchmove",ut),document.removeEventListener("touchend",ht),document.removeEventListener("touchcancel",ht),Z=!1,$=!1,V=!1}function bt(t){if(!A(t)){F.cancel();var e=t.deltaY;t.deltaMode>0&&(e*=100);var n=Tt(e);if(1!==n){var r=M?xt():_t(t);Ct(r.x,r.y,n),t.preventDefault()}}}function _t(t){var e=a.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}function wt(t,e,n){var r=b.scale,o={scale:r},s={scale:n*r};F.cancel(),St(),j=i(o,s,{step:function(n){nt(t,e,n.scale)},done:At})}function xt(){var t=a.getBoundingClientRect();return{x:t.width*M.x,y:t.height*M.y}}function Ct(t,e,n){return F.cancel(),St(),et(t,e,n)}function St(){j&&(j.cancel(),j=null)}function Tt(t){return 1-Math.sign(t)*Math.min(.25,Math.abs(k*t/128))}function Et(){Z||(Pt("panstart"),Z=!0,F.start())}function Ot(){Z&&($||F.stop(),Pt("panend"))}function At(){Pt("zoomend")}function Pt(t){H.fire(t,H)}}function p(t){if(t)return"object"==typeof t?(y(t.x)&&y(t.y)||g(t),t):void g()}function g(t){throw console.error(t),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join("\n"))}function m(){}function y(t){return Number.isFinite(t)}function v(t){return Number.isNaN?Number.isNaN(t):t!=t}t.exports=f,function(){if("undefined"!=typeof document){var t=document.getElementsByTagName("script");if(t){for(var e,n=0;n<t.length;++n){var r=t[n];if(r.src&&r.src.match(/\bpanzoom(\.min)?\.js/)){e=r;break}}if(e){var i=e.getAttribute("query");if(i){var o=e.getAttribute("name")||"pz",s=Date.now();!function t(){var n=document.querySelector(i);if(!n)return Date.now()-s<2e3?void setTimeout(t,100):void console.error("Cannot find the panzoom element",o);var r=function(t){for(var e=t.attributes,n={},r=0;r<e.length;++r){var i=a(e[r]);i&&(n[i.name]=i.value)}return n}(e);console.log(r),window[o]=f(n,r)}()}}}}function a(t){if(t.name&&"p"===t.name[0]&&"z"===t.name[1]&&"-"===t.name[2])return{name:t.name.substr(3),value:JSON.parse(t.value)}}}()},76492:t=>{function e(t){return t.stopPropagation(),!1}function n(){}t.exports=function(t){if(t)return{capture:n,release:n};var r,i,o,s=!1;return{capture:function(t){s=!0,i=window.document.onselectstart,o=window.document.ondragstart,window.document.onselectstart=e,(r=t).ondragstart=e},release:function(){s&&(s=!1,window.document.onselectstart=i,r&&(r.ondragstart=o))}}}},79699:t=>{function e(t){return t&&t.parentElement&&t.style}t.exports=function(t,n){if(!e(t))throw new Error("panzoom requires DOM element to be attached to the DOM tree");var r=t.parentElement;return t.scrollTop=0,n.disableKeyboardInteraction||r.setAttribute("tabindex",0),{getBBox:function(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}},getOwner:function(){return r},applyTransform:function(e){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+e.scale+", 0, 0, "+e.scale+", "+e.x+", "+e.y+")"}}},t.exports.canAttach=e},28129:t=>{function e(){return"function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearTimeout}function n(){return"function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,16)}}t.exports=function(t,r,i){"object"!=typeof i&&(i={});var o,s,a,l,c,u,h,d,f,p,g="number"==typeof i.minVelocity?i.minVelocity:5,m="number"==typeof i.amplitude?i.amplitude:.25,y="function"==typeof i.cancelAnimationFrame?i.cancelAnimationFrame:e(),v="function"==typeof i.requestAnimationFrame?i.requestAnimationFrame:n();return{start:function(){o=t(),u=f=l=h=0,s=new Date,y(a),y(p),a=v(b)},stop:function(){y(a),y(p);var e=t();c=e.x,d=e.y,s=Date.now(),(l<-g||l>g)&&(c+=u=m*l),(h<-g||h>g)&&(d+=f=m*h),p=v(_)},cancel:function(){y(a),y(p)}};function b(){var e=Date.now(),n=e-s;s=e;var r=t(),i=r.x-o.x,c=r.y-o.y;o=r;var u=1e3/(1+n);l=.8*i*u+.2*l,h=.8*c*u+.2*h,a=v(b)}function _(){var t=Date.now()-s,e=!1,n=0,i=0;u&&((n=-u*Math.exp(-t/342))>.5||n<-.5?e=!0:n=u=0),f&&((i=-f*Math.exp(-t/342))>.5||i<-.5?e=!0:i=f=0),e&&(r(c+n,d+i),p=v(_))}}},34888:t=>{function e(t){return t&&t.ownerSVGElement&&t.getCTM}t.exports=function(t,n){if(!e(t))throw new Error("svg element is required for svg.panzoom to work");var r=t.ownerSVGElement;if(!r)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");return n.disableKeyboardInteraction||r.setAttribute("tabindex",0),{getBBox:function(){var e=t.getBBox();return{left:e.x,top:e.y,width:e.width,height:e.height}},getScreenCTM:function(){return r.getCTM()||r.getScreenCTM()},getOwner:function(){return r},applyTransform:function(e){t.setAttribute("transform","matrix("+e.scale+" 0 0 "+e.scale+" "+e.x+" "+e.y+")")},initTransform:function(e){var n=t.getCTM();null===n&&(n=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),e.x=n.e,e.y=n.f,e.scale=n.a,r.removeAttributeNS(null,"viewBox")}}},t.exports.canAttach=e},84861:t=>{t.exports=function(){this.x=0,this.y=0,this.scale=1}},89501:t=>{"use strict";t.exports=function(t,e){if(t){for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[(e=e||{}).strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(t,e,r){e&&(i[n.q.name][e]=r)}),i}}},73583:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EndOfStreamError=e.defaultMessages=void 0,e.defaultMessages="End-Of-Stream";class n extends Error{constructor(){super(e.defaultMessages)}}e.EndOfStreamError=n},10646:(t,e,n)=>{"use strict";var r=n(91052).default;Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;const i=n(73583);var o=n(73583);Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return o.EndOfStreamError}});class s{constructor(){this.promise=new Promise((t,e)=>{this.reject=e,this.resolve=t})}}e.StreamReader=class{constructor(t){if(this.s=t,this.endOfStream=!1,this.peekQueue=[],!t.read||!t.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new i.EndOfStreamError)),this.s.once("error",t=>this.reject(t)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}peek(t,e,n){var i=this;return r(function*(){const r=yield i.read(t,e,n);return i.peekQueue.push(t.slice(e,e+r)),r})()}read(t,e,n){var o=this;return r(function*(){if(0===n)return 0;if(0===o.peekQueue.length&&o.endOfStream)throw new i.EndOfStreamError;let r=n,s=0;for(;o.peekQueue.length>0&&r>0;){const n=o.peekQueue.pop(),i=Math.min(n.length,r);n.copy(t,e+s,0,i),s+=i,r-=i,i<n.length&&o.peekQueue.push(n.slice(i))}for(;r>0&&!o.endOfStream;){const n=Math.min(r,1048576),i=yield o._read(t,e+s,n);if(s+=i,i<n)break;r-=i}return s})()}_read(t,e,n){var i=this;return r(function*(){if(i.request)throw new Error("Concurrent read operation?");const r=i.s.read(n);return r?(r.copy(t,e),r.length):(i.request={buffer:t,offset:e,length:n,deferred:new s},i.s.once("readable",()=>{i.tryRead()}),i.request.deferred.promise.then(t=>(i.request=null,t),t=>{throw i.request=null,t}))})()}tryRead(){const t=this.s.read(this.request.length);t?(t.copy(this.request.buffer,this.request.offset),this.request.deferred.resolve(t.length)):this.s.once("readable",()=>{this.tryRead()})}reject(t){this.endOfStream=!0,this.request&&(this.request.deferred.reject(t),this.request=null)}}},98216:t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,n,r,i){r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(n=n||"&");var a=1e3;i&&"number"==typeof i.maxKeys&&(a=i.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var c=0;c<l;++c){var u,h,d,f,p=t[c].replace(s,"%20"),g=p.indexOf(r);g>=0?(u=p.substr(0,g),h=p.substr(g+1)):(u=p,h=""),d=decodeURIComponent(u),f=decodeURIComponent(h),e(o,d)?Array.isArray(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o}},36173:t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,n,r,i){return n=n||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(e(i))+r;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(e(t))}).join(n):o+encodeURIComponent(e(t[i]))}).join(n):i?encodeURIComponent(e(i))+r+encodeURIComponent(e(t)):""}},36284:(t,e,n)=>{"use strict";e.decode=e.parse=n(98216),e.encode=e.stringify=n(36173)},48230:t=>{"use strict";var e={};function n(t,n,r){r||(r=Error);var i=function(t){var e,r;function i(e,r,i){return t.call(this,function(t,e,r){return"string"==typeof n?n:n(t,e,r)}(e,r,i))||this}return r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=t,e[t]=i}function r(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(t){return String(t)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:2===n?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}n("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(t,e,n){var i,o,s,a;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(i="must not be",e=e.replace(/^not /,"")):i="must be",function(t,e,n){return(void 0===n||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}(t," argument"))o="The ".concat(t," ").concat(i," ").concat(r(e,"type"));else{var l=("number"!=typeof a&&(a=0),a+".".length>(s=t).length||-1===s.indexOf(".",a)?"argument":"property");o='The "'.concat(t,'" ').concat(l," ").concat(i," ").concat(r(e,"type"))}return o+". Received type ".concat(typeof n)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.q=e},20942:(t,e,n)=>{"use strict";var r=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=c;var i=n(32833),o=n(37807);n(59879)(c,i);for(var s=r(o.prototype),a=0;a<s.length;a++){var l=s[a];c.prototype[l]||(c.prototype[l]=o.prototype[l])}function c(t){if(!(this instanceof c))return new c(t);i.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||process.nextTick(h,this)}function h(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},90619:(t,e,n)=>{"use strict";t.exports=i;var r=n(55431);function i(t){if(!(this instanceof i))return new i(t);r.call(this,t)}n(59879)(i,r),i.prototype._transform=function(t,e,n){n(null,t)}},32833:(t,e,n)=>{"use strict";var r;t.exports=S,S.ReadableState=C,n(93105);var i,o=function(t,e){return t.listeners(e).length},s=n(75112),a=n(3875).Buffer,l=global.Uint8Array||function(){},c=n(94616);i=c&&c.debuglog?c.debuglog("stream"):function(){};var u,h,d,f=n(39370),p=n(10806),g=n(12903).getHighWaterMark,m=n(48230).q,y=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,b=m.ERR_METHOD_NOT_IMPLEMENTED,_=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(59879)(S,s);var w=p.errorOrDestroy,x=["error","close","destroy","pause","resume"];function C(t,e,i){r=r||n(20942),"boolean"!=typeof i&&(i=e instanceof r),this.objectMode=!!(t=t||{}).objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=n(32519).s),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function S(t){if(r=r||n(20942),!(this instanceof S))return new S(t);this._readableState=new C(t,this,this instanceof r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function T(t,e,n,r,o){i("readableAddChunk",e);var s,c=t._readableState;if(null===e)c.reading=!1,function(t,e){if(i("onEofChunk"),!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.sync?P(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,k(t)))}}(t,c);else if(o||(s=function(t,e){var n,r;return a.isBuffer(r=e)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],e)),n}(c,e)),s)w(t,s);else if(c.objectMode||e&&e.length>0)if("string"==typeof e||c.objectMode||Object.getPrototypeOf(e)===a.prototype||(e=function(t){return a.from(t)}(e)),r)c.endEmitted?w(t,new _):E(t,c,e,!0);else if(c.ended)w(t,new v);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!n?(e=c.decoder.write(e),c.objectMode||0!==e.length?E(t,c,e,!1):M(t,c)):E(t,c,e,!1)}else r||(c.reading=!1,M(t,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function E(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",n)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&P(t)),M(t,e)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(t,e){e(t)},S.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=a.from(t,e),e=""),n=!0),T(this,t,e,!1,n)},S.prototype.unshift=function(t){return T(this,t,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){u||(u=n(32519).s);var e=new u(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var O=1073741824;function A(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=O?t=O:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function P(t){var e=t._readableState;i("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(i("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(k,t))}function k(t){var e=t._readableState;i("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,L(t)}function M(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(I,t,e))}function I(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var n=e.length;if(i("maybeReadMore read 0"),t.read(0),n===e.length)break}e.readingMore=!1}function R(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function D(t){i("readable nexttick read 0"),t.read(0)}function N(t,e){i("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(i("flow",e.flowing);e.flowing&&null!==t.read(););}function F(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):n=e.buffer.consume(t,e.decoder),n);var n}function B(t){var e=t._readableState;i("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(j,e,t))}function j(t,e){if(i("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var n=e._writableState;(!n||n.autoDestroy&&n.finished)&&e.destroy()}}function $(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}S.prototype.read=function(t){i("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return i("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?B(this):P(this),null;if(0===(t=A(t,e))&&e.ended)return 0===e.length&&B(this),null;var r,o=e.needReadable;return i("need readable",o),(0===e.length||e.length-t<e.highWaterMark)&&i("length less than watermark",o=!0),e.ended||e.reading?i("reading or ended",o=!1):o&&(i("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=A(n,e))),null===(r=t>0?F(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&B(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(t){w(this,new b("_read()"))},S.prototype.pipe=function(t,e){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,i("pipe count=%d opts=%j",r.pipesCount,e);var s=e&&!1===e.end||t===process.stdout||t===process.stderr?p:a;function a(){i("onend"),t.end()}r.endEmitted?process.nextTick(s):n.once("end",s),t.on("unpipe",function e(o,s){i("onunpipe"),o===n&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,i("cleanup"),t.removeListener("close",d),t.removeListener("finish",f),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",e),n.removeListener("end",a),n.removeListener("end",p),n.removeListener("data",u),c=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||l())});var l=function(t){return function(){var e=t._readableState;i("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,L(t))}}(n);t.on("drain",l);var c=!1;function u(e){i("ondata");var o=t.write(e);i("dest.write",o),!1===o&&((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==$(r.pipes,t))&&!c&&(i("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function h(e){i("onerror",e),p(),t.removeListener("error",h),0===o(t,"error")&&w(t,e)}function d(){t.removeListener("finish",f),p()}function f(){i("onfinish"),t.removeListener("close",d),p()}function p(){i("unpipe"),n.unpipe(t)}return n.on("data",u),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(n):t._events.error=[n,t._events.error]:t.on(e,n)}(t,"error",h),t.once("close",d),t.once("finish",f),t.emit("pipe",n),r.flowing||(i("pipe resume"),n.resume()),t},S.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var s=$(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},S.prototype.addListener=S.prototype.on=function(t,e){var n=s.prototype.on.call(this,t,e),r=this._readableState;return"data"===t?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===t&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,i("on readable",r.length,r.reading),r.length?P(this):r.reading||process.nextTick(D,this))),n},S.prototype.removeListener=function(t,e){var n=s.prototype.removeListener.call(this,t,e);return"readable"===t&&process.nextTick(R,this),n},S.prototype.removeAllListeners=function(t){var e=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||process.nextTick(R,this),e},S.prototype.resume=function(){var t=this._readableState;return t.flowing||(i("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(N,t,e))}(this,t)),t.paused=!1,this},S.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var o in t.on("end",function(){if(i("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(o){i("wrapped data"),n.decoder&&(o=n.decoder.write(o)),n.objectMode&&null==o||(n.objectMode||o&&o.length)&&(e.push(o)||(r=!0,t.pause()))}),t)void 0===this[o]&&"function"==typeof t[o]&&(this[o]=function(e){return function(){return t[e].apply(t,arguments)}}(o));for(var s=0;s<x.length;s++)t.on(x[s],this.emit.bind(this,x[s]));return this._read=function(e){i("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(19983)),h(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),S._fromList=F,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,e){return void 0===d&&(d=n(3659)),d(S,t,e)})},55431:(t,e,n)=>{"use strict";t.exports=u;var r=n(48230).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,l=n(20942);function c(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(t){if(!(this instanceof u))return new u(t);l.call(this,t),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(e,n){d(t,e,n)})}function d(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new a;if(t._transformState.transforming)throw new s;return t.push(null)}n(59879)(u,l),u.prototype.push=function(t,e){return this._transformState.needTransform=!1,l.prototype.push.call(this,t,e)},u.prototype._transform=function(t,e,n){n(new i("_transform()"))},u.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},u.prototype._destroy=function(t,e){l.prototype._destroy.call(this,t,function(t){e(t)})}},37807:(t,e,n)=>{"use strict";function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var i;t.exports=S,S.WritableState=C;var o,s={deprecate:n(15822)},a=n(75112),l=n(3875).Buffer,c=global.Uint8Array||function(){},u=n(10806),h=n(12903).getHighWaterMark,d=n(48230).q,f=d.ERR_INVALID_ARG_TYPE,p=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_MULTIPLE_CALLBACK,m=d.ERR_STREAM_CANNOT_PIPE,y=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,b=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,w=u.errorOrDestroy;function x(){}function C(t,e,o){i=i||n(20942),"boolean"!=typeof o&&(o=e instanceof i),this.objectMode=!!(t=t||{}).objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=h(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===t.decodeStrings),this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if("function"!=typeof i)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(process.nextTick(i,r),process.nextTick(k,t,e),t._writableState.errorEmitted=!0,w(t,r)):(i(r),t._writableState.errorEmitted=!0,w(t,r),k(t,e))}(t,n,r,e,i);else{var o=A(n)||t.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||O(t,n),r?process.nextTick(E,t,n,o,i):E(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(t){var e=this instanceof(i=i||n(20942));if(!e&&!o.call(S,this))return new S(t);this._writableState=new C(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function T(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function E(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),k(t,e)}function O(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=new Array(e.bufferedRequestCount),o=e.corkedRequestsFree;o.entry=n;for(var s=0,a=!0;n;)i[s]=n,n.isBuf||(a=!1),n=n.next,s+=1;i.allBuffers=a,T(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk;if(T(t,e,!1,e.objectMode?1:l.length,l,n.encoding,n.callback),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function A(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function P(t,e){t._final(function(n){e.pendingcb--,n&&w(t,n),e.prefinished=!0,t.emit("prefinish"),k(t,e)})}function k(t,e){var n=A(e);if(n&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,process.nextTick(P,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return n}n(59879)(S,a),C.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(C.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===S&&t&&t._writableState instanceof C}})):o=function(t){return t instanceof this},S.prototype.pipe=function(){w(this,new m)},S.prototype.write=function(t,e,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(l.isBuffer(r=t)||r instanceof c);return s&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=x),i.ending?function(t,e){var n=new b;w(t,n),process.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i;return null===n?i=new v:"string"==typeof n||e.objectMode||(i=new f("chunk",["string","Buffer"],n)),!i||(w(t,i),process.nextTick(r,i),!1)}(this,i,t,n))&&(i.pendingcb++,o=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,n)),e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else T(t,e,!1,a,r,i,o);return c}(this,i,s,t,e,n)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||O(this,t))},S.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new _(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(t,e,n){n(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(t,e,n){var r=this._writableState;return"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,n){e.ending=!0,k(t,e),n&&(e.finished?process.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),S.prototype.destroy=u.destroy,S.prototype._undestroy=u.undestroy,S.prototype._destroy=function(t,e){e(t)}},19983:(t,e,n)=>{"use strict";var r;function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(6820),s=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(t,e){return{value:t,done:e}}function p(t){var e=t[s];if(null!==e){var n=t[d].read();null!==n&&(t[u]=null,t[s]=null,t[a]=null,e(f(n,!1)))}}function g(t){process.nextTick(p,t)}var m=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((i(r={get stream(){return this[d]},next:function(){var t=this,e=this[l];if(null!==e)return Promise.reject(e);if(this[c])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise(function(e,n){process.nextTick(function(){t[l]?n(t[l]):e(f(void 0,!0))})});var n,r=this[u];if(r)n=new Promise(function(t,e){return function(n,r){t.then(function(){e[c]?n(f(void 0,!0)):e[h](n,r)},r)}}(r,this));else{var i=this[d].read();if(null!==i)return Promise.resolve(f(i,!1));n=new Promise(this[h])}return this[u]=n,n}},Symbol.asyncIterator,function(){return this}),i(r,"return",function(){var t=this;return new Promise(function(e,n){t[d].destroy(null,function(t){t?n(t):e(f(void 0,!0))})})}),r),m);t.exports=function(t){var e,n=Object.create(y,(i(e={},d,{value:t,writable:!0}),i(e,s,{value:null,writable:!0}),i(e,a,{value:null,writable:!0}),i(e,l,{value:null,writable:!0}),i(e,c,{value:t._readableState.endEmitted,writable:!0}),i(e,h,{value:function(t,e){var r=n[d].read();r?(n[u]=null,n[s]=null,n[a]=null,t(f(r,!1))):(n[s]=t,n[a]=e)},writable:!0}),e));return n[u]=null,o(t,function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=n[a];return null!==e&&(n[u]=null,n[s]=null,n[a]=null,e(t)),void(n[l]=t)}var r=n[s];null!==r&&(n[u]=null,n[s]=null,n[a]=null,r(f(void 0,!0))),n[c]=!0}),t.on("readable",g.bind(null,n)),n}},39370:(t,e,n)=>{"use strict";function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=n(3875).Buffer,s=n(52361).inspect,a=s&&s.custom||"inspect";t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e;return(e=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return o.alloc(0);for(var e=o.allocUnsafe(t>>>0),n=this.head,r=0;n;)o.prototype.copy.call(n.data,e,r),r+=n.data.length,n=n.next;return e}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,r=e.data;for(t-=r.length;e=e.next;){var i=e.data,o=t>i.length?i.length:t;if(r+=o===i.length?i:i.slice(0,t),0==(t-=o)){o===i.length?(++n,this.head=e.next?e.next:this.tail=null):(this.head=e,e.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(t){var e=o.allocUnsafe(t),n=this.head,r=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,s=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,s),0==(t-=s)){s===i.length?(++r,this.head=n.next?n.next:this.tail=null):(this.head=n,n.data=i.slice(s));break}++r}return this.length-=r,e}},{key:a,value:function(t,e){return s(this,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e,{depth:0,customInspect:!1}))}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},10806:t=>{"use strict";function e(t,e){r(t,e),n(t)}function n(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}t.exports={destroy:function(t,i){var o=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,t)):process.nextTick(r,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!i&&t?o._writableState?o._writableState.errorEmitted?process.nextTick(n,o):(o._writableState.errorEmitted=!0,process.nextTick(e,o,t)):process.nextTick(e,o,t):i?(process.nextTick(n,o),i(t)):process.nextTick(n,o)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var n=t._readableState,r=t._writableState;n&&n.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}},6820:(t,e,n)=>{"use strict";var r=n(48230).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function t(e,n,o){if("function"==typeof n)return t(e,null,n);n||(n={}),o=function(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r)}}}(o||i);var s=n.readable||!1!==n.readable&&e.readable,a=n.writable||!1!==n.writable&&e.writable,l=function(){e.writable||u()},c=e._writableState&&e._writableState.finished,u=function(){a=!1,c=!0,s||o.call(e)},h=e._readableState&&e._readableState.endEmitted,d=function(){s=!1,h=!0,a||o.call(e)},f=function(t){o.call(e,t)},p=function(){var t;return s&&!h?(e._readableState&&e._readableState.ended||(t=new r),o.call(e,t)):a&&!c?(e._writableState&&e._writableState.ended||(t=new r),o.call(e,t)):void 0},g=function(){e.req.on("finish",u)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",u),e.on("abort",p),e.req?g():e.on("request",g)):a&&!e._writableState&&(e.on("end",l),e.on("close",l)),e.on("end",d),e.on("finish",u),!1!==n.error&&e.on("error",f),e.on("close",p),function(){e.removeListener("complete",u),e.removeListener("abort",p),e.removeListener("request",g),e.req&&e.req.removeListener("finish",u),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("end",d),e.removeListener("error",f),e.removeListener("close",p)}}},3659:t=>{t.exports=function(){throw new Error("Readable.from is not available in the browser")}},36076:(t,e,n)=>{"use strict";var r,i=n(48230).q,o=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function l(t,e,i,o){o=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(o);var a=!1;t.on("close",function(){a=!0}),void 0===r&&(r=n(6820)),r(t,{readable:e,writable:i},function(t){if(t)return o(t);a=!0,o()});var l=!1;return function(e){if(!a&&!l)return l=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new s("pipe"))}}function c(t){t()}function u(t,e){return t.pipe(e)}function h(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=h(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new o("streams");var s=e.map(function(t,n){var o=n<e.length-1;return l(t,o,n>0,function(t){r||(r=t),t&&s.forEach(c),o||(s.forEach(c),i(r))})});return e.reduce(u)}},12903:(t,e,n)=>{"use strict";var r=n(48230).q.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,n,i){var o=function(t,e,n){return null!=t.highWaterMark?t.highWaterMark:e?t[n]:null}(e,i,n);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new r(i?n:"highWaterMark",o);return Math.floor(o)}return t.objectMode?16:16384}}},75112:(t,e,n)=>{t.exports=n(93105).EventEmitter},18300:(t,e,n)=>{(e=t.exports=n(32833)).Stream=e,e.Readable=e,e.Writable=n(37807),e.Duplex=n(20942),e.Transform=n(55431),e.PassThrough=n(90619),e.finished=n(6820),e.pipeline=n(36076)},64738:(t,e,n)=>{"use strict";var r=n(91052).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ReadableWebToNodeStream=void 0;const i=n(18300);e.ReadableWebToNodeStream=class extends i.Readable{constructor(t){super(),this.bytesRead=0,this.released=!1,this.reader=t.getReader()}_read(){var t=this;return r(function*(){if(t.released)return void t.push(null);t.pendingRead=t.reader.read();const e=yield t.pendingRead;delete t.pendingRead,e.done||t.released?t.push(null):(t.bytesRead+=e.value.length,t.push(e.value))})()}waitForReadToComplete(){var t=this;return r(function*(){t.pendingRead&&(yield t.pendingRead)})()}close(){var t=this;return r(function*(){yield t.syncAndRelease()})()}syncAndRelease(){var t=this;return r(function*(){t.released=!0,yield t.waitForReadToComplete(),yield t.reader.releaseLock()})()}}},78320:()=>{var t;!function(t){!function(e){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(t);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===n.Reflect?n.Reflect=t:r=i(n.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,l={create:o?function(){return D(Object.create(null))}:s?function(){return D({__proto__:null})}:function(){return D({})},has:a?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:a?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),u="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,h=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,s)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function s(t,e){return[t,e]}}():Map,d=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new h}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,f=new(u||"function"!=typeof WeakMap?function(){var t=l.create(),n=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&l.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?l.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var e;do{e="@@WeakMap@@"+s()}while(l.has(t,e));return t[e]=!0,e}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:l.create()})}return t[n]}function o(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function s(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function p(t,e,n){var r=f.get(t);if(C(r)){if(!n)return;r=new h,f.set(t,r)}var i=r.get(e);if(C(i)){if(!n)return;i=new h,r.set(e,i)}return i}function g(t,e,n){if(m(t,e,n))return!0;var r=R(e);return!S(r)&&g(t,r,n)}function m(t,e,n){var r=p(e,n,!1);return!C(r)&&!!r.has(t)}function y(t,e,n){if(m(t,e,n))return v(t,e,n);var r=R(e);return S(r)?void 0:y(t,r,n)}function v(t,e,n){var r=p(e,n,!1);if(!C(r))return r.get(t)}function b(t,e,n,r){p(n,r,!0).set(t,e)}function _(t,e){var n=w(t,e),r=R(t);if(null===r)return n;var i=_(r,e);if(i.length<=0)return n;if(n.length<=0)return i;for(var o=new d,s=[],a=0,l=n;a<l.length;a++)o.has(h=l[a])||(o.add(h),s.push(h));for(var c=0,u=i;c<u.length;c++){var h;o.has(h=u[c])||(o.add(h),s.push(h))}return s}function w(t,e){var n=[],r=p(t,e,!1);if(C(r))return n;for(var o=function(t){var e=k(t,i);if(!A(e))throw new TypeError;var n=e.call(t);if(!T(n))throw new TypeError;return n}(r.keys()),s=0;;){var a=M(o);if(!a)return n.length=s,n;var l=a.value;try{n[s]=l}catch(c){try{I(o)}finally{throw c}}s++}}function x(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function C(t){return void 0===t}function S(t){return null===t}function T(t){return"object"==typeof t?null!==t:"function"==typeof t}function E(t){var e=function(t,e){switch(x(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=k(t,r);if(void 0!==i){var o=i.call(t,n);if(T(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(A(n)&&!T(i=n.call(t)))return i;if(A(r=t.valueOf)&&!T(i=r.call(t)))return i}else{var r;if(A(r=t.valueOf)&&!T(i=r.call(t)))return i;var i,o=t.toString;if(A(o)&&!T(i=o.call(t)))return i}throw new TypeError}(t,"default"===n?"number":n)}(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function O(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function A(t){return"function"==typeof t}function P(t){return"function"==typeof t}function k(t,e){var n=t[e];if(null!=n){if(!A(n))throw new TypeError;return n}}function M(t){var e=t.next();return!e.done&&e}function I(t){var e=t.return;e&&e.call(t)}function R(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i||i===t?e:i}function D(t){return t.__=void 0,delete t.__,t}t("decorate",function(t,e,n,r){if(C(n)){if(!O(t))throw new TypeError;if(!P(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!C(r)&&!S(r)){if(!P(r))throw new TypeError;e=r}}return e}(t,e)}if(!O(t))throw new TypeError;if(!T(e))throw new TypeError;if(!T(r)&&!C(r)&&!S(r))throw new TypeError;return S(r)&&(r=void 0),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,n,r);if(!C(o)&&!S(o)){if(!T(o))throw new TypeError;r=o}}return r}(t,e,n=E(n),r)}),t("metadata",function(t,e){return function(n,r){if(!T(n))throw new TypeError;if(!C(r)&&!function(t){switch(x(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;b(t,e,n,r)}}),t("defineMetadata",function(t,e,n,r){if(!T(n))throw new TypeError;return C(r)||(r=E(r)),b(t,e,n,r)}),t("hasMetadata",function(t,e,n){if(!T(e))throw new TypeError;return C(n)||(n=E(n)),g(t,e,n)}),t("hasOwnMetadata",function(t,e,n){if(!T(e))throw new TypeError;return C(n)||(n=E(n)),m(t,e,n)}),t("getMetadata",function(t,e,n){if(!T(e))throw new TypeError;return C(n)||(n=E(n)),y(t,e,n)}),t("getOwnMetadata",function(t,e,n){if(!T(e))throw new TypeError;return C(n)||(n=E(n)),v(t,e,n)}),t("getMetadataKeys",function(t,e){if(!T(t))throw new TypeError;return C(e)||(e=E(e)),_(t,e)}),t("getOwnMetadataKeys",function(t,e){if(!T(t))throw new TypeError;return C(e)||(e=E(e)),w(t,e)}),t("deleteMetadata",function(t,e,n){if(!T(e))throw new TypeError;C(n)||(n=E(n));var r=p(e,n,!1);if(C(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=f.get(e);return i.delete(n),i.size>0||f.delete(e),!0})}(r)}()}(t||(t={}))},26215:(t,e,n)=>{"use strict";n.d(e,{X:()=>o});var r=n(79765),i=n(77971);class o extends r.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.N;return this._value}next(t){super.next(this._value=t)}}},67574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(77393),i=n(29181),o=n(46490),s=n(16554),a=n(54487),l=n(82494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||l.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),l.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){l.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=u(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=u(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function u(t){if(t||(t=l.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},46490:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(82494),i=n(54449);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},21929:(t,e,n)=>{"use strict";n.d(e,{t:()=>y});var r=n(79765),i=n(36465),o=n(16102);const s=new class extends o.v{}(class extends i.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}});var a=n(75319),l=n(77393),c=n(59193),u=n(25917),h=n(67574);class d{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,u.of)(this.value);case"E":return t=this.error,new h.y(e=>e.error(t));case"C":return(0,c.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new d("N",t):d.undefinedValueNotification}static createError(t){return new d("E",void 0,t)}static createComplete(){return d.completeNotification}}d.completeNotification=new d("C"),d.undefinedValueNotification=new d("N",void 0);class f extends l.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(f.dispatch,this.delay,new p(t,this.destination)))}_next(t){this.scheduleMessage(d.createNext(t))}_error(t){this.scheduleMessage(d.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(d.createComplete()),this.unsubscribe()}}class p{constructor(t,e){this.notification=t,this.destination=e}}var g=n(77971),m=n(78858);class y extends r.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new v(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new g.N;if(this.isStopped||this.hasError?o=a.w.EMPTY:(this.observers.push(t),o=new m.W(this,t)),r&&t.add(t=new f(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||s).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class v{constructor(t,e){this.time=t,this.value=e}}},79765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>u});var r=n(67574),i=n(77393),o=n(75319),s=n(77971),a=n(78858),l=n(29181);class c extends i.L{constructor(t){super(t),this.destination=t}}let u=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[l.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends u{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},78858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(75319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},77393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(69105),i=n(46490),o=n(75319),s=n(29181),a=n(82494),l=n(54449);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new u(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new u(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class u extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,l.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,l.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,l.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,l.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},75319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(59796),i=n(81555),o=n(69105);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:c,_subscriptions:u}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,o.m)(c)){n&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){t=h instanceof s?l(h.errors):[h]}}if((0,r.k)(u)){let e=-1,n=u.length;for(;++e<n;){const n=u[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof s?t=t.concat(l(h.errors)):t.push(h)}}}if(t)throw new s(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}function l(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}var c;a.EMPTY=((c=new a).closed=!0,c)},82494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},85345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>l});var r=n(77393),i=n(67574),o=n(87444);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function l(t,e){if(!e.closed)return t instanceof i.y?t.subscribe(e):(0,o.s)(t)(e)}},52441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>l});var r=n(79765),i=n(67574),o=n(75319),s=n(51307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const l=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},59193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(67574);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},94402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(67574),i=n(87444),o=n(75319),s=n(16554),a=n(94087),l=n(20377),c=n(44072),u=n(69489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,u.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[l.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[l.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},56693:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(67574),i=n(55015),o=n(94087);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},66682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(67574),i=n(54869),o=n(63282),s=n(56693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},25917:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(54869),i=n(56693),o=n(94087);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},88002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(77393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},63282:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(19773),i=n(54487);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},19773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(88002),i=n(94402),o=n(85345);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}class l extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},51307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(77393);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},94087:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(67574),i=n(75319);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},36465:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(75319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},16102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},20377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},16554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},29181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},77971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},54449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},54487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},59796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},69489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},69105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},81555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},95639:(t,e,n)=>{"use strict";n.d(e,{b:()=>i});var r=n(67574);function i(t){return!!t&&(t instanceof r.y||"function"==typeof t.lift&&"function"==typeof t.subscribe)}},44072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},54869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},87444:(t,e,n)=>{"use strict";n.d(e,{s:()=>u});var r=n(55015),i=n(54449),o=n(20377),s=n(16554),a=n(69489),l=n(44072),c=n(81555);const u=t=>{if(t&&"function"==typeof t[s.L])return u=t,t=>{const e=u[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,l.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,u}},55015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},32519:(t,e,n)=>{"use strict";var r=n(34374).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=u,this.end=h,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):e}function u(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.s=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},34374:(t,e,n)=>{var r=n(3875),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},61392:(t,e,n)=>{"use strict";var r=n(91052).default;Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractTokenizer=void 0;const i=n(10646);e.AbstractTokenizer=class{constructor(t){this.position=0,this.numBuffer=Buffer.alloc(10),this.fileInfo=t||{}}readToken(t,e){var n=this;return r(function*(){const r=Buffer.alloc(t.len);if((yield n.readBuffer(r,{position:e}))<t.len)throw new i.EndOfStreamError;return t.get(r,0)})()}peekToken(t,e=this.position){var n=this;return r(function*(){const r=Buffer.alloc(t.len);if((yield n.peekBuffer(r,{position:e}))<t.len)throw new i.EndOfStreamError;return t.get(r,0)})()}readNumber(t){var e=this;return r(function*(){if((yield e.readBuffer(e.numBuffer,{length:t.len}))<t.len)throw new i.EndOfStreamError;return t.get(e.numBuffer,0)})()}peekNumber(t){var e=this;return r(function*(){if((yield e.peekBuffer(e.numBuffer,{length:t.len}))<t.len)throw new i.EndOfStreamError;return t.get(e.numBuffer,0)})()}close(){return r(function*(){})()}}},59992:(t,e,n)=>{"use strict";var r=n(91052).default;Object.defineProperty(e,"__esModule",{value:!0}),e.BufferTokenizer=void 0;const i=n(10646);e.BufferTokenizer=class{constructor(t,e){this.buffer=t,this.position=0,this.fileInfo=e||{},this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:t.length}readBuffer(t,e){var n=this;return r(function*(){if(e&&e.position){if(e.position<n.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");n.position=e.position}return n.peekBuffer(t,e).then(t=>(n.position+=t,t))})()}peekBuffer(t,e){var n=this;return r(function*(){let r=0,o=t.length,s=n.position;if(e){if(e.position){if(e.position<n.position)throw new Error("`options.position` can be less than `tokenizer.position`");s=e.position}Number.isInteger(e.length)?o=e.length:o-=e.offset||0,e.offset&&(r=e.offset)}if(0===o)return Promise.resolve(0);s=s||n.position,o||(o=t.length);const a=Math.min(n.buffer.length-s,o);if(e&&e.mayBeLess||!(a<o))return n.buffer.copy(t,r,s,s+a),a;throw new i.EndOfStreamError})()}readToken(t,e){var n=this;return r(function*(){n.position=e||n.position;try{const e=n.peekToken(t,n.position);return n.position+=t.len,e}catch(r){throw n.position+=n.buffer.length-e,r}})()}peekToken(t,e=this.position){var n=this;return r(function*(){if(n.buffer.length-e<t.len)throw new i.EndOfStreamError;return t.get(n.buffer,e)})()}readNumber(t){var e=this;return r(function*(){return e.readToken(t)})()}peekNumber(t){var e=this;return r(function*(){return e.peekToken(t)})()}ignore(t){var e=this;return r(function*(){const n=Math.min(e.buffer.length-e.position,t);return e.position+=n,n})()}close(){return r(function*(){})()}}},44251:(t,e,n)=>{"use strict";var r=n(91052).default;Object.defineProperty(e,"__esModule",{value:!0}),e.ReadStreamTokenizer=void 0;const i=n(61392),o=n(10646);e.ReadStreamTokenizer=class extends i.AbstractTokenizer{constructor(t,e){super(e),this.streamReader=new o.StreamReader(t)}getFileInfo(){var t=this;return r(function*(){return t.fileInfo})()}readBuffer(t,e){var n=this;return r(function*(){let r=0,i=t.length;if(e){if(Number.isInteger(e.length)?i=e.length:i-=e.offset||0,e.position){const r=e.position-n.position;if(r>0)return yield n.ignore(r),n.readBuffer(t,e);if(r<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`")}e.offset&&(r=e.offset)}if(0===i)return 0;const s=yield n.streamReader.read(t,r,i);if(n.position+=s,(!e||!e.mayBeLess)&&s<i)throw new o.EndOfStreamError;return s})()}peekBuffer(t,e){var n=this;return r(function*(){let r,i=0,s=t.length;if(e&&(e.offset&&(i=e.offset),Number.isInteger(e.length)?s=e.length:s-=e.offset||0,e.position)){const o=e.position-n.position;if(o>0){const a=Buffer.alloc(s+o);return r=yield n.peekBuffer(a,{mayBeLess:e.mayBeLess}),a.copy(t,i,o),r-o}if(o<0)throw new Error("Cannot peek from a negative offset in a stream")}try{r=yield n.streamReader.peek(t,i,s)}catch(a){if(e&&e.mayBeLess&&a instanceof o.EndOfStreamError)return 0;throw a}if((!e||!e.mayBeLess)&&r<s)throw new o.EndOfStreamError;return r})()}ignore(t){var e=this;return r(function*(){const n=Math.min(256e3,t),r=Buffer.alloc(n);let i=0;for(;i<t;){const o=t-i,s=yield e.readBuffer(r,{length:Math.min(n,o)});if(s<0)return s;i+=s}return i})()}}},82899:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromBuffer=e.fromStream=e.EndOfStreamError=void 0;const r=n(44251),i=n(59992);var o=n(10646);Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return o.EndOfStreamError}}),e.fromStream=function(t,e){return new r.ReadStreamTokenizer(t,e=e||{})},e.fromBuffer=function(t,e){return new i.BufferTokenizer(t,e)}},67249:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.writeIntBE=e.readIntBE=e.writeUIntBE=e.readUIntBE=e.writeIntLE=e.AnsiStringType=e.StringType=e.BufferType=e.IgnoreType=e.Float80_LE=e.Float80_BE=e.Float64_LE=e.Float64_BE=e.Float32_LE=e.Float32_BE=e.Float16_LE=e.Float16_BE=e.INT64_BE=e.UINT64_BE=e.INT64_LE=e.UINT64_LE=e.INT32_LE=e.INT32_BE=e.INT24_BE=e.INT24_LE=e.INT16_LE=e.INT16_BE=e.INT8=e.UINT32_BE=e.UINT32_LE=e.UINT24_BE=e.UINT24_LE=e.UINT16_BE=e.UINT16_LE=e.UINT8=void 0;const r=n(12658);e.UINT8={len:1,get:(t,e)=>t.readUInt8(e),put:(t,e,n)=>t.writeUInt8(n,e)},e.UINT16_LE={len:2,get:(t,e)=>t.readUInt16LE(e),put:(t,e,n)=>t.writeUInt16LE(n,e)},e.UINT16_BE={len:2,get:(t,e)=>t.readUInt16BE(e),put:(t,e,n)=>t.writeUInt16BE(n,e)},e.UINT24_LE={len:3,get:(t,e)=>t.readUIntLE(e,3),put:(t,e,n)=>t.writeUIntLE(n,e,3)},e.UINT24_BE={len:3,get:(t,e)=>t.readUIntBE(e,3),put:(t,e,n)=>t.writeUIntBE(n,e,3)},e.UINT32_LE={len:4,get:(t,e)=>t.readUInt32LE(e),put:(t,e,n)=>t.writeUInt32LE(n,e)},e.UINT32_BE={len:4,get:(t,e)=>t.readUInt32BE(e),put:(t,e,n)=>t.writeUInt32BE(n,e)},e.INT8={len:1,get:(t,e)=>t.readInt8(e),put:(t,e,n)=>t.writeInt8(n,e)},e.INT16_BE={len:2,get:(t,e)=>t.readInt16BE(e),put:(t,e,n)=>t.writeInt16BE(n,e)},e.INT16_LE={len:2,get:(t,e)=>t.readInt16LE(e),put:(t,e,n)=>t.writeInt16LE(n,e)},e.INT24_LE={len:3,get:(t,e)=>t.readIntLE(e,3),put:(t,e,n)=>t.writeIntLE(n,e,3)},e.INT24_BE={len:3,get:(t,e)=>t.readIntBE(e,3),put:(t,e,n)=>t.writeIntBE(n,e,3)},e.INT32_BE={len:4,get:(t,e)=>t.readInt32BE(e),put:(t,e,n)=>t.writeInt32BE(n,e)},e.INT32_LE={len:4,get:(t,e)=>t.readInt32LE(e),put:(t,e,n)=>t.writeInt32LE(n,e)},e.UINT64_LE={len:8,get(t,e){return function(t,e,n){n>>>=0;let r=t[e>>>=0],i=1,o=0;for(;++o<n&&(i*=256);)r+=t[e+o]*i;return r}(t,e,this.len)},put(t,e,n){return function(t,e,n,r){r>>>=0;let i=1,o=0;for(t[n>>>=0]=255&(e=+e);++o<r&&(i*=256);)t[n+o]=e/i&255;return n+r}(t,n,e,this.len)}},e.INT64_LE={len:8,get(t,e){return function(t,e,n){n>>>=0;let r=t[e>>>=0],i=1,o=0;for(;++o<n&&(i*=256);)r+=t[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*n)),r}(t,e,this.len)},put(t,e,n){return o(t,n,e,this.len)}},e.UINT64_BE={len:8,get(t,e){return s(t,e,this.len)},put(t,e,n){return a(t,n,e,this.len)}},e.INT64_BE={len:8,get(t,e){return l(t,e,this.len)},put(t,e,n){return c(t,n,e,this.len)}},e.Float16_BE={len:2,get(t,e){return r.read(t,e,!1,10,this.len)},put(t,e,n){return r.write(t,n,e,!1,10,this.len),e+this.len}},e.Float16_LE={len:2,get(t,e){return r.read(t,e,!0,10,this.len)},put(t,e,n){return r.write(t,n,e,!0,10,this.len),e+this.len}},e.Float32_BE={len:4,get:(t,e)=>t.readFloatBE(e),put:(t,e,n)=>t.writeFloatBE(n,e)},e.Float32_LE={len:4,get:(t,e)=>t.readFloatLE(e),put:(t,e,n)=>t.writeFloatLE(n,e)},e.Float64_BE={len:8,get:(t,e)=>t.readDoubleBE(e),put:(t,e,n)=>t.writeDoubleBE(n,e)},e.Float64_LE={len:8,get:(t,e)=>t.readDoubleLE(e),put:(t,e,n)=>t.writeDoubleLE(n,e)},e.Float80_BE={len:10,get(t,e){return r.read(t,e,!1,63,this.len)},put(t,e,n){return r.write(t,n,e,!1,63,this.len),e+this.len}},e.Float80_LE={len:10,get(t,e){return r.read(t,e,!0,63,this.len)},put(t,e,n){return r.write(t,n,e,!0,63,this.len),e+this.len}},e.IgnoreType=class{constructor(t){this.len=t}get(t,e){}},e.BufferType=class{constructor(t){this.len=t}get(t,e){return t.slice(e,e+this.len)}},e.StringType=class{constructor(t,e){this.len=t,this.encoding=e}get(t,e){return t.toString(this.encoding,e,e+this.len)}};class i{constructor(t){this.len=t}static decode(t,e,n){let r="";for(let o=e;o<n;++o)r+=i.codePointToString(i.singleByteDecoder(t[o]));return r}static inRange(t,e,n){return e<=t&&t<=n}static codePointToString(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}static singleByteDecoder(t){if(i.inRange(t,0,127))return t;const e=i.windows1252[t-128];if(null===e)throw Error("invaliding encoding");return e}get(t,e=0){return i.decode(t,e,e+this.len)}}function o(t,e,n,r){let i=0,o=1,s=0;for(t[n>>>=0]=255&(e=+e);++i<r&&(o*=256);)e<0&&0===s&&0!==t[n+i-1]&&(s=1),t[n+i]=(e/o>>0)-s&255;return n+r}function s(t,e,n){n>>>=0;let r=t[(e>>>=0)+--n],i=1;for(;n>0&&(i*=256);)r+=t[e+--n]*i;return r}function a(t,e,n,r){let i=(r>>>=0)-1,o=1;for(t[(n>>>=0)+i]=255&(e=+e);--i>=0&&(o*=256);)t[n+i]=e/o&255;return n+r}function l(t,e,n){let r=n>>>=0,i=1,o=t[(e>>>=0)+--r];for(;r>0&&(i*=256);)o+=t[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*n)),o}function c(t,e,n,r){let i=r-1,o=1,s=0;for(t[(n>>>=0)+i]=255&(e=+e);--i>=0&&(o*=256);)e<0&&0===s&&0!==t[n+i+1]&&(s=1),t[n+i]=(e/o>>0)-s&255;return n+r}e.AnsiStringType=i,i.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255],e.writeIntLE=o,e.readUIntBE=s,e.writeUIntBE=a,e.readIntBE=l,e.writeIntBE=c},15343:(t,e,n)=>{var r=n(16658).strict;t.exports=function(t){if(r(t)){var e=Buffer.from(t.buffer);return t.byteLength!==t.buffer.byteLength&&(e=e.slice(t.byteOffset,t.byteOffset+t.byteLength)),e}return Buffer.from(t)}},8876:function(t,e,n){var r;t=n.nmd(t),function(i){"object"==typeof global&&global;var o,s=2147483647,a=36,l=/^xn--/,c=/[^\x20-\x7E]/,u=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,f=String.fromCharCode;function p(t){throw RangeError(h[t])}function g(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function m(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+g((t=t.replace(u,".")).split("."),e).join(".")}function y(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function v(t){return g(t,function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+f(t)}).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function _(t,e,n){var r=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;r+=a)t=d(t/35);return d(r+36*t/(t+38))}function w(t){var e,n,r,i,o,l,c,u,h,f,g,m=[],y=t.length,b=0,w=128,x=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&p("not-basic"),m.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=b,l=1,c=a;i>=y&&p("invalid-input"),((u=(g=t.charCodeAt(i++))-48<10?g-22:g-65<26?g-65:g-97<26?g-97:a)>=a||u>d((s-b)/l))&&p("overflow"),b+=u*l,!(u<(h=c<=x?1:c>=x+26?26:c-x));c+=a)l>d(s/(f=a-h))&&p("overflow"),l*=f;x=_(b-o,e=m.length+1,0==o),d(b/e)>s-w&&p("overflow"),w+=d(b/e),b%=e,m.splice(b++,0,w)}return v(m)}function x(t){var e,n,r,i,o,l,c,u,h,g,m,v,w,x,C,S=[];for(v=(t=y(t)).length,e=128,n=0,o=72,l=0;l<v;++l)(m=t[l])<128&&S.push(f(m));for(r=i=S.length,i&&S.push("-");r<v;){for(c=s,l=0;l<v;++l)(m=t[l])>=e&&m<c&&(c=m);for(c-e>d((s-n)/(w=r+1))&&p("overflow"),n+=(c-e)*w,e=c,l=0;l<v;++l)if((m=t[l])<e&&++n>s&&p("overflow"),m==e){for(u=n,h=a;!(u<(g=h<=o?1:h>=o+26?26:h-o));h+=a)S.push(f(b(g+(C=u-g)%(x=a-g),0))),u=d(C/x);S.push(f(b(u,0))),o=_(n,w,r==i),n=0,++r}++n,++e}return S.join("")}o={version:"1.3.2",ucs2:{decode:y,encode:v},decode:w,encode:x,toASCII:function(t){return m(t,function(t){return c.test(t)?"xn--"+x(t):t})},toUnicode:function(t){return m(t,function(t){return l.test(t)?w(t.slice(4).toLowerCase()):t})}},void 0===(r=(function(){return o}).call(e,n,e,t))||(t.exports=r)}()},38505:(t,e,n)=>{"use strict";var r=n(8876),i=n(43745);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=b,e.resolve=function(t,e){return b(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?b(t,!1,!0).resolveObject(e):e},e.format=function(t){return i.isString(t)&&(t=b(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),h=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(36284);function b(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(a);c[0]=c[0].replace(/\\/g,"/");var b=t=c.join(a);if(b=b.trim(),!n&&1===t.split("#").length){var _=l.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=s.exec(b);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===b.substr(0,2);!C||w&&m[w]||(b=b.substr(2),this.slashes=!0)}if(!m[w]&&(C||w&&!y[w])){for(var S,T,E=-1,O=0;O<d.length;O++)-1!==(A=b.indexOf(d[O]))&&(-1===E||A<E)&&(E=A);for(-1!==(T=-1===E?b.lastIndexOf("@"):b.lastIndexOf("@",E))&&(S=b.slice(0,T),b=b.slice(T+1),this.auth=decodeURIComponent(S)),E=-1,O=0;O<h.length;O++){var A;-1!==(A=b.indexOf(h[O]))&&(-1===E||A<E)&&(E=A)}-1===E&&(E=b.length),this.host=b.slice(0,E),b=b.slice(E),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var k=this.hostname.split(/\./),M=(O=0,k.length);O<M;O++){var I=k[O];if(I&&!I.match(f)){for(var R="",D=0,N=I.length;D<N;D++)I.charCodeAt(D)>127?R+="x":R+=I[D];if(!R.match(f)){var L=k.slice(0,O),F=k.slice(O+1),B=I.match(p);B&&(L.push(B[1]),F.unshift(B[2])),F.length&&(b="/"+F.join(".")+b),this.hostname=L.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),P||(this.hostname=r.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[x])for(O=0,M=u.length;O<M;O++){var j=u[O];if(-1!==b.indexOf(j)){var $=encodeURIComponent(j);$===j&&($=escape(j)),b=b.split(j).join($)}}var U=b.indexOf("#");-1!==U&&(this.hash=b.substr(U),b=b.slice(0,U));var V=b.indexOf("?");return-1!==V?(this.search=b.substr(V),this.query=b.substr(V+1),e&&(this.query=v.parse(this.query)),b=b.slice(0,V)):e&&(this.search="",this.query={}),b&&(this.pathname=b),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(b(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];n[a]=this[a]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(n[u]=t[u])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!y[t.protocol]){for(var h=Object.keys(t),d=0;d<h.length;d++){var f=h[d];n[f]=t[f]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}return n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,(n.pathname||n.search)&&(n.path=(n.pathname||"")+(n.search||"")),n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=v||g||n.host&&t.pathname,_=b,w=n.pathname&&n.pathname.split("/")||[],x=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(x&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===w[0])),v)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search))return x&&(n.hostname=n.host=w.shift(),(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())),n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var C=w.slice(-1)[0],S=(n.host||t.host||w.length>1)&&("."===C||".."===C)||""===C,T=0,E=w.length;E>=0;E--)"."===(C=w[E])?w.splice(E,1):".."===C?(w.splice(E,1),T++):T&&(w.splice(E,1),T--);if(!b&&!_)for(;T--;T)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var O,A=""===w[0]||w[0]&&"/"===w[0].charAt(0);return x&&(n.hostname=n.host=A?"":w.length?w.shift():"",(O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=O.shift(),n.host=n.hostname=O.shift())),(b=b||n.host&&w.length)&&!A&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},43745:t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},15822:t=>{function e(t){try{if(!global.localStorage)return!1}catch(n){return!1}var e=global.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,n){if(e("noDeprecation"))return t;var r=!1;return function(){if(!r){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return t.apply(this,arguments)}}},73934:t=>{t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},20826:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},71732:(t,e,n)=>{var r=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,o=i.length,a=String(t).replace(r,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(e){return"[Circular]"}default:return t}}),l=i[n];n<o;l=i[++n])p(l)||!b(l)?a+=" "+l:a+=" "+s(l);return a},e.deprecate=function(t,n){if(y(global.process))return function(){return e.deprecate(t,n).apply(this,arguments)};if(!0===process.noDeprecation)return t;var r=!1;return function(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return t.apply(this,arguments)}};var i,o={};function s(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&e._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,t,r.depth)}function a(t,e){var n=s.styles[e];return n?"\x1b["+s.colors[n][0]+"m"+t+"\x1b["+s.colors[n][1]+"m":t}function l(t,e){return t}function c(t,n,r){if(t.customInspect&&n&&x(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return m(i)||(i=c(t,i,r)),i}var o=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):f(e)?t.stylize(""+e,"boolean"):p(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var s=Object.keys(n),a=function(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),w(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(n);if(0===s.length){if(x(n))return t.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(v(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return t.stylize(Date.prototype.toString.call(n),"date");if(w(n))return u(n)}var l,b="",C=!1,S=["{","}"];return d(n)&&(C=!0,S=["[","]"]),x(n)&&(b=" [Function"+(n.name?": "+n.name:"")+"]"),v(n)&&(b=" "+RegExp.prototype.toString.call(n)),_(n)&&(b=" "+Date.prototype.toUTCString.call(n)),w(n)&&(b=" "+u(n)),0!==s.length||C&&0!=n.length?r<0?v(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=C?function(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)O(e,String(s))?o.push(h(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}(t,n,r,a,s):s.map(function(e){return h(t,n,r,a,e,C)}),t.seen.pop(),function(t,e,n){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(l,b,S)):S[0]+b+S[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i,o){var s,a,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?a=t.stylize(l.set?"[Getter/Setter]":"[Getter]","special"):l.set&&(a=t.stylize("[Setter]","special")),O(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(l.value)<0?(a=p(n)?c(t,l.value,null):c(t,l.value,n-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),y(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function d(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function p(t){return null===t}function g(t){return"number"==typeof t}function m(t){return"string"==typeof t}function y(t){return void 0===t}function v(t){return b(t)&&"[object RegExp]"===C(t)}function b(t){return"object"==typeof t&&null!==t}function _(t){return b(t)&&"[object Date]"===C(t)}function w(t){return b(t)&&("[object Error]"===C(t)||t instanceof Error)}function x(t){return"function"==typeof t}function C(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(y(i)&&(i=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(i)){var n=process.pid;o[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else o[t]=function(){};return o[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=f,e.isNull=p,e.isNullOrUndefined=function(t){return null==t},e.isNumber=g,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=v,e.isObject=b,e.isDate=_,e.isError=w,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(20826);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],e].join(" ")}function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",E(),e.format.apply(e,arguments))},e.inherits=n(73934),e._extend=function(t,e){if(!e||!b(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}},7647:t=>{function e(t,e,n){t.addEventListener("wheel",e,n)}t.exports=e,t.exports.addWheelListener=e,t.exports.removeWheelListener=function(t,e,n){t.removeEventListener("wheel",e,n)}},65088:(t,e,n)=>{"use strict";var r=n(33018);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:l,token:t,providedIn:"platform"}),t})();function l(){return(0,r.LFG)(u)}const c=new r.OlP("Location Initialized");let u=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new u((0,r.LFG)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(s).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:x,token:t,providedIn:"root"}),t})();function x(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function C(t){return t.replace(/\/index.html$/,"")}var S=(()=>((S=S||{})[S.Decimal=0]="Decimal",S[S.Percent=1]="Percent",S[S.Currency=2]="Currency",S[S.Scientific=3]="Scientific",S))(),T=(()=>((T=T||{})[T.Zero=0]="Zero",T[T.One=1]="One",T[T.Two=2]="Two",T[T.Few=3]="Few",T[T.Many=4]="Many",T[T.Other=5]="Other",T))(),E=(()=>((E=E||{})[E.Format=0]="Format",E[E.Standalone=1]="Standalone",E))(),O=(()=>((O=O||{})[O.Narrow=0]="Narrow",O[O.Abbreviated=1]="Abbreviated",O[O.Wide=2]="Wide",O[O.Short=3]="Short",O))(),A=(()=>((A=A||{})[A.Short=0]="Short",A[A.Medium=1]="Medium",A[A.Long=2]="Long",A[A.Full=3]="Full",A))(),P=(()=>((P=P||{})[P.Decimal=0]="Decimal",P[P.Group=1]="Group",P[P.List=2]="List",P[P.PercentSign=3]="PercentSign",P[P.PlusSign=4]="PlusSign",P[P.MinusSign=5]="MinusSign",P[P.Exponential=6]="Exponential",P[P.SuperscriptingExponent=7]="SuperscriptingExponent",P[P.PerMille=8]="PerMille",P[P[1/0]=9]="Infinity",P[P.NaN=10]="NaN",P[P.TimeSeparator=11]="TimeSeparator",P[P.CurrencyDecimal=12]="CurrencyDecimal",P[P.CurrencyGroup=13]="CurrencyGroup",P))();function k(t,e){return L((0,r.cg1)(t)[r.wAp.DateFormat],e)}function M(t,e){return L((0,r.cg1)(t)[r.wAp.TimeFormat],e)}function I(t,e){return L((0,r.cg1)(t)[r.wAp.DateTimeFormat],e)}function R(t,e){const n=(0,r.cg1)(t),i=n[r.wAp.NumberSymbols][e];if(void 0===i){if(e===P.CurrencyDecimal)return n[r.wAp.NumberSymbols][P.Decimal];if(e===P.CurrencyGroup)return n[r.wAp.NumberSymbols][P.Group]}return i}const D=r.kL8;function N(t){if(!t[r.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[r.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function L(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function F(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const B=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,j={},$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var U=(()=>((U=U||{})[U.Short=0]="Short",U[U.ShortGMT=1]="ShortGMT",U[U.Long=2]="Long",U[U.Extended=3]="Extended",U))(),V=(()=>((V=V||{})[V.FullYear=0]="FullYear",V[V.Month=1]="Month",V[V.Date=2]="Date",V[V.Hours=3]="Hours",V[V.Minutes=4]="Minutes",V[V.Seconds=5]="Seconds",V[V.FractionalSeconds=6]="FractionalSeconds",V[V.Day=7]="Day",V))(),Z=(()=>((Z=Z||{})[Z.DayPeriods=0]="DayPeriods",Z[Z.Days=1]="Days",Z[Z.Months=2]="Months",Z[Z.Eras=3]="Eras",Z))();function z(t,e,n,r){let i=function(t){if(rt(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,r=1]=t.split("-").map(t=>+t);return H(e,n-1,r)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(B))return function(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,l=Number(t[6]||0),c=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return o.call(e,s,a,l,c),e}(n)}const e=new Date(t);if(!rt(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=q(n,e)||e;let o,s=[];for(;e;){if(o=$.exec(e),!o){s.push(e);break}{s=s.concat(o.slice(1));const t=s.pop();if(!t)break;e=t}}let a=i.getTimezoneOffset();r&&(a=nt(r,a),i=function(t,e,n){const r=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(nt(e,r)-r))}(i,r));let l="";return s.forEach(t=>{const e=function(t){if(et[t])return et[t];let e;switch(t){case"G":case"GG":case"GGG":e=J(Z.Eras,O.Abbreviated);break;case"GGGG":e=J(Z.Eras,O.Wide);break;case"GGGGG":e=J(Z.Eras,O.Narrow);break;case"y":e=W(V.FullYear,1,0,!1,!0);break;case"yy":e=W(V.FullYear,2,0,!0,!0);break;case"yyy":e=W(V.FullYear,3,0,!1,!0);break;case"yyyy":e=W(V.FullYear,4,0,!1,!0);break;case"Y":e=tt(1);break;case"YY":e=tt(2,!0);break;case"YYY":e=tt(3);break;case"YYYY":e=tt(4);break;case"M":case"L":e=W(V.Month,1,1);break;case"MM":case"LL":e=W(V.Month,2,1);break;case"MMM":e=J(Z.Months,O.Abbreviated);break;case"MMMM":e=J(Z.Months,O.Wide);break;case"MMMMM":e=J(Z.Months,O.Narrow);break;case"LLL":e=J(Z.Months,O.Abbreviated,E.Standalone);break;case"LLLL":e=J(Z.Months,O.Wide,E.Standalone);break;case"LLLLL":e=J(Z.Months,O.Narrow,E.Standalone);break;case"w":e=K(1);break;case"ww":e=K(2);break;case"W":e=K(1,!0);break;case"d":e=W(V.Date,1);break;case"dd":e=W(V.Date,2);break;case"c":case"cc":e=W(V.Day,1);break;case"ccc":e=J(Z.Days,O.Abbreviated,E.Standalone);break;case"cccc":e=J(Z.Days,O.Wide,E.Standalone);break;case"ccccc":e=J(Z.Days,O.Narrow,E.Standalone);break;case"cccccc":e=J(Z.Days,O.Short,E.Standalone);break;case"E":case"EE":case"EEE":e=J(Z.Days,O.Abbreviated);break;case"EEEE":e=J(Z.Days,O.Wide);break;case"EEEEE":e=J(Z.Days,O.Narrow);break;case"EEEEEE":e=J(Z.Days,O.Short);break;case"a":case"aa":case"aaa":e=J(Z.DayPeriods,O.Abbreviated);break;case"aaaa":e=J(Z.DayPeriods,O.Wide);break;case"aaaaa":e=J(Z.DayPeriods,O.Narrow);break;case"b":case"bb":case"bbb":e=J(Z.DayPeriods,O.Abbreviated,E.Standalone,!0);break;case"bbbb":e=J(Z.DayPeriods,O.Wide,E.Standalone,!0);break;case"bbbbb":e=J(Z.DayPeriods,O.Narrow,E.Standalone,!0);break;case"B":case"BB":case"BBB":e=J(Z.DayPeriods,O.Abbreviated,E.Format,!0);break;case"BBBB":e=J(Z.DayPeriods,O.Wide,E.Format,!0);break;case"BBBBB":e=J(Z.DayPeriods,O.Narrow,E.Format,!0);break;case"h":e=W(V.Hours,1,-12);break;case"hh":e=W(V.Hours,2,-12);break;case"H":e=W(V.Hours,1);break;case"HH":e=W(V.Hours,2);break;case"m":e=W(V.Minutes,1);break;case"mm":e=W(V.Minutes,2);break;case"s":e=W(V.Seconds,1);break;case"ss":e=W(V.Seconds,2);break;case"S":e=W(V.FractionalSeconds,1);break;case"SS":e=W(V.FractionalSeconds,2);break;case"SSS":e=W(V.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=X(U.Short);break;case"ZZZZZ":e=X(U.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=X(U.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=X(U.Long);break;default:return null}return et[t]=e,e}(t);l+=e?e(i,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function H(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function q(t,e){const n=function(t){return(0,r.cg1)(t)[r.wAp.LocaleId]}(t);if(j[n]=j[n]||{},j[n][e])return j[n][e];let i="";switch(e){case"shortDate":i=k(t,A.Short);break;case"mediumDate":i=k(t,A.Medium);break;case"longDate":i=k(t,A.Long);break;case"fullDate":i=k(t,A.Full);break;case"shortTime":i=M(t,A.Short);break;case"mediumTime":i=M(t,A.Medium);break;case"longTime":i=M(t,A.Long);break;case"fullTime":i=M(t,A.Full);break;case"short":const e=q(t,"shortTime"),n=q(t,"shortDate");i=Y(I(t,A.Short),[e,n]);break;case"medium":const r=q(t,"mediumTime"),o=q(t,"mediumDate");i=Y(I(t,A.Medium),[r,o]);break;case"long":const s=q(t,"longTime"),a=q(t,"longDate");i=Y(I(t,A.Long),[s,a]);break;case"full":const l=q(t,"fullTime"),c=q(t,"fullDate");i=Y(I(t,A.Full),[l,c])}return i&&(j[n][e]=i),i}function Y(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function G(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.substr(s.length-e)),o+s}function W(t,e,n=0,r=!1,i=!1){return function(o,s){let a=function(t,e){switch(t){case V.FullYear:return e.getFullYear();case V.Month:return e.getMonth();case V.Date:return e.getDate();case V.Hours:return e.getHours();case V.Minutes:return e.getMinutes();case V.Seconds:return e.getSeconds();case V.FractionalSeconds:return e.getMilliseconds();case V.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,o);if((n>0||a>-n)&&(a+=n),t===V.Hours)0===a&&-12===n&&(a=12);else if(t===V.FractionalSeconds)return l=e,G(a,3).substr(0,l);var l;const c=R(s,P.MinusSign);return G(a,e,c,r,i)}}function J(t,e,n=E.Format,i=!1){return function(o,s){return function(t,e,n,i,o,s){switch(n){case Z.Months:return function(t,e,n){const i=(0,r.cg1)(t),o=L([i[r.wAp.MonthsFormat],i[r.wAp.MonthsStandalone]],e);return L(o,n)}(e,o,i)[t.getMonth()];case Z.Days:return function(t,e,n){const i=(0,r.cg1)(t),o=L([i[r.wAp.DaysFormat],i[r.wAp.DaysStandalone]],e);return L(o,n)}(e,o,i)[t.getDay()];case Z.DayPeriods:const a=t.getHours(),l=t.getMinutes();if(s){const t=function(t){const e=(0,r.cg1)(t);return N(e),(e[r.wAp.ExtraData][2]||[]).map(t=>"string"==typeof t?F(t):[F(t[0]),F(t[1])])}(e),n=function(t,e,n){const i=(0,r.cg1)(t);N(i);const o=L([i[r.wAp.ExtraData][0],i[r.wAp.ExtraData][1]],e)||[];return L(o,n)||[]}(e,o,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,r=a>=e.hours&&l>=e.minutes,i=a<n.hours||a===n.hours&&l<n.minutes;if(e.hours<n.hours){if(r&&i)return!0}else if(r||i)return!0}else if(t.hours===a&&t.minutes===l)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=(0,r.cg1)(t),o=L([i[r.wAp.DayPeriodsFormat],i[r.wAp.DayPeriodsStandalone]],e);return L(o,n)}(e,o,i)[a<12?0:1];case Z.Eras:return function(t,e){return L((0,r.cg1)(t)[r.wAp.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(o,s,t,e,n,i)}}function X(t){return function(e,n,r){const i=-1*r,o=R(n,P.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case U.Short:return(i>=0?"+":"")+G(s,2,o)+G(Math.abs(i%60),2,o);case U.ShortGMT:return"GMT"+(i>=0?"+":"")+G(s,1,o);case U.Long:return"GMT"+(i>=0?"+":"")+G(s,2,o)+":"+G(Math.abs(i%60),2,o);case U.Extended:return 0===r?"Z":(i>=0?"+":"")+G(s,2,o)+":"+G(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}function Q(t){return H(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function K(t,e=!1){return function(n,r){let i;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();i=1+Math.floor((e+t)/7)}else{const t=Q(n),e=function(t){const e=H(t,0,1).getDay();return H(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),r=t.getTime()-e.getTime();i=1+Math.round(r/6048e5)}return G(i,t,R(r,P.MinusSign))}}function tt(t,e=!1){return function(n,r){return G(Q(n).getFullYear(),t,R(r,P.MinusSign),e)}}const et={};function nt(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function rt(t){return t instanceof Date&&!isNaN(t.valueOf())}const it=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ot=".",st="0";function at(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class lt{}let ct=(()=>{class t extends lt{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(D(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class ut{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ht=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Cm){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new ut(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new dt(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new dt(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class dt{constructor(t,e){this.record=t,this.view=e}}let ft=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new pt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gt("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gt("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class pt{constructor(){this.$implicit=null,this.ngIf=null}}function gt(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}class mt{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let yt=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),vt=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new mt(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(yt,9))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),bt=(()=>{class t{constructor(t,e,n){n._addDefault(new mt(t,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(yt,9))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngSwitchDefault",""]]}),t})(),_t=(()=>{class t{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(t){if(t.ngTemplateOutlet){const t=this._viewContainerRef;this._viewRef&&t.remove(t.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?t.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[r.TTD]}),t})();function wt(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${(0,r.AaK)(t)}'`)}class xt{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Ct{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const St=new Ct,Tt=new xt;let Et=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if((0,r.QGY)(e))return St;if((0,r.F4k)(e))return Tt;throw wt(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO,16))},t.\u0275pipe=r.Yjl({name:"async",type:t,pure:!1}),t})(),Ot=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",r,i){if(null==e||""===e||e!=e)return null;try{return z(e,n,i||this.locale,r)}catch(o){throw wt(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.soG,16))},t.\u0275pipe=r.Yjl({name:"date",type:t,pure:!0}),t})(),At=(()=>{class t{constructor(t){this.differs=t,this.keyValues=[]}transform(t,e=Pt){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const n=this.differ.diff(t);return n&&(this.keyValues=[],n.forEachItem(t=>{this.keyValues.push({key:t.key,value:t.currentValue})}),this.keyValues.sort(e)),this.keyValues}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.aQg,16))},t.\u0275pipe=r.Yjl({name:"keyvalue",type:t,pure:!1}),t})();function Pt(t,e){const n=t.key,r=e.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;const i=String(n),o=String(r);return i==o?0:i<o?-1:1}let kt=(()=>{class t{constructor(t){this._locale=t}transform(e,n,i){if(!function(t){return!(null==t||""===t||t!=t)}(e))return null;i=i||this._locale;try{return function(t,e,n){return function(t,e,n,r,i,o,s=!1){let a="",l=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf(ot))>-1&&(s=s.replace(ot,"")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;s.charAt(r)===st;r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;s.charAt(o)===st;)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let u=e.minInt,h=e.minFrac,d=e.maxFrac;if(o){const t=o.match(it);if(null===t)throw new Error(`${o} is not a valid digit info`);const e=t[1],n=t[3],r=t[5];null!=e&&(u=at(e)),null!=n&&(h=at(n)),null!=r?d=at(r):null!=n&&h>d&&(d=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let l=0!==o;const c=e+t.integerLen,u=r.reduceRight(function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,l&&(0===r[n]&&n>=c?r.pop():l=!1),e>=10?1:0},0);u&&(r.unshift(u),t.integerLen++)}(c,h,d);let f=c.digits,p=c.integerLen;const g=c.exponent;let m=[];for(l=f.every(t=>!t);p<u;p++)f.unshift(0);for(;p<0;p++)f.unshift(0);p>0?m=f.splice(p,f.length):(m=f,f=[0]);const y=[];for(f.length>=e.lgSize&&y.unshift(f.splice(-e.lgSize,f.length).join(""));f.length>e.gSize;)y.unshift(f.splice(-e.gSize,f.length).join(""));f.length&&y.unshift(f.join("")),a=y.join(R(n,r)),m.length&&(a+=R(n,i)+m.join("")),g&&(a+=R(n,P.Exponential)+"+"+g)}else a=R(n,P.Infinity);return a=t<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(ot)?i.split(ot):[i.substring(0,i.lastIndexOf(st)+1),i.substring(i.lastIndexOf(st)+1)],a=s[0],l=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let u=0;u<l.length;u++){const t=l.charAt(u);t===st?n.minFrac=n.maxFrac=u+1:"#"===t?n.maxFrac=u+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return(0,r.cg1)(t)[r.wAp.NumberFormats][e]}(e,S.Decimal),R(e,P.MinusSign)),e,P.Group,P.Decimal,n)}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(`${t} is not a number`);return t}(e),i,n)}catch(o){throw wt(t,o.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.soG,16))},t.\u0275pipe=r.Yjl({name:"number",type:t,pure:!0}),t})(),Mt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:lt,useClass:ct}]}),t})(),It=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new Rt((0,r.LFG)(s),window)}),t})();class Rt{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Dt(this.window.history)||Dt(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Cm){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Cm){return!1}}}function Dt(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Nt extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new Nt,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Ft=Ft||document.querySelector("base"),Ft?Ft.getAttribute("href"):null);return null==e?null:function(t){Lt=Lt||document.createElement("a"),Lt.setAttribute("href",t);const e=Lt.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Ft=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let Lt,Ft=null;const Bt=new r.OlP("TRANSITION_ID"),jt=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Bt,s,r.zs3],multi:!0}];class $t{static init(){(0,r.VLi)(new $t)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Ut=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Vt=new r.OlP("EventManagerPlugins");let Zt=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Vt),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class zt{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Ht=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),qt=(()=>{class t extends Ht{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Yt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Yt))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Yt(t){o().remove(t)}const Gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Wt=/%COMP%/g;function Jt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Jt(t,i,n):(i=i.replace(Wt,t),n.push(i))}return n}function Xt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Kt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new te(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new ee(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Jt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Zt),r.LFG(qt),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Kt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(Gt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=Gt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Gt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Xt(n)):this.eventManager.addEventListener(t,e,Xt(n))}}class te extends Kt{constructor(t,e,n,r){super(t),this.component=n;const i=Jt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Wt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Wt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ee extends Kt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Jt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ne=(()=>{class t extends zt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const re=["alt","control","meta","shift"],ie={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oe={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},se={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ae=(()=>{class t extends zt{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(re.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&oe.hasOwnProperty(e)&&(e=oe[e]))}return ie[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),re.forEach(r=>{r!=n&&(0,se[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),le=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(ue)},token:t,providedIn:"root"}),t})();function ce(t){return new ue(t.get(s))}let ue=(()=>{class t extends le{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.q3G.NONE:return e;case r.q3G.HTML:return(0,r.qzn)(e,"HTML")?(0,r.z3N)(e):(0,r.EiD)(this._doc,String(e)).toString();case r.q3G.STYLE:return(0,r.qzn)(e,"Style")?(0,r.z3N)(e):e;case r.q3G.SCRIPT:if((0,r.qzn)(e,"Script"))return(0,r.z3N)(e);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(e),(0,r.qzn)(e,"URL")?(0,r.z3N)(e):(0,r.mCW)(String(e));case r.q3G.RESOURCE_URL:if((0,r.qzn)(e,"ResourceURL"))return(0,r.z3N)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,r.JVY)(t)}bypassSecurityTrustStyle(t){return(0,r.L6k)(t)}bypassSecurityTrustScript(t){return(0,r.eBb)(t)}bypassSecurityTrustUrl(t){return(0,r.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,r.pB0)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:function(){return ce((0,r.LFG)(r.gxx))},token:t,providedIn:"root"}),t})();const he=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){Nt.makeCurrent(),$t.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),de=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:Vt,useClass:ne,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:Vt,useClass:ae,multi:!0,deps:[s]},[],{provide:Qt,useClass:Qt,deps:[Zt,qt,r.AFp]},{provide:r.FYo,useExisting:Qt},{provide:Ht,useExisting:qt},{provide:qt,useClass:qt,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:Zt,useClass:Zt,deps:[Vt,r.R0b]},{provide:class{},useClass:Ut,deps:[]},[]];let fe=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:Bt,useExisting:r.AFp},jt]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:de,imports:[Mt,r.hGG]}),t})();"undefined"!=typeof window&&window,n(78320);var pe=n(94402),ge=n(25917),me=n(26215),ye=n(54869),ve=n(59796),be=n(77393);class _e extends be.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class we extends be.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var xe=n(87444),Ce=n(67574);function Se(t,e,n,r,i=new we(t,n,r)){if(!i.closed)return e instanceof Ce.y?e.subscribe(i):(0,xe.s)(e)(i)}var Te=n(56693);const Ee={};class Oe{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ae(t,this.resultSelector))}}class Ae extends _e{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ee),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Se(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Ee?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Pe=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var ke=n(63282);function Me(...t){return(0,ke.J)(1)((0,ge.of)(...t))}var Ie=n(59193);function Re(t){return new Ce.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,pe.D)(n):(0,Ie.c)()).subscribe(e)})}var De=n(52441),Ne=n(79765),Le=n(88002),Fe=n(85345);function Be(t,e){return"function"==typeof e?n=>n.pipe(Be((n,r)=>(0,pe.D)(t(n,r)).pipe((0,Le.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new je(t))}class je{constructor(t){this.project=t}call(t,e){return e.subscribe(new $e(t,this.project))}}class $e extends Fe.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Fe.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Fe.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ue=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Ve(t){return e=>0===t?(0,Ie.c)():e.lift(new Ze(t))}class Ze{constructor(t){if(this.total=t,this.total<0)throw new Ue}call(t,e){return e.subscribe(new ze(t,this.total))}}class ze extends be.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function He(...t){const e=t[t.length-1];return(0,ye.K)(e)?(t.pop(),n=>Me(t,n,e)):e=>Me(t,e)}function qe(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ye(t,e,n))}}class Ye{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ge(t,this.accumulator,this.seed,this.hasSeed))}}class Ge extends be.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function We(t,e){return function(n){return n.lift(new Je(t,e))}}class Je{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Xe(t,this.predicate,this.thisArg))}}class Xe extends be.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Qe(t){return function(e){const n=new Ke(t),r=e.lift(n);return n.caught=r}}class Ke{constructor(t){this.selector=t}call(t,e){return e.subscribe(new tn(t,this.selector,this.caught))}}class tn extends Fe.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Fe.IY(this);this.add(r);const i=(0,Fe.ft)(n,r);i!==r&&this.add(i)}}}var en=n(19773);function nn(t,e){return(0,en.zg)(t,e,1)}function rn(t){return function(e){return 0===t?(0,Ie.c)():e.lift(new on(t))}}class on{constructor(t){if(this.total=t,this.total<0)throw new Ue}call(t,e){return e.subscribe(new sn(t,this.total))}}class sn extends be.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function an(t=un){return e=>e.lift(new ln(t))}class ln{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new cn(t,this.errorFactory))}}class cn extends be.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function un(){return new Pe}function hn(t=null){return e=>e.lift(new dn(t))}class dn{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new fn(t,this.defaultValue))}}class fn extends be.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var pn=n(54487);function gn(t,e){const n=arguments.length>=2;return r=>r.pipe(t?We((e,n)=>t(e,n,r)):pn.y,Ve(1),n?hn(e):an(()=>new Pe))}function mn(){}var yn=n(69105);function vn(t,e,n){return function(r){return r.lift(new bn(t,e,n))}}class bn{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new _n(t,this.nextOrObserver,this.error,this.complete))}}class _n extends be.L{constructor(t,e,n,r){super(t),this._tapNext=mn,this._tapError=mn,this._tapComplete=mn,this._tapError=n||mn,this._tapComplete=r||mn,(0,yn.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||mn,this._tapError=e.error||mn,this._tapComplete=e.complete||mn)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}var wn=n(51307),xn=n(75319);class Cn{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Sn(t,this.callback))}}class Sn extends be.L{constructor(t,e){super(t),this.add(new xn.w(e))}}class Tn{constructor(t,e){this.id=t,this.url=e}}class En extends Tn{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class On extends Tn{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class An extends Tn{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pn extends Tn{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class kn extends Tn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mn extends Tn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class In extends Tn{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Rn extends Tn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Dn extends Tn{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nn{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ln{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Fn{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bn{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jn{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $n{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Un{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vn="primary";class Zn{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function zn(t){return new Zn(t)}function Hn(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function qn(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Yn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Gn(t[i],e[i]))return!1;return!0}function Gn(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Wn(t){return Array.prototype.concat.apply([],t)}function Jn(t){return t.length>0?t[t.length-1]:null}function Xn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Qn(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,pe.D)(Promise.resolve(t)):(0,ge.of)(t)}const Kn={exact:function t(e,n,r){if(!lr(e.segments,n.segments))return!1;if(!ir(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:nr},tr={exact:function(t,e){return Yn(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Gn(t[n],e[n]))},ignored:()=>!0};function er(t,e,n){return Kn[n.paths](t.root,e.root,n.matrixParams)&&tr[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function nr(t,e,n){return rr(t,e,e.segments,n)}function rr(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!lr(i,n)&&!e.hasChildren()&&!!ir(i,n,r)}if(t.segments.length===n.length){if(!lr(t.segments,n))return!1;if(!ir(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!nr(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!lr(t.segments,i)&&!!ir(t.segments,i,r)&&!!t.children.primary&&rr(t.children.primary,e,o,r)}}function ir(t,e,n){return e.every((e,r)=>tr[n](t[r].parameters,e.parameters))}class or{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return hr.serialize(this)}}class sr{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Xn(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dr(this)}}class ar{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=zn(this.parameters)),this._parameterMap}toString(){return br(this)}}function lr(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class cr{}class ur{parse(t){const e=new Sr(t);return new or(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${fr(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${gr(e)}=${gr(t)}`).join("&"):`${gr(e)}=${gr(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const hr=new ur;function dr(t){return t.segments.map(t=>br(t)).join("/")}function fr(t,e){if(!t.hasChildren())return dr(t);if(e){const e=t.children.primary?fr(t.children.primary,!1):"",n=[];return Xn(t.children,(t,e)=>{e!==Vn&&n.push(`${e}:${fr(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Xn(t.children,(t,r)=>{r===Vn&&(n=n.concat(e(t,r)))}),Xn(t.children,(t,r)=>{r!==Vn&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Vn?[fr(t.children.primary,!1)]:[`${n}:${fr(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${dr(t)}/${e[0]}`:`${dr(t)}/(${e.join("//")})`}}function pr(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gr(t){return pr(t).replace(/%3B/gi,";")}function mr(t){return pr(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yr(t){return decodeURIComponent(t)}function vr(t){return yr(t.replace(/\+/g,"%20"))}function br(t){return`${mr(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${mr(t)}=${mr(e[t])}`).join("")}`;var e}const _r=/^[^\/()?;=#]+/;function wr(t){const e=t.match(_r);return e?e[0]:""}const xr=/^[^=?&#]+/,Cr=/^[^?&#]+/;class Sr{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sr([],{}):new sr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new sr(t,e)),n}parseSegment(){const t=wr(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ar(yr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=wr(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=wr(this.remaining);t&&(n=t,this.capture(n))}t[yr(e)]=yr(n)}parseQueryParam(t){const e=function(t){const e=t.match(xr);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Cr);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=vr(e),i=vr(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=wr(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Vn);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new sr([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Tr{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Er(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Er(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Or(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Or(t,this._root).map(t=>t.value)}}function Er(t,e){if(t===e.value)return e;for(const n of e.children){const e=Er(t,n);if(e)return e}return null}function Or(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Or(t,n);if(r.length)return r.unshift(e),r}return[]}class Ar{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Pr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class kr extends Tr{constructor(t,e){super(t),this.snapshot=e,Lr(this,t)}toString(){return this.snapshot.toString()}}function Mr(t,e){const n=function(t,e){const n=new Dr([],{},{},"",{},Vn,e,null,t.root,-1,{});return new Nr("",new Ar(n,[]))}(t,e),r=new me.X([new ar("",{})]),i=new me.X({}),o=new me.X({}),s=new me.X({}),a=new me.X(""),l=new Ir(r,i,s,a,o,Vn,e,n.root);return l.snapshot=n.root,new kr(new Ar(l,[]),n)}class Ir{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Le.U)(t=>zn(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Le.U)(t=>zn(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Rr(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Dr{constructor(t,e,n,r,i,o,s,a,l,c,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nr extends Tr{constructor(t,e){super(e),this.url=t,Lr(this,e)}toString(){return Fr(this._root)}}function Lr(t,e){e.value._routerState=t,e.children.forEach(e=>Lr(t,e))}function Fr(t){const e=t.children.length>0?` { ${t.children.map(Fr).join(", ")} } `:"";return`${t.value}${e}`}function Br(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Yn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Yn(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Yn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Yn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function jr(t,e){var n,r;return Yn(t.params,e.params)&&lr(n=t.url,r=e.url)&&n.every((t,e)=>Yn(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||jr(t.parent,e.parent))}function $r(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return $r(t,e,r);return $r(t,e)})}(t,e,n);return new Ar(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Ur(e,t),t}}const n=new Ir(new me.X((r=e.value).url),new me.X(r.params),new me.X(r.queryParams),new me.X(r.fragment),new me.X(r.data),r.outlet,r.component,r),i=e.children.map(e=>$r(t,e));return new Ar(n,i)}var r}function Ur(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Ur(t.children[n],e.children[n])}function Vr(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Zr(t){return"object"==typeof t&&null!=t&&t.outlets}function zr(t,e,n,r,i){let o={};return r&&Xn(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new or(n.root===t?e:Hr(n.root,t,e),o,i)}function Hr(t,e,n){const r={};return Xn(t.children,(t,i)=>{r[i]=t===e?n:Hr(t,e,n)}),new sr(t.segments,r)}class qr{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Vr(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Zr);if(r&&r!==Jn(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yr{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Gr(t,e,n){if(t||(t=new sr([],{})),0===t.segments.length&&t.hasChildren())return Wr(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Zr(s))break;const a=`${s}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!Kr(a,l,e))return o;r+=2}else{if(!Kr(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new sr(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new sr(t.segments.slice(r.pathIndex),t.children),Wr(e,0,i)}return r.match&&0===i.length?new sr(t.segments,{}):r.match&&!t.hasChildren()?Jr(t,e,n):r.match?Wr(t,0,i):Jr(t,e,n)}function Wr(t,e,n){if(0===n.length)return new sr(t.segments,{});{const r=function(t){return Zr(t[0])?t[0].outlets:{[Vn]:t}}(n),i={};return Xn(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Gr(t.children[r],e,n))}),Xn(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new sr(t.segments,i)}}function Jr(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Zr(o)){const t=Xr(o.outlets);return new sr(r,t)}if(0===i&&Vr(n[0])){r.push(new ar(t.segments[e].path,Qr(n[0]))),i++;continue}const s=Zr(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Vr(a)?(r.push(new ar(s,Qr(a))),i+=2):(r.push(new ar(s,{})),i++)}return new sr(r,{})}function Xr(t){const e={};return Xn(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Jr(new sr([],{}),0,t))}),e}function Qr(t){const e={};return Xn(t,(t,n)=>e[n]=`${t}`),e}function Kr(t,e,n){return t==n.path&&Yn(e,n.parameters)}class ti{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Br(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Pr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Xn(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Pr(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Pr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new $n(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Bn(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Br(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ei(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ei(t){Br(t.value),t.children.forEach(ei)}class ni{constructor(t,e){this.routes=t,this.module=e}}function ri(t){return"function"==typeof t}function ii(t){return t instanceof or}const oi=Symbol("INITIAL_VALUE");function si(){return Be(t=>function(...t){let e,n;return(0,ye.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,ve.k)(t[0])&&(t=t[0]),(0,Te.n)(t,n).lift(new Oe(e))}(t.map(t=>t.pipe(Ve(1),He(oi)))).pipe(qe((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==oi)return t;if(r===oi&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ii(r))return r}return t},t)},oi),We(t=>t!==oi),(0,Le.U)(t=>ii(t)?t:!0===t),Ve(1)))}let ai=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[ro]},encapsulation:2}),t})();function li(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];ci(r,ui(e,r))}}function ci(t,e){t.children&&li(t.children,e)}function ui(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function hi(t){const e=t.children&&t.children.map(hi),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Vn&&(n.component=ai),n}function di(t){return t.outlet||Vn}function fi(t,e){const n=t.filter(t=>di(t)===e);return n.push(...t.filter(t=>di(t)!==e)),n}const pi={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function gi(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},pi):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||qn)(n,t,e);if(!i)return Object.assign({},pi);const o={};Xn(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function mi(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>yi(t,e,n)&&di(n)!==Vn)}(t,n,r)){const i=new sr(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&di(o)!==Vn){const n=new sr([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[di(o)]=n}return i}(t,e,r,new sr(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>yi(t,e,n))}(t,n,r)){const o=new sr(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(yi(t,n,a)&&!i[di(a)]){const n=new sr([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[di(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new sr(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function yi(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function vi(t,e,n,r){return!!(di(t)===r||r!==Vn&&yi(e,n,t))&&("**"===t.path||gi(e,t,n).matched)}function bi(t,e,n){return 0===e.length&&!t.children[n]}class _i{constructor(t){this.segmentGroup=t||null}}class wi{constructor(t){this.urlTree=t}}function xi(t){return new Ce.y(e=>e.error(new _i(t)))}function Ci(t){return new Ce.y(e=>e.error(new wi(t)))}function Si(t){return new Ce.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Ti{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=mi(this.urlTree.root,[],[],this.config).segmentGroup,e=new sr(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Vn).pipe((0,Le.U)(t=>this.createUrlTree(Ei(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qe(t=>{if(t instanceof wi)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof _i)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Vn).pipe((0,Le.U)(e=>this.createUrlTree(Ei(e),t.queryParams,t.fragment))).pipe(Qe(t=>{if(t instanceof _i)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new sr([],{[Vn]:t}):t;return new or(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Le.U)(t=>new sr([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,pe.D)(r).pipe(nn(r=>{const i=n.children[r],o=fi(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,Le.U)(t=>({segment:t,outlet:r})))}),qe((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?We((e,n)=>t(e,n,r)):pn.y,rn(1),n?hn(e):an(()=>new Pe))}())}expandSegment(t,e,n,r,i,o){return(0,pe.D)(n).pipe(nn(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Qe(t=>{if(t instanceof _i)return(0,ge.of)(null);throw t}))),gn(t=>!!t),Qe((t,n)=>{if(t instanceof Pe||"EmptyError"===t.name){if(bi(e,r,i))return(0,ge.of)(new sr([],{}));throw new _i(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return vi(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):xi(e):xi(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Ci(i):this.lineralizeSegments(n,i).pipe((0,en.zg)(n=>{const i=new sr(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:l,positionalParamSegments:c}=gi(e,r,i);if(!s)return xi(e);const u=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Ci(u):this.lineralizeSegments(r,u).pipe((0,en.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(l)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,ge.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Le.U)(t=>(n._loadedConfig=t,new sr(r,{})))):(0,ge.of)(new sr(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=gi(e,n,r);if(!o)return xi(e);const l=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,en.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=mi(e,s,l,o),u=new sr(a.segments,a.children);if(0===c.length&&u.hasChildren())return this.expandChildren(r,o,u).pipe((0,Le.U)(t=>new sr(s,t)));if(0===o.length&&0===c.length)return(0,ge.of)(new sr(s,{}));const h=di(n)===i;return this.expandSegment(r,u,o,c,h?Vn:i,!0).pipe((0,Le.U)(t=>new sr(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,ge.of)(new ni(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,ge.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,en.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Le.U)(t=>(e._loadedConfig=t,t))):function(t){return new Ce.y(e=>e.error(Hn(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,ge.of)(new ni([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,ge.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&ri(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ri(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Qn(o)});return(0,ge.of)(i).pipe(si(),vn(t=>{if(!ii(t))return;const e=Hn(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Le.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,ge.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Si(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new or(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Xn(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Xn(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new sr(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ei(t){const e={};for(const n of Object.keys(t.children)){const r=Ei(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new sr(t.segments.concat(e.segments),e.children)}return t}(new sr(t.segments,e))}class Oi{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ai{constructor(t,e){this.component=t,this.route=e}}function Pi(t,e,n){const r=t._root;return Mi(r,e?e._root:null,n,[r.value])}function ki(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Mi(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Pr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!lr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!lr(t.url,e.url)||!Yn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jr(t,e)||!Yn(t.queryParams,e.queryParams);case"paramsChange":default:return!jr(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Oi(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Mi(t,e,o.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ai(a.outlet.component,s))}else s&&Ii(e,a,i),i.canActivateChecks.push(new Oi(r)),Mi(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Xn(o,(t,e)=>Ii(t,n.getContext(e),i)),i}function Ii(t,e,n){const r=Pr(t),i=t.value;Xn(r,(t,r)=>{Ii(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Ai(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ri{}function Di(t){return new Ce.y(e=>e.error(t))}class Ni{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=mi(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Vn);if(null===e)return null;const n=new Dr([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Ar(n,e),i=new Nr(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Rr(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=fi(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Fi(n);return r.sort((t,e)=>t.value.outlet===Vn?-1:e.value.outlet===Vn?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return bi(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!vi(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?Jn(n).parameters:{};i=new Dr(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$i(t),di(t),t.component,t,Bi(e),ji(e)+n.length,Ui(t))}else{const r=gi(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Dr(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$i(t),di(t),t.component,t,Bi(e),ji(e)+o.length,Ui(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:c}=mi(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const t=this.processChildren(a,l);return null===t?null:[new Ar(i,t)]}if(0===a.length&&0===c.length)return[new Ar(i,[])];const u=di(t)===r,h=this.processSegment(a,l,c,u?Vn:r);return null===h?null:[new Ar(i,h)]}}function Li(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Fi(t){const e=[],n=new Set;for(const r of t){if(!Li(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Fi(r.children);e.push(new Ar(r.value,t))}return e.filter(t=>!n.has(t))}function Bi(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ji(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function $i(t){return t.data||{}}function Ui(t){return t.resolve||{}}function Vi(t){return Be(e=>{const n=t(e);return n?(0,pe.D)(n).pipe((0,Le.U)(()=>e)):(0,ge.of)(e)})}class Zi extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const zi=new r.OlP("ROUTES");class Hi{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Le.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new ni(Wn(i.injector.get(zi,void 0,r.XFs.Self|r.XFs.Optional)).map(hi),i)}),Qe(t=>{throw e._loader$=void 0,t}));return e._loader$=new De.c(n,()=>new Ne.xQ).pipe((0,wn.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,pe.D)(this.loader.load(t)):Qn(t()).pipe((0,en.zg)(t=>t instanceof r.YKP?(0,ge.of)(t):(0,pe.D)(this.compiler.compileModuleAsync(t))))}}class qi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Yi,this.attachRef=null}}class Yi{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new qi,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Gi{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Wi(t){throw t}function Ji(t,e,n){return e.parse("/")}function Xi(t,e){return(0,ge.of)(null)}const Qi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ki={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let to=(()=>{class t{constructor(t,e,n,i,o,s,a,l){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ne.xQ,this.errorHandler=Wi,this.malformedUriErrorHandler=Ji,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Xi,afterPreactivation:Xi},this.urlHandlingStrategy=new Gi,this.routeReuseStrategy=new Zi,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=new or(new sr([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Hi(s,a,t=>this.triggerEvent(new Nn(t)),t=>this.triggerEvent(new Ln(t))),this.routerState=Mr(this.currentUrlTree,this.rootComponentType),this.transitions=new me.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(We(t=>0!==t.id),(0,Le.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Be(t=>{let n=!1,r=!1;return(0,ge.of)(t).pipe(vn(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Be(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,ge.of)(t).pipe(Be(t=>{const n=this.transitions.getValue();return e.next(new En(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Ie.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Be(t=>function(t,e,n,r,i){return new Ti(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,Le.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),vn(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,en.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Ni(t,e,n,r,i,o).recognize();return null===s?Di(new Ri):(0,ge.of)(s)}catch(s){return Di(s)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,Le.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),vn(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new kn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new En(n,this.serializeUrl(r),i,o);e.next(a);const l=Mr(r,this.rootComponentType).snapshot;return(0,ge.of)(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Ie.E}),Vi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),vn(t=>{const e=new Mn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Le.U)(t=>Object.assign(Object.assign({},t),{guards:Pi(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,en.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,ge.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,pe.D)(t).pipe((0,en.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,ge.of)(!0);const s=o.map(o=>{const s=ki(o,e,i);let a;if(function(t){return t&&ri(t.canDeactivate)}(s))a=Qn(s.canDeactivate(t,e,n,r));else{if(!ri(s))throw new Error("Invalid CanDeactivate guard");a=Qn(s(t,e,n,r))}return a.pipe(gn())});return(0,ge.of)(s).pipe(si())}(t.component,t.route,n,e,r)),gn(t=>!0!==t,!0))}(s,r,i,t).pipe((0,en.zg)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return(0,pe.D)(e).pipe(nn(e=>Me(function(t,e){return null!==t&&e&&e(new Fn(t)),(0,ge.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new jn(t)),(0,ge.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Re(()=>{const i=e.guards.map(i=>{const o=ki(i,e.node,n);let s;if(function(t){return t&&ri(t.canActivateChild)}(o))s=Qn(o.canActivateChild(r,t));else{if(!ri(o))throw new Error("Invalid CanActivateChild guard");s=Qn(o(r,t))}return s.pipe(gn())});return(0,ge.of)(i).pipe(si())}));return(0,ge.of)(i).pipe(si())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ge.of)(!0);const i=r.map(r=>Re(()=>{const i=ki(r,e,n);let o;if(function(t){return t&&ri(t.canActivate)}(i))o=Qn(i.canActivate(e,t));else{if(!ri(i))throw new Error("Invalid CanActivate guard");o=Qn(i(e,t))}return o.pipe(gn())}));return(0,ge.of)(i).pipe(si())}(t,e.route,n))),gn(t=>!0!==t,!0))}(r,o,t,e):(0,ge.of)(n)),(0,Le.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),vn(t=>{if(ii(t.guardsResult)){const e=Hn(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new In(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),We(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),Vi(t=>{if(t.guards.canActivateChecks.length)return(0,ge.of)(t).pipe(vn(t=>{const e=new Rn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Be(t=>{let e=!1;return(0,ge.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,en.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,ge.of)(t);let o=0;return(0,pe.D)(i).pipe(nn(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,ge.of)({});const o={};return(0,pe.D)(i).pipe((0,en.zg)(i=>function(t,e,n,r){const i=ki(t,e,r);return Qn(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(vn(t=>{o[i]=t}))),rn(1),(0,en.zg)(()=>Object.keys(o).length===i.length?(0,ge.of)(o):Ie.E))}(t._resolve,t,e,r).pipe((0,Le.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Rr(t,n).resolve),null)))}(t.route,e,n,r)),vn(()=>o++),rn(1),(0,en.zg)(e=>o===i.length?(0,ge.of)(t):Ie.E))})),vn({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),vn(t=>{const e=new Dn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Vi(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Le.U)(t=>{const e=function(t,e,n){const r=$r(t,e._root,n?n._root:void 0);return new kr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),vn(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,Le.U)(t=>(new ti(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),vn({next(){n=!0},complete(){n=!0}}),(i=()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null},t=>t.lift(new Cn(i))),Qe(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ii(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new An(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Pn(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return Ie.E}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){li(t),this.config=t.map(hi),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,l=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return zr(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new qr(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Xn(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new qr(n,e,r)}(n);if(o.toRoot())return zr(e.root,new sr([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Yr(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Yr(t,t===e.root,0)}const r=Vr(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Yr(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Wr(s.segmentGroup,s.index,o.commands):Gr(s.segmentGroup,s.index,o.commands);return zr(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=l?l:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=ii(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Qi):!1===e?Object.assign({},Ki):e,ii(t))return er(this.currentUrlTree,t,n);const r=this.parseUrl(t);return er(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new On(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let l,c,u;i?(l=i.resolve,c=i.reject,u=i.promise):u=new Promise((t,e)=>{l=t,c=e});const h=++this.navigationId;let d;return d="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:d,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new An(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(cr),r.LFG(Yi),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),eo=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new Ne.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:no(this.skipLocationChange),replaceUrl:no(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:no(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(to),r.Y36(Ir),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function no(t){return""===t||!!t}let ro=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Vn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new io(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Yi),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class io{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ir?this.route:t===Yi?this.childContexts:this.parent.get(t,e)}}class oo{}class so{preload(t,e){return(0,ge.of)(null)}}let ao=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Hi(e,n,e=>t.triggerEvent(new Nn(e)),e=>t.triggerEvent(new Ln(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(We(t=>t instanceof On),nn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,pe.D)(n).pipe((0,ke.J)(),(0,Le.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,ge.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,en.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(to),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(oo))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),lo=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof En?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof On&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Un&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Un(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(to),r.LFG(It),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const co=new r.OlP("ROUTER_CONFIGURATION"),uo=new r.OlP("ROUTER_FORROOT_GUARD"),ho=[w,{provide:cr,useClass:ur},{provide:to,useFactory:function(t,e,n,r,i,o,s,a={},l,c){const u=new to(null,t,e,n,r,i,o,Wn(s));return l&&(u.urlHandlingStrategy=l),c&&(u.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,u),a.enableTracing&&u.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),u},deps:[cr,Yi,w,r.zs3,r.v3s,r.Sil,zi,co,[class{},new r.FiY],[class{},new r.FiY]]},Yi,{provide:Ir,useFactory:function(t){return t.routerState.root},deps:[to]},{provide:r.v3s,useClass:r.EAV},ao,so,class{preload(t,e){return e().pipe(Qe(()=>(0,ge.of)(null)))}},{provide:co,useValue:{enableTracing:!1}}];function fo(){return new r.PXZ("Router",to)}let po=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ho,vo(e),{provide:uo,useFactory:yo,deps:[[to,new r.FiY,new r.tp0]]},{provide:co,useValue:n||{}},{provide:m,useFactory:mo,deps:[a,[new r.tBr(v),new r.FiY],co]},{provide:lo,useFactory:go,deps:[to,It,co]},{provide:oo,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:so},{provide:r.PXZ,multi:!0,useFactory:fo},[bo,{provide:r.ip1,multi:!0,useFactory:_o,deps:[bo]},{provide:xo,useFactory:wo,deps:[bo]},{provide:r.tb,multi:!0,useExisting:xo}]]}}static forChild(e){return{ngModule:t,providers:[vo(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(uo,8),r.LFG(to,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function go(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new lo(t,e,n)}function mo(t,e,n={}){return n.useHash?new _(t,e):new b(t,e)}function yo(t){return"guarded"}function vo(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:zi,multi:!0,useValue:t}]}let bo=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ne.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(to),r=this.injector.get(co);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,ge.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(co),n=this.injector.get(ao),i=this.injector.get(lo),o=this.injector.get(to),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function _o(t){return t.appInitializer.bind(t)}function wo(t){return t.bootstrapListener.bind(t)}const xo=new r.OlP("Router Initializer");var Co=n(16304),So=n(44879),To=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},Eo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Oo=function(t,e){return function(n,r){e(n,r,t)}};let Ao=class{constructor(t,e,n){this.method=t,this.url=e,this.clientIp=n,this.id=0,this.version=0,this.created=new Date,this.logs=0,this.times={}}};To([So.t.primary.autoIncrement,Eo("design:type",Number)],Ao.prototype,"id",void 0),To([So.t,Eo("design:type",Number)],Ao.prototype,"version",void 0),To([So.t,Eo("design:type",Date)],Ao.prototype,"created",void 0),To([So.t.optional,Eo("design:type",Number)],Ao.prototype,"statusCode",void 0),To([So.t,Eo("design:type",Number)],Ao.prototype,"logs",void 0),To([So.t.map(So.t.number),Eo("design:type",Object)],Ao.prototype,"times",void 0),Ao=To([So.nw.name("deepkit/debugger/request"),Oo(0,So.t.name("method")),Oo(1,So.t.name("url")),Oo(2,So.t.name("clientIp")),Eo("design:paramtypes",[String,String,String])],Ao);var Po=n(92338),ko=function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},Mo=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},Io=function(t,e){return function(n,r){e(n,r,t)}};class Ro{}ko([So.t,Mo("design:type",String)],Ro.prototype,"name",void 0),ko([So.t,Mo("design:type",String)],Ro.prototype,"type",void 0),ko([So.t.any,Mo("design:type",Object)],Ro.prototype,"defaultValue",void 0),ko([So.t.any,Mo("design:type",Object)],Ro.prototype,"value",void 0),ko([So.t.optional,Mo("design:type",String)],Ro.prototype,"description",void 0);let Do=class{};ko([So.t.array(So.t.string),Mo("design:type",Array)],Do.prototype,"places",void 0),ko([So.t.array(So.t.schema({from:So.t.string,to:So.t.string,label:So.t.string.optional})),Mo("design:type",Array)],Do.prototype,"transitions",void 0),Do=ko([So.nw.name("debug/workflow")],Do);let No=class{};ko([So.t.optional,Mo("design:type",String)],No.prototype,"name",void 0),ko([So.t,Mo("design:type",String)],No.prototype,"className",void 0),No=ko([So.nw.name("debug/database/entity")],No);let Lo=class{constructor(){this.entities=[]}};ko([So.t,Mo("design:type",String)],Lo.prototype,"name",void 0),ko([So.t,Mo("design:type",String)],Lo.prototype,"adapter",void 0),ko([So.t.array(No),Mo("design:type",Array)],Lo.prototype,"entities",void 0),Lo=ko([So.nw.name("debug/database")],Lo);let Fo=class{};ko([So.t.array(Ro),Mo("design:type",Array)],Fo.prototype,"appConfig",void 0),ko([So.t.array(Ro),Mo("design:type",Array)],Fo.prototype,"modulesConfig",void 0),Fo=ko([So.nw.name("debug/config")],Fo);class Bo{}ko([So.t,Mo("design:type",String)],Bo.prototype,"name",void 0),ko([So.t.string,Mo("design:type",String)],Bo.prototype,"type",void 0),ko([So.t.any,Mo("design:type",Object)],Bo.prototype,"schema",void 0);let jo=class{constructor(t,e,n,r,i,o,s,a){this.path=t,this.httpMethod=e,this.controller=n,this.description=r,this.parameters=i,this.groups=o,this.category=s,this.bodySchema=a,a&&(a.classType&&(a.classTypeName=a.classType,a.classType=void 0),this.bodyPropertySchema=So.GR.fromJSON(a))}};jo=ko([So.nw.name("debug/route"),Io(0,So.t.name("path")),Io(1,So.t.name("httpMethod")),Io(2,So.t.name("controller")),Io(3,So.t.name("description")),Io(4,So.t.array(Bo).name("parameters")),Io(5,So.t.array(So.t.string).name("groups")),Io(6,So.t.string.name("category")),Io(7,So.t.any.name("bodySchema")),Mo("design:paramtypes",[String,String,String,String,Array,Array,String,Object])],jo);let $o=class{constructor(t,e){this.name=t,this.schema=e,this.propertySchema=So.GR.fromJSON(e)}};$o=ko([So.nw.name("rpc/action/parameter"),Io(0,So.t.name("name")),Io(1,So.t.any.name("schema")),Mo("design:paramtypes",[String,Object])],$o);let Uo=class{};ko([So.t,Mo("design:type",String)],Uo.prototype,"path",void 0),ko([So.t,Mo("design:type",String)],Uo.prototype,"controller",void 0),ko([So.t,Mo("design:type",String)],Uo.prototype,"methodName",void 0),ko([So.t.array($o),Mo("design:type",Array)],Uo.prototype,"parameters",void 0),Uo=ko([So.nw.name("rpc/action")],Uo);let Vo=class{};ko([So.t,Mo("design:type",String)],Vo.prototype,"event",void 0),ko([So.t,Mo("design:type",String)],Vo.prototype,"controller",void 0),ko([So.t,Mo("design:type",String)],Vo.prototype,"methodName",void 0),ko([So.t,Mo("design:type",Number)],Vo.prototype,"priority",void 0),Vo=ko([So.nw.name("rpc/event")],Vo);const Zo=(0,Po.i4)("deepkit/debug/controller",[Fo,Lo,jo,Uo,Do,Vo,Ao]);var zo=n(91463),Ho=(()=>{return(t=Ho||(Ho={}))[t.none=0]="none",t[t.http=1]="http",t[t.rpc=2]="rpc",t[t.cli=3]="cli",t[t.job=4]="job",t[t.function=5]="function",t[t.lock=6]="lock",t[t.workflow=7]="workflow",t[t.event=8]="event",t[t.database=9]="database",t[t.email=10]="email",t[t.template=11]="template",Ho;var t})(),qo=(()=>{return(t=qo||(qo={}))[t.start=0]="start",t[t.end=1]="end",qo;var t})();So.t.schema({url:So.t.string.optional,method:So.t.string.optional,clientIp:So.t.string.optional,responseStatus:So.t.number.optional});let Yo=(()=>{class t{constructor(t){this.client=t,this.workflows={},this.debug=this.client.controller(Zo)}static getServerHost(){return"4200"===location.port?location.hostname+":8080":location.host}getWorkflow(t){return this.workflows[t]?this.workflows[t]:this.workflows[t]=this.debug.getWorkflow(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Po.U3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();var Go=n(81555);function Wo(t,e){return new Ce.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const l=(0,pe.D)(t[a]);let c=!1;n.add(l.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let Jo=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),Xo=(()=>{class t extends Jo{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const Qo=new r.OlP("NgValueAccessor"),Ko={provide:Qo,useExisting:(0,r.Gpc)(()=>es),multi:!0},ts=new r.OlP("CompositionEventMode");let es=(()=>{class t extends Jo{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(ts,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([Ko]),r.qOj]}),t})();const ns=new r.OlP("NgValidators"),rs=new r.OlP("NgAsyncValidators");function is(t){return null!=t}function os(t){const e=(0,r.QGY)(t)?(0,pe.D)(t):t;return(0,r.CqO)(e),e}function ss(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function as(t,e){return e.map(e=>e(t))}function ls(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function cs(t){return null!=t?function(t){if(!t)return null;const e=t.filter(is);return 0==e.length?null:function(t){return ss(as(t,e))}}(ls(t)):null}function us(t){return null!=t?function(t){if(!t)return null;const e=t.filter(is);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,ve.k)(e))return Wo(e,null);if((0,Go.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Wo(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Wo(t=1===t.length&&(0,ve.k)(t[0])?t[0]:t,null).pipe((0,Le.U)(t=>e(...t)))}return Wo(t,null)}(as(t,e).map(os)).pipe((0,Le.U)(ss))}}(ls(t)):null}function hs(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ds(t){return t._rawValidators}function fs(t){return t._rawAsyncValidators}let ps=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=cs(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=us(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),gs=(()=>{class t extends ps{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class ms extends ps{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ys{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}let vs=(()=>{class t extends ys{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ms,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),bs=(()=>{class t extends ys{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(gs,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))("ng-submitted",e.is("submitted"))},features:[r.qOj]}),t})();function _s(t,e){Cs(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Ts(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Ts(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function ws(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ss(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function xs(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Cs(t,e){const n=ds(t);null!==e.validator?t.setValidators(hs(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=fs(t);null!==e.asyncValidator?t.setAsyncValidators(hs(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();xs(e._rawValidators,i),xs(e._rawAsyncValidators,i)}function Ss(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=ds(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.validator);i.length!==r.length&&(n=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const r=fs(t);if(Array.isArray(r)&&r.length>0){const i=r.filter(t=>t!==e.asyncValidator);i.length!==r.length&&(n=!0,t.setAsyncValidators(i))}}}const r=()=>{};return xs(e._rawValidators,r),xs(e._rawAsyncValidators,r),n}function Ts(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Es(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Os="VALID",As="INVALID",Ps="PENDING",ks="DISABLED";function Ms(t){return(Ns(t)?t.validators:t)||null}function Is(t){return Array.isArray(t)?cs(t):t||null}function Rs(t,e){return(Ns(e)?e.asyncValidators:t)||null}function Ds(t){return Array.isArray(t)?us(t):t||null}function Ns(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Ls{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Is(this._rawValidators),this._composedAsyncValidatorFn=Ds(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Os}get invalid(){return this.status===As}get pending(){return this.status==Ps}get disabled(){return this.status===ks}get enabled(){return this.status!==ks}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Is(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Ds(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ps,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ks,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Os,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==Os&&this.status!==Ps||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ks:Os}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ps,this._hasOwnPendingAsyncValidator=!0;const e=os(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Bs?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof js&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?ks:this.errors?As:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ps)?Ps:this._anyControlsHaveStatus(As)?As:Os}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ns(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Fs extends Ls{constructor(t=null,e,n){super(Ms(e),Rs(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Es(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Es(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Bs extends Ls{constructor(t,e,n){super(Ms(e),Rs(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Fs?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class js extends Ls{constructor(t,e,n){super(Ms(e),Rs(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Fs?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const $s={provide:ms,useExisting:(0,r.Gpc)(()=>Vs)},Us=(()=>Promise.resolve(null))();let Vs=(()=>{class t extends ms{constructor(t,e,n,i){super(),this.control=new Fs,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===es?n=t:Object.getPrototypeOf(t.constructor)===Xo?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_s(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Us.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Us.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(gs,9),r.Y36(ns,10),r.Y36(rs,10),r.Y36(Qo,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([$s]),r.qOj,r.TTD]}),t})(),Zs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),zs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Hs=new r.OlP("NgModelWithFormControlWarning"),qs={provide:gs,useExisting:(0,r.Gpc)(()=>Gs)};let Ys,Gs=(()=>{class t extends gs{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ss(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return _s(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){ws(t.control||null,t,!1),Es(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(ws(e||null,t),n instanceof Fs&&(_s(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){Cs(t,e)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return Ss(t,e)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Cs(this.form,this),this._oldForm&&Ss(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(ns,10),r.Y36(rs,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([qs]),r.qOj,r.TTD]}),t})(),Ws=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[zs]]}),t})(),Js=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Ws]}),t})(),Xs=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Hs,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[Ws]}),t})(),Qs=new Set,Ks=[];class ta{static getApp(){if(!ta.app)throw new Error("ZonelessChangeDetector.app not set yet");return ta.app}}function ea(t,e){if(t){if(Qs.has(t))return;Qs.add(t),e&&Ks.push(e)}Ys||(Ys=requestAnimationFrame(()=>{Ys=void 0;for(const t of Qs)t.detectChanges();for(const t of Ks)t();Ks=[],Qs.clear(),ta.getApp().tick()}))}function na(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(1),r.AsE(" ",n.isString(t.value)?"":t.key,"",n.isString(t.value)?t.value:""," ")}}function ra(t,e){if(1&t&&(r.TgZ(0,"div",3),r.YNc(1,na,2,2,"div",4),r.ALo(2,"keyvalue"),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",r.lcZ(2,1,t.ngControl.errors))}}ta.app=void 0;const ia=["*"];function oa(t,e){if(1&t&&(r.TgZ(0,"div",2),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Oqu(t.errorText)}}let sa=(()=>{class t{constructor(){this.label="",this.left=!1}isString(t){return"string"==typeof t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-form-row"]],contentQueries:function(t,e,n){if(1&t&&r.Suo(n,ms,5),2&t){let t;r.iGM(t=r.CRH())&&(e.ngControl=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&r.ekj("left-aligned",!1!==e.left)},inputs:{label:"label",labelWidth:"labelWidth",left:"left"},ngContentSelectors:ia,decls:5,vars:4,consts:[[1,"label"],[1,"field"],["class","error",4,"ngIf"],[1,"error"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"div",0),r._uU(1),r.qZA(),r.TgZ(2,"div",1),r.Hsn(3),r.YNc(4,ra,3,3,"div",2),r.qZA()),2&t&&(r.Udp("width",e.labelWidth,"px"),r.xp6(1),r.Oqu(e.label),r.xp6(3),r.Q6J("ngIf",e.ngControl&&e.ngControl.errors&&e.ngControl.touched))},directives:[ft,ht],pipes:[At],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]:not(:last-child){margin-bottom:12px}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{width:30%;margin-right:8px;line-height:20px;text-align:right}[_nghost-%COMP%]   .field[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .field[_ngcontent-%COMP%]    >*{width:100%}.left-aligned[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{text-align:left}.error[_ngcontent-%COMP%]{margin-top:2px;color:var(--color-red)}"]}),t})(),aa=(()=>{class t{constructor(t,e){this.cd=t,this.cdParent=e,this.formGroup=new Bs({}),this.disabled=!1,this.success=new r.vpe,this.error=new r.vpe,this.disableChange=new r.vpe,this.errorText="",this.submitting=!1}onEnter(t){this.submit&&"enter"===t.key.toLowerCase()&&t.target&&"input"===t.target.tagName.toLowerCase()&&this.submitForm()}ngOnChanges(t){t.disabled&&this.disableChange.emit(this.disabled)}get invalid(){return this.formGroup.invalid}submitForm(){var t=this;return(0,Co.Z)(function*(){if(!t.disabled&&!t.submitting&&!t.formGroup.invalid){t.errorText="",t.submitting=!0,ea(t.cd);try{if(t.submit)try{yield t.submit(),t.success.emit()}catch(e){if(t.error.emit(e),e.errors&&e.errors[0])for(const n of e.errors){const e=t.formGroup.get(n.path);e&&e.setErrors({...e.errors,[n.code]:n.message})}else t.errorText=e.message||e;console.log("form error",e)}}finally{t.submitting=!1,ea(t.cd)}}})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO),r.Y36(r.sBO,4))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-form"]],hostBindings:function(t,e){1&t&&r.NdJ("keyup",function(t){return e.onEnter(t)})},inputs:{formGroup:"formGroup",disabled:"disabled",submit:"submit"},outputs:{success:"success",error:"error",disableChange:"disableChange"},features:[r.TTD],ngContentSelectors:ia,decls:3,vars:2,consts:[[3,"formGroup","submit"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"form",0),r.NdJ("submit",function(t){return t.preventDefault(),e.submitForm()}),r.Hsn(1),r.YNc(2,oa,2,1,"div",1),r.qZA()),2&t&&(r.Q6J("formGroup",e.formGroup),r.xp6(2),r.Q6J("ngIf",e.errorText))},directives:[Zs,bs,Gs,ft],styles:["[_nghost-%COMP%]{display:block;margin-top:15px}.error[_ngcontent-%COMP%]{padding:5px;color:var(--color-red)}"]}),t})();function la(t){return{provide:Qo,useExisting:(0,r.Gpc)(()=>t),multi:!0}}let ca=(()=>{class t{constructor(t,e,n){this.injector=t,this.cd=e,this.cdParent=n,this._changedCallback=[],this._touchedCallback=[],this._ngControlFetched=!1,this.required=!1,this.change=new r.vpe;try{this.formComponent=t.get(aa,void 0)}catch(i){}}get isDisabled(){return!(!this.formComponent||!this.formComponent.disabled)||(void 0===this.disabled&&this.ngControl?!!this.ngControl.disabled:!1!==this.disabled&&void 0!==this.disabled)}get isValid(){return!0===this.valid}get isError(){return void 0===this.error&&this.ngControl?(this.ngControl.dirty||this.ngControl.touched)&&this.ngControl.invalid:this.error}get ngControl(){if(!this._ngControlFetched){try{this._ngControl=this.injector.get(ms)}catch(t){}this._ngControlFetched=!0}return this._ngControl}setDisabledState(t){this.disabled=t}ngOnDestroy(){}get innerValue(){return this._innerValue}set innerValue(t){if(this._innerValue!==t){this._innerValue=t;for(const e of this._changedCallback)e(t);this.onInnerValueChange().then(()=>{ea(this.cd)}),this.change.emit(t),ea(this.cd)}}writeValue(t){var e=this;return(0,Co.Z)(function*(){e._innerValue!==t&&(e._innerValue=t),ea(e.cd)})()}onInnerValueChange(){return(0,Co.Z)(function*(){})()}touch(){for(const t of this._touchedCallback)t()}registerOnChange(t){this._changedCallback.push(t)}registerOnTouched(t){this._touchedCallback.push(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.zs3),r.Y36(r.sBO),r.Y36(r.sBO,4))},t.\u0275dir=r.lG2({type:t,hostVars:8,hostBindings:function(t,e){2&t&&r.ekj("disabled",e.isDisabled)("valid",e.isValid)("error",e.isError)("required",e.required)},inputs:{disabled:"disabled",valid:"valid",error:"error",required:"required"},outputs:{change:"change"}}),t})(),ua=(()=>{class t{constructor(){this.clickable=!1,this.usedSize=17,this.disabled=!1}get isClickable(){return!1!==this.clickable}get isDisabled(){return!1!==this.disabled}ngOnChanges(){if(this.size&&(this.usedSize=this.size),!this.size&&this.name){const t=this.name.indexOf("_");if(-1!==t){const e=parseInt(this.name.slice(0,t),10);e&&(this.usedSize=e)}}}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-icon"]],hostVars:14,hostBindings:function(t,e){2&t&&(r.Udp("font-size",e.usedSize,"px")("height",e.usedSize,"px")("width",e.usedSize,"px")("color",e.color),r.ekj("ui-icon",!0)("clickable",e.isClickable)("disabled",e.isDisabled))},inputs:{name:"name",size:"size",clickable:"clickable",color:"color",disabled:"disabled"},features:[r.TTD],decls:1,vars:1,template:function(t,e){1&t&&r._uU(0),2&t&&r.Oqu(e.name)},styles:["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;text-align:center;font-size:17px;height:17px;width:17px;cursor:default}[_nghost-%COMP%]:focus{outline:0}.disabled[_nghost-%COMP%]{opacity:.6}.clickable[_nghost-%COMP%]:hover{opacity:.7}.dui-theme-dark.clickable[_nghost-%COMP%], .dui-theme-dark   .clickable[_nghost-%COMP%]{border-radius:2px}.dui-theme-dark.clickable[_nghost-%COMP%]:hover, .dui-theme-dark   .clickable[_nghost-%COMP%]:hover{background-color:#4a4a4a}.dui-theme-dark.clickable[_nghost-%COMP%]:active, .dui-theme-dark   .clickable[_nghost-%COMP%]:active{background-color:#69696a;color:#fff}.dui-theme-light.clickable[_nghost-%COMP%], .dui-theme-light   .clickable[_nghost-%COMP%]{border-radius:2px}.dui-theme-light.clickable[_nghost-%COMP%]:hover, .dui-theme-light   .clickable[_nghost-%COMP%]:hover{background-color:#c4c4c4;color:#161616!important}.dui-theme-light.clickable[_nghost-%COMP%]:active, .dui-theme-light   .clickable[_nghost-%COMP%]:active{background-color:#aaabab}"]}),t})();const ha=["input"];function da(t,e){if(1&t&&r._UZ(0,"dui-icon",4),2&t){const t=r.oxw();r.Q6J("size",t.iconSize)("name",t.icon)}}function fa(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"input",5,6),r.NdJ("focus",function(){return r.CHM(t),r.oxw().onFocus()})("blur",function(){return r.CHM(t),r.oxw().onBlur()})("change",function(e){return r.CHM(t),r.oxw().handleFileInput(e)})("keyup",function(e){return r.CHM(t),r.oxw().onKeyUp(e)})("keydown",function(e){return r.CHM(t),r.oxw().onKeyDown(e)})("ngModelChange",function(e){return r.CHM(t),r.oxw().setInnerValue(e)}),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("step",t.step)("readOnly",!1!==t.readonly)("type",t.type)("placeholder",t.placeholder)("disabled",t.isDisabled)("ngModel","file"===t.type?void 0:t.innerValue),r.uIk("min",t.min)("max",t.max)("minLength",t.minLength)("maxLength",t.maxLength)}}function pa(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"textarea",7,6),r.NdJ("focus",function(){return r.CHM(t),r.oxw().onFocus()})("blur",function(){return r.CHM(t),r.oxw().onBlur()})("keyup",function(e){return r.CHM(t),r.oxw().onKeyUp(e)})("keydown",function(e){return r.CHM(t),r.oxw().onKeyDown(e)})("ngModelChange",function(e){return r.CHM(t),r.oxw().innerValue=e}),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("readOnly",!1!==t.readonly)("placeholder",t.placeholder)("disabled",t.isDisabled)("ngModel",t.innerValue)}}function ga(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-icon",8),r.NdJ("click",function(){return r.CHM(t),r.oxw().clear()}),r.qZA()}}const ma=["time","date","datetime","datetime-local"];let ya=(()=>{class t extends ca{constructor(t,e,n,i){super(t,e,n),this.injector=t,this.cd=e,this.cdParent=n,this.datePipe=i,this.type="text",this.step=1,this.placeholder="",this.icon="",this.iconSize=17,this.focus=!1,this.lightFocus=!1,this.noControls=!1,this.semiTransparent=!1,this.esc=new r.vpe,this.enter=new r.vpe,this.keyDown=new r.vpe,this.keyUp=new r.vpe,this.textured=!1,this.readonly=!1,this.focusChange=new r.vpe,this.round=!1,this.clearer=!1}get isTextured(){return!1!==this.textured}get isFocused(){return!!this.input&&document.activeElement===this.input.nativeElement}get isFilled(){return!!this.innerValue}get isRound(){return!1!==this.round}get hasClearer(){return!1!==this.clearer}get hasIcon(){return!!this.icon}onBlur(){this.cdParent.detectChanges(),this.focusChange.next(!1)}onFocus(){this.cdParent.detectChanges(),this.focusChange.next(!0)}clear(){var t=this;return(0,Co.Z)(function*(){t.innerValue=""})()}setInnerValue(t){"file"!==this.type&&(this.innerValue=t)}get innerValue(){if("text"===this.type);else if("number"===this.type);else if(ma.includes(this.type)&&super.innerValue instanceof Date)return this.datePipe.transform(super.innerValue,"yyyy-MM-ddThh:mm:ss.SSS");return super.innerValue}set innerValue(t){"text"===this.type||("number"===this.type?t&&"number"!=typeof t&&(t=parseFloat(t)):ma.includes(this.type)&&"string"==typeof t&&(t=new Date(t))),super.innerValue=t}writeValue(t){var e=()=>super.writeValue,n=this;return(0,Co.Z)(function*(){"file"===n.type&&!t&&n.input&&(n.input.nativeElement.value=""),e().call(n,t)})()}onKeyDown(t){this.touch(),this.keyDown.emit(t)}onKeyUp(t){"enter"===t.key.toLowerCase()&&"textarea"!==this.type&&this.enter.emit(t),"esc"!==t.key.toLowerCase()&&"escape"!==t.key.toLowerCase()||this.esc.emit(t),this.keyUp.emit(t)}focusInput(){setTimeout(()=>{this.input.nativeElement.focus()})}ngAfterViewInit(){!1!==this.focus&&this.input&&setTimeout(()=>{this.input.nativeElement.focus(),ea(this.cd)})}handleFileInput(t){var e=this;return(0,Co.Z)(function*(){const n=t.target.files;e.touch();const r=t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{r.result&&(r.result instanceof ArrayBuffer?e(r.result):e(void 0))},r.onerror=t=>{console.log("Error: ",t),n()},r.readAsArrayBuffer(t)});if(n)if(n.length>1){const t=[];for(let e=0;e<n.length;e++){const i=n.item(e);i&&t.push(yield r(i))}e.innerValue=t}else 1===n.length&&(e.innerValue=yield r(n.item(0)))})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.zs3),r.Y36(r.sBO),r.Y36(r.sBO,4),r.Y36(Ot))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-input"]],viewQuery:function(t,e){if(1&t&&r.Gf(ha,5),2&t){let t;r.iGM(t=r.CRH())&&(e.input=t.first)}},hostVars:20,hostBindings:function(t,e){2&t&&r.ekj("is-textarea","textarea"===e.type)("light-focus",!1!==e.lightFocus)("semi-transparent",!1!==e.semiTransparent)("no-controls",!1!==e.noControls)("textured",e.isTextured)("focused",e.isFocused)("filled",e.isFilled)("round",e.isRound)("has-clearer",e.hasClearer)("has-icon",e.hasIcon)},inputs:{type:"type",step:"step",placeholder:"placeholder",icon:"icon",min:"min",max:"max",maxLength:"maxLength",minLength:"minLength",iconSize:"iconSize",focus:"focus",lightFocus:"lightFocus",noControls:"noControls",semiTransparent:"semiTransparent",textured:"textured",readonly:"readonly",round:"round",clearer:"clearer"},outputs:{esc:"esc",enter:"enter",keyDown:"keyDown",keyUp:"keyUp",focusChange:"focusChange"},features:[r._Bn([la(t)]),r.qOj],decls:4,vars:4,consts:[["class","icon",3,"size","name",4,"ngIf"],[3,"step","readOnly","type","placeholder","disabled","ngModel","focus","blur","change","keyup","keydown","ngModelChange",4,"ngIf"],[3,"readOnly","placeholder","disabled","ngModel","focus","blur","keyup","keydown","ngModelChange",4,"ngIf"],["class","clearer","name","clear",3,"click",4,"ngIf"],[1,"icon",3,"size","name"],[3,"step","readOnly","type","placeholder","disabled","ngModel","focus","blur","change","keyup","keydown","ngModelChange"],["input",""],[3,"readOnly","placeholder","disabled","ngModel","focus","blur","keyup","keydown","ngModelChange"],["name","clear",1,"clearer",3,"click"]],template:function(t,e){1&t&&(r.YNc(0,da,1,2,"dui-icon",0),r.YNc(1,fa,2,10,"input",1),r.YNc(2,pa,2,4,"textarea",2),r.YNc(3,ga,1,0,"dui-icon",3)),2&t&&(r.Q6J("ngIf",e.icon),r.xp6(1),r.Q6J("ngIf","textarea"!==e.type),r.xp6(1),r.Q6J("ngIf","textarea"===e.type),r.xp6(1),r.Q6J("ngIf",e.hasClearer))},directives:[ft,ua,es,vs,Vs],styles:["[_nghost-%COMP%]{display:inline-block;position:relative;height:21px;line-height:21px;color:var(--dui-input-text);width:150px;vertical-align:middle;background:#fff;border:1px solid #bdbdbd}.semi-transparent[_nghost-%COMP%]{border:1px solid #97979747;background:#79797914}[_nghost-%COMP%]:not(.light-focus).focused{outline:0;border-color:#6da0e7;box-shadow:3px 3px 0 #6da0e7,-3px -3px 0 #6da0e7,-3px 3px 0 #6da0e7,3px -3px 0 #6da0e7}.light-focus.focused[_nghost-%COMP%]{border:1px solid #949494}.round[_nghost-%COMP%]{border-radius:4px}.disabled[_nghost-%COMP%]{color:#c5c5c5;pointer-events:none;border:1px solid #d4d4d4}.disabled[_nghost-%COMP%] > *[_ngcontent-%COMP%]{opacity:.6}.disabled[_nghost-%COMP%]   .clearer[_ngcontent-%COMP%]{opacity:0}.no-controls[_nghost-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .no-controls[_nghost-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.no-controls[_nghost-%COMP%]   input[_ngcontent-%COMP%]{-moz-appearance:textfield}[_nghost-%COMP%]:not(.is-textarea){display:inline-flex;align-items:center}.is-textarea[_nghost-%COMP%]{height:60px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{border:0;min-width:20px;color:var(--dui-input-text);font:normal 13px system-ui,sans-serif;background-color:initial;height:17px;line-height:17px;padding:0 4px;vertical-align:top;resize:none;width:100%}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#c5c5c5}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:0}.dark[_nghost-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .dark[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder, .dark   [_nghost-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#c5c5c566}textarea[_ngcontent-%COMP%]{height:100%}.has-icon[_nghost-%COMP%]{padding-left:1px}.has-icon[_nghost-%COMP%]   input[_ngcontent-%COMP%], .has-icon[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{padding-left:3px}textarea[_ngcontent-%COMP%]{padding-top:2px;line-height:17px}.semi-transparent[_nghost-%COMP%]   dui-icon[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]   dui-icon.clearer[_ngcontent-%COMP%]{margin-right:2px;opacity:0;transition:opacity .2s ease-in;cursor:pointer;color:#b8babc;pointer-events:none}.filled[_nghost-%COMP%]   .clearer[_ngcontent-%COMP%]{opacity:1;pointer-events:all}.textured[_nghost-%COMP%]{border-color:#c9cac9 #c6c7c6 #a1a1a1;border-style:solid;border-width:1px;background-image:linear-gradient(-180deg,#fdfdfd 5%,#fafafa 0,#f6f6f6 55%,#f1f1f1 99%);box-shadow:none}.textured[_nghost-%COMP%]:not(.light-focus).focused{border:1px solid #4991bc}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{color:#fff;background-image:linear-gradient(-180deg,#3d3d3d,#414141 10%,#414141);border-color:#565656 #484848;border-style:solid;border-width:1px}.dark.semi-transparent[_nghost-%COMP%], .dark   .semi-transparent[_nghost-%COMP%]{border:1px solid #97979747;background:#79797914}.dark[_nghost-%COMP%]:not(.light-focus).focused, .dark   [_nghost-%COMP%]:not(.light-focus).focused{border-color:#2a729c;box-shadow:3px 3px 0 #2a729c,-3px -3px 0 #2a729c,-3px 3px 0 #2a729c,3px -3px 0 #2a729c}.dark.textured[_nghost-%COMP%]:not(.light-focus).focused, .dark   .textured[_nghost-%COMP%]:not(.light-focus).focused{box-shadow:3px 3px 0 #2a729c,-3px -3px 0 #2a729c,-3px 3px 0 #2a729c,3px -3px 0 #2a729c;border:1px solid #4991bc}.dark.light-focus.focused[_nghost-%COMP%], .dark   .light-focus.focused[_nghost-%COMP%]{border:1px solid #5d666e}.dark[_nghost-%COMP%]   input[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%], .dark[_nghost-%COMP%]   textarea[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{color:#fff}.dark.textured[_nghost-%COMP%], .dark   .textured[_nghost-%COMP%]{background-image:linear-gradient(-180deg,#6a6a6a,#676767);border-color:#7b7b7b #69696a #676767;border-style:solid;border-width:1px;box-shadow:none}"]}),t})();var va=n(65341),ba=n(74059),_a=n.n(ba),wa=n(95639);function xa(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Ca(t){return Array.isArray(t)?t:[t]}function Sa(t){return null==t?"":"string"==typeof t?t:`${t}px`}function Ta(t,e,n,r){return(0,yn.m)(n)&&(r=n,n=void 0),r?Ta(t,e,n).pipe((0,Le.U)(t=>(0,ve.k)(t)?r(...t):r(t))):new Ce.y(r=>{Ea(t,e,function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},r,n)})}function Ea(t,e,n,r,i){let o;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const r=t;t.addEventListener(e,n,i),o=()=>r.removeEventListener(e,n,i)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const r=t;t.on(e,n),o=()=>r.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const r=t;t.addListener(e,n),o=()=>r.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let o=0,s=t.length;o<s;o++)Ea(t[o],e,n,r,i)}r.add(o)}var Oa=n(36465),Aa=n(16102);const Pa=new class extends Aa.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends Oa.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});let ka=1;const Ma=Promise.resolve(),Ia={};function Ra(t){return t in Ia&&(delete Ia[t],!0)}const Da={setImmediate(t){const e=ka++;return Ia[e]=!0,Ma.then(()=>Ra(e)&&t()),e},clearImmediate(t){Ra(t)}},Na=new class extends Aa.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends Oa.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=Da.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(Da.clearImmediate(e),t.scheduled=void 0)}});class La{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Fa(t,this.compare,this.keySelector))}}class Fa extends be.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}const Ba=new Aa.v(Oa.o);class ja{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new $a(t,this.durationSelector))}}class $a extends Fe.Ds{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const r=(0,Fe.ft)(n,new Fe.IY(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function Ua(t){return!(0,ve.k)(t)&&t-parseFloat(t)+1>=0}function Va(t){const{index:e,period:n,subscriber:r}=t;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function Za(t,e=Ba){return n=()=>function(t=0,e,n){let r=-1;return Ua(e)?r=Number(e)<1?1:Number(e):(0,ye.K)(e)&&(n=e),(0,ye.K)(n)||(n=Ba),new Ce.y(e=>{const i=Ua(t)?t:+t-n.now();return n.schedule(Va,i,{index:0,period:r,subscriber:e})})}(t,e),function(t){return t.lift(new ja(n))};var n}function za(t){return e=>e.lift(new Ha(t))}class Ha{constructor(t){this.notifier=t}call(t,e){const n=new qa(t),r=(0,Fe.ft)(this.notifier,new Fe.IY(n));return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class qa extends Fe.Ds{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class Ya{call(t,e){return e.subscribe(new Ga(t))}}class Ga extends be.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Wa=n(21929);let Ja;try{Ja="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Cm){Ja=!1}let Xa,Qa,Ka=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Ja)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})(),tl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function el(){if(null==Qa){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Qa=!1,Qa;if("scrollBehavior"in document.documentElement.style)Qa=!0;else{const t=Element.prototype.scrollTo;Qa=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Qa}function nl(){if("object"!=typeof document||!document)return 0;if(null==Xa){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),r=n.style;r.width="2px",r.height="1px",t.appendChild(n),document.body.appendChild(t),Xa=0,0===t.scrollLeft&&(t.scrollLeft=1,Xa=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return Xa}const rl=new r.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,r.f3M)(s)}});let il=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new r.vpe,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(rl,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(rl,8))},token:t,providedIn:"root"}),t})(),ol=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();class sl extends class{}{constructor(t){super(),this._data=t}connect(){return(0,wa.b)(this._data)?this._data:(0,ge.of)(this._data)}disconnect(){}}class al{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(t,e,n,r,i){t.forEachOperation((t,o,s)=>{let a,l;null==t.previousIndex?(a=this._insertView(()=>n(t,o,s),s,e,r(t)),l=a?1:0):null==s?(this._detachAndCacheView(o,e),l=3):(a=this._moveView(o,s,e,r(t)),l=2),i&&i({context:null==a?void 0:a.context,operation:l,record:t})})}detach(){for(const t of this._viewCache)t.destroy();this._viewCache=[]}_insertView(t,e,n,r){const i=this._insertViewFromCache(e,n);if(i)return void(i.context.$implicit=r);const o=t();return n.createEmbeddedView(o.templateRef,o.context,o.index)}_detachAndCacheView(t,e){const n=e.detach(t);this._maybeCacheView(n,e)}_moveView(t,e,n,r){const i=n.get(t);return n.move(i,e),i.context.$implicit=r,i}_maybeCacheView(t,e){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(t);else{const n=e.indexOf(t);-1===n?t.destroy():e.remove(n)}}_insertViewFromCache(t,e){const n=this._viewCache.pop();return n&&e.insert(n,t),n||null}}const ll=new r.OlP("_ViewRepeater"),cl=["contentWrapper"],ul=["*"],hl=new r.OlP("VIRTUAL_SCROLL_STRATEGY");class dl{constructor(t,e,n){this._scrolledIndexChange=new Ne.xQ,this.scrolledIndexChange=this._scrolledIndexChange.pipe(t=>t.lift(new La(void 0,void 0))),this._viewport=null,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,n){this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=n,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const t=this._viewport.getRenderedRange(),e={start:t.start,end:t.end},n=this._viewport.getViewportSize(),r=this._viewport.getDataLength();let i=this._viewport.measureScrollOffset(),o=this._itemSize>0?i/this._itemSize:0;if(e.end>r){const t=Math.ceil(n/this._itemSize),s=Math.max(0,Math.min(o,r-t));o!=s&&(o=s,i=s*this._itemSize,e.start=Math.floor(o)),e.end=Math.max(0,Math.min(r,e.start+t))}const s=i-e.start*this._itemSize;if(s<this._minBufferPx&&0!=e.start){const t=Math.ceil((this._maxBufferPx-s)/this._itemSize);e.start=Math.max(0,e.start-t),e.end=Math.min(r,Math.ceil(o+(n+this._minBufferPx)/this._itemSize))}else{const t=e.end*this._itemSize-(i+n);if(t<this._minBufferPx&&e.end!=r){const n=Math.ceil((this._maxBufferPx-t)/this._itemSize);n>0&&(e.end=Math.min(r,e.end+n),e.start=Math.max(0,Math.floor(o-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(o))}}function fl(t){return t._scrollStrategy}let pl=(()=>{class t{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new dl(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=xa(t)}get minBufferPx(){return this._minBufferPx}set minBufferPx(t){this._minBufferPx=xa(t)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(t){this._maxBufferPx=xa(t)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[r._Bn([{provide:hl,useFactory:fl,deps:[(0,r.Gpc)(()=>t)]}]),r.TTD]}),t})(),gl=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new Ne.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ce.y(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(Za(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,ge.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(We(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,r)=>{this._scrollableContainsElement(r,t)&&e.push(r)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=(i=e)instanceof r.SBq?i.nativeElement:i;var i;let o=t.getElementRef().nativeElement;do{if(n==o)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ta(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.R0b),r.LFG(Ka),r.LFG(s,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.R0b),r.LFG(Ka),r.LFG(s,8))},token:t,providedIn:"root"}),t})(),ml=(()=>{class t{constructor(t,e,n,r){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=r,this._destroyed=new Ne.xQ,this._elementScrolled=new Ce.y(t=>this.ngZone.runOutsideAngular(()=>Ta(this.elementRef.nativeElement,"scroll").pipe(za(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=nl()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==nl()?t.left=t.right:1==nl()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;el()?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))}measureScrollOffset(t){const e="left",n="right",r=this.elementRef.nativeElement;if("top"==t)return r.scrollTop;if("bottom"==t)return r.scrollHeight-r.clientHeight-r.scrollTop;const i=this.dir&&"rtl"==this.dir.value;return"start"==t?t=i?n:e:"end"==t&&(t=i?e:n),i&&2==nl()?t==e?r.scrollWidth-r.clientWidth-r.scrollLeft:r.scrollLeft:i&&1==nl()?t==e?r.scrollLeft+r.scrollWidth-r.clientWidth:-r.scrollLeft:t==e?r.scrollLeft:r.scrollWidth-r.clientWidth-r.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(gl),r.Y36(r.R0b),r.Y36(il,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),yl=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new Ne.xQ,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,r=n.getBoundingClientRect();return{top:-r.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-r.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Za(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Ka),r.LFG(r.R0b),r.LFG(s,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Ka),r.LFG(r.R0b),r.LFG(s,8))},token:t,providedIn:"root"}),t})();const vl="undefined"!=typeof requestAnimationFrame?Pa:Na;let bl=(()=>{class t extends ml{constructor(t,e,n,r,i,o,s){super(t,o,n,i),this.elementRef=t,this._changeDetectorRef=e,this._scrollStrategy=r,this._detachedSubject=new Ne.xQ,this._renderedRangeSubject=new Ne.xQ,this._orientation="vertical",this.scrolledIndexChange=new Ce.y(t=>this._scrollStrategy.scrolledIndexChange.subscribe(e=>Promise.resolve().then(()=>this.ngZone.run(()=>t.next(e))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=xn.w.EMPTY,this._viewportChanges=s.change().subscribe(()=>{this.checkViewportSize()})}get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe(He(null),Za(0,vl)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(za(this._detachedSubject)).subscribe(t=>{const e=t.length;e!==this._dataLength&&(this._dataLength=e,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){var e,n;((e=this._renderedRange).start!=(n=t).start||e.end!=n.end)&&(this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,e="to-start"){const n="horizontal"==this.orientation,r=n?"X":"Y";let i=`translate${r}(${Number((n&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===e&&(i+=` translate${r}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=i&&(this._renderedContentTransform=i,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,e="auto"){const n={behavior:e};"horizontal"===this.orientation?n.start=t:n.top=t,this.scrollTo(n)}scrollToIndex(t,e="auto"){this._scrollStrategy.scrollToIndex(t,e)}measureScrollOffset(t){return super.measureScrollOffset(t||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const t=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?t.clientWidth:t.clientHeight}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const e of t)e()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.sBO),r.Y36(r.R0b),r.Y36(hl,8),r.Y36(il,8),r.Y36(gl),r.Y36(yl))},t.\u0275cmp=r.Xpm({type:t,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,e){if(1&t&&r.Gf(cl,7),2&t){let t;r.iGM(t=r.CRH())&&(e._contentWrapper=t.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,e){2&t&&r.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===e.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==e.orientation)},inputs:{orientation:"orientation"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[r._Bn([{provide:ml,useExisting:t}]),r.qOj],ngContentSelectors:ul,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"div",0,1),r.Hsn(2),r.qZA(),r._UZ(3,"div",2)),2&t&&(r.xp6(3),r.Udp("width",e._totalContentWidth)("height",e._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),t})();function _l(t,e,n){if(!n.getBoundingClientRect)return 0;const r=n.getBoundingClientRect();return"horizontal"===t?"start"===e?r.left:r.right:"start"===e?r.top:r.bottom}let wl=(()=>{class t{constructor(t,e,n,r,i,o){this._viewContainerRef=t,this._template=e,this._differs=n,this._viewRepeater=r,this._viewport=i,this.viewChange=new Ne.xQ,this._dataSourceChanges=new Ne.xQ,this.dataStream=this._dataSourceChanges.pipe(He(null),t=>t.lift(new Ya),Be(([t,e])=>this._changeDataSource(t,e)),function(t,e,n){let r;return r={bufferSize:1,windowTime:void 0,refCount:!1,scheduler:void 0},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,l=!1;return function(c){let u;s++,!i||a?(a=!1,i=new Wa.t(t,e,r),u=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){l=!0,o=void 0,i.complete()}})):u=i.subscribe(this),this.add(()=>{s--,u.unsubscribe(),o&&!l&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}()),this._differ=null,this._needsUpdate=!1,this._destroyed=new Ne.xQ,this.dataStream.subscribe(t=>{this._data=t,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe(za(this._destroyed)).subscribe(t=>{this._renderedRange=t,o.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(t){this._cdkVirtualForOf=t,function(t){return t&&"function"==typeof t.connect}(t)?this._dataSourceChanges.next(t):this._dataSourceChanges.next(new sl((0,wa.b)(t)?t:Array.from(t||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(t){this._needsUpdate=!0,this._cdkVirtualForTrackBy=t?(e,n)=>t(e+(this._renderedRange?this._renderedRange.start:0),n):void 0}set cdkVirtualForTemplate(t){t&&(this._needsUpdate=!0,this._template=t)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(t){this._viewRepeater.viewCacheSize=xa(t)}measureRangeSize(t,e){if(t.start>=t.end)return 0;const n=t.start-this._renderedRange.start,r=t.end-t.start;let i,o;for(let s=0;s<r;s++){const t=this._viewContainerRef.get(s+n);if(t&&t.rootNodes.length){i=o=t.rootNodes[0];break}}for(let s=r-1;s>-1;s--){const t=this._viewContainerRef.get(s+n);if(t&&t.rootNodes.length){o=t.rootNodes[t.rootNodes.length-1];break}}return i&&o?_l(e,"end",o)-_l(e,"start",i):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const t=this._differ.diff(this._renderedItems);t?this._applyChanges(t):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){this._renderedRange&&(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((t,e)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(t,e):e)),this._needsUpdate=!0)}_changeDataSource(t,e){return t&&t.disconnect(this),this._needsUpdate=!0,e?e.connect(this):(0,ge.of)()}_updateContext(){const t=this._data.length;let e=this._viewContainerRef.length;for(;e--;){const n=this._viewContainerRef.get(e);n.context.index=this._renderedRange.start+e,n.context.count=t,this._updateComputedContextProperties(n.context),n.detectChanges()}}_applyChanges(t){this._viewRepeater.applyChanges(t,this._viewContainerRef,(t,e,n)=>this._getEmbeddedViewArgs(t,n),t=>t.item),t.forEachIdentityChange(t=>{this._viewContainerRef.get(t.currentIndex).context.$implicit=t.item});const e=this._data.length;let n=this._viewContainerRef.length;for(;n--;){const t=this._viewContainerRef.get(n);t.context.index=this._renderedRange.start+n,t.context.count=e,this._updateComputedContextProperties(t.context)}}_updateComputedContextProperties(t){t.first=0===t.index,t.last=t.index===t.count-1,t.even=t.index%2==0,t.odd=!t.even}_getEmbeddedViewArgs(t,e){return{templateRef:this._template,context:{$implicit:t.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:e}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4),r.Y36(ll),r.Y36(bl,4),r.Y36(r.R0b))},t.\u0275dir=r.lG2({type:t,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[r._Bn([{provide:ll,useClass:al}])]}),t})(),xl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),Cl=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[ol,tl,xl],ol,xl]}),t})();const Sl=window.electron||(window.require?window.require("electron"):void 0);class Tl{static getRemote(){if(!Sl)throw new Error("No Electron available.");return Sl.remote}static getIpc(){if(!Sl)throw new Error("No Electron available.");return Sl.ipcRenderer}static isAvailable(){return!!Sl}static getRemoteOrUndefined(){return Sl?Sl.remote:void 0}static getProcess(){return Tl.getRemote().process}}function El(t,e){if(!t)return!1;if(t===e)return!0;if(t instanceof HTMLElement){let n=t;for(;n.parentElement;){if(n.parentElement===e)return!0;n=n.parentElement}}return!1}function Ol(t,e){let n=t;do{if(n.classList.contains(e))return n;n=n.parentElement}while(n)}function Al(){requestAnimationFrame(()=>{window.dispatchEvent(new Event("resize"))})}function Pl(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}class kl{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Ml extends kl{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class Il extends kl{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Rl extends kl{constructor(t){super(),this.element=t instanceof r.SBq?t.nativeElement:t}}class Dl extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Ml?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Il?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Rl?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,n,r,i){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=i}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}class Nl extends Dl{}let Ll=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const Fl=new WeakMap,Bl=new WeakMap,jl=new WeakMap;function $l(t,e=Fl){let n=e.get(t);return n||(n={},e.set(t,n),n)}function Ul(t){return"ng"+t.substr(0,1).toUpperCase()+t.substr(1)}function Vl(t,e,n){const i=t.constructor[r.Vbs];if(i){const t=i[e];i.onDestroy=function(...e){n.call(this),t&&t.apply(this,e)}}else{const r=t.constructor.prototype[Ul(e)];t.constructor.prototype[Ul(e)]=function(...t){n.call(this),r&&r.apply(this,t)}}}function Zl(){return function(t,e){function n(n){if(n&&n.unsubscribe)try{n.unsubscribe()}catch(r){console.log("Subscription was already unsubscribed.",(0,va.gj)(t),e)}}Object.defineProperty(t,e,{enumerable:!0,configurable:!1,get(){return $l(this)[e]},set(t){const r=$l(this,jl),i=$l(this);n(i[e]),r.destroyed&&n(t),i[e]=t}}),Vl(t,"onDestroy",function(){$l(this,jl).destroyed=!0;const t=$l(this);t[e]&&n(t[e])})}}let zl=(()=>{class t{constructor(e){t.a=e,t.throttled=(0,va.pO)(()=>{t.a.tick()},40)}static tick(){requestAnimationFrame(()=>{t.throttled()})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.z2F))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();var Hl=n(66682);const ql=el();class Yl{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Sa(-this._previousScrollPosition.left),t.style.top=Sa(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,r=e.scrollBehavior||"",i=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),ql&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),ql&&(e.scrollBehavior=r,n.scrollBehavior=i)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class Gl{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Wl{enable(){}disable(){}attach(){}}function Jl(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function Xl(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class Ql{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();Jl(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Kl=(()=>{class t{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new Wl,this.close=t=>new Gl(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new Yl(this._viewportRuler,this._document),this.reposition=t=>new Ql(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=r}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(gl),r.LFG(yl),r.LFG(r.R0b),r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(gl),r.LFG(yl),r.LFG(r.R0b),r.LFG(s))},token:t,providedIn:"root"}),t})();class tc{constructor(t){if(this.scrollStrategy=new Wl,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class ec{constructor(t,e,n,r,i){this.offsetX=n,this.offsetY=r,this.panelClass=i,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class nc{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let rc=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s))},token:t,providedIn:"root"}),t})(),ic=(()=>{class t extends rc{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s))},token:t,providedIn:"root"}),t})(),oc=(()=>{class t extends rc{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=t.composedPath?t.composedPath()[0]:t.target,n=this._attachedOverlays.slice();for(let r=n.length-1;r>-1;r--){const i=n[r];if(!(i._outsidePointerEvents.observers.length<1)&&i.hasAttached()){if(i.overlayElement.contains(e))break;i._outsidePointerEvents.next(t)}}}}add(t){if(super.add(t),!this._isAttached){const t=this._document.body;t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s),r.LFG(Ka))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s),r.LFG(Ka))},token:t,providedIn:"root"}),t})();const sc="undefined"!=typeof window?window:{},ac=void 0!==sc.__karma__&&!!sc.__karma__||void 0!==sc.jasmine&&!!sc.jasmine||void 0!==sc.jest&&!!sc.jest||void 0!==sc.Mocha&&!!sc.Mocha;let lc=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||ac){const e=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add(t),ac?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s),r.LFG(Ka))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(s),r.LFG(Ka))},token:t,providedIn:"root"}),t})();class cc{constructor(t,e,n,r,i,o,s,a,l){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=i,this._keyboardDispatcher=o,this._document=s,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new Ne.xQ,this._attachments=new Ne.xQ,this._detachments=new Ne.xQ,this._locationChanges=xn.w.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new Ne.xQ,this._outsidePointerEvents=new Ne.xQ,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ve(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Sa(this._config.width),t.height=Sa(this._config.height),t.minWidth=Sa(this._config.minWidth),t.minHeight=Sa(this._config.minHeight),t.maxWidth=Sa(this._config.maxWidth),t.maxHeight=Sa(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const r=t.classList;Ca(e).forEach(t=>{t&&(n?r.add(t):r.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(za((0,Hl.T)(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const uc="cdk-overlay-connected-position-bounding-box",hc=/([A-Za-z%]+)$/;class dc{constructor(t,e,n,r,i){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=i,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ne.xQ,this._resizeSubscription=xn.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(uc),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=[];let i;for(let o of this._preferredPositions){let s=this._getOriginPoint(t,o),a=this._getOverlayPoint(s,e,o),l=this._getOverlayFit(a,e,n,o);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(o,s);this._canFitWithFlexibleDimensions(l,a,n)?r.push({position:o,origin:s,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(s,o)}):(!i||i.overlayFit.visibleArea<l.visibleArea)&&(i={overlayFit:l,overlayPoint:a,originPoint:s,position:o,overlayRect:e})}if(r.length){let t=null,e=-1;for(const n of r){const r=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);r>e&&(e=r,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(i.position,i.originPoint);this._applyPosition(i.position,i.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&fc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(uc),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,r;if("center"==e.originX)n=t.left+t.width/2;else{const r=this._isRtl()?t.right:t.left,i=this._isRtl()?t.left:t.right;n="start"==e.originX?r:i}return r="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:r}}_getOverlayPoint(t,e,n){let r,i;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,i="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+i}}_getOverlayFit(t,e,n,r){const i=gc(e);let{x:o,y:s}=t,a=this._getOffset(r,"x"),l=this._getOffset(r,"y");a&&(o+=a),l&&(s+=l);let c=0-s,u=s+i.height-n.height,h=this._subtractOverflows(i.width,0-o,o+i.width-n.width),d=this._subtractOverflows(i.height,c,u),f=h*d;return{visibleArea:f,isCompletelyWithinViewport:i.width*i.height===f,fitsInViewportVertically:d===i.height,fitsInViewportHorizontally:h==i.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,i=n.right-e.x,o=pc(this._overlayRef.getConfig().minHeight),s=pc(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=s&&s<=i;return(t.fitsInViewportVertically||null!=o&&o<=r)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=gc(e),i=this._viewportRect,o=Math.max(t.x+r.width-i.width,0),s=Math.max(t.y+r.height-i.height,0),a=Math.max(i.top-n.top-t.y,0),l=Math.max(i.left-n.left-t.x,0);let c=0,u=0;return c=r.width<=i.width?l||-o:t.x<this._viewportMargin?i.left-n.left-t.x:0,u=r.height<=i.height?a||-s:t.y<this._viewportMargin?i.top-n.top-t.y:0,this._previousPushAmount={x:c,y:u},{x:t.x+c,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new nc(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let i=0;i<e.length;i++)e[i].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let i,o,s,a,l,c;if("top"===e.overlayY)o=t.y,i=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)s=n.height-t.y+2*this._viewportMargin,i=n.height-s+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),r=this._lastBoundingBoxSize.height;i=2*e,o=t.y-e,i>r&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-r/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)c=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)l=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),r=this._lastBoundingBoxSize.width;a=2*e,l=t.x-e,a>r&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.x-r/2)}return{top:o,left:l,bottom:s,right:c,width:a,height:i}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,i=this._overlayRef.getConfig().maxWidth;r.height=Sa(n.height),r.top=Sa(n.top),r.bottom=Sa(n.bottom),r.width=Sa(n.width),r.left=Sa(n.left),r.right=Sa(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(r.maxHeight=Sa(t)),i&&(r.maxWidth=Sa(i))}this._lastBoundingBoxSize=n,fc(this._boundingBox.style,r)}_resetBoundingBoxStyles(){fc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){fc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),i=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const r=this._viewportRuler.getViewportScrollPosition();fc(n,this._getExactOverlayY(e,t,r)),fc(n,this._getExactOverlayX(e,t,r))}else n.position="static";let s="",a=this._getOffset(e,"x"),l=this._getOffset(e,"y");a&&(s+=`translateX(${a}px) `),l&&(s+=`translateY(${l}px)`),n.transform=s.trim(),o.maxHeight&&(r?n.maxHeight=Sa(o.maxHeight):i&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Sa(o.maxWidth):i&&(n.maxWidth="")),fc(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},i=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(i=this._pushOverlayOnScreen(i,this._overlayRect,n));let o=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return i.y-=o,"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(i.y+this._overlayRect.height)+"px":r.top=Sa(i.y),r}_getExactOverlayX(t,e,n){let r,i={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),r=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===r?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Sa(o.x),i}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Xl(t,n),isOriginOutsideView:Jl(t,n),isOverlayClipped:Xl(e,n),isOverlayOutsideView:Jl(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Ca(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof r.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function fc(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function pc(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(hc);return n&&"px"!==n?null:parseFloat(e)}return t||null}function gc(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class mc{constructor(t,e,n,r,i,o,s){this._preferredPositions=[],this._positionStrategy=new dc(n,r,i,o,s).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,r){const i=new ec(t,e,n,r);return this._preferredPositions.push(i),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const yc="cdk-global-overlay-wrapper";class vc{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(yc),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:i,maxWidth:o,maxHeight:s}=n,a=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==i&&"100vh"!==i||s&&"100%"!==s&&"100vh"!==s);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(yc),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let bc=(()=>{class t{constructor(t,e,n,r){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=r}global(){return new vc}connectedTo(t,e,n){return new mc(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new dc(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(yl),r.LFG(s),r.LFG(Ka),r.LFG(lc))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(yl),r.LFG(s),r.LFG(Ka),r.LFG(lc))},token:t,providedIn:"root"}),t})(),_c=0,wc=(()=>{class t{constructor(t,e,n,r,i,o,s,a,l,c,u){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=r,this._keyboardDispatcher=i,this._injector=o,this._ngZone=s,this._document=a,this._directionality=l,this._location=c,this._outsideClickDispatcher=u}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),r=this._createPortalOutlet(n),i=new tc(t);return i.direction=i.direction||this._directionality.value,new cc(r,e,n,i,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+_c++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(r.z2F)),new Dl(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Kl),r.LFG(lc),r.LFG(r._Vd),r.LFG(bc),r.LFG(ic),r.LFG(r.zs3),r.LFG(r.R0b),r.LFG(s),r.LFG(il),r.LFG(w),r.LFG(oc))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const xc={provide:new r.OlP("cdk-connected-overlay-scroll-strategy"),deps:[wc],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let Cc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[wc,xc],imports:[[ol,Ll,Cl],Cl]}),t})(),Sc=(()=>{class t{constructor(){this.id=0,this.registry=new Map,this.windowHistory=[],this.focused=new me.X(!1),this.focused.subscribe(t=>{for(const e of this.registry.values())e.state.focus.next(t);ea()})}getAllElectronWindows(){return[...this.registry.keys()].filter(t=>!!t.electronWindow).map(t=>t.electronWindow)}register(t,e,n,r,i){this.id++,t.id=this.id,this.registry.set(t,{state:n,menu:r,cd:e,viewContainerRef:i})}getOuterActiveWindow(){if(this.activeWindow)return this.activeWindow.getClosestNonDialogWindow()}getCurrentViewContainerRef(){if(this.activeWindow){const t=this.registry.get(this.activeWindow);if(t)return t.viewContainerRef}throw new Error("No active window")}focus(t){if(this.activeWindow===t)return;const e=this.registry.get(t);if(!e)throw new Error("Window not registered");this.activeWindow=t,(0,va.lH)(this.windowHistory,t),this.windowHistory.push(t),e.state.focus.next(!0),e.menu.focus(),ea()}blur(t){const e=this.registry.get(t);e&&e.state.focus.next(!1),this.activeWindow===t&&delete this.activeWindow,ea()}unregister(t){const e=this.registry.get(t);e&&e.state.focus.next(!1),this.registry.delete(t),(0,va.lH)(this.windowHistory,t),this.windowHistory.length&&this.focus(this.windowHistory[this.windowHistory.length-1]),ea()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Tc=(()=>{class t{constructor(){this.focus=new me.X(!1),this.disableInputs=new me.X(!1),this.toolbars={},this.toolbarContainers={},this.closable=!0,this.maximizable=!0,this.minimizable=!0}addToolbarContainer(t,e){this.toolbars[t]||(this.toolbars[t]=[]),this.toolbars[t].push(e),this.toolbarContainers[t]&&this.toolbarContainers[t].toolbarsUpdated()}removeToolbarContainer(t,e){(0,va.lH)(this.toolbars[t],e),this.toolbarContainers[t]&&this.toolbarContainers[t].toolbarsUpdated()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const Ec=new r.OlP("Electron window"),Oc=new r.OlP("In dialog");"undefined"!=typeof window&&void 0===window.global&&(window.global=window);class Ac{constructor(t,e,n){this.host=t,this.stack=e,this.release=n}getAllAfter(){const t=[];let e=!1;for(let n=0;n<this.stack.length;n++)e&&t.push(this.stack[n]),this.stack[n]===this&&(e=!0);return t}getPrevious(){const t=this.getAllBefore();return t.length?t[t.length-1]:void 0}isLast(){return 0===this.getAllAfter().length}getAllBefore(){const t=[];for(let e=0;e<this.stack.length;e++){if(this.stack[e]===this)return t;t.push(this.stack[e])}return t}}class Pc{constructor(){this.stack=[]}register(t){const e=new Ac(t,this.stack,()=>{const t=e.getPrevious();t&&t.host.focus(),(0,va.lH)(this.stack,e)});return this.stack.push(e),e}}let kc=(()=>{class t{constructor(t,e,n){this.app=t,this.windowRegistry=e,this.router=n,this.darkMode=!1,this.platform="darwin",ta.app=t,"undefined"!=typeof window&&(window.DuiApp=this)}start(){if(Tl.isAvailable()){document.body.classList.add("electron");const t=Tl.getRemote();let e=localStorage.getItem("duiApp/darkMode");e?this.setDarkMode(JSON.parse(e)):this.setDarkMode(),this.setPlatform(t.process.platform)}else this.setPlatform("web"),this.setDarkMode();const t=window.matchMedia("(prefers-color-scheme: dark)"),e=()=>{null===localStorage.getItem("duiApp/darkMode")&&(this.setAutoDarkMode(),this.app.tick())};t.addEventListener?t.addEventListener("change",e):t.addListener(e),"undefined"!=typeof document&&(document.addEventListener("click",()=>ea()),document.addEventListener("focus",()=>ea()),document.addEventListener("blur",()=>ea()),document.addEventListener("keydown",()=>ea()),document.addEventListener("keyup",()=>ea()),document.addEventListener("keypress",()=>ea()),document.addEventListener("mousedown",()=>ea())),this.router&&this.router.events.subscribe(t=>{(t instanceof On||t instanceof $n)&&ea()})}setPlatform(t){this.platform=t,document.body.classList.remove("platform-linux"),document.body.classList.remove("platform-darwin"),document.body.classList.remove("platform-win32"),document.body.classList.remove("platform-native"),document.body.classList.remove("platform-web"),document.body.classList.remove("dui-platform-linux"),document.body.classList.remove("dui-platform-darwin"),document.body.classList.remove("dui-platform-win32"),document.body.classList.remove("dui-platform-native"),document.body.classList.remove("dui-platform-web"),"web"!==this.platform&&(document.body.classList.add("platform-native"),document.body.classList.add("dui-platform-native")),document.body.classList.add("platform-"+t),document.body.classList.add("dui-platform-"+t)}getPlatform(){return this.platform}isDarkMode(){return this.darkMode}setAutoDarkMode(){this.setDarkMode()}get theme(){return this.isDarkModeOverwritten()?this.isDarkMode()?"dark":"light":"auto"}set theme(t){"auto"!==t?this.setDarkMode("dark"===t):this.setAutoDarkMode()}isDarkModeOverwritten(){return null!==localStorage.getItem("duiApp/darkMode")}setGlobalDarkMode(t){if(Tl.isAvailable()){const e=Tl.getRemote();for(const n of e.BrowserWindow.getAllWindows())n.webContents.executeJavaScript(`DuiApp.setDarkMode(${t})`)}}getVibrancy(){return this.darkMode?"ultra-dark":"light"}setDarkMode(t){void 0===t?(this.darkMode=this.isPreferDarkColorSchema(),localStorage.removeItem("duiApp/darkMode")):(localStorage.setItem("duiApp/darkMode",JSON.stringify(t)),this.darkMode=t);for(const e of this.windowRegistry.getAllElectronWindows())e.setVibrancy(this.getVibrancy());document.body.classList.remove("dark"),document.body.classList.remove("light"),document.body.classList.add(this.darkMode?"dark":"light"),document.body.classList.remove("dui-theme-dark"),document.body.classList.remove("dui-theme-light"),document.body.classList.add(this.darkMode?"dui-theme-dark":"dui-theme-light"),window.dispatchEvent(new Event("theme-changed"))}isPreferDarkColorSchema(){return window.matchMedia("(prefers-color-scheme: dark)").matches}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.z2F),r.LFG(Sc),r.LFG(to,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Mc=(()=>{class t{constructor(t,e){t.start(),e&&Tl.isAvailable()&&e.addEventListener("click",t=>{if(t.target){const e=t.target;"a"===e.tagName.toLowerCase()&&(t.preventDefault(),t.stopPropagation(),Tl.getRemote().shell.openExternal(e.href))}})}static forRoot(){return{ngModule:t,providers:[kc,{provide:Oc,useValue:!1},{provide:Ec,useValue:Tl.isAvailable()?Tl.getRemote().BrowserWindow.getAllWindows()[0]:void 0}]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(kc),r.LFG(s,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Pc],imports:[[Mt,zl]]}),t})();const Ic=["templateRef"];function Rc(t,e){1&t&&r.Hsn(0)}const Dc=["*"];let Nc=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-window-sidebar"]],viewQuery:function(t,e){if(1&t&&r.Gf(Ic,7),2&t){let t;r.iGM(t=r.CRH())&&(e.template=t.first)}},ngContentSelectors:Dc,decls:2,vars:0,consts:[["templateRef",""]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,Rc,1,0,"ng-template",null,0,r.W1O))},styles:[""]}),t})(),Lc=(()=>{class t{constructor(t,e){this.host=t,this.zone=e,this.modelChange=new r.vpe,this.indicator=!1,this.position="right"}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{const t=new(_a())(this.host.nativeElement);t.add(new(_a().Pan)({direction:_a().DIRECTION_ALL,threshold:0}));let e,n=0;this.host.nativeElement.addEventListener("pointerdown",t=>{t.stopPropagation(),t.preventDefault()}),this.host.nativeElement.addEventListener("pointermove",t=>{t.stopPropagation(),t.preventDefault()}),t.on("panstart",t=>{n="right"===this.position||"left"===this.position?this.element?this.element.clientWidth:this.host.nativeElement.parentElement.clientWidth:this.element?this.element.clientHeight:this.host.nativeElement.parentElement.clientHeight}),t.on("pan",t=>{e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>{this.element&&(this.element.style.width=n+t.deltaX+"px"),"right"===this.position?(this.modelChange.emit(n+t.deltaX),this.triggerWindowResize()):"left"===this.position?(this.modelChange.emit(n-t.deltaX),this.triggerWindowResize()):"top"===this.position?(this.modelChange.emit(n-t.deltaY),this.triggerWindowResize()):"bottom"===this.position&&(this.modelChange.emit(n+t.deltaY),this.triggerWindowResize())})})})}triggerWindowResize(){setTimeout(()=>{window.dispatchEvent(new Event("resize"))})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-splitter"]],hostVars:10,hostBindings:function(t,e){2&t&&r.ekj("splitter-right","right"===e.position)("splitter-left","left"===e.position)("splitter-top","top"===e.position)("splitter-bottom","bottom"===e.position)("splitter-with-indicator",!1!==e.indicator)},inputs:{indicator:"indicator",position:"position",element:"element"},outputs:{modelChange:"modelChange"},decls:0,vars:0,template:function(t,e){},styles:['[_nghost-%COMP%]{position:absolute}.splitter-right[_nghost-%COMP%]{width:5px;right:-2px;top:0;bottom:0;cursor:ew-resize}.splitter-left[_nghost-%COMP%]{width:5px;left:-2px;top:0;bottom:0;cursor:ew-resize}.splitter-top[_nghost-%COMP%]{top:-2px;left:0;right:0;height:5px;cursor:ns-resize}.splitter-bottom[_nghost-%COMP%]{bottom:-2px;left:0;right:0;height:5px;cursor:ns-resize}.splitter-with-indicator.splitter-right[_nghost-%COMP%]:before{content:"";position:absolute;height:100%;width:1px;left:2px;background:#d6d6d6}.dark.splitter-with-indicator.splitter-right[_nghost-%COMP%]:before, .dark   .splitter-with-indicator.splitter-right[_nghost-%COMP%]:before{background:#474747}']}),t})();const Fc=["sidebar"],Bc=["sidebarContainer"],jc=["content"],$c=function(){return{}};function Uc(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",3,4),r.NdJ("transitionend",function(){return r.CHM(t),r.oxw().transitionEnded()}),r.TgZ(2,"div",5),r.TgZ(3,"div",6,7),r.GkF(5,8),r.qZA(),r.qZA(),r.TgZ(6,"dui-splitter",9),r.NdJ("modelChange",function(e){r.CHM(t);const n=r.oxw();return n.sidebarWidth=e,n.sidebarMoved()}),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Udp("width",t.getSidebarWidth(),"px"),r.ekj("hidden",!t.sidebarVisible)("with-animation",t.withAnimation),r.xp6(3),r.Udp("width",t.getSidebarWidth(),"px")("max-width",t.getSidebarWidth(),"px"),r.xp6(2),r.Q6J("ngTemplateOutlet",t.toolbar.template)("ngTemplateOutletContext",r.DdM(12,$c))}}const Vc=["*"];let Zc=(()=>{class t{constructor(t,e){this.windowState=t,this.cd=e,this.transparent=!1,this.sidebarVisible=!0,this.class="",this.sidebarWidth=250,this.sidebarMaxWidth=550,this.sidebarMinWidth=100,this.sidebarWidthChange=new r.vpe,this.withAnimation=!1,this.sidebarVisibleChanged=new Ne.xQ}getSidebarWidth(){return Math.min(this.sidebarMaxWidth,Math.max(this.sidebarMinWidth,this.sidebarWidth))}transitionEnded(){this.withAnimation&&(this.withAnimation=!1,Al(),this.cd.detectChanges())}sidebarMoved(){this.windowState.buttonGroupAlignedToSidebar&&this.windowState.buttonGroupAlignedToSidebar.sidebarMoved(),Al(),this.cd.detectChanges()}ngOnChanges(t){this.sidebar&&this.sidebarContainer&&t.sidebarVisible&&(this.handleSidebarVisibility(!0),this.sidebarVisibleChanged.next(this.sidebarVisible))}ngAfterViewInit(){this.handleSidebarVisibility()}handleSidebarVisibility(t=!1){t&&this.windowState.buttonGroupAlignedToSidebar&&(this.withAnimation=!0,this.windowState.buttonGroupAlignedToSidebar.activateOneTimeAnimation(),this.windowState.buttonGroupAlignedToSidebar.sidebarMoved())}isSidebarVisible(){return void 0!==this.sidebar&&this.sidebarVisible}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Tc),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-window-content"]],contentQueries:function(t,e,n){if(1&t&&r.Suo(n,Nc,5),2&t){let t;r.iGM(t=r.CRH())&&(e.toolbar=t.first)}},viewQuery:function(t,e){if(1&t&&(r.Gf(Fc,5),r.Gf(Bc,5),r.Gf(jc,7)),2&t){let t;r.iGM(t=r.CRH())&&(e.sidebar=t.first),r.iGM(t=r.CRH())&&(e.sidebarContainer=t.first),r.iGM(t=r.CRH())&&(e.content=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&r.ekj("transparent",!1!==e.transparent)},inputs:{transparent:"transparent",sidebarVisible:"sidebarVisible",class:"class",sidebarWidth:"sidebarWidth",sidebarMaxWidth:"sidebarMaxWidth",sidebarMinWidth:"sidebarMinWidth"},outputs:{sidebarWidthChange:"sidebarWidthChange"},features:[r.TTD],ngContentSelectors:Vc,decls:5,vars:4,consts:[[1,"top-line"],["content",""],["class","sidebar",3,"hidden","with-animation","width","transitionend",4,"ngIf"],[1,"sidebar",3,"transitionend"],["sidebar",""],[1,"hider"],[1,"sidebar-container","overlay-scrollbar-small"],["sidebarContainer",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["position","right",3,"modelChange"]],template:function(t,e){1&t&&(r.F$t(),r._UZ(0,"div",0),r.TgZ(1,"div",null,1),r.Hsn(3),r.qZA(),r.YNc(4,Uc,7,13,"div",2)),2&t&&(r.xp6(1),r.Gre("content ",e.class,""),r.xp6(3),r.Q6J("ngIf",e.toolbar))},directives:[ft,_t,Lc],styles:["[_nghost-%COMP%]{position:relative;display:flex;flex:1;overflow:hidden;flex-direction:row-reverse;padding-top:1px}[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{position:relative;width:250px;flex-shrink:0;overflow:visible;border-right:1px solid var(--line-sidebar)}[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]   .hider[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;overflow:hidden}[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]   dui-splitter[_ngcontent-%COMP%]{right:-4px}[_nghost-%COMP%]   .sidebar.with-animation[_ngcontent-%COMP%]{transition:width .3s ease-in-out}[_nghost-%COMP%]   .sidebar.hidden[_ngcontent-%COMP%]{width:0!important}[_nghost-%COMP%]   .sidebar-container[_ngcontent-%COMP%]{width:100%;height:100%;max-height:100%;position:relative;min-width:1px;max-width:100%;text-overflow:ellipsis}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;position:relative;padding:14px;min-width:1px;max-width:100%;max-height:100%;overflow:auto}[_nghost-%COMP%]:not(.transparent)   .content[_ngcontent-%COMP%]{background-color:var(--dui-window-content-bg)}.top-line[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:1px;background-color:var(--line-sidebar)}.no-vibrancy[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{border-right:1px solid #c7ced3;background-color:#dfe6eb}.dark.no-vibrancy[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%], .dark   .no-vibrancy[_nghost-%COMP%]   .sidebar[_ngcontent-%COMP%]{background-color:#2a3136}"]}),t})(),zc=(()=>{class t{constructor(){this.menus=[],this.focused=!0,this.subscriptions=new Map}addMenu(t){this.menus.push(t),this.subscriptions.set(t,t.change.subscribe(()=>{this.build()})),this.build()}removeMenu(t){this.subscriptions.get(t).unsubscribe(),this.subscriptions.delete(t),(0,va.lH)(this.menus,t),this.build()}build(){requestAnimationFrame(()=>{this._build()})}_build(){const t=[];for(const n of this.menus)n.validOs()&&t.push(n.buildTemplate());if(t.length||t.push({role:"appMenu"},{role:"fileMenu"},{role:"editMenu"},{role:"viewMenu"},{role:"windowMenu"}),Tl.isAvailable()){const n=Tl.getRemote();if(n)try{const e=n.Menu.buildFromTemplate(t);n.Menu.setApplicationMenu(e)}catch(e){console.error("Could not buildFromTemplate",t),console.error(e)}else console.warn("Not in electron environment")}}focus(){this.build()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Hc(t,e){1&t&&(r.TgZ(0,"div",8),r._UZ(1,"dui-window-toolbar-container"),r.qZA())}const qc=["*"],Yc=["templateRef"];function Gc(t,e){1&t&&r.Hsn(0)}const Wc=function(){return{}};function Jc(t,e){if(1&t&&(r.ynx(0),r.GkF(1,2),r.BQk()),2&t){const t=e.$implicit;r.xp6(1),r.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",r.DdM(2,Wc))}}function Xc(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Jc,2,3,"ng-container",1),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.windowState.toolbars[t.name])}}let Qc=(()=>{class t{constructor(t,e,n){this.windowState=t,this.cdParent=e,this.element=n,this.size="default",this.focusSub=this.windowState.focus.subscribe(t=>{this.cdParent.markForCheck()}),t.header=this}get withToolbar(){return this.windowState.toolbars.default&&this.windowState.toolbars.default.length}ngOnDestroy(){this.focusSub.unsubscribe()}getBottomPosition(){const t=this.element.nativeElement.getBoundingClientRect();return t.y+t.height}maximize(){Tl.getRemote().BrowserWindow.getFocusedWindow().isMaximized()?Tl.getRemote().BrowserWindow.getFocusedWindow().unmaximize():Tl.getRemote().BrowserWindow.getFocusedWindow().maximize()}minimize(){Tl.getRemote().BrowserWindow.getFocusedWindow().minimize()}close(){Tl.getRemote().BrowserWindow.getFocusedWindow().close()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Tc),r.Y36(r.sBO,4),r.Y36(r.SBq))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-window-header"]],hostVars:8,hostBindings:function(t,e){2&t&&r.ekj("inactive",!e.windowState.focus.value)("size-default","default"===e.size)("size-small","small"===e.size)("with-toolbar",e.withToolbar)},inputs:{size:"size"},ngContentSelectors:qc,decls:10,vars:4,consts:[[1,"title"],[1,"closer"],[3,"click"],["name","gnome_minimize",3,"size"],["name","gnome_maximize",3,"size"],[1,"highlight",3,"click"],["name","gnome_close",3,"size"],["class","toolbar",4,"ngIf"],[1,"toolbar"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"div",0),r.Hsn(1),r.TgZ(2,"div",1),r.TgZ(3,"div",2),r.NdJ("click",function(){return e.minimize()}),r._UZ(4,"dui-icon",3),r.qZA(),r.TgZ(5,"div",2),r.NdJ("click",function(){return e.maximize()}),r._UZ(6,"dui-icon",4),r.qZA(),r.TgZ(7,"div",5),r.NdJ("click",function(){return e.close()}),r._UZ(8,"dui-icon",6),r.qZA(),r.qZA(),r.qZA(),r.YNc(9,Hc,2,0,"div",7)),2&t&&(r.xp6(4),r.Q6J("size",18),r.xp6(2),r.Q6J("size",18),r.xp6(2),r.Q6J("size",18),r.xp6(1),r.Q6J("ngIf",e.windowState.toolbars.default))},directives:function(){return[ua,ft,tu]},styles:["[_nghost-%COMP%]{display:block;position:relative;flex-shrink:0;flex-grow:0;padding:0 70px;text-align:center;background-color:var(--dui-window-header-bg);-webkit-app-region:drag}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{min-height:22px;line-height:22px;color:#000000ba;letter-spacing:-.08px;font-weight:500}[_nghost-%COMP%]     dui-window-toolbar-container :not(dui-button-group){-webkit-app-region:no-drag}.size-small[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{min-height:auto}.size-default.with-toolbar[_nghost-%COMP%]{height:55px}.size-small.with-toolbar[_nghost-%COMP%]{height:37px}  .cdk-overlay-pane{-webkit-app-region:no-drag}.closer[_ngcontent-%COMP%]{position:absolute;right:8px;top:3px;display:none;color:#3d3c37;-webkit-app-region:no-drag}.closer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;background-color:#fff0;border:1px solid #fff0}.platform-linux.light[_nghost-%COMP%]   .closer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:active, .platform-linux.light   [_nghost-%COMP%]   .closer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:active{border-radius:4px;border:1px solid silver}.platform-linux.dark[_nghost-%COMP%]   .closer[_ngcontent-%COMP%], .platform-linux.dark   [_nghost-%COMP%]   .closer[_ngcontent-%COMP%]{top:1px}.platform-linux.dark[_nghost-%COMP%]   .closer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .platform-linux.dark   [_nghost-%COMP%]   .closer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:20px;width:20px;height:20px;margin-left:2px;background-image:linear-gradient(180deg,#8b8a84,#5f5e59 78%);border:1px solid #3a3937;text-shadow:0 1px 0 #ffffff1a}.platform-linux.dark[_nghost-%COMP%]   .closer[_ngcontent-%COMP%] > div.highlight[_ngcontent-%COMP%], .platform-linux.dark   [_nghost-%COMP%]   .closer[_ngcontent-%COMP%] > div.highlight[_ngcontent-%COMP%]{background-image:linear-gradient(180deg,#f28665,#df501e 78%);border:1px solid #3a3937}.platform-linux.dark[_nghost-%COMP%]   .closer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:active, .platform-linux.dark   [_nghost-%COMP%]   .closer[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:active{opacity:.7}.platform-linux.dark[_nghost-%COMP%]   .title[_ngcontent-%COMP%], .platform-linux.dark   [_nghost-%COMP%]   .title[_ngcontent-%COMP%]{color:#ffffffba}.platform-linux[_nghost-%COMP%]   .closer[_ngcontent-%COMP%], .platform-linux   [_nghost-%COMP%]   .closer[_ngcontent-%COMP%]{display:block}.platform-native.light[_nghost-%COMP%], .platform-native.light   [_nghost-%COMP%]{background-image:linear-gradient(-180deg,#fff 1px,#e6e5e5 0,#cfcfd0)}.platform-native.light.inactive[_nghost-%COMP%], .platform-native.light   .inactive[_nghost-%COMP%]{background:#f6f6f6}.platform-native.light.inactive[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%], .platform-native.light   .inactive[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]{opacity:.65}.platform-native.dark[_nghost-%COMP%], .platform-native.dark   [_nghost-%COMP%]{background-image:linear-gradient(-180deg,#424242,#353535)}.platform-native.dark[_nghost-%COMP%]   .title[_ngcontent-%COMP%], .platform-native.dark   [_nghost-%COMP%]   .title[_ngcontent-%COMP%]{color:#bbc3cc}.platform-native.dark.inactive[_nghost-%COMP%], .platform-native.dark   .inactive[_nghost-%COMP%]{background:#2d2d2d}.platform-native.dark.inactive[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%], .platform-native.dark   .inactive[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]{opacity:.65}:not(.platform-native).dark[_nghost-%COMP%]   .title[_ngcontent-%COMP%], :not(.platform-native).dark   [_nghost-%COMP%]   .title[_ngcontent-%COMP%]{color:#bbc3cc}.toolbar[_ngcontent-%COMP%]   dui-window-toolbar-container[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:0 8px 7px;display:flex;white-space:nowrap;word-break:keep-all}[_nghost-%COMP%]     dui-button, [_nghost-%COMP%]     dui-input, [_nghost-%COMP%]     dui-select{height:22px!important;line-height:22px}[_nghost-%COMP%]     dui-button dui-icon, [_nghost-%COMP%]     dui-input dui-icon{position:relative;top:-1px}.dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-button, .dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-button, .dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-input, .dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-input, .dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-select, .dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-select{background-image:linear-gradient(-180deg,#6a6a6a,#676767);border-color:#7b7b7b #69696a #676767;border-style:solid;border-width:1px;box-shadow:none}.dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-button:active, .dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-button:active, .dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-select:active, .dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-select:active{background-image:linear-gradient(-180deg,#858484,#818181);border:1px solid #818181;border-top-color:#939393}.dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-button:not(.disabled):not(.square).active, .dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-button:not(.disabled):not(.square).active, .dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-select:not(.disabled):not(.square).active, .dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-select:not(.disabled):not(.square).active{background-image:linear-gradient(180deg,#c9c9c9,#c3c3c3)!important;border-color:#d2d2d2 #0000 #c3c3c3!important;border-style:solid!important;border-width:1px!important}.dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-button:not(.disabled):not(.square).active:active, .dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-button:not(.disabled):not(.square).active:active, .dark[_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-select:not(.disabled):not(.square).active:active, .dark   [_nghost-%COMP%]   .toolbar[_ngcontent-%COMP%]     dui-select:not(.disabled):not(.square).active:active{background-image:linear-gradient(-180deg,#ececec,#e7e7e7)!important;border-color:#f2f2f2 #0000 #e7e7e7!important;border-style:solid!important;border-width:1px!important}"]}),t})(),Kc=(()=>{class t{constructor(t){this.windowState=t,this.for="default"}ngOnInit(){this.windowState.addToolbarContainer(this.for,this.template)}ngOnDestroy(){this.windowState.removeToolbarContainer(this.for,this.template)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Tc))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-window-toolbar"]],viewQuery:function(t,e){if(1&t&&r.Gf(Yc,7),2&t){let t;r.iGM(t=r.CRH())&&(e.template=t.first)}},inputs:{for:"for"},ngContentSelectors:qc,decls:2,vars:0,consts:[["templateRef",""]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,Gc,1,0,"ng-template",null,0,r.W1O))},encapsulation:2}),t})(),tu=(()=>{class t{constructor(t,e){this.windowState=t,this.cd=e,this.name="default"}ngOnInit(){this.windowState.toolbarContainers[this.name]=this}toolbarsUpdated(){this.cd.detectChanges()}ngOnDestroy(){delete this.windowState.toolbarContainers[this.name]}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Tc),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-window-toolbar-container"]],inputs:{name:"name"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&r.YNc(0,Xc,2,1,"ng-container",0),2&t&&r.Q6J("ngIf",e.windowState.toolbars[e.name])},directives:[ft,ht,_t],styles:["[_nghost-%COMP%]{display:flex}"]}),t})();const eu=["*"];function nu(t,e){1&t&&(r.TgZ(0,"div",1),r.NdJ("mousedown",function(t){return t.preventDefault()}),r.qZA())}let ru=(()=>{class t{constructor(t,e,n,r,i,o,s,a,l,c){this.registry=e,this.windowState=n,this.viewContainerRef=s,this.inDialog=a,this.parentWindow=l,this.electronWindow=c,this.id=0,this.closable=!0,this.maximizable=!0,this.minimizable=!0,this.onBlur=()=>{this.registry.blur(this)},this.onFocus=()=>{this.registry.focus(this)},e.register(this,r,n,o,s),this.electronWindow&&!this.isInDialog()&&(this.electronWindow.addListener("blur",this.onBlur),this.electronWindow.addListener("focus",this.onFocus),this.electronWindow.setVibrancy(i.getVibrancy())),this.registry.focus(this)}ngOnDestroy(){this.electronWindow&&!this.isInDialog()&&(this.electronWindow.removeListener("blur",this.onBlur),this.electronWindow.removeListener("focus",this.onFocus)),this.registry.unregister(this)}isInDialog(){return this.inDialog}getClosestNonDialogWindow(){return this.isInDialog()?this.parentWindow?this.parentWindow.isInDialog()?this.parentWindow.getClosestNonDialogWindow():this.parentWindow:void 0:this}ngOnChanges(t){this.windowState.closable=this.closable,this.windowState.minimizable=this.minimizable,this.windowState.maximizable=this.maximizable}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(s),r.Y36(Sc),r.Y36(Tc),r.Y36(r.sBO),r.Y36(kc),r.Y36(zc),r.Y36(r.s_b),r.Y36(Oc),r.Y36(t,12),r.Y36(Ec))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-window"]],contentQueries:function(t,e,n){if(1&t&&(r.Suo(n,Zc,5),r.Suo(n,Qc,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.content=t.first),r.iGM(t=r.CRH())&&(e.header=t.first)}},hostVars:4,hostBindings:function(t,e){2&t&&r.ekj("in-dialog",e.isInDialog())("dui-body",!0)},inputs:{closable:"closable",maximizable:"maximizable",minimizable:"minimizable"},features:[r._Bn([Tc,zc]),r.TTD],ngContentSelectors:eu,decls:3,vars:3,consts:[["class","disable-inputs",3,"mousedown",4,"ngIf"],[1,"disable-inputs",3,"mousedown"]],template:function(t,e){1&t&&(r.F$t(),r.Hsn(0),r.YNc(1,nu,1,0,"div",0),r.ALo(2,"async")),2&t&&(r.xp6(1),r.Q6J("ngIf",r.lcZ(2,1,e.windowState.disableInputs)))},directives:[ft],pipes:[Et],styles:["[_nghost-%COMP%]{position:relative;height:100%;width:100%;display:flex;flex-direction:column}.disable-inputs[_ngcontent-%COMP%]{position:absolute;left:0;right:0;top:0;bottom:0;opacity:.001;background-color:#000;z-index:1000000}.electron.platform-darwin.light[_nghost-%COMP%], .electron.platform-darwin.light   [_nghost-%COMP%]{background:#ffffffad}.platform-native.dark[_nghost-%COMP%]:not(.in-dialog), .platform-native.dark   [_nghost-%COMP%]:not(.in-dialog){border-color:#868686 #5d5d5d #5b5b5b;border-style:solid;border-width:1px}"],changeDetection:0}),t})();function iu(t,e){if(1&t&&r._UZ(0,"dui-icon",1),2&t){const t=r.oxw();r.Q6J("color",t.iconColor)("name",t.icon)("size",t.iconSize)}}function ou(t,e){if(1&t&&r._UZ(0,"dui-icon",1),2&t){const t=r.oxw();r.Q6J("color",t.iconColor)("name",t.icon)("size",t.iconSize)}}const su=["*"];let au=(()=>{class t{constructor(t,e,n){this.element=t,this.cdParent=e,this.formComponent=n,this.iconRight=!1,this.active=!1,this.small=!1,this.tight=!1,this.highlighted=!1,this.primary=!1,this.focused=!1,this.detectedText=!1,this.disabled=!1,this.square=!1,this.textured=!1,this.element.nativeElement.removeAttribute("tabindex")}hasText(){return void 0===this.withText?this.detectedText:this.withText}get isDisabled(){return!(!this.formComponent||!this.formComponent.disabled)||!(!this.submitForm||!(this.submitForm.invalid||this.submitForm.disabled||this.submitForm.submitting))||!1!==this.disabled}get isRound(){return!1!==this.square}get isTextured(){return!1!==this.textured}ngOnInit(){!1!==this.focused&&setTimeout(()=>{this.element.nativeElement.focus()},10)}ngAfterViewInit(){if(this.icon){const t=this.element.nativeElement.innerText.trim();t!==this.icon&&t.length>0&&(this.detectedText=!0,this.cdParent.detectChanges())}}onClick(){var t=this;return(0,Co.Z)(function*(){t.isDisabled||t.submitForm&&t.submitForm.submitForm()})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.sBO,4),r.Y36(aa,8))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-button"]],hostVars:25,hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()}),2&t&&(r.uIk("tabindex",1),r.ekj("icon",!!e.icon)("small",!1!==e.small)("tight",!1!==e.tight)("active",!1!==e.active)("highlighted",!1!==e.highlighted)("primary",!1!==e.primary)("icon-left",!1===e.iconRight)("icon-right",!1!==e.iconRight)("with-text",e.hasText())("disabled",e.isDisabled)("square",e.isRound)("textured",e.isTextured))},inputs:{icon:"icon",iconSize:"iconSize",iconRight:"iconRight",iconColor:"iconColor",active:"active",small:"small",tight:"tight",highlighted:"highlighted",primary:"primary",focused:"focused",submitForm:"submitForm",disabled:"disabled",square:"square",textured:"textured"},ngContentSelectors:su,decls:3,vars:2,consts:[[3,"color","name","size",4,"ngIf"],[3,"color","name","size"]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,iu,1,3,"dui-icon",0),r.Hsn(1),r.YNc(2,ou,1,3,"dui-icon",0)),2&t&&(r.Q6J("ngIf",e.icon&&!1===e.iconRight),r.xp6(2),r.Q6J("ngIf",e.icon&&!1!==e.iconRight))},directives:[ft,ua],styles:["[_nghost-%COMP%]{vertical-align:middle;position:relative;font-weight:500;height:21px;color:var(--dui-button-text);font-size:12px;line-height:21px;padding:0 15px;overflow:hidden;text-align:center;display:inline-flex;justify-content:center;align-items:center;cursor:default;-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;border-radius:4px}.square[_nghost-%COMP%]{border-radius:0;border:1px solid #b4b4b4;box-shadow:none;height:21px;line-height:21px}.square[_nghost-%COMP%]:not(.disabled).active, .square[_nghost-%COMP%]:not(.disabled):active{background-image:linear-gradient(180deg,#c1c1c1,#b5b5b5)}[_nghost-%COMP%]:not(.square):not(.tight).with-text > dui-icon[_ngcontent-%COMP%]{position:relative;left:-4px}.light[_nghost-%COMP%]:not(.disabled):not(.square):not(.textured):active, .light   [_nghost-%COMP%]:not(.disabled):not(.square):not(.textured):active{color:#fff;background-image:linear-gradient(180deg,#4990fe,#005ee5);border-color:#1f75f9 #1068f1 #0050d9;border-style:solid;border-width:1px}.light[_nghost-%COMP%]:not(.disabled):not(.square):not(.textured):active     dui-icon, .light   [_nghost-%COMP%]:not(.disabled):not(.square):not(.textured):active     dui-icon{color:#fff}.highlighted[_nghost-%COMP%]{color:var(--dui-selection)}.primary[_nghost-%COMP%]:not(.disabled):not(.square){color:#fff;background-image:linear-gradient(180deg,#4990fed9,#005ee5d9);border-color:#1f75f9db #1068f1d9 #0050d9db;border-style:solid;border-width:1px}.primary[_nghost-%COMP%]:not(.disabled):not(.square)     dui-icon{color:#fff}.disabled[_nghost-%COMP%]{color:#adadad!important;pointer-events:none}.disabled[_nghost-%COMP%]     dui-icon{color:#adadad!important}.disabled.square[_nghost-%COMP%]{opacity:.6}.icon[_nghost-%COMP%]{padding:0 10px;overflow:visible}.icon.square[_nghost-%COMP%]{padding:0;min-width:22px}.tight[_nghost-%COMP%]{padding:0 1px}.small[_nghost-%COMP%]{padding:0 2px;font-size:11px;height:18px;line-height:16px;align-items:start}.light[_nghost-%COMP%], .light   [_nghost-%COMP%]{background:#fff;border-color:#c9c9c9 #c2c2c2 #acacac;border-style:solid;border-width:1px;box-shadow:0 1px 0 #e5e5e5aa}.light.textured[_nghost-%COMP%], .light   .textured[_nghost-%COMP%]{border-color:#c9cac9 #c6c7c6 #a1a1a1;border-style:solid;border-width:1px;background-image:linear-gradient(-180deg,#fdfdfd 5%,#fafafa 0,#f6f6f6 55%,#f1f1f1 99%);box-shadow:none}.light.textured[_nghost-%COMP%]:not(.disabled).active, .light   .textured[_nghost-%COMP%]:not(.disabled).active, .light.textured[_nghost-%COMP%]:not(.disabled):active, .light   .textured[_nghost-%COMP%]:not(.disabled):active{background-image:linear-gradient(-180deg,#eee 5%,#e4e4e4 0,#e2e2e2 49%,#dcdcdc)}.light[_nghost-%COMP%]:not(.disabled):not(.primary):not(.square).active, .light   [_nghost-%COMP%]:not(.disabled):not(.primary):not(.square).active{color:#fff;background-image:linear-gradient(-180deg,#6c6d6d,#646464);border-color:#686869 #666 #5a5a59;border-style:solid;border-width:1px}.light[_nghost-%COMP%]:not(.disabled):not(.primary):not(.square).active:active, .light   [_nghost-%COMP%]:not(.disabled):not(.primary):not(.square).active:active{background-image:linear-gradient(-180deg,#575857,#505151);border-color:#535353 #515151 #474747;border-style:solid;border-width:1px}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{color:#fff;background-image:linear-gradient(-180deg,#787878 1px,#696969 0,#696969 95%);border-color:#313131 #303030 #2a2a2a;border-style:solid;border-width:1px;box-shadow:0 1px 0 #2c353d}.dark.highlighted[_nghost-%COMP%], .dark   .highlighted[_nghost-%COMP%]{color:#3fb2ff}.dark[_nghost-%COMP%]:not(.disabled):not(.square):not(.textured):active, .dark   [_nghost-%COMP%]:not(.disabled):not(.square):not(.textured):active{background-image:linear-gradient(-180deg,#5183f1,#4274ef 1px,#3c6ce1);color:#fff;box-shadow:0 1px 0 #232a31}.dark.square[_nghost-%COMP%], .dark   .square[_nghost-%COMP%]{background-image:linear-gradient(-180deg,#515151,#4b4b4b);border:1px solid #656565}.dark.square[_nghost-%COMP%]:not(.disabled).active, .dark   .square[_nghost-%COMP%]:not(.disabled).active, .dark.square[_nghost-%COMP%]:not(.disabled):active, .dark   .square[_nghost-%COMP%]:not(.disabled):active{background-image:linear-gradient(-180deg,#656565,#5c5c5c)}.dark[_nghost-%COMP%]:not(.disabled):not(.primary):not(.square).active, .dark   [_nghost-%COMP%]:not(.disabled):not(.primary):not(.square).active{color:var(--dui-button-text);background-image:linear-gradient(-180deg,#c6c9cc,#c2c5c8 100%,#c1c4c7 0);border-color:#1c1d1f #484c50 #1a1b1d;border-style:solid;border-width:1px}.dark[_nghost-%COMP%]:not(.disabled):not(.primary):not(.square).active:active, .dark   [_nghost-%COMP%]:not(.disabled):not(.primary):not(.square).active:active{background-image:linear-gradient(-180deg,#e9ecef,#e4e8ea)}.dark.textured[_nghost-%COMP%], .dark   .textured[_nghost-%COMP%]{background-color:#62696f;box-shadow:none}.dark.textured.active[_nghost-%COMP%], .dark   .textured.active[_nghost-%COMP%], .dark.textured[_nghost-%COMP%]:active, .dark   .textured[_nghost-%COMP%]:active{background:#7e7e7d}.label[_ngcontent-%COMP%]{position:absolute;top:100%;font-size:11px;font-weight:500}"]}),t})(),lu=(()=>{class t{constructor(t,e,n,r){this.windowState=t,this.windowComponent=e,this.element=n,this.cd=r,this.float="static",this.padding="normal"}get isPaddingNone(){return"none"===this.padding}activateOneTimeAnimation(){this.element.nativeElement.classList.add("with-animation")}sidebarMoved(){this.updatePaddingLeft()}ngOnDestroy(){}transitionEnded(){this.element.nativeElement.classList.remove("with-animation")}ngAfterViewInit(){"sidebar"===this.float&&(this.windowState.buttonGroupAlignedToSidebar=this),this.updatePaddingLeft()}updatePaddingLeft(){if("sidebar"===this.float&&this.windowComponent.content&&this.windowComponent.content.isSidebarVisible()){const t=Math.max(0,this.windowComponent.content.getSidebarWidth()-this.element.nativeElement.offsetLeft)+"px";return this.element.nativeElement.style.paddingLeft==t?void this.element.nativeElement.classList.remove("with-animation"):void(this.element.nativeElement.style.paddingLeft=t)}this.element.nativeElement.style.paddingLeft="0px"}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Tc),r.Y36(ru),r.Y36(r.SBq),r.Y36(r.sBO,4))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-button-group"]],hostVars:4,hostBindings:function(t,e){1&t&&r.NdJ("transitionend",function(){return e.transitionEnded()}),2&t&&r.ekj("float-right","right"===e.float)("padding-none",e.isPaddingNone)},inputs:{float:"float",padding:"padding"},ngContentSelectors:su,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},styles:["[_nghost-%COMP%]{display:inline-flex;line-height:0;white-space:nowrap}[_nghost-%COMP%]    >*{margin-right:6px}[_nghost-%COMP%]    >dui-input{height:19px}.dui-theme-light[_nghost-%COMP%]    >dui-input, .dui-theme-light   [_nghost-%COMP%]    >dui-input{height:21px}[_nghost-%COMP%]:last-child    >:last-child{margin-right:0}[_nghost-%COMP%]     dui-button.active{z-index:1}.float-right[_nghost-%COMP%]{margin-left:auto}.with-animation[_nghost-%COMP%]{transition:padding-left .3s ease-in-out}.dark.padding-none[_nghost-%COMP%]     dui-button:not(.square):not(:first-child), .dark   .padding-none[_nghost-%COMP%]     dui-button:not(.square):not(:first-child), .dark.padding-none[_nghost-%COMP%]     dui-input:not(:first-child), .dark   .padding-none[_nghost-%COMP%]     dui-input:not(:first-child), .dark.padding-none[_nghost-%COMP%]     dui-select:not(:first-child), .dark   .padding-none[_nghost-%COMP%]     dui-select:not(:first-child){border-left:1px solid #484c50!important}.padding-none[_nghost-%COMP%]{margin-right:7px}.padding-none[_nghost-%COMP%]    >*{margin-right:-1px}.padding-none[_nghost-%COMP%]    >:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.padding-none[_nghost-%COMP%]    >:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}"]}),t})(),cu=(()=>{class t extends ca{constructor(t,e,n,i){super(t,e,n),this.injector=t,this.cd=e,this.cdParent=n,this.app=i,this.duiFileMultiple=!1,this.duiFileDirectory=!1,this.duiFileChooserChange=new r.vpe;const o=document.createElement("input");o.setAttribute("type","file"),this.input=o,this.input.addEventListener("change",t=>{const e=t.target.files;if(e.length){if(!1!==this.duiFileMultiple){const t=[];for(let n=0;n<e.length;n++){const r=e.item(n);t.push(r.path)}this.innerValue=t}else{const t=e.item(0);this.innerValue=t.path}this.duiFileChooserChange.emit(this.innerValue),this.app.tick()}})}ngOnDestroy(){}ngOnChanges(){this.input.webkitdirectory=!1!==this.duiFileDirectory,this.input.multiple=!1!==this.duiFileMultiple}onClick(){this.input.click()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.zs3),r.Y36(r.sBO),r.Y36(r.sBO,4),r.Y36(r.z2F))},t.\u0275dir=r.lG2({type:t,selectors:[["","duiFileChooser",""]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{duiFileMultiple:"duiFileMultiple",duiFileDirectory:"duiFileDirectory"},outputs:{duiFileChooserChange:"duiFileChooserChange"},features:[r._Bn([la(t)]),r.qOj,r.TTD]}),t})();function uu(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{r.result&&(r.result instanceof ArrayBuffer?e(new Uint8Array(r.result)):e(void 0))},r.onerror=t=>{console.log("Error: ",t),n()},r.readAsArrayBuffer(t)})}let hu=(()=>{class t extends ca{constructor(t,e,n,i){var o;super(t,e,n),o=this,this.injector=t,this.cd=e,this.cdParent=n,this.app=i,this.duiFileMultiple=!1,this.duiFileAutoOpen=!1,this.duiFilePickerChange=new r.vpe;const s=document.createElement("input");s.setAttribute("type","file"),this.input=s,this.input.addEventListener("change",function(){var t=(0,Co.Z)(function*(t){const e=t.target.files;if(e.length){if(!1!==o.duiFileMultiple){const t=[];for(let n=0;n<e.length;n++){const r=e.item(n);if(r){const e=yield uu(r);e&&t.push({data:e,name:r.name})}}o.innerValue=t}else{const t=e.item(0);t&&(o.innerValue={data:yield uu(t),name:t.name})}o.duiFilePickerChange.emit(o.innerValue),o.app.tick()}});return function(e){return t.apply(this,arguments)}}())}ngOnDestroy(){}ngAfterViewInit(){this.duiFileAutoOpen&&this.onClick()}onClick(){this.input.multiple=!1!==this.duiFileMultiple,this.input.click()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.zs3),r.Y36(r.sBO),r.Y36(r.sBO,4),r.Y36(r.z2F))},t.\u0275dir=r.lG2({type:t,selectors:[["","duiFilePicker",""]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{duiFileMultiple:"duiFileMultiple",duiFileAutoOpen:"duiFileAutoOpen"},outputs:{duiFilePickerChange:"duiFilePickerChange"},features:[r._Bn([la(cu)]),r.qOj]}),t})();const du=["dropdownTemplate"],fu=["dropdown"];function pu(t,e){if(1&t&&(r.TgZ(0,"div",1,2),r.TgZ(2,"div",3),r.Hsn(3),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(2),r.ekj("overlay-scrollbar-small",t.scrollbars)}}const gu=["*"];function mu(t,e){1&t&&r._UZ(0,"dui-icon",1),2&t&&r.Q6J("size",14)}let yu=(()=>{class t{constructor(t,e,n,i,o,s,a){this.overlayService=t,this.injector=e,this.registry=n,this.overlayStack=i,this.viewContainerRef=o,this.cd=s,this.cdParent=a,this.isOpen=!1,this.allowedFocus=[],this.scrollbars=!0,this.center=!1,this.overlay=!1,this.showChange=new r.vpe,this.shown=new r.vpe,this.hidden=new r.vpe}ngOnChanges(t){t.show&&this.dropdownTemplate&&(!0===this.show&&this.open(),!1===this.show&&this.close())}ngAfterViewInit(){!0===this.show&&this.open(),!1===this.show&&this.close()}ngOnDestroy(){this.close()}key(t){this.isOpen&&"escape"===t.key.toLowerCase()&&this.lastOverlayStackItem&&this.lastOverlayStackItem.isLast()&&this.close()}toggle(t){this.isOpen?this.close():this.open(t)}open(t){if(this.lastFocusWatcher&&this.lastFocusWatcher.unsubscribe(),t||(t=this.host),!(t=t instanceof r.SBq?t.nativeElement:t))throw new Error("No target or host specified for dropdown");let e;const n=this.overlayService;if(t instanceof MouseEvent){const r={x:t.pageX,y:t.pageY};e=n.position().flexibleConnectedTo(r).withFlexibleDimensions(!1).withViewportMargin(12).withPush(!0).withDefaultOffsetY(!1!==this.overlay?15:0).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}])}else e="center"===t?n.position().global().centerHorizontally().centerVertically():n.position().flexibleConnectedTo(t).withFlexibleDimensions(!1).withViewportMargin(12).withPush(!0).withDefaultOffsetY(!1!==this.overlay?15:0).withPositions([{originX:this.center?"center":"start",originY:"bottom",overlayX:this.center?"center":"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);if(this.overlayRef)this.overlayRef.updatePositionStrategy(e),this.overlayRef.updatePosition();else{this.isOpen=!0;const t={minWidth:50,maxWidth:450,maxHeight:"90%",hasBackdrop:!1,scrollStrategy:n.scrollStrategies.reposition(),positionStrategy:e};if(this.width&&(t.width=this.width),this.height&&(t.height=this.height),this.minWidth&&(t.minWidth=this.minWidth),this.minHeight&&(t.minHeight=this.minHeight),this.maxWidth&&(t.maxWidth=this.maxWidth),this.maxHeight&&(t.maxHeight=this.maxHeight),this.overlayRef=n.create(t),!this.dropdownTemplate)throw new Error("No dropdownTemplate set");const r=new Il(this.dropdownTemplate,this.viewContainerRef);this.overlayRef.attach(r),this.cd.detectChanges(),this.overlayRef.updatePosition(),this.shown.emit(),this.showChange.emit(!0),setTimeout(()=>{this.overlayRef&&this.overlayRef.updatePosition()},0),setTimeout(()=>{this.overlayRef&&this.overlayRef.updatePosition()},50),this.lastOverlayStackItem&&this.lastOverlayStackItem.release(),this.lastOverlayStackItem=this.overlayStack.register(this.overlayRef.hostElement)}const i=((0,va.kJ)(this.allowedFocus)?this.allowedFocus:this.allowedFocus?[this.allowedFocus]:[]).map(t=>t instanceof r.SBq?t.nativeElement:t);i.push(this.overlayRef.hostElement),void 0===this.show&&(this.overlayRef.hostElement.focus(),this.lastFocusWatcher=function(t,e=[],n){return-1===t.ownerDocument.body.tabIndex&&(t.ownerDocument.body.tabIndex=1),new Ce.y(r=>{let i=t;function o(){i||(i=t),function(){if(!i)return!1;if(El(i,t))return!0;for(const t of e)if(El(i,t))return!0;return!!n&&n(i)}()||(r.next(),r.complete())}function s(){i=null,o()}function a(t){i=t.target,o()}function l(t){i=t.target,o()}return t.ownerDocument.addEventListener("mousedown",l,!0),t.ownerDocument.addEventListener("focusin",a),t.ownerDocument.addEventListener("focusout",s),{unsubscribe:function(){t.ownerDocument.removeEventListener("mousedown",l),t.ownerDocument.removeEventListener("focusin",a),t.ownerDocument.removeEventListener("focusout",s)}}})}(this.dropdown.nativeElement,[...i,t],t=>!!t&&!(!this.lastOverlayStackItem||this.lastOverlayStackItem.isLast())).subscribe(()=>{this.keepOpen||(this.close(),zl.tick())}))}focus(){this.dropdown&&this.dropdown.nativeElement.focus()}close(){this.isOpen&&(this.lastOverlayStackItem&&this.lastOverlayStackItem.release(),this.isOpen=!1,this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=void 0),this.cd.detectChanges(),this.hidden.emit(),this.showChange.emit(!1))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(wc),r.Y36(r.zs3),r.Y36(Sc),r.Y36(Pc),r.Y36(r.s_b),r.Y36(r.sBO),r.Y36(r.sBO,4))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-dropdown"]],viewQuery:function(t,e){if(1&t&&(r.Gf(du,5,r.Rgc),r.Gf(fu,5,r.SBq)),2&t){let t;r.iGM(t=r.CRH())&&(e.dropdownTemplate=t.first),r.iGM(t=r.CRH())&&(e.dropdown=t.first)}},hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("keyup",function(t){return e.key(t)},!1,r.Jf7),2&t&&r.ekj("overlay",!1!==e.overlay)},inputs:{host:"host",allowedFocus:"allowedFocus",keepOpen:"keepOpen",height:"height",width:"width",minWidth:"minWidth",minHeight:"minHeight",maxWidth:"maxWidth",maxHeight:"maxHeight",scrollbars:"scrollbars",center:"center",overlay:"overlay",show:"show"},outputs:{showChange:"showChange",shown:"shown",hidden:"hidden"},features:[r.TTD],ngContentSelectors:gu,decls:2,vars:0,consts:[["dropdownTemplate",""],["tabindex","1",1,"dui-body","dui-dropdown"],["dropdown",""],[1,"content"]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,pu,4,2,"ng-template",null,0,r.W1O))},styles:["[_nghost-%COMP%]{display:none}.dui-dropdown[_ngcontent-%COMP%]{flex:1;-webkit-backdrop-filter:var(--dui-background-vibrancy);backdrop-filter:var(--dui-background-vibrancy);background-color:var(--dui-toolbar-bg-trans);border-color:#d0d0d0 #c5c5c5 #b9b9b9;border-style:solid;border-width:1px;box-shadow:0 4px 14px 0 #85818170;display:flex;border-radius:5px;overflow:hidden}.dui-dropdown[_ngcontent-%COMP%]:focus{outline:0}.dui-dropdown[_ngcontent-%COMP%] > div.content[_ngcontent-%COMP%]{flex:1;padding:4px 0;min-height:25px;border-radius:5px}.dui-dropdown-arrow[_ngcontent-%COMP%]{position:absolute;top:-14px;left:calc(50% - 28px / 2);width:28px;height:15px;background-image:url(overlay-arrow.bbc943abc9eb9f78e8e2.svg);background-repeat:no-repeat}  .dark .dui-dropdown-arrow{height:16px;background-image:url(overlay-arrow-dark.e4d82e8d6555f2332944.svg)}  .dark .dui-dropdown{box-shadow:0 4px 12px 0 #2d2d2dc4;border-color:#0a0b0c #07090a #050607;border-style:solid;border-width:1px}  .dark .dui-dropdown>div.content{border:1px solid #5f5f5f}"]}),t})(),vu=(()=>{class t{constructor(t,e){this.elementRef=t,this.button=e}ngOnDestroy(){}ngAfterViewInit(){this.button&&this.openDropdown&&(this.openSub=this.openDropdown.shown.subscribe(()=>{this.button&&(this.button.active=!0)}),this.hiddenSub=this.openDropdown.hidden.subscribe(()=>{this.button&&(this.button.active=!1)}))}onClick(){this.openDropdown&&this.openDropdown.toggle(this.elementRef)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(au,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","openDropdown",""]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{openDropdown:"openDropdown"}}),Pl([Zl()],t.prototype,"openSub",void 0),Pl([Zl()],t.prototype,"hiddenSub",void 0),t})(),bu=(()=>{class t{constructor(t){this.elementRef=t,this.openDropdownHoverCloseTimeout=80}ngOnDestroy(){}onHover(){clearTimeout(this.lastHide),this.lastHide=void 0,this.openDropdownHover&&!this.openDropdownHover.isOpen&&(this.openDropdownHover.open(this.elementRef),this.openDropdownHover.overlayRef&&(this.openDropdownHover.overlayRef.hostElement.addEventListener("mouseenter",()=>{this.onHover()}),this.openDropdownHover.overlayRef.hostElement.addEventListener("mouseleave",()=>{this.onLeave()})))}onLeave(){this.lastHide=setTimeout(()=>{this.openDropdownHover&&this.lastHide&&this.openDropdownHover.close()},this.openDropdownHoverCloseTimeout)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","openDropdownHover",""]],hostBindings:function(t,e){1&t&&r.NdJ("mouseenter",function(){return e.onHover()})("mouseleave",function(){return e.onLeave()})},inputs:{openDropdownHover:"openDropdownHover",openDropdownHoverCloseTimeout:"openDropdownHoverCloseTimeout"}}),Pl([Zl()],t.prototype,"openSub",void 0),Pl([Zl()],t.prototype,"hiddenSub",void 0),t})(),_u=(()=>{class t{onClick(t){this.contextDropdown&&2===t.button&&(this.contextDropdown.close(),t.preventDefault(),t.stopPropagation(),this.contextDropdown.open(t))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["","contextDropdown",""]],hostBindings:function(t,e){1&t&&r.NdJ("contextmenu",function(t){return e.onClick(t)})},inputs:{contextDropdown:"contextDropdown"}}),t})(),wu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-dropdown-splitter"],["dui-dropdown-separator"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"div")},styles:["[_nghost-%COMP%]{display:block;padding:4px 0}div[_ngcontent-%COMP%]{border-top:1px solid var(--line-color-light)}"]}),t})(),xu=(()=>{class t{constructor(t){this.dropdown=t,this.selected=!1,this.disabled=!1,this.closeOnClick=!0}onClick(){this.closeOnClick&&this.dropdown.close()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(yu))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-dropdown-item"]],hostVars:4,hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()}),2&t&&r.ekj("selected",!1!==e.selected)("disabled",!1!==e.disabled)},inputs:{selected:"selected",disabled:"disabled",closeOnClick:"closeOnClick"},ngContentSelectors:gu,decls:2,vars:1,consts:[["class","selected","name","check",3,"size",4,"ngIf"],["name","check",1,"selected",3,"size"]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,mu,1,1,"dui-icon",0),r.Hsn(1)),2&t&&r.Q6J("ngIf",e.selected)},directives:[ft,ua],styles:["[_nghost-%COMP%]{padding:1px 23px;position:relative;overflow:hidden;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start;align-items:center}[_nghost-%COMP%]   dui-icon.selected[_ngcontent-%COMP%]{position:absolute;color:var(--color-black);left:6px;top:3px}.disabled[_nghost-%COMP%]{opacity:.8;pointer-events:none}[_nghost-%COMP%]:not(.disabled):hover{background-color:var(--dui-selection);color:#fff}"]}),t})();const Cu=["header"],Su=["viewportElement"],Tu=["th"];function Eu(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw(2).$implicit;r.xp6(1),r.hij(" ",t.header||t.name," ")}}const Ou=function(t){return{$implicit:t}};function Au(t,e){if(1&t&&r.GkF(0,11),2&t){const t=r.oxw(2).$implicit;r.Q6J("ngTemplateOutlet",t.headerDirective.template)("ngTemplateOutletContext",r.VKq(2,Ou,t))}}function Pu(t,e){if(1&t&&(r.TgZ(0,"div"),r.YNc(1,Eu,2,1,"ng-container",9),r.YNc(2,Au,1,4,"ng-container",10),r.qZA()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",void 0!==t.name&&!t.headerDirective),r.xp6(1),r.Q6J("ngIf",void 0!==t.name&&t.headerDirective)}}function ku(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-dropdown-item",8),r.NdJ("mousedown",function(){const e=r.CHM(t).$implicit,n=r.oxw(),i=r.MAs(1);return e.toggleHidden(),n.storePreference(),n.sortColumnDefs(),i.close()}),r.YNc(1,Pu,3,2,"div",9),r.qZA()}if(2&t){const t=e.$implicit;r.Q6J("selected",!t.isHidden()),r.xp6(1),r.Q6J("ngIf",t.hideable)}}function Mu(t,e){if(1&t&&r.GkF(0,11),2&t){const t=r.oxw().$implicit;r.Q6J("ngTemplateOutlet",t.headerDirective.template)("ngTemplateOutletContext",r.VKq(2,Ou,t))}}function Iu(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.hij(" ",t.header||t.name," ")}}function Ru(t,e){1&t&&r._UZ(0,"dui-icon",20),2&t&&r.Q6J("size",12)}function Du(t,e){1&t&&r._UZ(0,"dui-icon",21),2&t&&r.Q6J("size",12)}function Nu(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Ru,1,1,"dui-icon",18),r.YNc(2,Du,1,1,"dui-icon",19),r.BQk()),2&t){const t=r.oxw().$implicit,e=r.oxw(2);r.xp6(1),r.Q6J("ngIf","desc"===e.sort[t.name]),r.xp6(1),r.Q6J("ngIf","asc"===e.sort[t.name])}}function Lu(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",15,16),r.NdJ("mousedown",function(e){const n=r.CHM(t).$implicit;return r.oxw(2).sortBy(n.name||"",e)}),r.YNc(2,Mu,1,4,"ng-container",10),r.YNc(3,Iu,2,1,"ng-container",9),r.YNc(4,Nu,3,2,"ng-container",9),r.TgZ(5,"dui-splitter",17),r.NdJ("modelChange",function(e){const n=r.CHM(t).$implicit;return r.oxw(2).setColumnWidth(n,e)}),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,n=r.oxw(2);r.Udp("width",t.getWidth())("top",n.scrollTop+"px"),r.uIk("name",t.name),r.xp6(2),r.Q6J("ngIf",t.headerDirective),r.xp6(1),r.Q6J("ngIf",void 0!==t.name&&!t.headerDirective),r.xp6(1),r.Q6J("ngIf",n.sort[t.name])}}function Fu(t,e){if(1&t&&(r.TgZ(0,"div",12,13),r.YNc(2,Lu,6,8,"div",14),r.qZA()),2&t){const t=r.oxw(),e=r.MAs(1);r.Q6J("contextDropdown",t.customHeaderDropdown?t.customHeaderDropdown.dropdown:e),r.xp6(2),r.Q6J("ngForOf",t.visibleColumns(t.sortedColumnDefs))("ngForTrackBy",t.trackByColumn)}}function Bu(t,e){if(1&t&&(r.ynx(0),r.GkF(1,11),r.BQk()),2&t){const t=r.oxw().$implicit,e=r.oxw().$implicit;r.xp6(1),r.Q6J("ngTemplateOutlet",t.cell.template)("ngTemplateOutletContext",r.VKq(2,Ou,e))}}function ju(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw().$implicit,e=r.oxw().$implicit,n=r.oxw();r.xp6(1),r.hij(" ",t.name?n.valueFetcher(e,t.name):""," ")}}function $u(t,e){if(1&t&&(r.TgZ(0,"div",24),r.YNc(1,Bu,2,4,"ng-container",9),r.YNc(2,ju,2,1,"ng-container",9),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(),i=n.$implicit,o=n.index,s=r.oxw();r.Tol(t.class+(s.cellClass?" "+s.cellClass(i,t.name):"")),r.Udp("width",t.getWidth()),r.uIk("row-column",t.name)("row-i",o),r.xp6(1),r.Q6J("ngIf",t.cell),r.xp6(1),r.Q6J("ngIf",!t.cell)}}function Uu(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",22),r.NdJ("mousedown",function(e){const n=r.CHM(t).$implicit;return r.oxw().select(n,e)})("contextmenu",function(e){const n=r.CHM(t).$implicit;return r.oxw().select(n,e)})("dblclick",function(){const e=r.CHM(t).$implicit;return r.oxw().dbclick.emit(e)}),r.YNc(2,$u,3,8,"div",23),r.qZA(),r.BQk()}if(2&t){const t=e.$implicit,n=e.odd,i=r.oxw();r.xp6(1),r.Gre("table-row ",i.rowClass?i.rowClass(t):"",""),r.Udp("height",i.itemHeight,"px"),r.ekj("selected",i.selectedMap.has(t))("odd",n),r.Q6J("contextDropdown",i.customRowDropdown?i.customRowDropdown.dropdown:void 0),r.xp6(1),r.Q6J("ngForOf",i.visibleColumns(i.sortedColumnDefs))("ngForTrackBy",i.trackByColumn)}}let Vu=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","duiTableCell",""]]}),t})(),Zu=(()=>{class t{constructor(t){this.dropdown=t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(yu))},t.\u0275dir=r.lG2({type:t,selectors:[["dui-dropdown","duiTableCustomHeaderContextMenu",""]]}),t})(),zu=(()=>{class t{constructor(t){this.dropdown=t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(yu))},t.\u0275dir=r.lG2({type:t,selectors:[["dui-dropdown","duiTableCustomRowContextMenu",""]]}),t})(),Hu=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","duiTableHeader",""]]}),t})(),qu=(()=>{class t{constructor(){this.name="",this.width=100,this.class="",this.hidden=!1,this.sortable=!0,this.hideable=!0}isHidden(){return!1!==this.hidden}toggleHidden(){this.hidden=!this.isHidden()}getWidth(){if(this.width)return(0,va.hj)(this.width)?this.width+"px":this.width}getPosition(){return void 0!==this.overwrittenPosition?this.overwrittenPosition:this.position}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["dui-table-column"]],contentQueries:function(t,e,n){if(1&t&&(r.Suo(n,Vu,5),r.Suo(n,Hu,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.cell=t.first),r.iGM(t=r.CRH())&&(e.headerDirective=t.first)}},inputs:{name:"name",header:"header",width:"width",class:"class",hidden:"hidden",sortable:"sortable",hideable:"hideable",position:"position"}}),t})(),Yu=(()=>{class t{constructor(t,e,n,i){this.element=t,this.cd=e,this.parentCd=n,this.zone=i,this.tabindex=0,this.borderless=!1,this.itemHeight=25,this.autoHeight=!1,this.height=23,this.showHeader=!0,this.defaultSort="",this.defaultSortDirection="asc",this.selectable=!1,this.multiSelect=!1,this.displayInitial=20,this.increaseBy=10,this.preferenceKey="root",this.columnState=[],this.valueFetcher=(t,e)=>{const n=e.indexOf(".");return-1===n?t[e]:t[e.substr(0,n)][e.substr(n+1)]},this.sorting=!0,this.noFocusOutline=!1,this.sort={},this.rawItems=[],this.sorted=[],this.selectedMap=new Map,this.selected=[],this.selectedHistory=[],this.selectedChange=new r.vpe,this.sortedChange=new r.vpe,this.dbclick=new r.vpe,this.customSort=new r.vpe,this.cellDblClick=new r.vpe,this.cellClick=new r.vpe,this.sortedColumnDefs=[],this.columnMap={},this.displayedColumns=[],this.ignoreThisSort=!1,this.scrollTop=0,this.trackByFn=(t,e)=>this.trackFn?this.trackFn(t,e):t}setColumnWidth(t,e){t.width=e,ea(this.cd,()=>{this.storePreference()})}ngOnInit(){this.defaultSort&&(this.sort[this.defaultSort]=this.defaultSortDirection)}ngOnDestroy(){}onResize(){requestAnimationFrame(()=>{this.viewport.checkViewportSize()})}resetAll(){if(localStorage.removeItem("@dui/table/preferences-"+this.preferenceKey),this.columnDefs)for(const t of this.columnDefs.toArray())t.width=100,t.hidden=!1,t.overwrittenPosition=void 0}storePreference(){const t={};if(this.columnDefs){for(const e of this.columnDefs.toArray())t[e.name]={width:e.width,order:e.overwrittenPosition,hidden:e.hidden};localStorage.setItem("@dui/table/preferences-"+this.preferenceKey,JSON.stringify(t))}}loadPreference(){const t=localStorage.getItem("@dui/table/preferences-"+this.preferenceKey);if(!t)return;const e=JSON.parse(t);for(const n in e)e.hasOwnProperty(n)&&this.columnMap[n]&&(void 0!==e[n].width&&(this.columnMap[n].width=e[n].width),void 0!==e[n].order&&(this.columnMap[n].overwrittenPosition=e[n].order),void 0!==e[n].hidden&&(this.columnMap[n].hidden=e[n].hidden))}dblClickCell(t){if(!this.cellDblClick.observers.length)return;if(!t.target)return;const e=Ol(t.target,"table-cell");if(!e)return;const n=parseInt(e.getAttribute("row-i")||"",10),r=e.getAttribute("row-column")||"";this.cellDblClick.emit({item:this.sorted[n],column:r})}clickCell(t){if(!this.cellClick.observers.length)return;if(!t.target)return;const e=Ol(t.target,"table-cell");if(!e)return;const n=parseInt(e.getAttribute("row-i")||"",10),r=e.getAttribute("row-column")||"";this.cellClick.emit({item:this.sorted[n],column:r})}sortBy(t,e){if(this.sorting)if(this.ignoreThisSort)this.ignoreThisSort=!1;else if(!e||2!==e.button){if(!e||!e.shiftKey)for(const e in this.sort)e!==t&&delete this.sort[e];if(this.columnMap[t]&&!this.columnMap[t].sortable)return;this.sort[t]?"asc"===this.sort[t]?this.sort[t]="desc":"desc"===this.sort[t]&&delete this.sort[t]:this.sort[t]="asc",this.customSort.observers.length?this.customSort.emit(this.sort):this.doSort()}}trackByColumn(t,e){return e.name}filterSorted(t){return this.filter||this.filterQuery&&this.filterFields?t.filter(t=>this.filterFn(t)):t}initHeaderMovement(){if(this.header&&this.ths){const t=new(_a())(this.header.nativeElement);t.add(new(_a().Pan)({direction:_a().DIRECTION_ALL,threshold:1}));const e=[];let n,r,i,o=[],s=-1,a=[],l=0,c=0,u=0;t.on("panstart",t=>{if(r=void 0,this.ths&&t.target.classList.contains("th")){n=t.target,n.style.zIndex="1000000",n.style.opacity="0.8",l=n.offsetLeft,c=n.offsetLeft,u=n.offsetWidth,(0,va._g)(e),a=[];for(const t of this.ths.toArray()){const r=this.sortedColumnDefs.find(e=>e.name===t.nativeElement.getAttribute("name")),i=[...this.element.nativeElement.querySelectorAll('div[row-column="'+r.name+'"]')];if(t.nativeElement===n){s=this.sortedColumnDefs.indexOf(r),o=i;for(const t of o)t.classList.add("active-drop")}else{for(const t of i)t.classList.add("other-cell");t.nativeElement.classList.add("other-cell")}e.push({left:t.nativeElement.offsetLeft,width:t.nativeElement.offsetWidth,element:t.nativeElement,directive:r}),a.push({cells:i})}}}),t.on("panend",t=>{if(i&&cancelAnimationFrame(i),n){n.style.left="0px",n.style.zIndex="1",n.style.opacity="1";for(const t of a)for(const e of t.cells)e.classList.remove("active-drop"),e.classList.remove("other-cell"),e.style.left="0px";this.ignoreThisSort=!0;for(const t of e)t.element.style.left="0px",t.element.classList.remove("other-cell");if(r){const t=this.sortedColumnDefs.indexOf(r.directive);if(s!==t){const e=this.sortedColumnDefs[s];this.sortedColumnDefs.splice(s,1),this.sortedColumnDefs.splice(t,0,e);for(let[t,n]of(0,va.hs)(this.sortedColumnDefs))n.overwrittenPosition=t;this.sortColumnDefs()}}this.storePreference(),n=void 0}}),t.on("pan",t=>{i&&cancelAnimationFrame(i),i=requestAnimationFrame(()=>{if(n){n.style.left=t.deltaX+"px";const i=l+t.deltaX;for(const e of o)e.style.left=t.deltaX+"px";let s=!1;r=void 0;for(const[t,o]of(0,va.hs)(e))if(o.element!==n){o.element.style.left="0px";for(const e of a[t].cells)e.style.left="0px";if(!s&&o.left+o.width/2>i){o.element.style.left=u+"px";for(const e of a[t].cells)e.style.left=u+"px";if(r&&o.left>r.left)continue;r=o}else if(s&&o.left+o.width/2<i+u){o.element.style.left=-u+"px";for(const e of a[t].cells)e.style.left=-u+"px";r=o}}else s=!0}})})}}ngAfterViewInit(){this.viewport.renderedRangeStream.subscribe(()=>{this.cd.detectChanges()}),this.zone.runOutsideAngular(()=>{this.viewportElement.nativeElement.addEventListener("scroll",()=>{this.header.nativeElement.scrollLeft=this.viewportElement.nativeElement.scrollLeft})}),this.initHeaderMovement(),this.columnDefs&&setTimeout(()=>{this.columnDefs.changes.subscribe(()=>{this.updateDisplayColumns(),this.loadPreference(),this.sortColumnDefs()}),this.updateDisplayColumns(),this.loadPreference(),this.sortColumnDefs()})}sortColumnDefs(){if(this.columnDefs){const t=this.columnDefs.toArray();this.sortedColumnDefs=this.columnDefs.toArray().slice(0),this.sortedColumnDefs=this.sortedColumnDefs.sort((e,n)=>{const r=void 0===e.getPosition()?t.indexOf(e):e.getPosition(),i=void 0===n.getPosition()?t.indexOf(n):n.getPosition();return r>i?1:r<i?-1:0}),ea(this.cd)}}visibleColumns(t){return t.filter(t=>!t.isHidden())}filterFn(t){if(this.filter)return this.filter(t);if(this.filterQuery&&this.filterFields){const e=this.filterQuery.toLowerCase();for(const n of this.filterFields)if(-1!==String(t[n]).toLowerCase().indexOf(e))return!0;return!1}return!0}ngOnChanges(t){if(t.preferenceKey&&this.loadPreference(),t.items&&((0,wa.b)(this.items)?this.items.subscribe(t=>{this.rawItems=t,this.sorted=t,this.doSort(),this.viewport.checkViewportSize()}):(0,va.kJ)(this.items)?(this.rawItems=this.items,this.sorted=this.items,this.doSort(),this.viewport.checkViewportSize()):(this.rawItems=[],this.sorted=[],this.doSort(),this.viewport.checkViewportSize())),t.selected&&(this.selectedMap.clear(),this.selected))for(const e of this.selected)this.selectedMap.set(e,!0)}updateDisplayColumns(){if(this.displayedColumns=[],this.columnMap={},this.columnDefs){for(const t of this.columnDefs.toArray())this.displayedColumns.push(t.name),this.columnMap[t.name]=t;this.doSort()}}doSort(){if(!this.customSort.observers.length){if((0,va.cS)(this.sorted)&&(this.sorted=this.rawItems),this.sortFunction)this.sorted.sort(this.sortFunction(this.sort));else{const t=Object.entries(this.sort);t.reverse();let e=(t,e)=>0;for(const[n,r]of t)e=this.createSortFunction(n,r,e);this.sorted.sort(e)}this.sortedChange.emit(this.sorted),this.height=this.sorted.length*this.itemHeight+(this.showHeader?23:0)+10,this.sorted=this.sorted.slice(0),ea(this.parentCd)}}createSortFunction(t,e,n){return(r,i)=>{const o=this.valueFetcher(r,t),s=this.valueFetcher(i,t);if(void 0===o&&void 0===s)return n?n(r,i):0;if(void 0===o&&void 0!==s)return 1;if(void 0!==o&&void 0===s)return-1;if("asc"===e){if(o>s)return 1;if(o<s)return-1}else{if(o>s)return-1;if(o<s)return 1}return n?n(r,i):0}}onFocus(t){if("Enter"===t.key){const t=(0,va.Ps)(this.selected);t&&this.dbclick.emit(t)}if("ArrowUp"===t.key||"ArrowDown"===t.key){t.preventDefault();const e=(0,va.Ps)(this.selected);if(!e)return void this.select(this.sorted[0]);let n=(0,va.cq)(this.sorted,e);if("ArrowUp"===t.key){if(0===n)return;n--}if("ArrowDown"===t.key){if((0,va.cS)(this.sorted))return;n++}if(this.sorted[n]){this.select(this.sorted[n]);const t=this.viewport.measureScrollOffset(),e=this.viewport.getViewportSize(),r=this.itemHeight*n;r+this.itemHeight>e+t&&this.viewport.scrollToOffset(t+(r+this.itemHeight-(e+t))),r<t&&this.viewport.scrollToOffset(t+(r-t))}this.selectedChange.emit(this.selected.slice(0)),this.cd.markForCheck()}}deselect(t){(0,va.lH)(this.selected,t),this.selectedMap.delete(t),ea(this.parentCd)}select(t,e){if(!1!==this.selectable){if(!1===this.multiSelect)this.selected=[t],this.selectedMap.clear(),this.selectedMap.set(t,!0);else if(e&&e.shiftKey){const e=this.sorted.indexOf(t);if(this.selected[0]){const t=this.sorted.indexOf(this.selected[0]);if(this.selectedMap.clear(),this.selected=[],t<e)for(let n=t;n<=e;n++)this.selected.push(this.sorted[n]),this.selectedMap.set(this.sorted[n],!0);else for(let n=t;n>=e;n--)this.selected.push(this.sorted[n]),this.selectedMap.set(this.sorted[n],!0)}else for(let t=0;t<=e;t++)this.selected.push(this.sorted[t]),this.selectedMap.set(this.sorted[t],!0)}else if(e&&e.metaKey)(0,va.sE)(this.selected,t)?((0,va.lH)(this.selected,t),this.selectedMap.delete(t)):(this.selectedMap.set(t,!0),this.selected.push(t));else{const n=e&&2==e.button;(!(0,va.sE)(this.selected,t)||!n)&&(this.selected=[t],this.selectedMap.clear(),this.selectedMap.set(t,!0))}this.selectedChange.emit(this.selected),ea(this.parentCd)}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(r.sBO),r.Y36(r.sBO,4),r.Y36(r.R0b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-table"]],contentQueries:function(t,e,n){if(1&t&&(r.Suo(n,Zu,5),r.Suo(n,zu,5),r.Suo(n,qu,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.customHeaderDropdown=t.first),r.iGM(t=r.CRH())&&(e.customRowDropdown=t.first),r.iGM(t=r.CRH())&&(e.columnDefs=t)}},viewQuery:function(t,e){if(1&t&&(r.Gf(Cu,5),r.Gf(bl,7),r.Gf(Su,7,r.SBq),r.Gf(Tu,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.header=t.first),r.iGM(t=r.CRH())&&(e.viewport=t.first),r.iGM(t=r.CRH())&&(e.viewportElement=t.first),r.iGM(t=r.CRH())&&(e.ths=t)}},hostVars:9,hostBindings:function(t,e){1&t&&r.NdJ("resize",function(){return e.onResize()},!1,r.Jf7)("keydown",function(t){return e.onFocus(t)}),2&t&&(r.Ikx("tabindex",e.tabindex),r.ekj("no-focus-outline",!1!==e.noFocusOutline)("borderless",!1!==e.borderless)("overlay-scrollbar",!0)("auto-height",!1!==e.autoHeight))},inputs:{borderless:"borderless",items:"items",itemHeight:"itemHeight",autoHeight:"autoHeight",showHeader:"showHeader",defaultSort:"defaultSort",defaultSortDirection:"defaultSortDirection",selectable:"selectable",multiSelect:"multiSelect",trackFn:"trackFn",displayInitial:"displayInitial",increaseBy:"increaseBy",filter:"filter",rowClass:"rowClass",cellClass:"cellClass",preferenceKey:"preferenceKey",filterQuery:"filterQuery",columnState:"columnState",filterFields:"filterFields",valueFetcher:"valueFetcher",sortFunction:"sortFunction",sorting:"sorting",noFocusOutline:"noFocusOutline",sort:"sort",selected:"selected"},outputs:{selectedChange:"selectedChange",sortedChange:"sortedChange",dbclick:"dbclick",customSort:"customSort",cellDblClick:"cellDblClick",cellClick:"cellClick"},features:[r.TTD],decls:12,vars:12,consts:[["headerDropdown",""],[3,"selected","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],["class","header",3,"contextDropdown",4,"ngIf"],[1,"body",3,"click","dblclick"],[1,"overlay-scrollbar-small",3,"itemSize"],["viewportElement",""],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"selected","mousedown"],[4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"header",3,"contextDropdown"],["header",""],["class","th",3,"width","top","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"th",3,"mousedown"],["th",""],["indicator","","position","right",3,"modelChange"],["name","arrow_down",3,"size",4,"ngIf"],["name","arrow_up",3,"size",4,"ngIf"],["name","arrow_down",3,"size"],["name","arrow_up",3,"size"],[3,"contextDropdown","mousedown","contextmenu","dblclick"],["class","table-cell",3,"class","width",4,"ngFor","ngForOf","ngForTrackBy"],[1,"table-cell"]],template:function(t,e){1&t&&(r.TgZ(0,"dui-dropdown",null,0),r.YNc(2,ku,2,2,"dui-dropdown-item",1),r._UZ(3,"dui-dropdown-separator"),r.TgZ(4,"dui-dropdown-item",2),r.NdJ("click",function(){return e.resetAll()}),r._uU(5,"Reset all"),r.qZA(),r.qZA(),r.TgZ(6,"div"),r.YNc(7,Fu,3,3,"div",3),r.TgZ(8,"div",4),r.NdJ("click",function(t){return e.clickCell(t)})("dblclick",function(t){return e.dblClickCell(t)}),r.TgZ(9,"cdk-virtual-scroll-viewport",5,6),r.YNc(11,Uu,3,12,"ng-container",7),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(2),r.Q6J("ngForOf",e.sortedColumnDefs)("ngForTrackBy",e.trackByColumn),r.xp6(4),r.Udp("height",!1!==e.autoHeight?e.height+"px":"100%")("min-height",e.itemHeight,"px"),r.xp6(1),r.Q6J("ngIf",e.showHeader),r.xp6(1),r.ekj("with-header",e.showHeader),r.xp6(1),r.Q6J("itemSize",e.itemHeight),r.xp6(2),r.Q6J("cdkVirtualForOf",e.filterSorted(e.sorted))("cdkVirtualForTrackBy",e.trackByFn))},directives:[yu,ht,wu,xu,ft,bl,pl,wl,_t,_u,Lc,ua],styles:["[_nghost-%COMP%]{display:block;border:1px solid #c5c5c5;background-color:#fff;height:100px}.auto-height[_nghost-%COMP%]{height:auto}.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{height:100%}.header[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom:1px solid #cecece;padding-right:13px}.header[_ngcontent-%COMP%], .header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{white-space:nowrap;height:23px;overflow:hidden}.header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:3px 6px;line-height:17px;text-align:left;color:#303030;font-size:11px;font-weight:500;z-index:1;left:0;text-overflow:ellipsis}.header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   dui-icon[_ngcontent-%COMP%]{float:right;margin-top:2px;margin-right:2px}.header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   dui-splitter[_ngcontent-%COMP%]{top:3px;right:0;bottom:3px}.header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:active{background-color:#e3e3e3;font-weight:500}.header[_ngcontent-%COMP%] > div.other-cell[_ngcontent-%COMP%]{transition:left .1s ease-out}.body[_ngcontent-%COMP%]{height:100%}.body.with-header[_ngcontent-%COMP%]{height:calc(100% - 23px)}.cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{overflow:auto!important}.table-row[_ngcontent-%COMP%]{white-space:nowrap;border-bottom:1px solid #c0c0c00d}.table-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;display:inline-block;padding:3px 6px;line-height:16px;min-height:22px;height:100%;vertical-align:middle;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;left:0}.table-row[_ngcontent-%COMP%] > div.active-drop[_ngcontent-%COMP%]{opacity:.8;border-left:1px solid var(--line-color-light);border-right:1px solid var(--line-color-light)}.table-row[_ngcontent-%COMP%] > div.other-cell[_ngcontent-%COMP%]{transition:left .1s ease-out}.table-row.odd[_ngcontent-%COMP%]{background-color:#f5f5f5}.table-row.selected[_ngcontent-%COMP%]{background-color:#dcdcdc}[_nghost-%COMP%]:focus{outline:0}[_nghost-%COMP%]:focus:not(.no-focus-outline){outline:0;border-color:#6da0e7;box-shadow:3px 3px 0 #6da0e7,-3px -3px 0 #6da0e7,-3px 3px 0 #6da0e7,3px -3px 0 #6da0e7}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{background-color:#1e1e1e;border:1px solid #565656}.dark[_nghost-%COMP%]   .header[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#2d2d2d;border-bottom:1px solid #474747}.dark[_nghost-%COMP%]   .th[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .th[_ngcontent-%COMP%]{color:#fff}.dark[_nghost-%COMP%]   .th[_ngcontent-%COMP%]:active, .dark   [_nghost-%COMP%]   .th[_ngcontent-%COMP%]:active{background-color:#474747}.dark[_nghost-%COMP%]   .table-row.odd[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .table-row.odd[_ngcontent-%COMP%]{background-color:hsla(0,0%,96%,.016)}.dark[_nghost-%COMP%]:not(:focus)   .table-row.selected[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]:not(:focus)   .table-row.selected[_ngcontent-%COMP%]{background-color:#444}.dark[_nghost-%COMP%]:focus:not(.no-focus-outline), .dark   [_nghost-%COMP%]:focus:not(.no-focus-outline){border-color:#2a729c;box-shadow:3px 3px 0 #2a729c,-3px -3px 0 #2a729c,-3px 3px 0 #2a729c,3px -3px 0 #2a729c}.borderless[_nghost-%COMP%]{border:0}[_nghost-%COMP%]:focus   .table-row.selected[_ngcontent-%COMP%]{background-color:var(--dui-selection);color:#fff}"],changeDetection:0}),t})(),Gu=(()=>{class t{constructor(t,e){this.controllerClient=t,this.cd=e,this.applicationConfigFilter="",this.configFilter="",this.applicationConfig=[],this.config=[]}filter(t,e){return e?t.filter(t=>t.name.includes(e)):t}ngOnInit(){var t=this;return(0,Co.Z)(function*(){const e=yield t.controllerClient.debug.configuration();t.applicationConfig=e.appConfig,t.config=e.modulesConfig,t.cd.detectChanges()})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Yo),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:26,vars:5,consts:[[1,"section"],[1,"header"],["placeholder","Filter","round","","semiTransparent","","lightFocus","",3,"ngModel","ngModelChange"],["defaultSort","name","noFocusOutline","",3,"items"],["name","name",1,"text-selection"],["name","value",1,"text-selection"],["name","defaultValue",1,"text-selection"],["name","type",1,"text-selection"],["name","description",1,"text-selection"],["name","name",1,"text-selection",3,"width"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"h4"),r._uU(3,"Application configuration"),r.qZA(),r.TgZ(4,"dui-input",2),r.NdJ("ngModelChange",function(t){return e.applicationConfigFilter=t}),r.qZA(),r.qZA(),r.TgZ(5,"p"),r._uU(6," Application config values from your root application module. "),r.qZA(),r.TgZ(7,"dui-table",3),r._UZ(8,"dui-table-column",4),r._UZ(9,"dui-table-column",5),r._UZ(10,"dui-table-column",6),r._UZ(11,"dui-table-column",7),r._UZ(12,"dui-table-column",8),r.qZA(),r.qZA(),r.TgZ(13,"div",0),r.TgZ(14,"div",1),r.TgZ(15,"h4"),r._uU(16,"Module configuration"),r.qZA(),r.TgZ(17,"dui-input",2),r.NdJ("ngModelChange",function(t){return e.configFilter=t}),r.qZA(),r.qZA(),r.TgZ(18,"p"),r._uU(19," Config values from core modules and your imported modules. "),r.qZA(),r.TgZ(20,"dui-table",3),r._UZ(21,"dui-table-column",9),r._UZ(22,"dui-table-column",5),r._UZ(23,"dui-table-column",6),r._UZ(24,"dui-table-column",7),r._UZ(25,"dui-table-column",8),r.qZA(),r.qZA()),2&t&&(r.xp6(4),r.Q6J("ngModel",e.applicationConfigFilter),r.xp6(3),r.Q6J("items",e.filter(e.applicationConfig,e.applicationConfigFilter)),r.xp6(10),r.Q6J("ngModel",e.configFilter),r.xp6(3),r.Q6J("items",e.filter(e.config,e.configFilter)),r.xp6(1),r.Q6J("width",220))},directives:[ya,vs,Vs,Yu,qu],styles:["[_nghost-%COMP%]{display:flex;height:100%;max-width:100%}.section[_ngcontent-%COMP%]{flex:1 1 auto;height:100%;margin:5px;flex-direction:column;overflow:hidden}.header[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]{display:flex}.header[_ngcontent-%COMP%]   dui-input[_ngcontent-%COMP%]{margin-left:auto}.section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:10px}dui-table[_ngcontent-%COMP%]{flex:1}"]}),t})();class Wu{constructor(t=11,e=getComputedStyle(document.querySelector(".dui-body")||document.body).fontFamily){this.fontSize=t,this.fontFamily=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.canvas.style.display="none"}destroy(){document.body.removeChild(this.canvas)}getDimensions(t){this.context.font=this.fontSize+"px "+this.fontFamily;const e=this.context.measureText(t);return{width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent}}}var Ju=n(20218);const Xu=["templateRef"];function Qu(t,e){1&t&&r.Hsn(0)}const Ku=["*"];function th(t,e){1&t&&(r.O4$(),r._UZ(0,"path")),2&t&&r.uIk("d",e.$implicit)}const eh=function(t){return{$implicit:t}};function nh(t,e){if(1&t&&r.GkF(0,5),2&t){const t=r.oxw().$implicit,e=r.oxw();r.Q6J("ngTemplateOutlet",e.cardMap[t.label].template)("ngTemplateOutletContext",r.VKq(2,eh,t))}}function rh(t,e){if(1&t&&(r.O4$(),r.kcU(),r.TgZ(0,"div"),r.TgZ(1,"div",3),r._uU(2),r.YNc(3,nh,1,4,"ng-container",4),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw();r.Gre("node ",n.cardMap[t.label]?n.cardMap[t.label].class:"",""),r.Udp("left",t.x-t.width/2,"px")("top",t.y-t.height/2,"px")("width",t.width,"px")("height",t.height,"px"),r.xp6(2),r.hij(" ",t.label," "),r.xp6(1),r.Q6J("ngIf",n.cardMap[t.label])}}let ih=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-workflow-card"]],viewQuery:function(t,e){if(1&t&&r.Gf(Xu,5),2&t){let t;r.iGM(t=r.CRH())&&(e.template=t.first)}},inputs:{name:"name",class:"class"},ngContentSelectors:Ku,decls:2,vars:0,consts:[["templateRef",""]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,Qu,1,0,"ng-template",null,0,r.W1O))},encapsulation:2}),t})(),oh=(()=>{class t{constructor(t){this.cd=t,this.nodes=[],this.edges=[],this.graphWidth=0,this.graphHeight=0,this.cardMap={},this.browserText=new Wu}ngOnChanges(t){t.workflow&&this.loadGraph()}ngAfterViewInit(){this.cards&&(this.cards.changes.subscribe(t=>{this.loadCards(t)}),this.loadCards(this.cards.toArray()))}loadCards(t){for(const e of t)this.cardMap[e.name]=e;this.cd.detectChanges()}loadGraph(){if(!this.workflow)return;const t=new Ju.graphlib.Graph({directed:!0,compound:!0,multigraph:!1});t.setGraph({nodesep:10,ranksep:25,rankdir:"LR"}),t.setDefaultEdgeLabel(()=>({labelpos:"c",labeloffset:0}));for(const i of this.workflow.places){const e=this.browserText.getDimensions(i);t.setNode(i,{label:i,width:Math.max(90,e.width+30),height:Math.max(40,e.height)})}for(const i of this.workflow.transitions)t.setEdge(i.from,i.to);try{(0,Ju.layout)(t)}catch(r){console.error("Could not calc layout for graph",r)}let e=0,n=0;this.graphWidth=t.graph().width||0,this.graphHeight=t.graph().height||0;for(const i of t.edges()){const r=t.edge(i).points;if(r)for(const t of r)t.x<e&&(e=t.x),t.y<n&&(n=t.y)}if(e*=-1,n*=-1,0!==e||0!==n){this.graphWidth+=e,this.graphHeight+=n;for(const r of t.edges()){const i=t.edge(r).points;if(i)for(const t of i)t.x+=e,t.y+=n}for(const r of t.nodes()){const i=t.node(r);i.x+=e,i.y+=n}}for(const i of t.nodes()){const e=t.node(i);this.nodes.push(e)}for(const i of t.edges()){const e=t.edge(i).points,n=[];n.push("M "+(e[0].x+.5)+","+(e[0].y+.5)),e[0].y>this.graphHeight&&(this.graphHeight=e[0].y+1);for(let t=1;t<e.length;t++)e[t].y>this.graphHeight&&(this.graphHeight=e[t].y+1),n.push("L "+(e[t].x+.5)+","+(e[t].y+.5));this.edges.push(n.join(" "))}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-workflow"]],contentQueries:function(t,e,n){if(1&t&&r.Suo(n,ih,4),2&t){let t;r.iGM(t=r.CRH())&&(e.cards=t)}},inputs:{workflow:"workflow"},features:[r.TTD],decls:4,vars:10,consts:[[1,"nodes"],[4,"ngFor","ngForOf"],[3,"left","top","width","height","class",4,"ngFor","ngForOf"],[1,"label"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.O4$(),r.TgZ(1,"svg"),r.YNc(2,th,1,1,"path",1),r.qZA(),r.YNc(3,rh,4,13,"div",2),r.qZA()),2&t&&(r.Udp("width",e.graphWidth,"px")("height",e.graphHeight,"px"),r.xp6(1),r.Udp("width",e.graphWidth,"px")("height",e.graphHeight,"px"),r.xp6(1),r.Q6J("ngForOf",e.edges),r.xp6(1),r.Q6J("ngForOf",e.nodes))},directives:[ht,ft,_t],styles:["[_nghost-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center}.nodes[_ngcontent-%COMP%]{position:relative;display:inline-block}.nodes[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;left:0;top:0}.nodes[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:none;stroke:var(--line-color-prominent);stroke-width:1px}.node[_ngcontent-%COMP%]{position:absolute;background-color:#eeeeee1a;border:1px solid var(--line-color-light);font-size:12px;line-height:16px;display:flex;justify-content:center;align-items:center}.node[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:center}"]}),t})();function sh(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=e.$implicit;r.xp6(1),r.hij(" ",t.httpMethod.toUpperCase()," ")}}function ah(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=e.$implicit;r.xp6(1),r.hij(" ",t.bodyPropertySchema?t.bodyPropertySchema.toString():""," ")}}function lh(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=e.$implicit;r.xp6(1),r.hij(" ",t.groups.join(", ")," ")}}let ch=(()=>{class t{constructor(t,e){this.controllerClient=t,this.cd=e,this.routes=[],this.selected=[],this.filterQuery=""}get route(){return this.selected[0]}filter(t,e){return e?t.filter(t=>t.path.includes(e)||t.controller.includes(e)):t}ngOnInit(){var t=this;return(0,Co.Z)(function*(){[t.routes,t.workflow]=yield Promise.all([t.controllerClient.debug.routes(),t.controllerClient.getWorkflow("http")]),t.cd.detectChanges()})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Yo),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:20,vars:11,consts:[[1,"header"],[1,"overlay-scrollbar-small",2,"height","250px","margin-bottom","10px","overflow","auto"],[3,"workflow"],["placeholder","Filter","round","","semiTransparent","","lightFocus","",3,"ngModel","ngModelChange"],["selectable","","defaultSort","path","noFocusOutline","",2,"flex","1 1",3,"items","selected","selectedChange"],["name","HTTP",3,"width"],[4,"duiTableCell"],["name","path",3,"width"],["name","controller",3,"width"],["name","body",3,"width"],["name","groups",3,"width"],["name","description",3,"width"],["name","category",3,"width"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"h4"),r._uU(2,"HTTP Workflow"),r.qZA(),r.qZA(),r.TgZ(3,"div",1),r._UZ(4,"app-workflow",2),r.qZA(),r.TgZ(5,"div",0),r.TgZ(6,"h4"),r._uU(7,"HTTP Routes"),r.qZA(),r.TgZ(8,"dui-input",3),r.NdJ("ngModelChange",function(t){return e.filterQuery=t}),r.qZA(),r.qZA(),r.TgZ(9,"dui-table",4),r.NdJ("selectedChange",function(t){return e.selected=t}),r.TgZ(10,"dui-table-column",5),r.YNc(11,sh,2,1,"ng-container",6),r.qZA(),r._UZ(12,"dui-table-column",7),r._UZ(13,"dui-table-column",8),r.TgZ(14,"dui-table-column",9),r.YNc(15,ah,2,1,"ng-container",6),r.qZA(),r.TgZ(16,"dui-table-column",10),r.YNc(17,lh,2,1,"ng-container",6),r.qZA(),r._UZ(18,"dui-table-column",11),r._UZ(19,"dui-table-column",12),r.qZA()),2&t&&(r.xp6(4),r.Q6J("workflow",e.workflow),r.xp6(4),r.Q6J("ngModel",e.filterQuery),r.xp6(1),r.Q6J("items",e.filter(e.routes,e.filterQuery))("selected",e.selected),r.xp6(1),r.Q6J("width",90),r.xp6(2),r.Q6J("width",220),r.xp6(1),r.Q6J("width",220),r.xp6(1),r.Q6J("width",220),r.xp6(2),r.Q6J("width",220),r.xp6(2),r.Q6J("width",220),r.xp6(1),r.Q6J("width",220))},directives:[oh,ya,vs,Vs,Yu,qu,Vu],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.header[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.header[_ngcontent-%COMP%]   dui-input[_ngcontent-%COMP%]{margin-left:auto}"]}),t})();function uh(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.hij(" ",n.getParameters(t)," ")}}let hh=(()=>{class t{constructor(t,e){this.controllerClient=t,this.cd=e,this.actions=[],this.selected=[],this.filterQuery=""}get route(){return this.selected[0]}getParameters(t){return t.parameters.map(t=>t.name+":"+t.propertySchema.toString()).join(", ")}filter(t,e){return e?t.filter(t=>t.path.includes(e)||t.controller.includes(e)||t.methodName.includes(e)):t}ngOnInit(){var t=this;return(0,Co.Z)(function*(){[t.actions]=yield Promise.all([t.controllerClient.debug.actions()]),t.cd.detectChanges()})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Yo),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:10,vars:7,consts:[[1,"header"],["placeholder","Filter","round","","semiTransparent","","lightFocus","",3,"ngModel","ngModelChange"],["selectable","","defaultSort","path","noFocusOutline","",2,"flex","1 1",3,"items","selected","selectedChange"],["name","controller",3,"width"],["name","path",3,"width"],["name","methodName",3,"width"],["name","parameters",3,"width"],[4,"duiTableCell"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"h4"),r._uU(2,"RPC Actions"),r.qZA(),r.TgZ(3,"dui-input",1),r.NdJ("ngModelChange",function(t){return e.filterQuery=t}),r.qZA(),r.qZA(),r.TgZ(4,"dui-table",2),r.NdJ("selectedChange",function(t){return e.selected=t}),r._UZ(5,"dui-table-column",3),r._UZ(6,"dui-table-column",4),r._UZ(7,"dui-table-column",5),r.TgZ(8,"dui-table-column",6),r.YNc(9,uh,2,1,"ng-container",7),r.qZA(),r.qZA()),2&t&&(r.xp6(3),r.Q6J("ngModel",e.filterQuery),r.xp6(1),r.Q6J("items",e.filter(e.actions,e.filterQuery))("selected",e.selected),r.xp6(1),r.Q6J("width",220),r.xp6(1),r.Q6J("width",220),r.xp6(1),r.Q6J("width",220),r.xp6(1),r.Q6J("width",220))},directives:[ya,vs,Vs,Yu,qu,Vu],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.header[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.header[_ngcontent-%COMP%]   dui-input[_ngcontent-%COMP%]{margin-left:auto}"]}),t})(),dh=(()=>{class t{constructor(t,e){this.controllerClient=t,this.cd=e,this.events=[],this.filterQuery=""}filter(t,e){return e?t.filter(t=>t.controller.includes(e)||t.methodName.includes(e)):t}ngOnInit(){var t=this;return(0,Co.Z)(function*(){t.events=yield t.controllerClient.debug.events(),t.cd.detectChanges()})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Yo),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:9,vars:6,consts:[[1,"header"],["placeholder","Filter","round","","semiTransparent","","lightFocus","",3,"ngModel","ngModelChange"],["selectable","","defaultSort","path","noFocusOutline","",2,"flex","1 1",3,"items"],["name","event",3,"width"],["name","controller",3,"width"],["name","methodName",3,"width"],["name","priority",3,"width"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"h4"),r._uU(2,"Events"),r.qZA(),r.TgZ(3,"dui-input",1),r.NdJ("ngModelChange",function(t){return e.filterQuery=t}),r.qZA(),r.qZA(),r.TgZ(4,"dui-table",2),r._UZ(5,"dui-table-column",3),r._UZ(6,"dui-table-column",4),r._UZ(7,"dui-table-column",5),r._UZ(8,"dui-table-column",6),r.qZA()),2&t&&(r.xp6(3),r.Q6J("ngModel",e.filterQuery),r.xp6(1),r.Q6J("items",e.filter(e.events,e.filterQuery)),r.xp6(1),r.Q6J("width",220),r.xp6(1),r.Q6J("width",250),r.xp6(1),r.Q6J("width",220),r.xp6(1),r.Q6J("width",100))},directives:[ya,vs,Vs,Yu,qu],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.header[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.header[_ngcontent-%COMP%]   dui-input[_ngcontent-%COMP%]{margin-left:auto}"]}),t})();const fh=["*"];let ph=(()=>{class t{constructor(){this.active=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-tab-button"]],hostVars:3,hostBindings:function(t,e){2&t&&(r.uIk("tabindex",1),r.ekj("active",!1!==e.active))},inputs:{active:"active"},ngContentSelectors:fh,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},styles:["[_nghost-%COMP%]{vertical-align:middle;position:relative;height:17px;line-height:17px;padding:4px 7px;font-weight:500;color:grey;font-size:11px;overflow:hidden;text-align:center;display:inline-flex;justify-content:center;align-items:center;cursor:default;-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;border-radius:2px}[_nghost-%COMP%]:hover{color:#fff;background-color:var(--dui-selection-hover)}.active[_nghost-%COMP%]{color:#fff;background-color:var(--dui-selection)}"]}),t})();function gh(t,e){if(1&t&&(r.TgZ(0,"app-workflow-card",11),r.TgZ(1,"div",12),r._uU(2),r.qZA(),r.qZA()),2&t){const t=r.oxw().$implicit,e=r.oxw(2).ngIf,n=r.oxw();r.Q6J("name",t),r.xp6(2),r.Oqu(n.time(e.times["workflow/http/"+t]))}}function mh(t,e){if(1&t&&r._UZ(0,"app-workflow-card",13),2&t){const t=r.oxw().$implicit;r.Q6J("name",t)}}function yh(t,e){if(1&t&&(r.ynx(0),r.YNc(1,gh,3,2,"app-workflow-card",9),r.YNc(2,mh,1,1,"app-workflow-card",10),r.BQk()),2&t){const t=e.$implicit,n=r.oxw(2).ngIf;r.xp6(1),r.Q6J("ngIf",n.times["workflow/http/"+t]),r.xp6(1),r.Q6J("ngIf",void 0===n.times["workflow/http/"+t])}}function vh(t,e){if(1&t&&(r.TgZ(0,"div",6),r.TgZ(1,"app-workflow",7),r.YNc(2,yh,3,2,"ng-container",8),r.qZA(),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("workflow",t.httpWorkflow),r.xp6(1),r.Q6J("ngForOf",t.httpWorkflow.places)}}function bh(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"div",1),r.TgZ(2,"h3"),r._uU(3),r.qZA(),r.TgZ(4,"div",2),r._uU(5),r.qZA(),r.TgZ(6,"div",2),r._uU(7),r.qZA(),r.TgZ(8,"div",2),r._uU(9),r.ALo(10,"date"),r.qZA(),r.TgZ(11,"div",2),r._uU(12),r.qZA(),r.qZA(),r.TgZ(13,"div"),r.TgZ(14,"dui-button-group"),r.TgZ(15,"dui-tab-button",3),r._uU(16,"Overview"),r.qZA(),r.TgZ(17,"dui-tab-button"),r._uU(18,"Events (5)"),r.qZA(),r.TgZ(19,"dui-tab-button"),r._uU(20,"Queries (5)"),r.qZA(),r.TgZ(21,"dui-tab-button"),r._uU(22,"Mails"),r.qZA(),r.TgZ(23,"dui-tab-button"),r._uU(24,"Message Bus"),r.qZA(),r.TgZ(25,"dui-tab-button"),r._uU(26,"Logs"),r.qZA(),r.qZA(),r.qZA(),r.YNc(27,vh,3,2,"div",4),r._uU(28," //total db time: split in query time & serialization time //total message bus time //workflow times //event times //session user & storage //resolved route //request body & header //response body & header //triggered events //created services in DI //template render times for each render(), so we see bottlenecks easily //logs by levels //database queries: query time, serialization time //message bus events "),r.TgZ(29,"div",5),r._uU(30," Logs "),r.qZA(),r.BQk()),2&t){const t=e.ngIf,n=r.oxw();r.xp6(3),r.hij("#",t.id,""),r.xp6(2),r.AsE("",t.method," ",t.url,""),r.xp6(2),r.hij("Status ",t.statusCode,""),r.xp6(2),r.Oqu(r.xi3(10,8,t.created,"medium")),r.xp6(3),r.hij("Response time: ",n.time(t.times.http),""),r.xp6(3),r.Q6J("active",!0),r.xp6(12),r.Q6J("ngIf",n.httpWorkflow)}}let _h=(()=>{class t{constructor(t,e,n){this.activatedRoute=t,this.controllerClient=e,this.cd=n,t.params.subscribe(t=>{setTimeout(()=>this.loadRequest(Number(t.id)))})}time(t){return void 0===t?"-":t>=1e3?(t/1e3).toFixed(3)+"s":t.toFixed(3)+"ms"}loadRequest(t){var e=this;return(0,Co.Z)(function*(){e.httpWorkflow=yield e.controllerClient.getWorkflow("http"),e.cd.detectChanges()})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Ir),r.Y36(Yo),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"header"],[1,"text-selection"],[3,"active"],["class","workflow","style","height: 250px; margin-bottom: 10px; overflow: auto","class","overlay-scrollbar-small",4,"ngIf"],[1,"logs"],[1,"overlay-scrollbar-small",2,"height","250px","margin-bottom","10px","overflow","auto"],[3,"workflow"],[4,"ngFor","ngForOf"],["class","valid",3,"name",4,"ngIf"],["class","invalid",3,"name",4,"ngIf"],[1,"valid",3,"name"],[2,"color","var(--text-light)"],[1,"invalid",3,"name"]],template:function(t,e){1&t&&(r.YNc(0,bh,31,11,"ng-container",0),r.ALo(1,"async")),2&t&&r.Q6J("ngIf",r.lcZ(1,1,e.request))},directives:[ft,lu,ph,oh,ht,ih],pipes:[Et,Ot],styles:['app-workflow[_ngcontent-%COMP%] .node.invalid{color:var(--text-light)}app-workflow[_ngcontent-%COMP%] .node.valid{border:0}app-workflow[_ngcontent-%COMP%] .node.valid:after{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border:1px solid var(--color-green);opacity:.3}']}),t})();var wh=n(52167),xh=n(18228),Ch=n.n(xh);if(window.Promise||(window.Promise=wh.Polyfill),Object.assign||(Object.assign=Ch()),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!window.performance||!window.performance.now){var Sh=Date.now();window.performance||(window.performance={}),window.performance.now=function(){return Date.now()-Sh}}for(var Th=Date.now(),Eh=["ms","moz","webkit","o"],Oh=0;Oh<Eh.length&&!window.requestAnimationFrame;++Oh){var Ah=Eh[Oh];window.requestAnimationFrame=window[Ah+"RequestAnimationFrame"],window.cancelAnimationFrame=window[Ah+"CancelAnimationFrame"]||window[Ah+"CancelRequestAnimationFrame"]}window.requestAnimationFrame||(window.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+Th-e;return n<0&&(n=0),Th=e,window.setTimeout(function(){Th=Date.now(),t(performance.now())},n)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),window.Uint8Array||(window.Uint8Array=Array),window.Int32Array||(window.Int32Array=Array);var Ph=/iPhone/i,kh=/iPod/i,Mh=/iPad/i,Ih=/\biOS-universal(?:.+)Mac\b/i,Rh=/\bAndroid(?:.+)Mobile\b/i,Dh=/Android/i,Nh=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Lh=/Silk/i,Fh=/Windows Phone/i,Bh=/\bWindows(?:.+)ARM\b/i,jh=/BlackBerry/i,$h=/BB10/i,Uh=/Opera Mini/i,Vh=/\b(CriOS|Chrome)(?:.+)Mobile/i,Zh=/Mobile(?:.+)Firefox\b/i,zh=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},Hh=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(t){return function(e){return e.test(t)}}(n),o={apple:{phone:i(Ph)&&!i(Fh),ipod:i(kh),tablet:!i(Ph)&&(i(Mh)||zh(e))&&!i(Fh),universal:i(Ih),device:(i(Ph)||i(kh)||i(Mh)||i(Ih)||zh(e))&&!i(Fh)},amazon:{phone:i(Nh),tablet:!i(Nh)&&i(Lh),device:i(Nh)||i(Lh)},android:{phone:!i(Fh)&&i(Nh)||!i(Fh)&&i(Rh),tablet:!i(Fh)&&!i(Nh)&&!i(Rh)&&(i(Lh)||i(Dh)),device:!i(Fh)&&(i(Nh)||i(Lh)||i(Rh)||i(Dh))||i(/\bokhttp\b/i)},windows:{phone:i(Fh),tablet:i(Bh),device:i(Fh)||i(Bh)},other:{blackberry:i(jh),blackberry10:i($h),opera:i(Uh),firefox:i(Zh),chrome:i(Vh),device:i(jh)||i($h)||i(Uh)||i(Zh)||i(Vh)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(window.navigator),qh={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(t){var e,n=!0;return(Hh.tablet||Hh.phone)&&(Hh.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(n=!1),Hh.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(n=!1)),n?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:Hh.apple.device?"highp":"mediump",CAN_UPLOAD_SAME_BUFFER:!Hh.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Yh=n(4237),Gh=n.n(Yh),Wh=n(41604),Jh=n.n(Wh),Xh=n(38505),Qh=(()=>(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Qh||(Qh={})),Qh))(),Kh=(()=>(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Kh||(Kh={})),Kh))(),td=(()=>(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(td||(td={})),td))(),ed=(()=>(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(ed||(ed={})),ed))(),nd=(()=>(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(nd||(nd={})),nd))(),rd=(()=>(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(rd||(rd={})),rd))(),id=(()=>(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(id||(id={})),id))(),od=(()=>(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(od||(od={})),od))(),sd=(()=>(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(sd||(sd={})),sd))(),ad=(()=>(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ad||(ad={})),ad))(),ld=(()=>(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON"}(ld||(ld={})),ld))(),cd=(()=>(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(cd||(cd={})),cd))(),ud=(()=>(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(ud||(ud={})),ud))(),hd=(()=>(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(hd||(hd={})),hd))(),dd=(()=>(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(dd||(dd={})),dd))(),fd=(()=>(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(fd||(fd={})),fd))(),pd=(()=>(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(pd||(pd={})),pd))();qh.RETINA_PREFIX=/@([0-9\.]+)x/,qh.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var gd,md=!1;function yd(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function vd(t){var e=t.toString(16);return"#"+("000000".substr(0,6-e.length)+e)}function bd(t){return"string"==typeof t&&"#"===t[0]&&(t=t.substr(1)),parseInt(t,16)}var _d=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[ed.NORMAL_NPM]=ed.NORMAL,t[ed.ADD_NPM]=ed.ADD,t[ed.SCREEN_NPM]=ed.SCREEN,e[ed.NORMAL]=ed.NORMAL_NPM,e[ed.ADD]=ed.ADD_NPM,e[ed.SCREEN]=ed.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function wd(t,e){return _d[e?1:0][t]}function xd(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+((255&t)*e+.5|0)}function Cd(t,e,n,r){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(r||void 0===r)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function Sd(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,1+((t|=t>>>8)|t>>>16)}function Td(t){return!(t&t-1||!t)}function Ed(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}function Od(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}function Ad(t){return 0===t?0:t<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;var Pd=0;function kd(){return++Pd}var Md={};function Id(t,e,n){if(void 0===n&&(n=3),!Md[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),Md[e]=!0}}var Rd,Dd={},Nd=Object.create(null),Ld=Object.create(null),Fd=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||qh.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t},enumerable:!1,configurable:!0}),t}();function Bd(t,e){var n=qh.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}var jd=2*Math.PI,$d=180/Math.PI,Ud=Math.PI/180,Vd=(()=>(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(Vd||(Vd={})),Vd))(),Zd=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(r),this.type=Vd.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(i-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=r,this.height=i-r,this},t}(),zd=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.radius=n,this.type=Vd.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.x-t,r=this.y-e;return(n*=n)+(r*=r)<=this.radius*this.radius},t.prototype.getBounds=function(){return new Zd(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}(),Hd=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.width=n,this.height=r,this.type=Vd.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return(n*=n)+(r*=r)<=1},t.prototype.getBounds=function(){return new Zd(this.x-this.width,this.y-this.height,this.width,this.height)},t}(),qd=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var r=Array.isArray(e[0])?e[0]:e;if("number"!=typeof r[0]){for(var i=[],o=0,s=r.length;o<s;o++)i.push(r[o].x,r[o].y);r=i}this.points=r,this.type=Vd.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var s=this.points[2*i],a=this.points[2*i+1],l=this.points[2*o+1];a>e!=l>e&&t<(e-a)/(l-a)*(this.points[2*o]-s)+s&&(n=!n)}return n},t}(),Yd=function(){function t(t,e,n,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=20),this.x=t,this.y=e,this.width=n,this.height=r,this.radius=i,this.type=Vd.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),r=e-(this.y+this.radius),i=this.radius*this.radius;if(n*n+r*r<=i)return!0;if((n=t-(this.x+this.width-this.radius))*n+r*r<=i)return!0;if(n*n+(r=e-(this.y+this.height-this.radius))*r<=i)return!0;if((n=t-(this.x+this.radius))*n+r*r<=i)return!0}return!1},t}(),Gd=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t}(),Wd=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),Jd=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new Gd;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new Gd;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,s,a,l){return this.a=Math.cos(s+l)*i,this.b=Math.sin(s+l)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=-Math.atan2(-r,i),s=Math.atan2(n,e),a=Math.abs(o+s);return a<1e-5||Math.abs(jd-a)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),Xd=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Qd=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Kd=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],tf=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ef=[],nf=[],rf=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];ef.push(e);for(var n=0;n<16;n++)for(var r=rf(Xd[t]*Xd[n]+Kd[t]*Qd[n]),i=rf(Qd[t]*Xd[n]+tf[t]*Qd[n]),o=rf(Xd[t]*Kd[n]+Kd[t]*tf[n]),s=rf(Qd[t]*Kd[n]+tf[t]*tf[n]),a=0;a<16;a++)if(Xd[a]===r&&Qd[a]===i&&Kd[a]===o&&tf[a]===s){e.push(a);break}}for(t=0;t<16;t++){var l=new Jd;l.set(Xd[t],Qd[t],Kd[t],tf[t],0,0),nf.push(l)}}();var of={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Xd[t]},uY:function(t){return Qd[t]},vX:function(t){return Kd[t]},vY:function(t){return tf[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return ef[t][e]},sub:function(t,e){return ef[t][of.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?of.S:of.N:2*Math.abs(e)<=Math.abs(t)?t>0?of.E:of.W:e>0?t>0?of.SE:of.SW:t>0?of.NE:of.NW},matrixAppendRotationInv:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=nf[of.inv(e)];i.tx=n,i.ty=r,t.append(i)}},sf=function(){function t(){this.worldTransform=new Jd,this.localTransform=new Jd,this.position=new Wd(this.onChange,this,0,0),this.scale=new Wd(this.onChange,this,1,1),this.pivot=new Wd(this.onChange,this,0,0),this.skew=new Wd(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();qh.SORTABLE_CHILDREN=!1;var af=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?Zd.EMPTY:((t=t||new Zd(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],s=t[1];e=o<e?o:e,n=s<n?s:n,r=o>r?o:r,i=s>i?s:i,e=(o=t[2])<e?o:e,n=(s=t[3])<n?s:n,r=o>r?o:r,i=s>i?s:i,e=(o=t[4])<e?o:e,n=(s=t[5])<n?s:n,r=o>r?o:r,i=s>i?s:i,n=(s=t[7])<n?s:n,r=(o=t[6])>r?o:r,i=s>i?s:i,this.minX=e=o<e?o:e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){this.addFrameMatrix(t.worldTransform,e,n,r,i)},t.prototype.addFrameMatrix=function(t,e,n,r,i){var o=t.a,s=t.b,a=t.c,l=t.d,c=t.tx,u=t.ty,h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,g=o*e+a*n+c,m=s*e+l*n+u;h=g<h?g:h,d=m<d?m:d,f=g>f?g:f,p=m>p?m:p,h=(g=o*r+a*n+c)<h?g:h,d=(m=s*r+l*n+u)<d?m:d,f=g>f?g:f,p=m>p?m:p,h=(g=o*e+a*i+c)<h?g:h,d=(m=s*e+l*i+u)<d?m:d,f=g>f?g:f,p=m>p?m:p,d=(m=s*r+l*i+u)<d?m:d,f=(g=o*r+a*i+c)>f?g:f,p=m>p?m:p,this.minX=h=g<h?g:h,this.minY=d,this.maxX=f,this.maxY=p},t.prototype.addVertexData=function(t,e,n){for(var r=this.minX,i=this.minY,o=this.maxX,s=this.maxY,a=e;a<n;a+=2){var l=t[a],c=t[a+1];r=l<r?l:r,i=c<i?c:i,o=l>o?l:o,s=c>s?c:s}this.minX=r,this.minY=i,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(t,e,n,r){this.addVerticesMatrix(t.worldTransform,e,n,r)},t.prototype.addVerticesMatrix=function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var s=t.a,a=t.b,l=t.c,c=t.d,u=t.tx,h=t.ty,d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,m=n;m<r;m+=2){var y=e[m],v=e[m+1],b=s*y+l*v+u,_=c*v+a*y+h;d=Math.min(d,b-i),p=Math.max(p,b+i),f=Math.min(f,_-o),g=Math.max(g,_+o)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=g},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=i&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,c=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>l?i:l,this.maxY=o>c?o:c}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=i&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,c=this.maxY;this.minX=n<s?n:s,this.minY=r<a?r:a,this.maxX=i>l?i:l,this.maxY=o>c?o:c}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,r,i,o){e-=o,n+=i,r+=o,this.minX=this.minX<(t-=i)?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),lf=function(t,e){return(lf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function cf(t,e){function n(){this.constructor=t}lf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var uf=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new sf,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new af,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return cf(e,t),e.mixin=function(t){for(var n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Zd),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new Zd),t=this._localBoundsRect),this._localBounds||(this._localBounds=new af);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,r,i,o,s,a,l){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===l&&(l=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new hf),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*$d},set:function(t){this.transform.rotation=t*Ud},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask&&((e=this._mask.maskObject||this._mask).renderable=!0,e.isMask=!1),this._mask=t,this._mask&&((e=this._mask.maskObject||this._mask).renderable=!1,e.isMask=!0)},enumerable:!1,configurable:!0}),e}(Gh()),hf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return cf(e,t),e}(uf);function df(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}uf.prototype.displayObjectUpdateTransform=uf.prototype.updateTransform;var ff=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=qh.SORTABLE_CHILDREN,e.sortDirty=!1,e}return cf(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Od(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var i=e[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,Od(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Od(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,r=e-t;if(r>0&&r<=e){n=this.children.splice(t,r);for(var i=0;i<n.length;++i)n[i].parent=null,n[i].transform&&(n[i].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),i=0;i<n.length;++i)n[i].emit("removed",this),this.emit("childRemoved",n[i],this,i);return n}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(df),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!n)for(var i=0,o=this.children.length;i<o;++i){var s=this.children[i];s.visible&&s.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}n&&t.mask.push(this,this._mask),this._render(t),r=0;for(var i=this.children.length;r<i;r++)this.children[r].render(t);t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(uf);ff.prototype.containerUpdateTransform=ff.prototype.updateTransform,uf.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});var pf=function(){function t(t){this._hookDiv=null,(Hh.tablet||Hh.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._isActive=!1,this._isMobileAccessibility=!1,this.androidUpdateCount=0,this.androidUpdateFrequency=500,window.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessability for this content",e.addEventListener("focus",function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){this._isActive||(this._isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){var t=performance.now();if(!(Hh.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=this.renderer.resolution,r=e.width/this.renderer.width*n,i=e.height/this.renderer.height*n,o=this.div;o.style.left=e.left+"px",o.style.top=e.top+"px",o.style.width=this.renderer.width+"px",o.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var a=this.children[s];if(a.renderId!==this.renderId)a._accessibleActive=!1,Od(this.children,s,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,s--;else{o=a._accessibleDiv;var l=a.hitArea,c=a.worldTransform;a.hitArea?(o.style.left=(c.tx+l.x*c.a)*r+"px",o.style.top=(c.ty+l.y*c.d)*i+"px",o.style.width=l.width*c.a*r+"px",o.style.height=l.height*c.d*i+"px"):(l=a.getBounds(),this.capHitArea(l),o.style.left=l.x*r+"px",o.style.top=l.y*i+"px",o.style.width=l.width*r+"px",o.style.height=l.height*i+"px",o.title!==a.accessibleTitle&&null!==a.accessibleTitle&&(o.title=a.accessibleTitle),o.getAttribute("aria-label")!==a.accessibleHint&&null!==a.accessibleHint&&o.setAttribute("aria-label",a.accessibleHint)),a.accessibleTitle===o.title&&a.tabIndex===o.tabIndex||(o.title=a.accessibleTitle,o.tabIndex=a.tabIndex,this.debug&&this.updateDebugHTML(o))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData),e.dispatchEvent(t.target.displayObject,"pointertap",e.eventData),e.dispatchEvent(t.target.displayObject,"tap",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();qh.TARGET_FPMS=.06;var gf=(()=>(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(gf||(gf={})),gf))(),mf=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.fn=t,this.context=e,this.priority=n,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),yf=function(){function t(){var t=this;this._head=new mf(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/qh.TARGET_FPMS,this.elapsedMS=1/qh.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=gf.NORMAL),this._addListener(new mf(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=gf.NORMAL),this._addListener(new mf(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*qh.TARGET_FPMS;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,qh.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),vf=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,gf.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?yf.shared:new yf,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}(),bf=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Gd,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),_f=function(t,e){return(_f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},wf=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),xf=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),Cf=function(){function t(){this._tempPoint=new Gd}return t.prototype.recursiveFindHit=function(t,e,n,r,i){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=i=e.interactive||i,l=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(r=!1,l=!1)),a=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(r=!1)),l&&e.interactiveChildren&&e.children)for(var c=e.children,u=c.length-1;u>=0;u--){var h=c[u],d=this.recursiveFindHit(t,h,n,r,a);if(d){if(!h.parent)continue;a=!1,d&&(t.target&&(r=!1),s=!0)}}return i&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),n&&n(t,e,!!s))),s},t.prototype.findHit=function(t,e,n,r){this.recursiveFindHit(t,e,n,r,!1)},t}();uf.mixin({interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0});var Sf={target:null,data:{global:null}},Tf=function(t){function e(e,n){var r=t.call(this)||this;return n=n||{},r.renderer=e,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new bf,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new wf,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new Cf,r._tempDisplayObject=new hf,r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function n(){this.constructor=t}_f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return Sf.target=null,Sf.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(Sf,e,null,!0),Sf.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(yf.system.add(this.tickerUpdate,this,gf.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(yf.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;window.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(this.currentCursorMode!==(t=t||"default")){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(typeof e){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopPropagationHint&&t!==n.stopsPropagatingAt||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.delayDispatchEvent=function(t,e,n){this.delayedEvents.push({displayObject:t,eventString:e,eventData:n})},e.prototype.mapPositionToPoint=function(t,e,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=1/this.resolution;t.x=this.interactionDOMElement.width/r.width*(e-r.left)*i,t.y=this.interactionDOMElement.height/r.height*(n-r.top)*i},e.prototype.processInteractive=function(t,e,n,r){var i=this.search.findHit(t,e,n,r),o=this.delayedEvents;if(!o.length)return i;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var l=o[a],c=l.displayObject,u=l.eventString,h=l.eventData;h.stopsPropagatingAt===c&&(h.stopPropagationHint=!0),this.dispatchEvent(c,u,h)}return i},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType?this.emit("touchstart",s):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit(2===i.button?"rightdown":"mousedown",this.eventData)}}},e.prototype.processPointerDown=function(t,e,n){var r=t.data,i=t.data.identifier;if(n)if(e.trackedPointers[i]||(e.trackedPointers[i]=new xf(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var r=this.normalizeToPointerData(t),i=r.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<i;s++){var a=r[s],l=this.getInteractionDataForPointerId(a),c=this.configureInteractionEventForDOMEvent(this.eventData,a,l);c.data.originalEvent=t,this.processInteractive(c,this.lastObjectRendered,n,e||!o),this.emit(e?"pointercancel":"pointerup"+o,c),"mouse"===a.pointerType||"pen"===a.pointerType?this.emit(2===a.button?"rightup"+o:"mouseup"+o,c):"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,c),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var r=t.data,i=t.data.identifier,o=e.trackedPointers[i],s="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType,l=!1;if(a){var c=2===r.button,u=xf.FLAGS,h=void 0!==o&&o.flags&(c?u.RIGHT_DOWN:u.LEFT_DOWN);n?(this.dispatchEvent(e,c?"rightup":"mouseup",t),h&&(this.dispatchEvent(e,c?"rightclick":"click",t),l=!0)):h&&this.dispatchEvent(e,c?"rightupoutside":"mouseupoutside",t),o&&(c?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!l||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var r=t.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var r=t.data,i=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=e.trackedPointers[i];n&&!s&&(s=e.trackedPointers[i]=new xf(i)),void 0!==s&&(n&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,n=t.pointerId;return 1===n||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[n]?e=this.activeInteractionData[n]:((e=this.interactionDataPool.pop()||new bf).identifier=n,this.activeInteractionData[n]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,r=t.changedTouches.length;n<r;n++){var i=t.changedTouches[n];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else if(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent)e.push(t);else{var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(Gh()),Ef=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,r,i,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var l=this,c=l.name,u=l.items;this._aliasCount++;for(var h=0,d=u.length;h<d;h++)u[h][c](t,e,n,r,i,o,s,a);return u===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Ef.prototype,{dispatch:{value:Ef.prototype.emit},run:{value:Ef.prototype.emit}}),qh.PREFER_ENV=Hh.any?Qh.WEBGL:Qh.WEBGL2,qh.STRICT_TEXTURE_CACHE=!1;var Of=[];function Af(t,e){if(!t)return null;var n="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(var i=Of.length-1;i>=0;--i){var o=Of[i];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var Pf=function(t,e){return(Pf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function kf(t,e){function n(){this.constructor=t}Pf(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Mf=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Ef("setRealSize"),this.onUpdate=new Ef("update"),this.onError=new Ef("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),If=function(t){function e(e,n){var r=this,i=n||{},o=i.width,s=i.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,s)||this).data=e,r}return kf(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===cd.UNPACK),n.width===e.width&&n.height===e.height?r.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(n.width=e.width,n.height=e.height,r.texImage2D(e.target,0,n.internalFormat,e.width,e.height,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(Mf),Rf={scaleMode:sd.NEAREST,format:rd.RGBA,alphaMode:cd.NPM},Df=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=t.call(this)||this,i=(n=n||{}).alphaMode,o=n.mipmap,s=n.anisotropicLevel,a=n.scaleMode,l=n.width,c=n.height,u=n.wrapMode,h=n.format,d=n.type,f=n.target,p=n.resolution;return!e||e instanceof Mf||((e=Af(e,n.resourceOptions)).internal=!0),r.width=l||0,r.height=c||0,r.resolution=p||qh.RESOLUTION,r.mipmap=void 0!==o?o:qh.MIPMAP_TEXTURES,r.anisotropicLevel=void 0!==s?s:qh.ANISOTROPIC_LEVEL,r.wrapMode=u||qh.WRAP_MODE,r.scaleMode=void 0!==a?a:qh.SCALE_MODE,r.format=h||rd.RGBA,r.type=d||od.UNSIGNED_BYTE,r.target=f||id.TEXTURE_2D,r.alphaMode=void 0!==i?i:cd.UNPACK,void 0!==n.premultiplyAlpha&&(r.premultiplyAlpha=n.premultiplyAlpha),r.uid=kd(),r.touched=0,r.isPowerOfTwo=!1,r._refreshPOT(),r._glTextures={},r.dirtyId=0,r.dirtyStyleId=0,r.cacheId=null,r.valid=l>0&&c>0,r.textureCacheIds=[],r.destroyed=!1,r.resource=null,r._batchEnabled=0,r._batchLocation=0,r.parentTextureArray=null,r.setResource(e),r}return kf(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.ceil(this.width*this.resolution-1e-4)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.ceil(this.height*this.resolution-1e-4)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t,this.height=e,this._refreshPOT(),this.update(),this},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=t/this.resolution,this.height=e/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Td(this.realWidth)&&Td(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=this.width*e/t,this.height=this.height*e/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ld[this.cacheId],delete Nd[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,r){void 0===r&&(r=qh.STRICT_TEXTURE_CACHE);var i="string"==typeof t,o=null;i?o=t:(t._pixiId||(t._pixiId="pixiid_"+kd()),o=t._pixiId);var s=Ld[o];if(i&&r&&!s)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return s||((s=new e(t,n)).cacheId=o,e.addToCache(s,o)),s},e.fromBuffer=function(t,n,r,i){t=t||new Float32Array(n*r*4);var o=new If(t,{width:n,height:r}),s=t instanceof Float32Array?od.FLOAT:od.UNSIGNED_BYTE;return new e(o,Object.assign(Rf,i||{width:n,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Ld[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Ld[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=Ld[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Ld[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete Ld[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(Gh()),Nf=function(t){function e(e,n){var r=this,i=n||{};(r=t.call(this,i.width,i.height)||this).items=[],r.itemDirtyIds=[];for(var o=0;o<e;o++){var s=new Df;r.items.push(s),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return kf(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):this.addResourceAt(t[n]instanceof Mf?t[n]:Af(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map(function(t){return t.resource}).filter(function(t){return t}).map(function(t){return t.load()});return this._load=Promise.all(e).then(function(){var e=t.items[0];return t.resize(e.realWidth,e.realHeight),Promise.resolve(t)}),this._load},e}(Mf),Lf=function(t){function e(e,n){var r,i,o=this,s=n||{},a=s.width,l=s.height;return Array.isArray(e)?(r=e,i=e.length):i=e,o=t.call(this,i,{width:a,height:l})||this,r&&o.initFromArray(r,n),o}return kf(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=id.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var r=this,i=r.length,o=r.itemDirtyIds,s=r.items,a=t.gl;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,e.format,this._width,this._height,i,0,e.format,e.type,null);for(var l=0;l<i;l++){var c=s[l];o[l]<c.dirtyId&&(o[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,e.format,e.type,c.resource.source))}return!0},e}(Nf),Ff=function(t){function e(e){var n=this;return(n=t.call(this,e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height)||this).source=e,n.noSubImage=!1,n}return kf(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=function(t,e){if(void 0===e&&(e=window.location),0===t.indexOf("data:"))return"";e=e||window.location,Rd||(Rd=document.createElement("a")),Rd.href=t;var n=(0,Xh.parse)(Rd.href);return n.hostname!==e.hostname||(n.port||""!==e.port)&&n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}(e):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,r){var i=t.gl,o=e.realWidth,s=e.realHeight;return r=r||this.source,i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===cd.UNPACK),this.noSubImage||e.target!==i.TEXTURE_2D||n.width!==o||n.height!==s?(n.width=o,n.height=s,i.texImage2D(e.target,0,e.format,e.format,e.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source;this.resize(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(Mf),Bf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kf(e,t),e.test=function(t){var e=window.OffscreenCanvas;return!!(e&&t instanceof e)||t instanceof HTMLCanvasElement},e}(Ff),jf=function(t){function e(n,r){var i=this,o=r||{},s=o.width,a=o.height,l=o.autoLoad,c=o.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");i=t.call(this,6,{width:s,height:a})||this;for(var u=0;u<e.SIDES;u++)i.items[u].target=id.TEXTURE_CUBE_MAP_POSITIVE_X+u;return i.linkBaseTexture=!1!==c,n&&i.initFromArray(n,r),!1!==l&&i.load(),i}return kf(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=id.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=id.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,r){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];i[o]<s.dirtyId&&(s.valid&&s.resource?(s.resource.upload(t,s,r),i[o]=s.dirtyId):i[o]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(Nf),$f=function(t){function e(e,n){var r=this;if(n=n||{},!(e instanceof HTMLImageElement)){var i=new Image;Ff.crossOrigin(i,e,n.crossorigin),i.src=e,e=i}return r=t.call(this,e)||this,!e.complete&&r._width&&r._height&&(r._width=0,r._height=0),r.url=e.src,r._process=null,r.preserveBitmap=!1,r.createBitmap=(void 0!==n.createBitmap?n.createBitmap:qh.CREATE_IMAGE_BITMAP)&&!!window.createImageBitmap,r.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,void 0!==n.premultiplyAlpha&&(r.premultiplyAlpha=n.premultiplyAlpha),r.bitmap=null,r._load=null,!1!==n.autoLoad&&r.load(),r}return kf(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise(function(t,n){var r=e.source;e.url=r.src;var i=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,t(e.createBitmap?e.process():e))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){n(t),e.onError.emit(t)})})),this._load},e.prototype.process=function(){var t=this,e=this.source;return null!==this._process?this._process:null===this.bitmap&&window.createImageBitmap?(this._process=window.createImageBitmap(e,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===cd.UNPACK?"premultiply":"none"}).then(function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))}),this._process):Promise.resolve(this)},e.prototype.upload=function(e,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var s in o){var a=o[s];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(Ff),Uf=function(t){function e(e,n){var r=this;return n=n||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return kf(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise(function(e){if(t._resolve=function(){t.resize(t.source.width,t.source.height),e(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()})),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;Ff.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/r*n,o=t._overrideHeight||t._overrideWidth/n*r),i=Math.round(i),o=Math.round(o);var s=t.source;s.width=i,s.height=o,s._pixiId="canvas_"+kd(),s.getContext("2d").drawImage(e,0,0,n,r,0,0,i,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,e){return"svg"===e||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&0===t.indexOf("<svg")},e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Ff),Vf=function(t){function e(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]),Ff.crossOrigin(o,n[0].src||n[0],r.crossorigin);for(var s=0;s<n.length;++s){var a=document.createElement("source"),l=n[s],c=l.src,u=l.mime,h=(c=c||n[s]).split("?").shift().toLowerCase(),d=h.substr(h.lastIndexOf(".")+1);u=u||e.MIME_TYPES[d]||"video/"+d,a.src=c,a.type=u,o.appendChild(a)}n=o}return(i=t.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return kf(e,t),e.prototype.update=function(e){void 0===e&&(e=0),this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-yf.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(function(n){t.valid?n(t):(t._resolve=n,e.load())}),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(yf.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(yf.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&yf.shared.remove(this.update,this);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(yf.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(yf.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Ff),Zf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kf(e,t),e.test=function(t){return!!window.createImageBitmap&&t instanceof ImageBitmap},e}(Ff);Of.push($f,Zf,Bf,Vf,Uf,If,jf,Lf);var zf=function(){function t(t){this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),Hf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kf(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===cd.UNPACK),n.width===e.width&&n.height===e.height?r.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.type,this.data):(n.width=e.width,n.height=e.height,r.texImage2D(e.target,0,1===t.context.webGLVersion?r.DEPTH_COMPONENT:r.DEPTH_COMPONENT16,e.width,e.height,0,e.format,e.type,this.data)),!0},e}(If),qf=function(){function t(t,e){this.width=Math.ceil(t||100),this.height=Math.ceil(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ef("disposeFramebuffer"),this.multisample=pd.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new Df(null,{scaleMode:sd.NEAREST,resolution:1,mipmap:ld.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Df(new Hf(null,{width:this.width,height:this.height}),{scaleMode:sd.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ld.OFF,format:rd.DEPTH_COMPONENT,type:od.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.ceil(t),e=Math.ceil(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n];r.setSize(t/(i=r.resolution),e/i)}var i;this.depthTexture&&this.depthTexture.setSize(t/(i=this.depthTexture.resolution),e/i)}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),Yf=function(t){function e(e){var n=this;if("number"==typeof e){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3];e={width:r,height:i,scaleMode:o,resolution:s}}n=t.call(this,null,e)||this;var a=e||{},l=a.width,c=a.height;return n.mipmap=0,n.width=Math.ceil(l)||100,n.height=Math.ceil(c)||100,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new qf(n.width*n.resolution,n.height*n.resolution).addColorTexture(0,n),n.maskStack=[],n.filterStack=[{}],n}return kf(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),this.framebuffer.resize(t*this.resolution,e*this.resolution)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Df),Gf=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var o=t.width/2/r,s=t.height/2/i,a=t.x/r+o,l=t.y/i+s;n=of.add(n,of.NW),this.x0=a+o*of.uX(n),this.y0=l+s*of.uY(n),n=of.add(n,2),this.x1=a+o*of.uX(n),this.y1=l+s*of.uY(n),n=of.add(n,2),this.x2=a+o*of.uX(n),this.y2=l+s*of.uY(n),n=of.add(n,2),this.x3=a+o*of.uX(n),this.y3=l+s*of.uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t}(),Wf=new Gf,Jf=function(t){function e(n,r,i,o,s,a){var l=t.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new Zd(0,0,1,1)),n instanceof e&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=o,l.valid=!1,l._uvs=Wf,l.uvMatrix=null,l.orig=i||r,l._rotate=Number(s||0),!0===s)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new Gd(a.x,a.y):new Gd(0,0),l._updateID=0,l.textureCacheIds=[],n.valid?l.noFrame?n.valid&&l.onBaseTextureUpdated(n):l.frame=r:n.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&n.on("update",l.onBaseTextureUpdated,l),l}return kf(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture;n&&n.url&&Nd[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)},e.prototype.updateUvs=function(){this._uvs===Wf&&(this._uvs=new Gf),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=qh.STRICT_TEXTURE_CACHE);var i="string"==typeof t,o=null;i?o=t:(t._pixiId||(t._pixiId="pixiid_"+kd()),o=t._pixiId);var s=Nd[o];if(i&&r&&!s)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return s||(n.resolution||(n.resolution=Bd(t)),(s=new e(new Df(t,n))).baseTexture.cacheId=o,Df.addToCache(s.baseTexture,o),e.addToCache(s,o)),s},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=e.from(t,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then(function(){return Promise.resolve(i)})},e.fromBuffer=function(t,n,r,i){return new e(Df.fromBuffer(t,n,r,i))},e.fromLoader=function(t,n,r){var i=new $f(t);i.url=n;var o=new e(new Df(i,{scaleMode:qh.SCALE_MODE,resolution:Bd(n)}));return r||(r=n),Df.addToCache(o.baseTexture,r),e.addToCache(o,r),r!==n&&(Df.addToCache(o.baseTexture,n),e.addToCache(o,n)),o},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Nd[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),Nd[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=Nd[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Nd[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)Nd[t.textureCacheIds[r]]===t&&delete Nd[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,s=n+i>this.baseTexture.height;if(o||s)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width+" "+(o&&s?"and":"or")+" Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height);this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(Gh());function Xf(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Jf.EMPTY=new Jf(new Df),Xf(Jf.EMPTY),Xf(Jf.EMPTY.baseTexture),Jf.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Jf(new Df(new Bf(t)))}(),Xf(Jf.WHITE),Xf(Jf.WHITE.baseTexture);var Qf=function(t){function e(e,n){var r=this,i=null;if(!(e instanceof Yf)){var o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+s+") instead of the ctor directly."),i=arguments[0],n=null,e=new Yf({width:o,height:s,scaleMode:a,resolution:l})}return(r=t.call(this,e,n)||this).legacyRenderer=i,r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return kf(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0),t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n&&this.baseTexture.resize(t,e),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){return"number"==typeof t&&(t={width:t,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new e(new Yf(t))},e}(Jf),Kf=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e){var n=new Yf(Object.assign({width:t,height:e,resolution:1},this.textureOptions));return new Qf(n)},t.prototype.getOptimalTexture=function(e,n,r){void 0===r&&(r=1);var i=t.SCREEN_KEY;e*=r,n*=r,this.enableFullScreen&&e===this._pixelsWidth&&n===this._pixelsHeight||(i=(65535&(e=Sd(e)))<<16|65535&(n=Sd(n))),this.texturePool[i]||(this.texturePool[i]=[]);var o=this.texturePool[i].pop();return o||(o=this.createTexture(e,n)),o.filterPoolKey=i,o.setResolution(r),o},t.prototype.getFilterTexture=function(t,e){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution);return n.filterFrame=t.filterFrame,n},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var n=t.SCREEN_KEY,r=this.texturePool[n];if(this.enableFullScreen=e.width>0&&e.height>0,r)for(var i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY="screen",t}(),tp=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=5126),this.buffer=t,this.size=e,this.normalized=n,this.type=r,this.stride=i,this.start=o,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,r,i,o){return new t(e,n,r,i,o)},t}(),ep=0,np=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=ep++,this.disposeRunner=new Ef("disposeBuffer")}return t.prototype.update=function(t){this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}();function rp(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var ip={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array},op={5126:4,5123:2,5121:1},sp=0,ap={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},lp=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=sp++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ef("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,r,i,o,s,a){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof np||(e instanceof Array&&(e=new Float32Array(e)),e=new np(e));var l=t.split("|");if(l.length>1){for(var c=0;c<l.length;c++)this.addAttribute(l[c],e,n,r,i);return this}var u=this.buffers.indexOf(e);return-1===u&&(this.buffers.push(e),u=this.buffers.length-1),this.attributes[t]=new tp(u,n,r,i,o,s,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof np||(t instanceof Array&&(t=new Uint16Array(t)),t=new np(t)),t.index=!0,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],r=new np;for(t in this.attributes){var i=this.attributes[t];e.push(this.buffers[i.buffer].data),n.push(i.size*op[i.type]/4),i.buffer=0}for(r.data=function(t,e){for(var n=0,r=0,i={},o=0;o<t.length;o++)r+=e[o],n+=t[o].length;var s=new ArrayBuffer(4*n),a=null,l=0;for(o=0;o<t.length;o++){var c=e[o],u=t[o],h=rp(u);i[h]||(i[h]=new ip[h](s)),a=i[h];for(var d=0;d<u.length;d++)a[(d/c|0)*r+l+d%c]=u[d];l+=c}return new Float32Array(s)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new np(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];e.attributes[n]=new tp(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e},t.merge=function(e){for(var n,r=new t,i=[],o=[],s=[],a=0;a<e.length;a++){n=e[a];for(var l=0;l<n.buffers.length;l++)o[l]=o[l]||0,o[l]+=n.buffers[l].data.length,s[l]=0}for(a=0;a<n.buffers.length;a++)i[a]=new(ap[rp(n.buffers[a].data)])(o[a]),r.buffers[a]=new np(i[a]);for(a=0;a<e.length;a++)for(n=e[a],l=0;l<n.buffers.length;l++)i[l].set(n.buffers[l].data,s[l]),s[l]+=n.buffers[l].data.length;if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.index=!0;var c=0,u=0,h=0,d=0;for(a=0;a<n.buffers.length;a++)if(n.buffers[a]!==n.indexBuffer){d=a;break}for(var a in n.attributes){var f=n.attributes[a];(0|f.buffer)===d&&(u+=f.size*op[f.type]/4)}for(a=0;a<e.length;a++){var p=e[a].indexBuffer.data;for(l=0;l<p.length;l++)r.indexBuffer.data[l+h]+=c;c+=n.buffers[d].data.length/u,h+=p.length}}return r},t}(),cp=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return kf(e,t),e}(lp),up=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new np(e.vertices),e.uvBuffer=new np(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return kf(e,t),e.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,r=e.y,this.vertices[0]=n=e.x,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(lp),hp=0,dp=function(){function t(t,e){this.uniforms=t,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=hp++,this.static=!!e}return t.prototype.update=function(){this.dirtyId++},t.prototype.add=function(e,n,r){this.uniforms[e]=new t(n,r)},t.from=function(e,n){return new t(e,n)},t}(),fp=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new Zd,this.destinationFrame=new Zd,this.filters=[]}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),pp=function(t){function e(e){var n=t.call(this,e)||this;return n.defaultFilterStack=[{}],n.texturePool=new Kf,n.texturePool.setScreenSize(e.view),n.statePool=[],n.quad=new cp,n.quadUv=new up,n.tempRect=new Zd,n.activeState={},n.globalUniforms=new dp({outputFrame:n.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),n.forceClear=!1,n.useMaxPadding=!1,n}return kf(e,t),e.prototype.push=function(t,e){for(var n=this.renderer,r=this.defaultFilterStack,i=this.statePool.pop()||new fp,o=e[0].resolution,s=e[0].padding,a=e[0].autoFit,l=e[0].legacy,c=1;c<e.length;c++){var u=e[c];o=Math.min(o,u.resolution),s=this.useMaxPadding?Math.max(s,u.padding):s+u.padding,a=a&&u.autoFit,l=l||u.legacy}1===r.length&&(this.defaultFilterStack[0].renderTexture=n.renderTexture.current),r.push(i),i.resolution=o,i.legacy=l,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(s),a&&i.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),i.sourceFrame.ceil(o),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,o),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;var h=this.tempRect;h.width=i.sourceFrame.width,h.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,n.renderTexture.bind(i.renderTexture,i.sourceFrame,h),n.renderTexture.clear()},e.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var i=r.inputSize,o=r.inputPixel,s=r.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=i[0]*e.resolution,o[1]=i[1]*e.resolution,o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*i[2]-.5*o[2],s[3]=e.sourceFrame.height*i[3]-.5*o[3],e.legacy){var a=r.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(e.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,l.renderTexture,ud.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var c=e.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,e.resolution);u.filterFrame=c.filterFrame;var h=0;for(h=0;h<n.length-1;++h){n[h].apply(this,c,u,ud.CLEAR,e);var d=c;c=u,u=d}n[h].apply(this,c,l.renderTexture,ud.BLEND,e),this.returnFilterTexture(c),this.returnFilterTexture(u)}e.clear(),this.statePool.push(e)},e.prototype.bindAndClear=function(t,e){if(void 0===e&&(e=ud.CLEAR),t&&t.filterFrame){var n=this.tempRect;n.width=t.filterFrame.width,n.height=t.filterFrame.height,this.renderer.renderTexture.bind(t,t.filterFrame,n)}else this.renderer.renderTexture.bind(t);"boolean"==typeof e&&(e=e?ud.CLEAR:ud.BLEND,Id("5.2.1","Use CLEAR_MODES when using clear applyFilter option")),(e===ud.CLEAR||e===ud.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()},e.prototype.applyFilter=function(t,e,n,r){var i=this.renderer;this.bindAndClear(n,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.state.set(t.state),i.shader.bind(t),t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(nd.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(nd.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=e._texture.orig,s=t.set(i.width,0,0,i.height,r.x,r.y),a=e.worldTransform.copyTo(Jd.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},e.prototype.destroy=function(){this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(t,e,n){return void 0===n&&(n=1),this.texturePool.getOptimalTexture(t,e,n)},e.prototype.getFilterTexture=function(t,e){if("number"==typeof t){var n=t;t=e,e=n}var r=this.texturePool.getOptimalTexture((t=t||this.activeState.renderTexture).width,t.height,e||t.resolution);return r.filterFrame=t.filterFrame,r},e.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e}(zf),gp=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),mp=function(t){function e(e){var n=t.call(this,e)||this;return n.emptyRenderer=new gp(e),n.currentRenderer=n.emptyRenderer,n}return kf(e,t),e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)},e.prototype.boundArray=function(t,e,n,r){for(var i=t.elements,o=t.ids,s=t.count,a=0,l=0;l<s;l++){var c=i[l],u=c._batchLocation;if(u>=0&&u<r&&e[u]===c)o[l]=u;else for(;a<r;){var h=e[a];if(!h||h._batchEnabled!==n||h._batchLocation!==a){o[l]=a,c._batchLocation=a,e[a]=c;break}a++}}},e}(zf),yp=0,vp=function(t){function e(e){var n=t.call(this,e)||this;return n.webGLVersion=1,n.extensions={},n.supports={uint32Indices:!1},n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),e.view.addEventListener("webglcontextlost",n.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n}return kf(e,t),Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=yp++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=yp++,this.renderer.runners.contextChange.emit(t)},e.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},e.prototype.createContext=function(t,e){var n;if(qh.PREFER_ENV>=Qh.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var t=this.gl;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:t.getExtension("EXT_color_buffer_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear")})},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var t=this.renderer.view;t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in window&&t instanceof window.WebGL2RenderingContext;n&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(zf),bp=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=pd.NONE,this.msaaBuffer=null,this.blitFramebuffer=null},_p=new Zd,wp=function(t){function e(e){var n=t.call(this,e)||this;return n.managedFramebuffers=[],n.unknownFramebuffer=new qf(10,10),n.msaaSamples=null,n}return kf(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Zd,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;qh.PREFER_ENV===Qh.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},e.prototype.bind=function(t,e){var n=this.gl;if(t){var r=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,r.framebuffer)),r.dirtyId!==t.dirtyId&&(r.dirtyId=t.dirtyId,r.dirtyFormat!==t.dirtyFormat?(r.dirtyFormat=t.dirtyFormat,this.updateFramebuffer(t)):r.dirtySize!==t.dirtySize&&(r.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var i=0;i<t.colorTextures.length;i++){var o=t.colorTextures[i];this.renderer.texture.unbind(o.parentTextureArray||o)}t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,t.width,t.height)}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(t,e,n,r){var i=this.viewport;i.width===n&&i.height===r&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=n,i.height=r,this.gl.viewport(t,e,n,r))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(t,e,n,r,i){void 0===i&&(i=td.COLOR|td.DEPTH);var o=this.gl;o.clearColor(t,e,n,r),o.clear(i)},e.prototype.initFramebuffer=function(t){var e=new bp(this.gl.createFramebuffer());return e.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=e,this.managedFramebuffers.push(t),t.disposeRunner.add(this),e},e.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));for(var r=t.colorTextures,i=0;i<r.length;i++)this.renderer.texture.bind(r[i],0);t.depthTexture&&this.renderer.texture.bind(t.depthTexture,0)},e.prototype.updateFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],r=t.colorTextures.length;e.drawBuffers||(r=Math.min(r,1)),n.multisample>1&&(n.msaaBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n.msaaBuffer));for(var i=[],o=0;o<r;o++)if(!(0===o&&n.multisample>1)){var s=t.colorTextures[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+o,s.target,a._glTextures[this.CONTEXT_UID].texture,0),i.push(e.COLOR_ATTACHMENT0+o)}if(i.length>1&&e.drawBuffers(i),t.depthTexture&&this.writeDepthTexture){var l=t.depthTexture;this.renderer.texture.bind(l,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,0)}n.stencil||!t.stencil&&!t.depth||(n.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height),t.depthTexture||e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,n.stencil))},e.prototype.detectSamples=function(t){var e=this.msaaSamples,n=pd.NONE;if(t<=1||null===e)return n;for(var r=0;r<e.length;r++)if(e[r]<=t){n=e[r];break}return 1===n&&(n=pd.NONE),n},e.prototype.blit=function(t,e,n){var r=this,i=r.current,o=r.gl;if(2===r.renderer.context.webGLVersion&&i){var s=i.glFramebuffers[r.CONTEXT_UID];if(s){if(!t){if(s.multisample<=1)return;s.blitFramebuffer||(s.blitFramebuffer=new qf(i.width,i.height),s.blitFramebuffer.addColorTexture(0,i.colorTextures[0])),(t=s.blitFramebuffer).width=i.width,t.height=i.height}e||((e=_p).width=i.width,e.height=i.height),n||(n=e);var a=e.width===n.width&&e.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,n.x,n.y,n.width,n.height,o.COLOR_BUFFER_BIT,a?o.NEAREST:o.LINEAR)}}},e.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.stencil&&r.deleteRenderbuffer(n.stencil))}},e.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},e.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.enableStencil();var n=t.width,r=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new Zd},e}(zf),xp=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Cp={5126:4,5123:2,5121:1},Sp=function(t){function e(e){var n=t.call(this,e)||this;return n._activeGeometry=null,n._activeVao=null,n.hasVao=!0,n.hasInstance=!0,n.canUseUInt32ElementIndex=!1,n.managedGeometries={},n.managedBuffers={},n}return kf(e,t),e.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;qh.PREFER_ENV===Qh.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var r=t.getExtension("ANGLE_instanced_arrays");r?(t.vertexAttribDivisor=function(t,e){return r.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,i,o){return r.drawElementsInstancedANGLE(t,e,n,i,o)},t.drawArraysInstanced=function(t,e,n,i){return r.drawArraysInstancedANGLE(t,e,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},e.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[e.program.id]||this.initGeometryVao(t,e.program,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.gl,n=0;n<t.buffers.length;n++){var r=t.buffers[n],i=r._glBuffers[this.CONTEXT_UID];if(r._updateID!==i.updateID){i.updateID=r._updateID;var o=r.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER;if(e.bindBuffer(o,i.buffer),this._boundBuffer=i,i.byteLength>=r.data.byteLength)e.bufferSubData(o,0,r.data);else{var s=r.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;i.byteLength=r.data.byteLength,e.bufferData(o,r.data,s)}}}},e.prototype.checkCompatibility=function(t,e){var n=t.attributes,r=e.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},e.prototype.getSignature=function(t,e){var n=t.attributes,r=e.attributeData,i=["g",t.id];for(var o in n)r[o]&&i.push(o);return i.join("-")},e.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0),this.checkCompatibility(t,e);var r=this.gl,i=this.CONTEXT_UID,o=this.getSignature(t,e),s=t.glVertexArrayObjects[this.CONTEXT_UID],a=s[o];if(a)return s[e.id]=a,a;var l=t.buffers,c=t.attributes,u={},h={};for(var d in l)u[d]=0,h[d]=0;for(var d in c)!c[d].size&&e.attributeData[d]?c[d].size=e.attributeData[d].size:c[d].size||console.warn("PIXI Geometry attribute '"+d+"' size cannot be determined (likely the bound shader does not have the attribute)"),u[c[d].buffer]+=c[d].size*Cp[c[d].type];for(var d in c){var f=c[d],p=f.size;void 0===f.stride&&(f.stride=u[f.buffer]===p*Cp[f.type]?0:u[f.buffer]),void 0===f.start&&(f.start=h[f.buffer],h[f.buffer]+=p*Cp[f.type])}a=r.createVertexArray(),r.bindVertexArray(a);for(var g=0;g<l.length;g++){var m=l[g];m._glBuffers[i]||(m._glBuffers[i]=new xp(r.createBuffer()),this.managedBuffers[m.id]=m,m.disposeRunner.add(this)),n&&m._glBuffers[i].refCount++}return this.activateVao(t,e),this._activeVao=a,s[e.id]=a,s[o]=a,a},e.prototype.disposeBuffer=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(e||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeGeometry=function(t,e){if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,i=t.buffers;if(t.disposeRunner.remove(this),n){for(var o=0;o<i.length;o++){var s=i[o]._glBuffers[this.CONTEXT_UID];s.refCount--,0!==s.refCount||e||this.disposeBuffer(i[o],e)}if(!e)for(var a in n)if("g"===a[0]){var l=n[a];this._activeVao===l&&this.unbind(),r.deleteVertexArray(l)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t);for(e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.disposeBuffer(this.managedBuffers[e[n]],t)},e.prototype.activateVao=function(t,e){var n=this.gl,r=this.CONTEXT_UID,i=t.buffers,o=t.attributes;t.indexBuffer&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer._glBuffers[r].buffer);var s=null;for(var a in o){var l=o[a],c=i[l.buffer]._glBuffers[r];if(e.attributeData[a]){s!==c&&(n.bindBuffer(n.ARRAY_BUFFER,c.buffer),s=c);var u=e.attributeData[a].location;if(n.enableVertexAttribArray(u),n.vertexAttribPointer(u,l.size,l.type||n.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(u,1)}}}},e.prototype.draw=function(t,e,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(n||0)*s,r||1):i.drawElements(t,e||o.indexBuffer.data.length,a,(n||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,n,e||o.getSize(),r||1):i.drawArrays(t,n,e||o.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e}(zf),Tp=function(){function t(t){void 0===t&&(t=null),this.type=fd.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=fd.NONE,this.autoDetect=!0),this._target=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function Ep(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function Op(t,e,n,r){var i=Ep(t,t.VERTEX_SHADER,e),o=Ep(t,t.FRAGMENT_SHADER,n),s=t.createProgram();if(t.attachShader(s,i),t.attachShader(s,o),r)for(var a in r)t.bindAttribLocation(s,r[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||(console.warn(e),console.error(t.getShaderInfoLog(i))),t.getShaderParameter(o,t.COMPILE_STATUS)||(console.warn(n),console.error(t.getShaderInfoLog(o))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(i),t.deleteShader(o),s}function Ap(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function Pp(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return Ap(2*e);case"bvec3":return Ap(3*e);case"bvec4":return Ap(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var kp,Mp={},Ip=Mp;function Rp(){if(Ip===Mp||Ip&&Ip.isContextLost()){var t=document.createElement("canvas"),e=void 0;qh.PREFER_ENV>=Qh.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Ip=e}return Ip}function Dp(t,e,n){if("precision"!==t.substring(0,9)){var r=e;return e===dd.HIGH&&n!==dd.HIGH&&(r=dd.MEDIUM),"precision "+r+" float;\n"+t}return n!==dd.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Np={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Lp(t){return Np[t]}var Fp=null,Bp={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function jp(t,e){if(!Fp){var n=Object.keys(Bp);Fp={};for(var r=0;r<n.length;++r){var i=n[r];Fp[t[i]]=Bp[i]}}return Fp[e]}var $p,Up=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],Vp={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Zp={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},zp=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Hp(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}var qp=0,Yp={},Gp=function(){function t(e,n,r){void 0===r&&(r="pixi-shader"),this.id=qp++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Yp[r]?(Yp[r]++,r+="-"+Yp[r]):Yp[r]=1,this.vertexSrc="#define SHADER_NAME "+r+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+"\n"+this.fragmentSrc,this.vertexSrc=Dp(this.vertexSrc,qh.PRECISION_VERTEX,dd.HIGH),this.fragmentSrc=Dp(this.fragmentSrc,qh.PRECISION_FRAGMENT,function(){if(!kp){kp=dd.MEDIUM;var t=Rp();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);kp=e.precision?dd.HIGH:dd.MEDIUM}}return kp}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}return t.prototype.extractData=function(t,e){var n=Rp();if(n){var r=Op(n,t,e);this.attributeData=this.getAttributeData(r,n),this.uniformData=this.getUniformData(r,n),n.deleteProgram(r)}else this.uniformData={},this.attributeData={}},t.prototype.getAttributeData=function(t,e){for(var n={},r=[],i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var s=e.getActiveAttrib(t,o),a=jp(e,s.type),l={type:a,name:s.name,size:Lp(a),location:0};n[s.name]=l,r.push(l)}for(r.sort(function(t,e){return t.name>e.name?1:-1}),o=0;o<r.length;o++)r[o].location=o;return n},t.prototype.getUniformData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=e.getActiveUniform(t,i),s=o.name.replace(/\[.*?\]$/,""),a=o.name.match(/\[.*?\]$/),l=jp(e,o.type);n[s]={type:l,size:o.size,isArray:a,value:Pp(l,o.size)}}return n},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,r){var i=e+n,o=Dd[i];return o||(Dd[i]=o=new t(e,n,r)),o},t}(),Wp=function(){function t(t,e){for(var n in this.program=t,this.uniformGroup=e?e instanceof dp?e:new dp(e):new dp({}),t.uniformData)this.uniformGroup.uniforms[n]instanceof Array&&(this.uniformGroup.uniforms[n]=new Float32Array(this.uniformGroup.uniforms[n]))}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var r=e.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,r){return new t(Gp.from(e,n),r)},t}(),Jp=function(){function t(){this.data=0,this.blendMode=ed.NORMAL,this.polygonOffset=0,this.blend=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==ed.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Xp=function(t){function e(n,r,i){var o=this,s=Gp.from(n||e.defaultVertexSrc,r||e.defaultFragmentSrc);return(o=t.call(this,s,i)||this).padding=0,o.resolution=qh.FILTER_RESOLUTION,o.enabled=!0,o.autoFit=!0,o.legacy=!!o.program.attributeData.aTextureCoord,o.state=new Jp,o}return kf(e,t),e.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Wp),Qp=new Jd,Kp=function(){function t(t,e){this._texture=t,this.mapCoord=new Jd,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(Qp.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Qp));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(e._frame.x+a+l)/o.width,s[1]=(e._frame.y+a+l)/o.height,s[2]=(e._frame.x+e._frame.width-a+l)/o.width,s[3]=(e._frame.y+e._frame.height-a+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),tg=function(t){function e(e){var n=this,r=new Jd;return n=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this,e.renderable=!1,n.maskSprite=e,n.maskMatrix=r,n}return kf(e,t),e.prototype.apply=function(t,e,n,r){var i=this.maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Kp(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,r))},e}(Xp),eg=function(t){function e(e){var n=t.call(this,e)||this;return n.enableScissor=!1,n.alphaMaskPool=[],n.maskDataPool=[],n.maskStack=[],n.alphaMaskIndex=0,n}return kf(e,t),e.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},e.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var r=this.maskDataPool.pop()||new Tp;r.pooled=!0,r.maskObject=e,n=r}switch(n.autoDetect&&this.detect(n),n.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),n._target=t,n.type){case fd.SCISSOR:this.maskStack.push(n),this.renderer.scissor.push(n);break;case fd.STENCIL:this.maskStack.push(n),this.renderer.stencil.push(n);break;case fd.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n),this.maskStack.push(n)}},e.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){switch(e.type){case fd.SCISSOR:this.renderer.scissor.pop();break;case fd.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case fd.SPRITE:this.popSpriteMask()}e.reset(),e.pooled&&this.maskDataPool.push(e)}},e.prototype.detect=function(t){var e=t.maskObject;if(e.isSprite)t.type=fd.SPRITE;else if(t.type=fd.STENCIL,this.enableScissor&&e.isFastRect&&e.isFastRect()){var n=e.worldTransform,r=Math.atan2(n.b,n.a),i=Math.atan2(n.d,n.c);r=Math.round(r*(180/Math.PI)*100),i=((i=Math.round(i*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0==(r=(r%9e3+9e3)%9e3)&&9e3===i&&(t.type=fd.SCISSOR)}},e.prototype.pushSpriteMask=function(t){var e=t.maskObject,n=t._target,r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new tg(e)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=e;var i=n.filterArea;n.filterArea=e.getBounds(!0),this.renderer.filter.push(n,r),n.filterArea=i,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e}(zf),ng=function(t){function e(e){var n=t.call(this,e)||this;return n.maskStack=[],n.glConst=0,n}return kf(e,t),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==n&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.maskStack=null},e}(zf),rg=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return kf(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.push=function(t){var e=t.maskObject;e.renderable=!0;var n=t._scissorRect,r=e.getBounds(!0),i=this.renderer.gl;e.renderable=!1,n?r.fit(n):i.enable(i.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=r,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,e=this.renderer.renderTexture.current,n=this.renderer.projection,r=n.transform,i=n.sourceFrame,o=n.destinationFrame,s=e?e.resolution:this.renderer.resolution,a=(t.x-i.x)*s+o.x,l=(t.y-i.y)*s+o.y,c=t.height*s;r&&(a+=r.tx*s,l+=r.ty*s),e||(l=this.renderer.height-c-l),this.renderer.gl.scissor(a,l,t.width*s,c)},e}(ng),ig=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return kf(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,this._getBitwiseMask()),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.getStackLength())-1},e}(ng),og=function(t){function e(e){var n=t.call(this,e)||this;return n.destinationFrame=null,n.sourceFrame=null,n.defaultFrame=null,n.projectionMatrix=new Jd,n.transform=null,n}return kf(e,t),e.prototype.update=function(t,e,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(t,e,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},e.prototype.setTransform=function(t){},e}(zf),sg=new Zd,ag=new Zd,lg=new Zd,cg=function(t){function e(e){var n=t.call(this,e)||this;return n.clearColor=e._backgroundColorRgba,n.defaultMaskStack=[],n.current=null,n.sourceFrame=new Zd,n.destinationFrame=new Zd,n}return kf(e,t),e.prototype.bind=function(t,e,n){void 0===t&&(t=null);var r,i,o,s=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(sg.width=t.frame.width,sg.height=t.frame.height,e=sg),n||(ag.x=t.frame.x,ag.y=t.frame.y,ag.width=e.width,ag.height=e.height,n=ag),i=r.framebuffer):(o=s.resolution,e||(sg.width=s.screen.width,sg.height=s.screen.height,e=sg),n||((n=sg).width=e.width,n.height=e.height)),lg.x=n.x*o,lg.y=n.y*o,lg.width=n.width*o,lg.height=n.height*o,this.renderer.framebuffer.bind(i,lg),this.renderer.projection.update(n,e,o,!i),this.renderer.mask.setMaskStack(t?r.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},e.prototype.clear=function(t,e){this.renderer.framebuffer.clear((t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor)[0],t[1],t[2],t[3],e)},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e}(zf),ug=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.program=null},t}(),hg=0,dg={textureCount:0},fg=function(t){function e(e){var n=t.call(this,e)||this;return n.destroyed=!1,n.systemCheck(),n.gl=null,n.shader=null,n.program=null,n.cache={},n.id=hg++,n}return kf(e,t),e.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof $p)return $p;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");$p=!0===t({a:"b"},"a","b")}catch(e){$p=!1}return $p}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(t){this.gl=t,this.reset()},e.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),e||(dg.textureCount=0,this.syncUniformGroup(t.uniformGroup,dg)),r},e.prototype.setUniforms=function(t){var e=this.shader.program;e.syncUniforms(e.glPrograms[this.renderer.CONTEXT_UID].uniformData,t,this.renderer)},e.prototype.syncUniformGroup=function(t,e){var n=this.getglProgram();t.static&&t.dirtyId===n.uniformGroups[t.id]||(n.uniformGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},e.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},e.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData);return this.cache[e]||(this.cache[e]=function(t,e){var n=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var r in t.uniforms){var i=e[r];if(i){for(var o=t.uniforms[r],s=!1,a=0;a<Up.length;a++)if(Up[a].test(i,o)){n.push(Up[a].code(r,o)),s=!0;break}if(!s){var l=(1===i.size?Vp:Zp)[i.type].replace("location",'ud["'+r+'"].location');n.push('\n            cv = ud["'+r+'"].value;\n            v = uv["'+r+'"];\n            '+l+";")}}else t.uniforms[r].group&&n.push('\n                    renderer.shader.syncUniformGroup(uv["'+r+'"], syncData);\n                ')}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},e.prototype.getSignature=function(t,e){var n=t.uniforms,r=[];for(var i in n)r.push(i),e[i]&&r.push(e[i].type);return r.join("-")},e.prototype.getglProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateShader=function(t){var e=this.gl,n=t.program,r={};for(var i in n.attributeData)r[i]=n.attributeData[i].location;var o=Op(e,n.vertexSrc,n.fragmentSrc,r),s={};for(var i in n.uniformData){var a=n.uniformData[i];s[i]={location:e.getUniformLocation(o,i),value:Pp(a.type,a.size)}}var l=new ug(o,s);return n.glPrograms[this.renderer.CONTEXT_UID]=l,l},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.destroyed=!0},e}(zf),pg=function(t){function e(e){var n=t.call(this,e)||this;return n.gl=null,n.stateId=0,n.polygonOffset=0,n.blendMode=ed.NONE,n._blendEq=!1,n.map=[],n.map[0]=n.setBlend,n.map[1]=n.setOffset,n.map[2]=n.setCullFace,n.map[3]=n.setDepthTest,n.map[4]=n.setFrontFace,n.checks=[],n.defaultState=new Jp,n.defaultState.blend=!0,n}return kf(e,t),e.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[ed.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.ADD]=[t.ONE,t.ONE],e[ed.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.NONE]=[0,0],e[ed.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[ed.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ed.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[ed.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[ed.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ed.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[ed.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[ed.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[ed.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[ed.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ed.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},e.prototype.set=function(t){if(this.stateId!==(t=t||this.defaultState).data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},e.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},e.prototype.setBlend=function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},e.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},e.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},e.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},e.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},e}(zf),gg=function(t){function e(e){var n=t.call(this,e)||this;return n.count=0,n.checkCount=0,n.maxIdle=qh.GC_MAX_IDLE,n.checkCountMax=qh.GC_MAX_CHECK_COUNT,n.mode=qh.GC_MODE,n}return kf(e,t),e.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==hd.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},e.prototype.unload=function(t){var e=t._texture;e&&!e.framebuffer&&this.renderer.texture.destroyTexture(e);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},e}(zf),mg=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121},yg=function(t){function e(e){var n=t.call(this,e)||this;return n.boundTextures=[],n.currentLocation=-1,n.managedTextures=[],n._unknownBoundTextures=!1,n.unknownTexture=new Df,n}return kf(e,t),e.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new mg(t.createTexture());for(t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new mg(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);for(t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),n=0;n<this.boundTextures.length;n++)this.bind(null,n)},e.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if(t){if((t=t.castToBaseTexture()).parentTextureArray)return;if(t.valid){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},e.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[r]=null)},e.prototype.initTexture=function(t){var e=new mg(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},e.prototype.initTextureType=function(t,e){if(e.internalFormat=t.format,e.type=t.type,2===this.webGLVersion){var n=this.renderer.gl;t.type===n.FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA32F),t.type===od.HALF_FLOAT&&(e.type=n.HALF_FLOAT),e.type===n.HALF_FLOAT&&t.format===n.RGBA&&(e.internalFormat=n.RGBA16F)}},e.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e));else{var r=t.realWidth,i=t.realHeight,o=n.gl;(e.width!==r||e.height!==i||e.dirtyId<0)&&(e.width=r,e.height=i,o.texImage2D(t.target,0,e.internalFormat,r,i,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},e.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&Od(this.managedTextures,r,1)}},e.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(e.mipmap=!!(t.mipmap!==ld.POW2&&2===this.webGLVersion||t.isPowerOfTwo)&&t.mipmap>=1,e.wrapMode=2===this.webGLVersion||t.isPowerOfTwo?t.wrapMode:ad.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},e.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===sd.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===sd.LINEAR){var i=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===sd.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===sd.LINEAR?n.LINEAR:n.NEAREST)},e}(zf),vg=new Jd,bg=function(t){function e(n){var r=t.call(this,Kh.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Ef("destroy"),contextChange:new Ef("contextChange"),reset:new Ef("reset"),update:new Ef("update"),postrender:new Ef("postrender"),prerender:new Ef("prerender"),resize:new Ef("resize")},r.globalUniforms=new dp({projectionMatrix:new Jd},!0),r.addSystem(eg,"mask").addSystem(vp,"context").addSystem(pg,"state").addSystem(fg,"shader").addSystem(yg,"texture").addSystem(Sp,"geometry").addSystem(wp,"framebuffer").addSystem(rg,"scissor").addSystem(ig,"stencil").addSystem(og,"projection").addSystem(gg,"textureGC").addSystem(pp,"filter").addSystem(cg,"renderTexture").addSystem(mp,"batch"),r.initPlugins(e.__plugins),n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.transparent,antialias:n.antialias,premultipliedAlpha:r.transparent&&"notMultiplied"!==r.transparent,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(t){var e;md||(navigator.userAgent.toLowerCase().indexOf("chrome")>-1?(e=window.console).log.apply(e,["\n %c %c %c PixiJS 5.3.8 - \u2730 "+t+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"]):window.console&&window.console.log("PixiJS 5.3.8 - "+t+" - http://www.pixijs.com/"),md=!0)}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return kf(e,t),e.create=function(t){if(void 0===gd&&(gd=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:qh.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(o){return!1}}()),gd)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.addSystem=function(t,e){e||(e=t.name);var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=n,this.runners)this.runners[r].add(n);return this},e.prototype.render=function(t,e,n,r,i){if(this.renderingToScreen=!e,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(e||(this._lastObjectRendered=t),!i){var o=t.enableTempParent();t.updateTransform(),t.disableTempParent(o)}this.renderTexture.bind(e),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),e&&e.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(e,n)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},e.registerPlugin=function(t,n){(e.__plugins=e.__plugins||{})[t]=n},e}(function(t){function e(e,n){void 0===e&&(e=Kh.UNKNOWN);var r=t.call(this)||this;return(n=Object.assign({},qh.RENDER_OPTIONS,n)).roundPixels&&(qh.ROUND_PIXELS=n.roundPixels,Id("5.0.0","Renderer roundPixels option is deprecated, please use PIXI.settings.ROUND_PIXELS",2)),r.options=n,r.type=e,r.screen=new Zd(0,0,n.width,n.height),r.view=n.view||document.createElement("canvas"),r.resolution=n.resolution||qh.RESOLUTION,r.transparent=n.transparent,r.autoDensity=n.autoDensity||n.autoResize||!1,r.preserveDrawingBuffer=n.preserveDrawingBuffer,r.clearBeforeRender=n.clearBeforeRender,r._backgroundColor=0,r._backgroundColorRgba=[0,0,0,0],r._backgroundColorString="#000000",r.backgroundColor=n.backgroundColor||r._backgroundColor,r._lastObjectRendered=null,r.plugins={},r}return kf(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoDensity&&(this.view.style.width=t+"px",this.view.style.height=e+"px"),this.emit("resize",t,e)},e.prototype.generateTexture=function(t,e,n,r){0===(r=r||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var i=Qf.create({width:0|r.width,height:0|r.height,scaleMode:e,resolution:n});return vg.tx=-r.x,vg.ty=-r.y,this.render(t,i,!1,vg,!!t.parent),i},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var n=this;n.plugins=null,n.type=Kh.UNKNOWN,n.view=null,n.screen=null,n._tempDisplayObjectParent=null,n.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=vd(t),yd(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),e}(Gh())),_g="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",wg=function(){this.texArray=null,this.blend=0,this.type=nd.TRIANGLES,this.start=0,this.size=0,this.data=null},xg=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),Cg=function(){function t(t){this.rawBinaryData=new ArrayBuffer(t),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),Sg=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Jp.for2d(),n.size=4*qh.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return kf(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;qh.PREFER_ENV===Qh.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),qh.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var r=zp.replace(/%forloop%/gi,Hp(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new wg);for(;n.length<i;)n.push(new xg);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++Df._globalBatch,l=0,c=r[0],u=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var d=t[h];t[h]=null,d._batchEnabled!==a&&(c.count>=n&&(i.boundArray(c,o,a,n),this.buildDrawCalls(c,u,h),u=h,c=r[++l],++a),d._batchEnabled=a,d.touched=s,c.elements[c.count++]=d)}for(c.count>0&&(i.boundArray(c,o,a,n),this.buildDrawCalls(c,u,this._bufferSize),++l,++a),h=0;h<o.length;h++)o[h]=null;Df._globalBatch=a},e.prototype.buildDrawCalls=function(t,n,r){var i=this,o=i._bufferedElements,s=i._attributeBuffer,a=i._indexBuffer,l=i.vertexSize,c=e._drawCallPool,u=this._dcIndex,h=this._aIndex,d=this._iIndex,f=c[u];f.start=this._iIndex,f.texArray=t;for(var p=n;p<r;++p){var g=o[p],m=_d[g._texture.baseTexture.alphaMode?1:0][g.blendMode];o[p]=null,n<p&&f.blend!==m&&(f.size=d-f.start,n=p,(f=c[++u]).texArray=t,f.start=d),this.packInterleavedGeometry(g,s,a,h,d),h+=g.vertexData.length/2*l,d+=g.indices.length,f.blend=m}n<r&&(f.size=d-f.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,n=t._attributeBuffer,r=t._indexBuffer;qh.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var l=o[a],c=l.texArray,u=l.type,h=l.size,d=l.start,f=l.blend;s!==c&&(s=c,this.bindAndClearTexArray(c)),this.state.blendMode=f,i.set(this.state),r.drawElements(u,h,r.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),qh.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Sd(Math.ceil(t/8)),n=Ed(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new Cg(r*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=Sd(Math.ceil(t/12)),n=Ed(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},e.prototype.packInterleavedGeometry=function(t,e,n,r,i){for(var o=e.uint32View,s=e.float32View,a=r/this.vertexSize,l=t.uvs,c=t.indices,u=t.vertexData,h=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=d<1&&t._texture.baseTexture.alphaMode?xd(t._tintRGB,d):t._tintRGB+(255*d<<24),p=0;p<u.length;p+=2)s[r++]=u[p],s[r++]=u[p+1],s[r++]=l[p],s[r++]=l[p+1],o[r++]=f,s[r++]=h;for(p=0;p<c.length;p++)n[i++]=a+c[p]},e._drawCallPool=[],e._textureArrayPool=[],e}(gp),Tg=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=dp.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Gp(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Jd,default:this.defaultGroupCache[t]};return new Wp(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),Eg=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new np(null,e,!1),n._indexBuffer=new np(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,od.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,od.FLOAT).addAttribute("aColor",n._buffer,4,!0,od.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,od.FLOAT).addIndex(n._indexBuffer),n}return kf(e,t),e}(lp),Og="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Ag="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Pg=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:Og,fragment:Ag,geometryClass:Eg,vertexSize:6},t),n=e.vertex,r=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var s=t.call(this,e)||this;return s.shaderGenerator=new Tg(n,r),s.geometryClass=o,s.vertexSize=i,s}return kf(e,t),e}(Sg)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Og},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Ag},enumerable:!1,configurable:!0}),t}().create(),kg=function(){function t(e){var n=this;e=Object.assign({forceCanvas:!1},e),this.renderer=function(t){return bg.create(t)}(e),this.stage=new ff,t._plugins.forEach(function(t){t.init.call(n,e)})}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,n){var r=this,i=t._plugins.slice(0);i.reverse(),i.forEach(function(t){t.destroy.call(r)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null},t}();kg._plugins=[];var Mg=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){window.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(window.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame(function(){return e.resize()}))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,n;if(e.cancelResize(),e._resizeTo===window)t=window.innerWidth,n=window.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,n=r.clientHeight}e.renderer.resize(t,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();kg.registerPlugin(Mg);var Ig=new Zd,Rg=function(){function t(t){this.renderer=t,t.extract=this}return t.prototype.image=function(t,e,n){var r=new Image;return r.src=this.base64(t,e,n),r},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(e){var n,r,i,o=this.renderer,s=!1,a=!1;e&&(e instanceof Qf?i=e:(i=this.renderer.generateTexture(e),a=!0)),i?(n=i.baseTexture.resolution,r=i.frame,s=!1,o.renderTexture.bind(i)):(n=this.renderer.resolution,s=!0,(r=Ig).width=this.renderer.width,r.height=this.renderer.height,o.renderTexture.bind(null));var l=Math.floor(r.width*n+1e-4),c=Math.floor(r.height*n+1e-4),u=new Fd(l,c,1),h=new Uint8Array(4*l*c),d=o.gl;d.readPixels(r.x*n,r.y*n,l,c,d.RGBA,d.UNSIGNED_BYTE,h);var f=u.context.getImageData(0,0,l,c);if(t.arrayPostDivide(h,f.data),u.context.putImageData(f,0,0),s){var p=new Fd(u.width,u.height,1);p.context.scale(1,-1),p.context.drawImage(u.canvas,0,-c),u.destroy(),u=p}return a&&i.destroy(!0),u.canvas},t.prototype.pixels=function(e){var n,r,i,o=this.renderer,s=!1;e&&(e instanceof Qf?i=e:(i=this.renderer.generateTexture(e),s=!0)),i?(n=i.baseTexture.resolution,r=i.frame,o.renderTexture.bind(i)):(n=o.resolution,(r=Ig).width=o.width,r.height=o.height,o.renderTexture.bind(null));var a=r.width*n,l=r.height*n,c=new Uint8Array(4*a*l),u=o.gl;return u.readPixels(r.x*n,r.y*n,a,l,u.RGBA,u.UNSIGNED_BYTE,c),s&&i.destroy(!0),t.arrayPostDivide(c,c),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t.arrayPostDivide=function(t,e){for(var n=0;n<t.length;n+=4){var r=e[n+3]=t[n+3];0!==r?(e[n]=Math.round(Math.min(255*t[n]/r,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/r,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/r,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}},t}(),Dg=n(89501),Ng=n.n(Dg),Lg=n(15972),Fg=n.n(Lg);function Bg(){}function jg(t,e,n,r){var i=0,o=t.length;!function s(a){a||i===o?n&&n(a):r?setTimeout(function(){e(t[i++],s)},1):e(t[i++],s)}()}function $g(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}var Ug={};function Vg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zg(t,e,n){return e&&Vg(t.prototype,e),n&&Vg(t,n),t}var zg=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),Hg=null;function qg(){}var Yg=function(){function t(e,n,r){if("string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=qg,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new(Fg()),this.onProgress=new(Fg()),this.onComplete=new(Fg()),this.onAfterMiddleware=new(Fg())}t.setExtensionLoadType=function(e,n){Gg(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){Gg(t._xhrTypeMap,e,n)};var e=t.prototype;return e.complete=function(){this._clearEvents(),this._finish()},e.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.load=function(e){var n=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(n)},1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:zg&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e._hasFlag=function(t){return 0!=(this._flags&t)},e._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},e._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e._loadElement=function(t){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===t&&void 0!==window.Image?new Image:document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e._loadSourceElement=function(t){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?new Audio:document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},e._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,e.responseType=this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?t.XHR_RESPONSE_TYPE.TEXT:this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},e._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},e._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},e._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},e._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},e._onTimeout=function(){this.abort("Load timed out.")},e._xhrOnError=function(){var t=this.xhr;this.abort(Wg(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},e._xhrOnTimeout=function(){this.abort(Wg(this.xhr)+" Request timed out.")},e._xhrOnAbort=function(){this.abort(Wg(this.xhr)+" Request was aborted by the user.")},e._xhrOnLoad=function(){var e=this.xhr,n="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(n=e.responseText),0===r&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(s){return void this.abort("Error trying to parse loaded json: "+s)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=t.TYPE.XML}catch(s){return void this.abort("Error trying to parse loaded xml: "+s)}else this.data=e.response||n;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},e._determineCrossOrigin=function(t,e){return 0===t.indexOf("data:")?"":window.origin!==window.location.origin?"anonymous":(e=e||window.location,Hg||(Hg=document.createElement("a")),Hg.href=t,(t=Ng()(Hg.href,{strictMode:!0})).host!==e.hostname||(t.port||""!==e.port)&&t.port!==e.port||(t.protocol?t.protocol+":":"")!==e.protocol?"anonymous":"")},e._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},e._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},e._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(r>-1?r:t.length,i>-1?i:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},e._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},Zg(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function Gg(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function Wg(t){return t.toString().replace("object ","")}Yg.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Yg.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Yg.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Yg.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Yg._loadTypeMap={gif:Yg.LOAD_TYPE.IMAGE,png:Yg.LOAD_TYPE.IMAGE,bmp:Yg.LOAD_TYPE.IMAGE,jpg:Yg.LOAD_TYPE.IMAGE,jpeg:Yg.LOAD_TYPE.IMAGE,tif:Yg.LOAD_TYPE.IMAGE,tiff:Yg.LOAD_TYPE.IMAGE,webp:Yg.LOAD_TYPE.IMAGE,tga:Yg.LOAD_TYPE.IMAGE,svg:Yg.LOAD_TYPE.IMAGE,"svg+xml":Yg.LOAD_TYPE.IMAGE,mp3:Yg.LOAD_TYPE.AUDIO,ogg:Yg.LOAD_TYPE.AUDIO,wav:Yg.LOAD_TYPE.AUDIO,mp4:Yg.LOAD_TYPE.VIDEO,webm:Yg.LOAD_TYPE.VIDEO},Yg._xhrTypeMap={xhtml:Yg.XHR_RESPONSE_TYPE.DOCUMENT,html:Yg.XHR_RESPONSE_TYPE.DOCUMENT,htm:Yg.XHR_RESPONSE_TYPE.DOCUMENT,xml:Yg.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Yg.XHR_RESPONSE_TYPE.DOCUMENT,svg:Yg.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Yg.XHR_RESPONSE_TYPE.DOCUMENT,gif:Yg.XHR_RESPONSE_TYPE.BLOB,png:Yg.XHR_RESPONSE_TYPE.BLOB,bmp:Yg.XHR_RESPONSE_TYPE.BLOB,jpg:Yg.XHR_RESPONSE_TYPE.BLOB,jpeg:Yg.XHR_RESPONSE_TYPE.BLOB,tif:Yg.XHR_RESPONSE_TYPE.BLOB,tiff:Yg.XHR_RESPONSE_TYPE.BLOB,webp:Yg.XHR_RESPONSE_TYPE.BLOB,tga:Yg.XHR_RESPONSE_TYPE.BLOB,json:Yg.XHR_RESPONSE_TYPE.JSON,text:Yg.XHR_RESPONSE_TYPE.TEXT,txt:Yg.XHR_RESPONSE_TYPE.TEXT,ttf:Yg.XHR_RESPONSE_TYPE.BUFFER,otf:Yg.XHR_RESPONSE_TYPE.BUFFER},Yg.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var Jg=window.URL||window.webkitURL,Xg={caching:function(t,e){var n=this;Ug[t.url]?(t.data=Ug[t.url],t.complete()):t.onComplete.once(function(){return Ug[n.url]=n.data}),e()},parsing:function(t,e){if(t.data){if(t.xhr&&t.xhrType===Yg.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=Jg.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=Yg.TYPE.IMAGE,void(t.data.onload=function(){Jg.revokeObjectURL(n),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",n=0;n<t.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)r[o]=n<t.length?255&t.charCodeAt(n++):0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(var s=0;s<i.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[s])}return e}(t.xhr.responseText),t.type=Yg.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}},Qg=/(#[\w-]+)?$/,Kg=function(){function t(e,n){var r=this;void 0===e&&(e=""),void 0===n&&(n=10),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var n=0,r={_tasks:[],concurrency:e,saturated:Bg,unsaturated:Bg,buffer:e/4,empty:Bg,drain:Bg,error:Bg,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){n=0,r.drain=Bg,r.started=!1,r._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){for(;!r.paused&&n<r.concurrency&&r._tasks.length;){var e=r._tasks.shift();0===r._tasks.length&&r.empty(),(n+=1)===r.concurrency&&r.saturated(),t(e.data,$g(o(e)))}},length:function(){return r._tasks.length},running:function(){return n},idle:function(){return r._tasks.length+n===0},pause:function(){!0!==r.paused&&(r.paused=!0)},resume:function(){if(!1!==r.paused){r.paused=!1;for(var t=1;t<=r.concurrency;t++)r.process()}}};function i(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,null==t&&r.idle())setTimeout(function(){return r.drain()},1);else{var i={data:t,callback:"function"==typeof n?n:Bg};e?r._tasks.unshift(i):r._tasks.push(i),setTimeout(function(){return r.process()},1)}}function o(t){return function(){n-=1,t.callback.apply(t,arguments),null!=arguments[0]&&r.error(arguments[0],t.data),n<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r}(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new(Fg()),this.onError=new(Fg()),this.onLoad=new(Fg()),this.onStart=new(Fg()),this.onComplete=new(Fg());for(var i=0;i<t._defaultBeforeMiddleware.length;++i)this.pre(t._defaultBeforeMiddleware[i]);for(var o=0;o<t._defaultAfterMiddleware.length;++o)this.use(t._defaultAfterMiddleware[o])}var e=t.prototype;return e.add=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==typeof t&&(r=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Yg(t,e,n),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var o=n.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var l=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=l;for(var c=0;c<s.length;++c)s[c].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},e.pre=function(t){return this._beforeMiddleware.push(t),this},e.use=function(t){return this._afterMiddleware.push(t),this},e.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},e.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},e._prepareUrl=function(t){var e,n=Ng()(t,{strictMode:!0});if(e=n.protocol||!n.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=Qg.exec(e)[0];-1!==(e=e.substr(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},e._loadResource=function(t,e){var n=this;t._dequeue=e,jg(this._beforeMiddleware,function(e,r){e.call(n,t,function(){r(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},e._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),jg(this._afterMiddleware,function(n,r){n.call(e,t,r)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},Zg(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();Kg._defaultBeforeMiddleware=[],Kg._defaultAfterMiddleware=[],Kg.pre=function(t){return Kg._defaultBeforeMiddleware.push(t),Kg},Kg.use=function(t){return Kg._defaultAfterMiddleware.push(t),Kg};var tm=Yg,em=function(t,e){return(em=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},nm=function(){function t(){}return t.use=function(t,e){t.data&&t.type===Yg.TYPE.IMAGE&&(t.texture=Jf.fromLoader(t.data,t.url,t.name)),e()},t}(),rm=function(t){function e(n,r){for(var i=t.call(this,n,r)||this,o=0;o<e._plugins.length;++o){var s=e._plugins[o],a=s.pre,l=s.use;a&&i.pre(a),l&&i.use(l)}return i._protected=!1,i}return function(t,e){function n(){this.constructor=t}em(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var t=e._shared;return t||((t=new e)._protected=!0,e._shared=t),t},enumerable:!1,configurable:!0}),e.registerPlugin=function(t){return e._plugins.push(t),t.add&&t.add(),e},e._plugins=[],e}(Kg);rm.registerPlugin({use:Xg.parsing}),rm.registerPlugin(nm);var im=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?rm.shared:new rm},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),om=function(t,e){return(om=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function sm(t,e){function n(){this.constructor=t}om(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}!function(t){function e(e,n,r,i){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===i&&(i=!1);var o=t.call(this)||this;return r>16384&&(r=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=r,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=ed.NORMAL,o.autoResize=i,o.roundPixels=!0,o.baseTexture=null,o.setProperties(n),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}sm(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,yd(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}(ff);var am=function(){function t(t,e,n){this.geometry=new lp,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var i=t[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||od.FLOAT,offset:i.offset},e[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new np(function(t,e){void 0===e&&(e=null);var n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n)(s=this.dynamicProperties[n]).offset=e,e+=s.size,this.dynamicStride+=s.size;var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new np(this.dynamicData,!1,!1);var i=0;for(this.staticStride=0,n=0;n<this.staticProperties.length;++n)(s=this.staticProperties[n]).offset=i,i+=s.size,this.staticStride+=s.size;var o=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new np(this.staticData,!0,!1),n=0;n<this.dynamicProperties.length;++n)t.addAttribute((s=this.dynamicProperties[n]).attributeName,this.dynamicBuffer,0,s.type===od.UNSIGNED_BYTE,s.type,4*this.dynamicStride,4*s.offset);for(n=0;n<this.staticProperties.length;++n){var s;t.addAttribute((s=this.staticProperties[n]).attributeName,this.staticBuffer,0,s.type===od.UNSIGNED_BYTE,s.type,4*this.staticStride,4*s.offset)}},t.prototype.uploadDynamic=function(t,e,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(t,e,n,i.type===od.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(t,e,n,i.type===od.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),lm=function(t){function e(e){var n=t.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new Jd,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:od.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=Wp.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=Jp.for2d(),n}return sm(e,t),e.prototype.render=function(t){var e=t.children,n=t._maxSize,r=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>n&&!t.autoResize&&(o=n);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.state.blendMode=wd(t.blendMode,a.alphaMode),i.state.set(this.state);var l,c,u,h,d=i.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=(l=t.tintRgb,c=t.worldAlpha,h=a.alphaMode,u=(u=this.shader.uniforms.uColor)||new Float32Array(4),h||void 0===h?(u[0]=l[0]*c,u[1]=l[1]*c,u[2]=l[2]*c):(u[0]=l[0],u[1]=l[1],u[2]=l[2]),u[3]=c,u),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var p=!1,g=0,m=0;g<o;g+=r,m+=1){var y=o-g;y>r&&(y=r),m>=s.length&&s.push(this._generateOneMoreBuffer(t));var v=s[m];v.uploadDynamic(e,g,y),(p=p||v._updateID<(t._bufferUpdateIDs[m]||0))&&(v._updateID=t._updateID,v.uploadStatic(e,g,y)),i.geometry.bind(v.geometry),d.drawElements(d.TRIANGLES,6*y,d.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],n=t._maxSize,r=t._batchSize,i=t._properties,o=0;o<n;o+=r)e.push(new am(this.properties,i,r));return e},e.prototype._generateOneMoreBuffer=function(t){return new am(this.properties,t._properties,t._batchSize)},e.prototype.uploadVertices=function(t,e,n,r,i,o){for(var s=0,a=0,l=0,c=0,u=0;u<n;++u){var h=t[e+u],d=h._texture,f=h.scale.x,p=h.scale.y,g=d.trim,m=d.orig;g?(s=(a=g.x-h.anchor.x*m.width)+g.width,l=(c=g.y-h.anchor.y*m.height)+g.height):(s=m.width*(1-h.anchor.x),a=m.width*-h.anchor.x,l=m.height*(1-h.anchor.y),c=m.height*-h.anchor.y),r[o]=a*f,r[o+1]=c*p,r[o+i]=s*f,r[o+i+1]=c*p,r[o+2*i]=s*f,r[o+2*i+1]=l*p,r[o+3*i]=a*f,r[o+3*i+1]=l*p,o+=4*i}},e.prototype.uploadPosition=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var a=t[e+s].position;r[o]=a.x,r[o+1]=a.y,r[o+i]=a.x,r[o+i+1]=a.y,r[o+2*i]=a.x,r[o+2*i+1]=a.y,r[o+3*i]=a.x,r[o+3*i+1]=a.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,n,r,i,o){for(var s=0;s<n;s++){var a=t[e+s].rotation;r[o]=a,r[o+i]=a,r[o+2*i]=a,r[o+3*i]=a,o+=4*i}},e.prototype.uploadUvs=function(t,e,n,r,i,o){for(var s=0;s<n;++s){var a=t[e+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+i]=a.x1,r[o+i+1]=a.y1,r[o+2*i]=a.x2,r[o+2*i+1]=a.y2,r[o+3*i]=a.x3,r[o+3*i+1]=a.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,n,r,i,o){for(var s=0;s<n;++s){var a=t[e+s],l=a.alpha,c=l<1&&a._texture.baseTexture.alphaMode>0?xd(a._tintRGB,l):a._tintRGB+(255*l<<24);r[o]=c,r[o+i]=c,r[o+2*i]=c,r[o+3*i]=c,o+=4*i}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(gp),cm=(()=>(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(cm||(cm={})),cm))(),um=(()=>(function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(um||(um={})),um))(),hm={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},dm=function(){function t(){this.color=16777215,this.alpha=1,this.texture=Jf.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Jf.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),fm=function(t,e){return(fm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function pm(t,e){function n(){this.constructor=t}fm(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var gm={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var n=t.points,r=t.holes,i=e.points,o=e.indices;if(n.length>=6){for(var s=[],a=0;a<r.length;a++){var l=r[a];s.push(n.length/2),n=n.concat(l.points)}var c=Jh()(n,s,2);if(!c)return;var u=i.length/2;for(a=0;a<c.length;a+=3)o.push(c[a]+u),o.push(c[a+1]+u),o.push(c[a+2]+u);for(a=0;a<n.length;a++)i.push(n[a])}}},mm={build:function(t){var e,n,r=t.shape,i=t.points,o=r.x,s=r.y;if(i.length=0,t.type===Vd.CIRC)e=r.radius,n=r.radius;else{var a=t.shape;e=a.width,n=a.height}if(0!==e&&0!==n){var l=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(e+n));l/=2.3;for(var c=2*Math.PI/l,u=0;u<l-.5;u++)i.push(o+Math.sin(-c*u)*e,s+Math.cos(-c*u)*n);i.push(i[0],i[1])}},triangulate:function(t,e){var n=t.points,r=e.points,i=e.indices,o=r.length/2,s=o,a=t.shape,l=t.matrix,c=a.x,u=a.y;r.push(t.matrix?l.a*c+l.c*u+l.tx:c,t.matrix?l.b*c+l.d*u+l.ty:u);for(var h=0;h<n.length;h+=2)r.push(n[h],n[h+1]),i.push(o++,s,o)}};function ym(t,e,n){return t+(e-t)*n}function vm(t,e,n,r,i,o,s){void 0===s&&(s=[]);for(var a=s,l=0,c=0,u=0,h=0,d=0,f=0,p=0,g=0;p<=20;++p)l=ym(t,n,g=p/20),c=ym(e,r,g),u=ym(n,i,g),h=ym(r,o,g),d=ym(l,u,g),f=ym(c,h,g),a.push(d,f);return a}var bm={build:function(t){var e=t.shape,n=t.points,r=e.x,i=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));n.length=0,a?(vm(r,i+a,r,i,r+a,i,n),vm(r+o-a,i,r+o,i,r+o,i+a,n),vm(r+o,i+s-a,r+o,i+s,r+o-a,i+s,n),vm(r+a,i+s,r,i+s,r,i+s-a,n)):n.push(r,i,r+o,i,r+o,i+s,r,i+s)},triangulate:function(t,e){for(var n=t.points,r=e.points,i=e.indices,o=r.length/2,s=Jh()(n,null,2),a=0,l=s.length;a<l;a+=3)i.push(s[a]+o),i.push(s[a+1]+o),i.push(s[a+2]+o);for(a=0,l=n.length;a<l;a++)r.push(n[a],n[++a])}};function _m(t,e,n,r,i,o,s,a){var l,c;s?(l=r,c=-n):(l=-r,c=n);var u=t+n*o+l,h=e+r*o+c;return a.push(t-n*i+l,e-r*i+c),a.push(u,h),2}function wm(t,e,n,r,i,o,s,a){var l=n-t,c=r-e,u=Math.atan2(l,c),h=Math.atan2(i-t,o-e);a&&u<h?u+=2*Math.PI:!a&&u>h&&(h+=2*Math.PI);var d=u,f=h-u,p=Math.abs(f),g=Math.sqrt(l*l+c*c),m=1+(15*p*Math.sqrt(g)/Math.PI>>0),y=f/m;if(d+=y,a){s.push(t,e),s.push(n,r);for(var v=1,b=d;v<m;v++,b+=y)s.push(t,e),s.push(t+Math.sin(b)*g,e+Math.cos(b)*g);s.push(t,e),s.push(i,o)}else{for(s.push(n,r),s.push(t,e),v=1,b=d;v<m;v++,b+=y)s.push(t+Math.sin(b)*g,e+Math.cos(b)*g),s.push(t,e);s.push(i,o),s.push(t,e)}return 2*m}function xm(t,e){t.lineStyle.native?function(t,e){var n=0,r=t.shape,i=t.points||r.points,o=r.type!==Vd.POLY||r.closeStroke;if(0!==i.length){var s=e.points,a=e.indices,l=i.length/2,c=s.length/2,u=c;for(s.push(i[0],i[1]),n=1;n<l;n++)s.push(i[2*n],i[2*n+1]),a.push(u,u+1),u++;o&&a.push(u,c)}}(t,e):function(t,e){var n=t.shape,r=t.points||n.points.slice(),i=e.closePointEps;if(0!==r.length){var o=t.lineStyle,s=new Gd(r[0],r[1]),a=new Gd(r[r.length-2],r[r.length-1]),l=n.type!==Vd.POLY||n.closeStroke,c=Math.abs(s.x-a.x)<i&&Math.abs(s.y-a.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));var u=.5*(s.x+a.x),h=.5*(a.y+s.y);r.unshift(u,h),r.push(u,h)}var d=e.points,f=r.length/2,p=r.length,g=d.length/2,m=o.width/2,y=m*m,v=o.miterLimit*o.miterLimit,b=r[0],_=r[1],w=r[2],x=r[3],C=0,S=0,T=-(_-x),E=b-w,O=0,A=0,P=Math.sqrt(T*T+E*E);T/=P,E/=P,T*=m,E*=m;var k=o.alignment,M=2*(1-k),I=2*k;l||(o.cap===um.ROUND?p+=wm(b-T*(M-I)*.5,_-E*(M-I)*.5,b-T*M,_-E*M,b+T*I,_+E*I,d,!0)+2:o.cap===um.SQUARE&&(p+=_m(b,_,T,E,M,I,!0,d))),d.push(b-T*M,_-E*M),d.push(b+T*I,_+E*I);for(var R=1;R<f-1;++R){C=r[2*(R+1)],S=r[2*(R+1)+1],T=-((_=r[2*(R-1)+1])-(x=r[2*R+1])),E=(b=r[2*(R-1)])-(w=r[2*R]),T/=P=Math.sqrt(T*T+E*E),E/=P,T*=m,E*=m,O=-(x-S),A=w-C,O/=P=Math.sqrt(O*O+A*A),A/=P,O*=m,A*=m;var D=w-b,N=_-x,L=w-C,F=S-x,B=N*L-F*D,j=B<0;if(Math.abs(B)<.1)d.push(w-T*M,x-E*M),d.push(w+T*I,x+E*I);else{var $=(-T+b)*(-E+x)-(-T+w)*(-E+_),U=(-O+C)*(-A+x)-(-O+w)*(-A+S),V=(D*U-L*$)/B,Z=(F*$-N*U)/B,z=(V-w)*(V-w)+(Z-x)*(Z-x),H=w+(V-w)*M,q=x+(Z-x)*M,Y=w-(V-w)*I,G=x-(Z-x)*I,W=j?M:I;z<=Math.min(D*D+N*N,L*L+F*F)+W*W*y?o.join===cm.BEVEL||z/y>v?(j?(d.push(H,q),d.push(w+T*I,x+E*I),d.push(H,q),d.push(w+O*I,x+A*I)):(d.push(w-T*M,x-E*M),d.push(Y,G),d.push(w-O*M,x-A*M),d.push(Y,G)),p+=2):o.join===cm.ROUND?j?(d.push(H,q),d.push(w+T*I,x+E*I),p+=wm(w,x,w+T*I,x+E*I,w+O*I,x+A*I,d,!0)+4,d.push(H,q),d.push(w+O*I,x+A*I)):(d.push(w-T*M,x-E*M),d.push(Y,G),p+=wm(w,x,w-T*M,x-E*M,w-O*M,x-A*M,d,!1)+4,d.push(w-O*M,x-A*M),d.push(Y,G)):(d.push(H,q),d.push(Y,G)):(d.push(w-T*M,x-E*M),d.push(w+T*I,x+E*I),o.join===cm.BEVEL||z/y>v||(o.join===cm.ROUND?p+=j?wm(w,x,w+T*I,x+E*I,w+O*I,x+A*I,d,!0)+2:wm(w,x,w-T*M,x-E*M,w-O*M,x-A*M,d,!1)+2:(j?(d.push(Y,G),d.push(Y,G)):(d.push(H,q),d.push(H,q)),p+=2)),d.push(w-O*M,x-A*M),d.push(w+O*I,x+A*I),p+=2)}}T=-((_=r[2*(f-2)+1])-(x=r[2*(f-1)+1])),E=(b=r[2*(f-2)])-(w=r[2*(f-1)]),T/=P=Math.sqrt(T*T+E*E),E/=P,d.push(w-(T*=m)*M,x-(E*=m)*M),d.push(w+T*I,x+E*I),l||(o.cap===um.ROUND?p+=wm(w-T*(M-I)*.5,x-E*(M-I)*.5,w-T*M,x-E*M,w+T*I,x+E*I,d,!1)+2:o.cap===um.SQUARE&&(p+=_m(w,x,T,E,M,I,!1,d)));var J=e.indices,X=hm.epsilon*hm.epsilon;for(R=g;R<p+g-2;++R)b=d[2*R],_=d[2*R+1],w=d[2*(R+1)],x=d[2*(R+1)+1],C=d[2*(R+2)],S=d[2*(R+2)+1],Math.abs(b*(x-S)+w*(S-_)+C*(_-x))<X||J.push(R,R+1,R+2)}}(t,e)}var Cm,Sm=function(t){function e(e,n,r,i,o,s){void 0===s&&(s=0),o=o||i/2;for(var a=-1*Math.PI/2+s,l=2*r,c=jd/l,u=[],h=0;h<l;h++){var d=h%2?o:i,f=h*c+a;u.push(e+d*Math.cos(f),n+d*Math.sin(f))}return t.call(this,u)||this}return pm(e,t),e}(qd),Tm=function(){function t(){}return t.curveTo=function(t,e,n,r,i,o){var s=o[o.length-1]-e,a=o[o.length-2]-t,l=r-e,c=n-t,u=Math.abs(s*c-a*l);if(u<1e-8||0===i)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var h=s*s+a*a,d=l*l+c*c,f=s*l+a*c,p=i*Math.sqrt(h)/u,g=i*Math.sqrt(d)/u,m=p*f/h,y=g*f/d,v=p*c+g*a,b=p*l+g*s,_=c*(p+y),w=l*(p+y);return{cx:v+t,cy:b+e,radius:i,startAngle:Math.atan2(s*(g+m)-b,a*(g+m)-v),endAngle:Math.atan2(w-b,_-v),anticlockwise:a*l>c*s}},t.arc=function(t,e,n,r,i,o,s,a,l){for(var c=s-o,u=hm._segmentsCount(Math.abs(c)*i,40*Math.ceil(Math.abs(c)/jd)),h=c/(2*u),d=2*h,f=Math.cos(h),p=Math.sin(h),g=u-1,m=g%1/g,y=0;y<=g;++y){var v=h+o+d*(y+m*y),b=Math.cos(v),_=-Math.sin(v);l.push((f*b+p*_)*i+n,(f*-_+p*b)*i+r)}},t}(),Em=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o,s,a){for(var l=0,c=0,u=0,h=0,d=0,f=0,p=0,g=0,m=0,y=0,v=0,b=t,_=e,w=1;w<=10;++w)y=b-(g=(p=(f=(d=1-(c=w/10))*d)*d)*t+3*f*c*n+3*d*(u=c*c)*i+(h=u*c)*s),v=_-(m=p*e+3*f*c*r+3*d*u*o+h*a),b=g,_=m,l+=Math.sqrt(y*y+v*v);return l},t.curveTo=function(e,n,r,i,o,s,a){var l=a[a.length-2],c=a[a.length-1];a.length-=2;var u=hm._segmentsCount(t.curveLength(l,c,e,n,r,i,o,s)),h=0,d=0,f=0,p=0,g=0;a.push(l,c);for(var m=1,y=0;m<=u;++m)a.push((f=(d=(h=1-(y=m/u))*h)*h)*l+3*d*y*e+3*h*(p=y*y)*r+(g=p*y)*o,f*c+3*d*y*n+3*h*p*i+g*s)},t}(),Om=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o){var s=t-2*n+i,a=e-2*r+o,l=2*n-2*t,c=2*r-2*e,u=4*(s*s+a*a),h=4*(s*l+a*c),d=l*l+c*c,f=2*Math.sqrt(u+h+d),p=Math.sqrt(u),g=2*u*p,m=2*Math.sqrt(d),y=h/p;return(g*f+p*h*(f-m)+(4*d*u-h*h)*Math.log((2*p+y+f)/(y+m)))/(4*g)},t.curveTo=function(e,n,r,i,o){for(var s=o[o.length-2],a=o[o.length-1],l=hm._segmentsCount(t.curveLength(s,a,e,n,r,i)),c=0,u=0,h=1;h<=l;++h){var d=h/l;o.push((c=s+(e-s)*d)+(e+(r-e)*d-c)*d,(u=a+(n-a)*d)+(n+(i-n)*d-u)*d)}},t}(),Am=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,n){this.reset(),this.style=t,this.start=e,this.attribStart=n},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),Pm=((Cm={})[Vd.POLY]=gm,Cm[Vd.CIRC]=mm,Cm[Vd.ELIP]=mm,Cm[Vd.RECT]={build:function(t){var e=t.shape,n=e.x,r=e.y,i=e.width,o=e.height,s=t.points;s.length=0,s.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(t,e){var n=t.points,r=e.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},Cm[Vd.RREC]=bm,Cm),km=[],Mm=[],Im=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),this.shape=t,this.lineStyle=n,this.fillStyle=e,this.matrix=r,this.type=t.type,this.points=[],this.holes=[]}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Rm=new Gd,Dm=new af,Nm=function(t){function e(){var e=t.call(this)||this;return e.uvsFloat32=null,e.indicesUint16=null,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.dirty=0,e.batchDirty=-1,e.cacheDirty=-1,e.clearDirty=0,e.drawCalls=[],e.batches=[],e.shapeIndex=0,e._bounds=new af,e.boundsDirty=-1,e.boundsPadding=0,e.batchable=!1,e.indicesUint16=null,e.uvsFloat32=null,e.closePointEps=1e-4,e}return pm(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Mm.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),km.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=new Im(t,e,n,r);return this.graphicsData.push(i),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var n=new Im(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,Rm):Rm.copyFrom(t),r.shape.contains(Rm.x,Rm.y))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++)if(r.holes[o].shape.contains(Rm.x,Rm.y)){i=!0;break}if(!i)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,n=this.graphicsData,r=null,i=null;this.batches.length>0&&(i=(r=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var s=n[o],a=s.fillStyle,l=s.lineStyle;Pm[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix);for(var c=0;c<2;c++){var u=0===c?a:l;if(u.visible){var h=this.indices.length,d=this.points.length/2;u.texture.baseTexture.wrapMode=ad.REPEAT,0===c?this.processFill(s):this.processLine(s);var f=this.points.length/2-d;0!==f&&(r&&!this._compareStyles(i,u)&&(r.end(h,d),r=null),r||((r=km.pop()||new Am).begin(u,h,d),this.batches.push(r),i=u),this.addUvs(this.points,e,u.texture,d,f,u.matrix))}}}var p=this.points.length/2;r&&r.end(this.indices.length,p),0!==this.batches.length?(this.indicesUint16&&this.indices.length===this.indicesUint16.length?this.indicesUint16.set(this.indices):this.indicesUint16=p>65535&&t?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()):this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var n=this.graphicsData[t],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,n=t.length;e<n;e++)for(var r=t[e],i=0;i<r.size;i++){var o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Df._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Mm.push(this.drawCalls[e]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=Mm.pop();i||((i=new wg).texArray=new xg),i.texArray.count=0,i.start=0,i.size=0,i.type=nd.TRIANGLES;var o=0,s=null,a=0,l=!1,c=nd.TRIANGLES,u=0;for(this.drawCalls.push(i),e=0;e<this.batches.length;e++){var h=this.batches[e],d=h.style,f=d.texture.baseTexture;l!==!!d.native&&(c=(l=!!d.native)?nd.LINES:nd.TRIANGLES,s=null,o=8,t++),s!==f&&(s=f,f._batchEnabled!==t&&(8===o&&(t++,o=0,i.size>0&&((i=Mm.pop())||((i=new wg).texArray=new xg),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),f.touched=1,f._batchEnabled=t,f._batchLocation=o,f.wrapMode=10497,i.texArray.elements[i.texArray.count++]=f,o++)),i.size+=h.size,u+=h.size,a=f._batchLocation,this.addColors(n,d.color,d.alpha,h.attribSize),this.addTextureIds(r,a,h.attribSize)}Df._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*t.length*4),o=new Float32Array(i),s=new Uint32Array(i),a=0,l=0;l<t.length/2;l++)o[a++]=t[2*l],o[a++]=t[2*l+1],o[a++]=e[2*l],o[a++]=e[2*l+1],s[a++]=n[l],o[a++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),gm.triangulate(t,this)):Pm[t.type].triangulate(t,this)},e.prototype.processLine=function(t){xm(t,this);for(var e=0;e<t.holes.length;e++)xm(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var n=t[e];Pm[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=Dm,n=Jd.IDENTITY;this._bounds.clear(),e.clear();for(var r=0;r<this.graphicsData.length;r++){var i=this.graphicsData[r],o=i.shape,s=i.type,a=i.lineStyle,l=i.matrix||Jd.IDENTITY,c=0;if(a&&a.visible){var u=a.alignment;c=a.width,c*=s===Vd.POLY?.5+Math.abs(.5-u):Math.max(0,u)}n!==l&&(e.isEmpty()||(t.addBoundsMatrix(e,n),e.clear()),n=l),s===Vd.RECT||s===Vd.RREC?e.addFramePad(o.x,o.y,o.x+o.width,o.y+o.height,c,c):s===Vd.CIRC?e.addFramePad(o.x,o.y,o.x,o.y,o.radius+c,o.radius+c):s===Vd.ELIP?e.addFramePad(o.x,o.y,o.x,o.y,o.width+c,o.height+c):t.addVerticesMatrix(n,o.points,0,o.points.length,c,c)}e.isEmpty()||t.addBoundsMatrix(e,n),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var n=0;n<t.length/2;n++){var r=t[2*n],i=t[2*n+1];t[2*n]=e.a*r+e.c*i+e.tx,t[2*n+1]=e.b*r+e.d*i+e.ty}},e.prototype.addColors=function(t,e,n,r){for(var i=xd((e>>16)+(65280&e)+((255&e)<<16),n);r-- >0;)t.push(i)},e.prototype.addTextureIds=function(t,e,n){for(;n-- >0;)t.push(e)},e.prototype.addUvs=function(t,e,n,r,i,o){void 0===o&&(o=null);for(var s=0,a=e.length,l=n.frame;s<i;){var c=t[2*(r+s)],u=t[2*(r+s)+1];if(o){var h=o.a*c+o.c*u+o.tx;u=o.b*c+o.d*u+o.ty,c=h}s++,e.push(c/l.width,u/l.height)}var d=n.baseTexture;(l.width<d.width||l.height<d.height)&&this.adjustUvs(e,n,a,i)},e.prototype.adjustUvs=function(t,e,n,r){for(var i=e.baseTexture,o=1e-6,s=n+2*r,a=e.frame,l=a.width/i.width,c=a.height/i.height,u=a.x/a.width,h=a.y/a.height,d=Math.floor(t[n]+o),f=Math.floor(t[n+1]+o),p=n+2;p<s;p+=2)d=Math.min(d,Math.floor(t[p]+o)),f=Math.min(f,Math.floor(t[p+1]+o));for(u-=d,h-=f,p=n;p<s;p+=2)t[p]=(t[p]+u)*l,t[p+1]=(t[p+1]+h)*c},e.BATCHABLE_SIZE=100,e}(Eg),Lm=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=um.BUTT,e.join=cm.MITER,e.miterLimit=10,e}return pm(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(dm),Fm=new Float32Array(3),Bm={},jm=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._geometry=e||new Nm,n._geometry.refCount++,n.shader=null,n.state=Jp.for2d(),n._fillStyle=new dm,n._lineStyle=new Lm,n._matrix=null,n._holeMode=!1,n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n.pluginName="batch",n._transformID=-1,n.tint=16777215,n.blendMode=ed.NORMAL,n}return pm(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t){if(void 0===t&&(t=null),"number"==typeof t){var e=arguments;t={width:e[0]||0,color:e[1]||0,alpha:void 0!==e[2]?e[2]:1,alignment:void 0!==e[3]?e[3]:.5,native:!!e[4]}}return this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){if("number"==typeof t){Id("v5.2.0","Please use object-based options for Graphics#lineTextureStyle");var e=arguments,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6];t={width:n,texture:r,color:i,alpha:o,matrix:s,alignment:a,native:l},Object.keys(t).forEach(function(e){return void 0===t[e]&&delete t[e]})}t=Object.assign({width:0,texture:Jf.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:um.BUTT,join:cm.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var c=t.width>0&&t.alpha>0;return c?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:c},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new qd,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new qd,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points;return n[n.length-2]===t&&n[n.length-1]===e||n.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),Om.curveTo(t,e,n,r,i),this},e.prototype.bezierCurveTo=function(t,e,n,r,i,o){return this._initCurve(),Em.curveTo(t,e,n,r,i,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,n,r,i){this._initCurve(t,e);var o=Tm.curveTo(t,e,n,r,i,this.currentPath.points);return o&&this.arc(o.cx,o.cy,o.radius,o.startAngle,o.endAngle,o.anticlockwise),this},e.prototype.arc=function(t,e,n,r,i,o){if(void 0===o&&(o=!1),r===i)return this;if(!o&&i<=r?i+=jd:o&&r<=i&&(r+=jd),0==i-r)return this;var s=t+Math.cos(r)*n,a=e+Math.sin(r)*n,l=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var u=Math.abs(c[c.length-2]-s),h=Math.abs(c[c.length-1]-a);u<l&&h<l||c.push(s,a)}else this.moveTo(s,a),c=this.currentPath.points;return Tm.arc(s,a,t,e,n,r,i,o,c),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:Jf.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){if(t instanceof Jf){Id("v5.2.0","Please use object-based options for Graphics#beginTextureFill");var e=arguments,n=e[0],r=e[1],i=e[2],o=e[3];t={texture:n,color:r,alpha:i,matrix:o},Object.keys(t).forEach(function(e){return void 0===t[e]&&delete t[e]})}t=Object.assign({texture:Jf.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var s=t.alpha>0;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:s},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,n,r){return this.drawShape(new Zd(t,e,n,r))},e.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new Yd(t,e,n,r,i))},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new zd(t,e,n))},e.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new Hd(t,e,n,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];var i=!0,o=n[0];o.points?(i=o.closeStroke,t=o.points):t=Array.isArray(n[0])?n[0]:n;var s=new qd(t);return s.closeStroke=i,this.drawShape(s),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.drawStar=function(t,e,n,r,i,o){return void 0===o&&(o=0),this.drawPolygon(new Sm(t,e,n,r,i,o))},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===Vd.RECT&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry;e.updateBatches(t.context.supports.uint32Indices),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var r=0;r<n;r++){var i=t.batches[r],o=i.style.color,s=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),l={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),uvs:a,_batchRGB:yd(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=l}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,n=this.batches.length;e<n;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),n=this._geometry,r=this.tint,i=this.worldAlpha,o=e.uniforms,s=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*i,o.tint[1]=(r>>8&255)/255*i,o.tint[2]=(255&r)/255*i,o.tint[3]=i,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(var a=0,l=s.length;a<l;a++)this._renderDrawCallDirect(t,n.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var n=e.texArray,r=e.type,i=e.size,o=e.start,s=n.count,a=0;a<s;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(r,i,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,n=this.pluginName;if(!e){if(!Bm[n]){for(var r=t.plugins.batch.MAX_TEXTURES,i=new Int32Array(r),o=0;o<r;o++)i[o]=o;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Jd,default:dp.from({uSamplers:i},!0)};Bm[n]=new Wp(t.plugins[n]._shader.program,s)}e=Bm[n]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=yd(this.tint,Fm),e=0;e<this.batches.length;e++){var n=this.batches[e],r=n._batchRGB,i=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);n._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,l=this._geometry.points,c=this.vertexData,u=0,h=0;h<l.length;h+=2){var d=l[h],f=l[h+1];c[u++]=n*d+i*f+s,c[u++]=o*f+r*d+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new Gd,e}(ff),$m=function(t,e){return($m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Um=new Gd,Vm=new Uint16Array([0,1,2,0,2,3]),Zm=function(t){function e(e){var n=t.call(this)||this;return n._anchor=new Wd(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=ed.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||Jf.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=Vm,n.pluginName="batch",n.isSprite=!0,n._roundPixels=qh.ROUND_PIXELS,n}return function(t,e){function n(){this.constructor=t}$m(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ad(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ad(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,l=this.vertexData,c=t.trim,u=t.orig,h=this._anchor,d=0,f=0,p=0,g=0;if(c?(d=(f=c.x-h._x*u.width)+c.width,p=(g=c.y-h._y*u.height)+c.height):(d=(f=-h._x*u.width)+u.width,p=(g=-h._y*u.height)+u.height),l[0]=n*f+i*g+s,l[1]=o*g+r*f+a,l[2]=n*d+i*g+s,l[3]=o*g+r*d+a,l[4]=n*d+i*p+s,l[5]=o*p+r*d+a,l[6]=n*f+i*p+s,l[7]=o*p+r*f+a,this._roundPixels)for(var m=qh.RESOLUTION,y=0;y<l.length;++y)l[y]=Math.round((l[y]*m|0)/m)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this.vertexTrimmedData,e=this._texture.orig,n=this._anchor,r=this.transform.worldTransform,i=r.a,o=r.b,s=r.c,a=r.d,l=r.tx,c=r.ty,u=-n._x*e.width,h=u+e.width,d=-n._y*e.height,f=d+e.height;t[0]=i*u+s*d+l,t[1]=a*d+o*u+c,t[2]=i*h+s*d+l,t[3]=a*d+o*h+c,t[4]=i*h+s*f+l,t[5]=a*f+o*h+c,t[6]=i*u+s*f+l,t[7]=a*f+o*u+c},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Zd),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Um);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,i=0;return Um.x>=r&&Um.x<r+e&&Um.y>=(i=-n*this.anchor.y)&&Um.y<i+n},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof e?e:e&&e.texture)&&this._texture.destroy(!!("boolean"==typeof e?e:e&&e.baseTexture)),this._texture=null},e.from=function(t,n){return new e(t instanceof Jf?t:Jf.from(t,n))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Ad(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Ad(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Jf.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(ff),zm=function(t,e){return(zm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Hm=(()=>(function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Hm||(Hm={})),Hm))(),qm={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Hm.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Ym=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Gm=function(){function t(t){this.styleID=0,this.reset(),Xm(this,t,t)}return t.prototype.clone=function(){var e={};return Xm(e,this,qm),new t(e)},t.prototype.reset=function(){Xm(this,qm,qm)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=Jm(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=Jm(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=Jm(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Ym.indexOf(r)<0&&(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Wm(t){return"number"==typeof t?vd(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function Jm(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Wm(t[e]);return t}return Wm(t)}function Xm(t,e,n){for(var r in n)t[r]=Array.isArray(e[r])?e[r].slice():e[r]}var Qm=function(){function t(t,e,n,r,i,o,s,a,l){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=l}return t.measureText=function(e,n,r,i){void 0===i&&(i=t._canvas),r=null==r?n.wordWrap:r;var o=n.toFontString(),s=t.measureFont(o);0===s.fontSize&&(s.fontSize=n.fontSize,s.ascent=n.fontSize);var a=i.getContext("2d");a.font=o;for(var l=(r?t.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length),u=0,h=0;h<l.length;h++){var d=a.measureText(l[h]).width+(l[h].length-1)*n.letterSpacing;c[h]=d,u=Math.max(u,d)}var f=u+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var p=n.lineHeight||s.fontSize+n.strokeThickness,g=Math.max(p,s.fontSize+n.strokeThickness)+(l.length-1)*(p+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new t(e,n,f,g,l,c,p+n.leading,u,s)},t.wordWrap=function(e,n,r){void 0===r&&(r=t._canvas);for(var i=r.getContext("2d"),o=0,s="",a="",l=Object.create(null),c=n.letterSpacing,u=n.whiteSpace,h=t.collapseSpaces(u),d=t.collapseNewlines(u),f=!h,p=n.wordWrapWidth+c,g=t.tokenize(e),m=0;m<g.length;m++){var y=g[m];if(t.isNewline(y)){if(!d){a+=t.addLine(s),f=!h,s="",o=0;continue}y=" "}if(h){var v=t.isBreakingSpace(y),b=t.isBreakingSpace(s[s.length-1]);if(v&&b)continue}var _=t.getFromCache(y,c,l,i);if(_>p)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(y,n.breakWords))for(var w=t.wordWrapSplit(y),x=0;x<w.length;x++){for(var C=w[x],S=1;w[x+S];){var T=w[x+S];if(t.canBreakChars(C[C.length-1],T,y,x,n.breakWords))break;C+=T,S++}x+=C.length-1;var E=t.getFromCache(C,c,l,i);E+o>p&&(a+=t.addLine(s),f=!1,s="",o=0),s+=C,o+=E}else s.length>0&&(a+=t.addLine(s),s="",o=0),a+=t.addLine(y,!(m===g.length-1)),f=!1,s="",o=0;else _+o>p&&(f=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(y)||f)&&(s+=y,o+=_)}return a+t.addLine(s,!1)},t.addLine=function(e,n){return void 0===n&&(n=!0),e=t.trimRight(e),n?e+"\n":e},t.getFromCache=function(t,e,n,r){var i=n[t];if("number"!=typeof i){var o=t.length*e;i=r.measureText(t).width+o,n[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var n=e.length-1;n>=0&&t.isBreakingSpace(e[n]);n--)e=e.slice(0,-1);return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var n=[],r="";if("string"!=typeof e)return n;for(var i=0;i<e.length;i++){var o=e[i];t.isBreakingSpace(o)||t.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,r,i){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={ascent:0,descent:0,fontSize:0},r=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),l=2*a;a=a*t.BASELINE_MULTIPLIER|0,r.width=s,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,s,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var c=i.getImageData(0,0,s,l).data,u=c.length,h=4*s,d=0,f=0,p=!1;for(d=0;d<a;++d){for(var g=0;g<h;g+=4)if(255!==c[f+g]){p=!0;break}if(p)break;f+=h}for(n.ascent=a-d,f=u-h,p=!1,d=l;d>a;--d){for(g=0;g<h;g+=4)if(255!==c[f+g]){p=!0;break}if(p)break;f-=h}return n.descent=d-a,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),Km=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(n){return document.createElement("canvas")}}();Km.width=Km.height=10,Qm._canvas=Km,Qm._context=Km.getContext("2d"),Qm._fonts={},Qm.METRICS_STRING="|\xc9q\xc5",Qm.BASELINE_SYMBOL="M",Qm.BASELINE_MULTIPLIER=1.4,Qm._newlines=[10,13],Qm._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var ty={texture:!0,children:!1,baseTexture:!0},ey=function(t){function e(e,n,r){var i=this,o=!1;r||(r=document.createElement("canvas"),o=!0),r.width=3,r.height=3;var s=Jf.from(r);return s.orig=new Zd,s.trim=new Zd,(i=t.call(this,s)||this)._ownCanvas=o,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=qh.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=e,i.style=n,i.localStyleID=-1,i}return function(t,e){function n(){this.constructor=t}zm(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n,r,i=this.context,o=Qm.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.height,a=o.lines,l=o.lineHeight,c=o.lineWidths,u=o.maxLineWidth,h=o.fontProperties;this.canvas.width=Math.ceil((Math.max(1,o.width)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,s)+2*e.padding)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;for(var d=e.dropShadow?2:1,f=0;f<d;++f){var p=e.dropShadow&&0===f,g=p?Math.ceil(Math.max(1,s)+2*e.padding):0,m=g*this._resolution;if(p){i.fillStyle="black",i.strokeStyle="black";var y=e.dropShadowColor,v=yd("number"==typeof y?y:bd(y));i.shadowColor="rgba("+255*v[0]+","+255*v[1]+","+255*v[2]+","+e.dropShadowAlpha+")",i.shadowBlur=e.dropShadowBlur,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance+m}else i.fillStyle=this._generateFillStyle(e,a,o),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;for(var b=0;b<a.length;b++)n=e.strokeThickness/2,r=e.strokeThickness/2+b*l+h.ascent,"right"===e.align?n+=u-c[b]:"center"===e.align&&(n+=(u-c[b])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[b],n+e.padding,r+e.padding-g,!0),e.fill&&this.drawLetterSpacing(a[b],n+e.padding,r+e.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,n,r){void 0===r&&(r=!1);var i=this._style.letterSpacing;if(0!==i)for(var o=e,s=Array.from?Array.from(t):t.split(""),a=this.context.measureText(t).width,l=0,c=0;c<s.length;++c){var u=s[c];r?this.context.strokeText(u,o,n):this.context.fillText(u,o,n),o+=a-(l=this.context.measureText(t.substring(c+1)).width)+i,a=l}else r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=function(t){var e,n,r,i=t.width,o=t.height,s=t.getContext("2d"),a=s.getImageData(0,0,i,o).data,l=a.length,c={top:null,left:null,right:null,bottom:null},u=null;for(e=0;e<l;e+=4)0!==a[e+3]&&(n=e/4%i,r=~~(e/4/i),null===c.top&&(c.top=r),(null===c.left||n<c.left)&&(c.left=n),(null===c.right||c.right<n)&&(c.right=n+1),(null===c.bottom||c.bottom<r)&&(c.bottom=r));return null!==c.top&&(u=s.getImageData(c.left,c.top,i=c.right-c.left,o=c.bottom-c.top+1)),{height:o,width:i,data:u}}(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;n.trim.width=n._frame.width=Math.ceil(t.width/this._resolution),n.trim.height=n._frame.height=Math.ceil(t.height/this._resolution),n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,n){var r,i=t.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var o=t.dropShadow?t.dropShadowDistance:0,s=t.padding||0,a=Math.ceil(this.canvas.width/this._resolution)-o-2*s,l=Math.ceil(this.canvas.height/this._resolution)-o-2*s,c=i.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var h=c.length+1,d=1;d<h;++d)u.push(d/h);if(c.unshift(i[0]),u.unshift(0),c.push(i[i.length-1]),u.push(1),t.fillGradientType===Hm.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,s,a/2,l+s);var f=0,p=(n.fontProperties.fontSize+t.strokeThickness)/l;for(d=0;d<e.length;d++)for(var g=n.lineHeight*d,m=0;m<c.length;m++){var y=Math.max(f,g/l+("number"==typeof u[m]?u[m]:m/c.length)*p);y=Math.min(y,1),r.addColorStop(y,c[m]),f=y}}else{r=this.context.createLinearGradient(s,l/2,a+s,l/2);var v=c.length+1,b=1;for(d=0;d<c.length;d++)r.addColorStop("number"==typeof u[d]?u[d]:b/v,c[d]),b++}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},ty,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Ad(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Ad(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style=(t=t||{})instanceof Gm?t:new Gm(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e}(Zm);qh.UPLOADS_PER_FRAME=4;var ny=function(t,e){return(ny=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},ry=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function iy(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof Jf){var i=t._textures[r].baseTexture;-1===e.indexOf(i)&&(e.push(i),n=!0)}return n}function oy(t,e){if(t.baseTexture instanceof Df){var n=t.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function sy(t,e){if(t._texture&&t._texture instanceof Jf){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function ay(t,e){return e instanceof ey&&(e.updateText(!0),!0)}function ly(t,e){if(e instanceof Gm){var n=e.toFontString();return Qm.measureFont(n),!0}return!1}function cy(t,e){if(t instanceof ey){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function uy(t,e){return t instanceof Gm&&(-1===e.indexOf(t)&&e.push(t),!0)}function hy(t,e){return e instanceof Df&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function dy(t,e){if(!(e instanceof jm))return!1;var n=e.geometry;e.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&hy(t,o.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function fy(t,e){return t instanceof jm&&(e.push(t),!0)}var py=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(fy),n.registerUploadHook(hy),n.registerUploadHook(dy),n}return function(t,e){function n(){this.constructor=t}ny(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(function(){function t(t){var e=this;this.limiter=new ry(qh.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(cy),this.registerFindHook(uy),this.registerFindHook(iy),this.registerFindHook(oy),this.registerFindHook(sy),this.registerUploadHook(ay),this.registerUploadHook(ly)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,yf.system.addOnce(this.tick,this,gf.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)yf.system.addOnce(this.tick,this,gf.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);for(this.completes.length=0,n=0,r=i.length;n<r;n++)i[n]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof ff)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&yf.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}()),gy=(function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds}}(),function(){function t(t,e,n){void 0===n&&(n=null),this._texture=t instanceof Jf?t:null,this.baseTexture=t instanceof Df?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,n=Bd(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,r=t.BATCH_SIZE;n-e<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],o=this._frames[i],s=o.frame;if(s){var a,l=null,c=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,u=new Zd(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);a=o.rotated?new Zd(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new Zd(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new Zd(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new Jf(this.baseTexture,a,u,l,o.rotated?2:0,o.anchor),Jf.addToCache(this.textures[i],i)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=0;n<t[e].length;n++)this.animations[e].push(this.textures[t[e][n]])}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(t){var e;for(var n in void 0===t&&(t=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}()),my=function(){function t(){}return t.use=function(e,n){var r=this,i=e.name+"_image";if(e.data&&e.type===tm.TYPE.JSON&&e.data.frames&&!r.resources[i]){var o={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},s=t.getResourcePath(e,r.baseUrl);r.add(i,s,o,function(t){if(t.error)n(t.error);else{var r=new gy(t.texture,e.data,e.url);r.parse(function(){e.spritesheet=r,e.textures=r.textures,n()})}})}else n()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:Xh.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),yy=function(t,e){return(yy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function vy(t,e){function n(){this.constructor=t}yy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var by=new Gd,_y=(function(t){function e(e,n,r){void 0===n&&(n=100),void 0===r&&(r=100);var i=t.call(this,e)||this;return i.tileTransform=new sf,i._width=n,i._height=r,i.uvMatrix=i.texture.uvMatrix||new Kp(e),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}vy(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){this._bounds.addFrame(this.transform,this._width*-this._anchor._x,this._height*-this._anchor._y,this._width*(1-this._anchor._x),this._height*(1-this._anchor._y))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Zd),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,by);var e=this._width,n=this._height,r=-e*this.anchor._x;if(by.x>=r&&by.x<r+e){var i=-n*this.anchor._y;if(by.y>=i&&by.y<i+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){return"number"==typeof n&&(Id("5.3.0","TilingSprite.from use options instead of width and height args"),n={width:n,height:arguments[2]}),new e(Jf.from(t,n),n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0})}(Zm),"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n"),wy=new Jd,xy=function(t){function e(e){var n=t.call(this,e)||this,r={globals:n.renderer.globalUniforms};return n.shader=Wp.from(_y,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture2D(uSampler, coord);\n    gl_FragColor = texSample * uColor;\n}\n",r),n.simpleShader=Wp.from(_y,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n",r),n.quad=new up,n.state=Jp.for2d(),n}return vy(e,t),e.prototype.render=function(t){var e=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((r=n.uvs)[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y),n.invalidate();var i=t._texture,o=i.baseTexture,s=t.tileTransform.localTransform,a=t.uvMatrix,l=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;l&&(o._glTextures[e.CONTEXT_UID]?l=o.wrapMode!==ad.CLAMP:o.wrapMode===ad.CLAMP&&(o.wrapMode=ad.REPEAT));var c=l?this.simpleShader:this.shader,u=i.width,h=i.height,d=t._width,f=t._height;wy.set(s.a*u/d,s.b*u/f,s.c*h/d,s.d*h/f,s.tx/d,s.ty/f),wy.invert(),l?wy.prepend(a.mapCoord):(c.uniforms.uMapCoord=a.mapCoord.toArray(!0),c.uniforms.uClampFrame=a.uClampFrame,c.uniforms.uClampOffset=a.uClampOffset),c.uniforms.uTransform=wy.toArray(!0),c.uniforms.uColor=Cd(t.tint,t.worldAlpha,c.uniforms.uColor,o.alphaMode),c.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),c.uniforms.uSampler=i,e.shader.bind(c),e.geometry.bind(n),this.state.blendMode=wd(t.blendMode,o.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(gp),Cy=function(t,e){return(Cy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Sy(t,e){function n(){this.constructor=t}Cy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ty=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),Ey=new Gd,Oy=new qd,Ay=function(t){function e(e,n,r,i){void 0===i&&(i=nd.TRIANGLES);var o=t.call(this)||this;return o.geometry=e,e.refCount++,o.shader=n,o.state=r||Jp.for2d(),o.drawMode=i,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=0,o._transformID=-1,o._roundPixels=qh.ROUND_PIXELS,o.batchUvs=null,o}return Sy(e,t),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this.shader.tint},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){this.shader.batchable&&this.drawMode===nd.TRIANGLES&&this.geometry.buffers[0].data.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0)),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry;this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=this.shader._tintRGB,this._texture=this.shader.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry,e=t.buffers[0].data;if(t.vertexDirtyId!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var n=this.transform.worldTransform,r=n.a,i=n.b,o=n.c,s=n.d,a=n.tx,l=n.ty,c=this.vertexData,u=0;u<c.length/2;u++){var h=e[2*u],d=e[2*u+1];c[2*u]=r*h+o*d+a,c[2*u+1]=i*h+s*d+l}if(this._roundPixels){var f=qh.RESOLUTION;for(u=0;u<c.length;++u)c[u]=Math.round((c[u]*f|0)/f)}this.vertexDirty=t.vertexDirtyId}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1];this.shader.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Ty(t,this.shader.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Ey);for(var e=this.geometry.getBuffer("aVertexPosition").data,n=Oy.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1,s=0;s+2<i;s+=o){var a=2*r[s],l=2*r[s+1],c=2*r[s+2];if(n[0]=e[a],n[1]=e[a+1],n[2]=e[l],n[3]=e[l+1],n[4]=e[c],n[5]=e[c+1],Oy.contains(Ey.x,Ey.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.geometry.refCount--,0===this.geometry.refCount&&this.geometry.dispose(),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(ff),Py=function(t){function e(e,n){var r=this,i={uSampler:e,alpha:1,uTextureMatrix:Jd.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(i,n.uniforms),(r=t.call(this,n.program||Gp.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,r.uvMatrix=new Kp(e),r.batchable=void 0===n.program,r.pluginName=n.pluginName,r.tint=n.tint,r.alpha=n.alpha,r}return Sy(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){this._colorDirty&&(this._colorDirty=!1,Cd(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(Wp),ky=function(t){function e(e,n,r){var i=t.call(this)||this,o=new np(e),s=new np(n,!0),a=new np(r,!0,!0);return i.addAttribute("aVertexPosition",o,2,!1,od.FLOAT).addAttribute("aTextureCoord",s,2,!1,od.FLOAT).addIndex(a),i._updateId=-1,i}return Sy(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(lp),My=function(t,e){return(My=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},Iy=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]},Ry=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var r in e){var i=e[r].match(/^[a-z]+/gm)[0],o=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var a in o){var l=o[a].split("="),c=l[0],u=l[1].replace(/"/gm,""),h=parseFloat(u),d=isNaN(h)?u:h;s[c]=d}n[i].push(s)}var f=new Iy;return n.info.forEach(function(t){return f.info.push({face:t.face,size:parseInt(t.size,10)})}),n.common.forEach(function(t){return f.common.push({lineHeight:parseInt(t.lineHeight,10)})}),n.page.forEach(function(t){return f.page.push({id:parseInt(t.id,10),file:t.file})}),n.char.forEach(function(t){return f.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})}),n.kerning.forEach(function(t){return f.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})}),f},t}(),Dy=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new Iy,n=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),a=0;a<n.length;a++)e.info.push({face:n[a].getAttribute("face"),size:parseInt(n[a].getAttribute("size"),10)});for(a=0;a<r.length;a++)e.common.push({lineHeight:parseInt(r[a].getAttribute("lineHeight"),10)});for(a=0;a<i.length;a++)e.page.push({id:parseInt(i[a].getAttribute("id"),10)||0,file:i[a].getAttribute("file")});for(a=0;a<o.length;a++){var l=o[a];e.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(a=0;a<s.length;a++)e.kerning.push({first:parseInt(s[a].getAttribute("first"),10),second:parseInt(s[a].getAttribute("second"),10),amount:parseInt(s[a].getAttribute("amount"),10)});return e},t}(),Ny=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new self.DOMParser).parseFromString(t,"text/xml");return Dy.test(e)}return!1},t.parse=function(t){var e=(new window.DOMParser).parseFromString(t,"text/xml");return Dy.parse(e)},t}(),Ly=[Ry,Dy,Ny];function Fy(t){for(var e=0;e<Ly.length;e++)if(Ly[e].test(t))return Ly[e];return null}function By(t,e,n,r,i,o){var s,a=n.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,u=Math.ceil(t.width/r)-l-2*c,h=Math.ceil(t.height/r)-l-2*c,d=a.slice(),f=n.fillGradientStops.slice();if(!f.length)for(var p=d.length+1,g=1;g<p;++g)f.push(g/p);if(d.unshift(a[0]),f.unshift(0),d.push(a[a.length-1]),f.push(1),n.fillGradientType===Hm.LINEAR_VERTICAL){s=e.createLinearGradient(u/2,c,u/2,h+c);var m=0,y=(o.fontProperties.fontSize+n.strokeThickness)/h;for(g=0;g<i.length;g++)for(var v=o.lineHeight*g,b=0;b<d.length;b++){var _=Math.max(m,v/h+("number"==typeof f[b]?f[b]:b/d.length)*y);_=Math.min(_,1),s.addColorStop(_,d[b]),m=_}}else{s=e.createLinearGradient(c,h/2,u+c,h/2);var w=d.length+1,x=1;for(g=0;g<d.length;g++)s.addColorStop("number"==typeof f[g]?f[g]:x/w,d[g]),x++}return s}function jy(t,e,n,r,i,o,s){var a=n.text,l=n.fontProperties;e.translate(r,i),e.scale(o,o);var c=s.strokeThickness/2,u=-s.strokeThickness/2;e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=By(t,e,s,o,[a],n),e.strokeStyle=s.stroke,e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=By(t,e,s,o,[a],n),e.strokeStyle=s.stroke;var h=s.dropShadowColor,d=yd("number"==typeof h?h:bd(h));s.dropShadow?(e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+s.dropShadowAlpha+")",e.shadowBlur=s.dropShadowBlur,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),s.stroke&&s.strokeThickness&&e.strokeText(a,c,u+n.lineHeight-l.descent),s.fill&&e.fillText(a,c,u+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}var $y=function(){function t(t,e){var n=t.info[0],r=t.common[0],i=Bd(t.page[0].file),o={};this.font=n.face,this.size=n.size,this.lineHeight=r.lineHeight/i,this.chars={},this.pageTextures=o;for(var s=0;s<t.page.length;s++){var a=t.page[s];o[c=a.id]=e instanceof Array?e[s]:e[a.file]}for(s=0;s<t.char.length;s++){var l=t.char[s],c=l.id,u=l.page,h=t.char[s],d=h.x,f=h.y,p=h.width,g=h.height,m=h.xoffset,y=h.yoffset,v=h.xadvance;m/=i,y/=i,v/=i;var b=new Zd((d/=i)+o[u].frame.x/i,(f/=i)+o[u].frame.y/i,p/=i,g/=i);this.chars[c]={xOffset:m,yOffset:y,xAdvance:v,kerning:{},texture:new Jf(o[u].baseTexture,b),page:u}}for(s=0;s<t.kerning.length;s++){var _=t.kerning[s],w=_.first,x=_.second,C=_.amount;w/=i,C/=i,this.chars[x/=i]&&(this.chars[x].kerning[w]=C)}}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,n){var r;if(e instanceof Iy)r=e;else{var i=Fy(e);if(!i)throw new Error("Unrecognized data format for font.");r=i.parse(e)}n instanceof Jf&&(n=[n]);var o=new t(r,n);return t.available[o.font]=o,o},t.uninstall=function(e){var n=t.available[e];if(!n)throw new Error("No font found named '"+e+"'");n.destroy(),delete t.available[e]},t.from=function(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},t.defaultOptions,r),o=i.padding,s=i.resolution,a=i.textureWidth,l=i.textureHeight,c=function(t){"string"==typeof t&&(t=[t]);for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),s=i[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,i.split(""))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(i.chars),u=n instanceof Gm?n:new Gm(n),h=a,d=new Iy;d.info[0]={face:u.fontFamily,size:u.fontSize},d.common[0]={lineHeight:u.fontSize};for(var f,p,g,m=0,y=0,v=0,b=[],_=0;_<c.length;_++){f||((f=document.createElement("canvas")).width=a,f.height=l,p=f.getContext("2d"),g=new Df(f,{resolution:s}),b.push(new Jf(g)),d.page.push({id:b.length-1,file:""}));var w=Qm.measureText(c[_],u,!1,f),x=w.width,C=Math.ceil(w.height),S=Math.ceil(("italic"===u.fontStyle?2:1)*x);if(y>=l-C*s){if(0===y)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+u.fontSize+"px fonts");--_,f=null,p=null,g=null,y=0,m=0,v=0}else if(v=Math.max(C+w.fontProperties.descent,v),S*s+m>=h)--_,y+=v*s,y=Math.ceil(y),m=0,v=0;else{jy(f,p,w,m,y,s,u);var T=w.text.charCodeAt(0);d.char.push({id:T,page:b.length-1,x:m/s,y:y/s,width:S,height:C,xoffset:0,yoffset:0,xadvance:Math.ceil(x-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0))}),m+=(S+2*o)*s,m=Math.ceil(m)}}var E=new t(d,b);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=E,E},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),Uy=[],Vy=[],Zy=(function(t){function e(n,r){void 0===r&&(r={});var i=t.call(this)||this;i._tint=16777215,r.font&&(Id("5.3.0","PIXI.BitmapText constructor style.font property is deprecated."),i._upgradeStyle(r));var o=Object.assign({},e.styleDefaults,r),s=o.align,a=o.tint,l=o.maxWidth,c=o.letterSpacing,u=o.fontName,h=o.fontSize;if(!$y.available[u])throw new Error('Missing BitmapFont "'+u+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=s,i._tint=a,i._fontName=u,i._fontSize=h||$y.available[u].size,i._text=n,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=c,i._anchor=new Wd(function(){i.dirty=!0},i,0,0),i._roundPixels=qh.ROUND_PIXELS,i.dirty=!0,i._textureCache={},i}(function(t,e){function n(){this.constructor=t}My(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.updateText=function(){for(var t,e=$y.available[this._fontName],n=this._fontSize/e.size,r=new Gd,i=[],o=[],s=this._text.replace(/(?:\r\n|\r)/g,"\n")||" ",a=s.length,l=this._maxWidth*e.size/this._fontSize,c=null,u=0,h=0,d=0,f=-1,p=0,g=0,m=0,y=0;y<a;y++){var v=s.charCodeAt(y),b=s.charAt(y);if(/(?:\s)/.test(b)&&(f=y,p=u),"\r"!==b&&"\n"!==b){var _=e.chars[v];if(_){c&&_.kerning[c]&&(r.x+=_.kerning[c]);var w=Vy.pop()||{texture:Jf.EMPTY,line:0,charCode:0,position:new Gd};w.texture=_.texture,w.line=d,w.charCode=v,w.position.x=r.x+_.xOffset+this._letterSpacing/2,w.position.y=r.y+_.yOffset,i.push(w),r.x+=_.xAdvance+this._letterSpacing,u=r.x,m=Math.max(m,_.yOffset+_.texture.height),c=v,-1!==f&&l>0&&r.x>l&&(Od(i,1+f-++g,1+y-f),y=f,f=-1,o.push(p),h=Math.max(h,p),d++,r.x=0,r.y+=e.lineHeight,c=null)}}else o.push(u),h=Math.max(h,u),++d,++g,r.x=0,r.y+=e.lineHeight,c=null}var x=s.charAt(s.length-1);"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(u=p),o.push(u),h=Math.max(h,u));var C=[];for(y=0;y<=d;y++){var S=0;"right"===this._align?S=h-o[y]:"center"===this._align&&(S=(h-o[y])/2),C.push(S)}var T=i.length,E={},O=[],A=this._activePagesMeshData;for(y=0;y<A.length;y++)Uy.push(A[y]);for(y=0;y<T;y++){var P=(F=i[y].texture).baseTexture.uid;if(!E[P]){if(!(z=Uy.pop())){var k=new ky,M=new Py(Jf.EMPTY);z={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:new Ay(k,M),vertices:null,uvs:null,indices:null}}z.index=0,z.indexCount=0,z.vertexCount=0,z.uvsCount=0,z.total=0;var I=this._textureCache;I[P]=I[P]||new Jf(F.baseTexture),z.mesh.texture=I[P],z.mesh.tint=this._tint,O.push(z),E[P]=z}E[P].total++}for(y=0;y<A.length;y++)-1===O.indexOf(A[y])&&this.removeChild(A[y].mesh);for(y=0;y<O.length;y++)O[y].mesh.parent!==this&&this.addChild(O[y].mesh);for(var y in this._activePagesMeshData=O,E){var R=(z=E[y]).total;if(!((null===(t=z.indices)||void 0===t?void 0:t.length)>6*R)||z.vertices.length<2*Ay.BATCHABLE_SIZE)z.vertices=new Float32Array(8*R),z.uvs=new Float32Array(8*R),z.indices=new Uint16Array(6*R);else for(var D=z.vertices,N=4*z.total*2;N<D.length;N++)D[N]=0;z.mesh.size=6*R}for(y=0;y<T;y++){var L=(b=i[y]).position.x+C[b.line];this._roundPixels&&(L=Math.round(L));var F,B=L*n,j=b.position.y*n,$=E[(F=b.texture).baseTexture.uid],U=F.frame,V=F._uvs,Z=$.index++;$.indices[6*Z+0]=0+4*Z,$.indices[6*Z+1]=1+4*Z,$.indices[6*Z+2]=2+4*Z,$.indices[6*Z+3]=0+4*Z,$.indices[6*Z+4]=2+4*Z,$.indices[6*Z+5]=3+4*Z,$.vertices[8*Z+0]=B,$.vertices[8*Z+1]=j,$.vertices[8*Z+2]=B+U.width*n,$.vertices[8*Z+3]=j,$.vertices[8*Z+4]=B+U.width*n,$.vertices[8*Z+5]=j+U.height*n,$.vertices[8*Z+6]=B,$.vertices[8*Z+7]=j+U.height*n,$.uvs[8*Z+0]=V.x0,$.uvs[8*Z+1]=V.y0,$.uvs[8*Z+2]=V.x1,$.uvs[8*Z+3]=V.y1,$.uvs[8*Z+4]=V.x2,$.uvs[8*Z+5]=V.y2,$.uvs[8*Z+6]=V.x3,$.uvs[8*Z+7]=V.y3}for(var y in this._textWidth=h*n,this._textHeight=(r.y+e.lineHeight)*n,E){var z=E[y];if(0!==this.anchor.x||0!==this.anchor.y)for(var H=0,q=this._textWidth*this.anchor.x,Y=this._textHeight*this.anchor.y,G=0;G<z.total;G++)z.vertices[H++]-=q,z.vertices[H++]-=Y,z.vertices[H++]-=q,z.vertices[H++]-=Y,z.vertices[H++]-=q,z.vertices[H++]-=Y,z.vertices[H++]-=q,z.vertices[H++]-=Y;this._maxLineHeight=m*n;var W=z.mesh.geometry.getBuffer("aVertexPosition"),J=z.mesh.geometry.getBuffer("aTextureCoord"),X=z.mesh.geometry.getIndex();W.data=z.vertices,J.data=z.uvs,X.data=z.indices,W.update(),J.update(),X.update()}for(y=0;y<i.length;y++)Vy.push(i[y])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!$y.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype._upgradeStyle=function(t){if("string"==typeof t.font){var e=t.font.split(" ");t.fontName=1===e.length?e[0]:e.slice(1).join(" "),e.length>=2&&(t.fontSize=parseInt(e[0],10))}else t.fontName=t.font.name,t.fontSize="number"==typeof t.font.size?t.font.size:parseInt(t.font.size,10)},e.prototype.destroy=function(e){var n=this._textureCache;for(var r in n)n[r].destroy(),delete n[r];this._textureCache=null,t.prototype.destroy.call(this,e)},e.registerFont=function(t,e){return Id("5.3.0","PIXI.BitmapText.registerFont is deprecated, use PIXI.BitmapFont.install"),$y.install(t,e)},Object.defineProperty(e,"fonts",{get:function(){return Id("5.3.0","PIXI.BitmapText.fonts is deprecated, use PIXI.BitmapFont.available"),$y.available},enumerable:!1,configurable:!0}),e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0}}(ff),function(){function t(){}return t.add=function(){tm.setExtensionXhrType("fnt",tm.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,n){var r=Fy(e.data);if(r)for(var i=t.getBaseUrl(this,e),o=r.parse(e.data),s={},a=function(t){s[t.metadata.pageFile]=t.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=$y.install(o,s),n())},l=0;l<o.page.length;++l){var c=o.page[l].file,u=i+c,h=!1;for(var d in this.resources){var f=this.resources[d];if(f.url===u){f.metadata.pageFile=c,f.texture?a(f):f.onAfterMiddleware.add(a),h=!0;break}}if(!h){var p={crossOrigin:e.crossOrigin,loadType:tm.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},e.metadata.imageMetadata),parentResource:e};this.add(u,p,a)}}else n()},t.getBaseUrl=function(e,n){var r=n.isDataUrl?"":t.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}()),zy=function(t,e){return(zy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){function e(e){void 0===e&&(e=1);var n=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=e,n}(function(t,e){function n(){this.constructor=t}zy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0})}(Xp);var Hy=function(t,e){return(Hy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function qy(t,e){function n(){this.constructor=t}Hy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Yy={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Gy=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n"),Wy=(()=>(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Wy||(Wy={})),Wy))(),Jy=function(t){function e(e,n,r,i,o){void 0===n&&(n=8),void 0===r&&(r=4),void 0===i&&(i=qh.FILTER_RESOLUTION),void 0===o&&(o=5);var s=this,a=function(t,e){var n,r=Math.ceil(t/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=n.replace("%index%",s.toString());o+=a=a.replace("%sampleIndex%",s-(r-1)+".0"),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),l=function(t){for(var e,n=Yy[t],r=n.length,i=Gy,o="",s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());e=s,s>=r&&(e=t-s-1),o+=a=a.replace("%value%",n[e].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(s=t.call(this,a,l)||this).horizontal=e,s.resolution=i,s._quality=0,s.quality=r,s.blur=n,s}return qy(e,t),e.prototype.apply=function(t,e,n,r){if(this.uniforms.strength=n?this.horizontal?1/n.width*(n.width/e.width):1/n.height*(n.height/e.height):this.horizontal?1/t.renderer.width*(t.renderer.width/e.width):1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{var i=t.getFilterTexture(),o=t.renderer,s=e,a=i;this.state.blend=!1,t.applyFilter(this,s,a,Wy.CLEAR);for(var l=1;l<this.passes-1;l++){t.bindAndClear(s,Wy.BLIT),this.uniforms.uSampler=a;var c=a;a=s,s=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,n,r),t.returnFilterTexture(i)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(Xp),Xy=(function(t){function e(e,n,r,i){void 0===e&&(e=8),void 0===n&&(n=4),void 0===r&&(r=qh.FILTER_RESOLUTION),void 0===i&&(i=5);var o=t.call(this)||this;return o.blurXFilter=new Jy(!0,e,n,r,i),o.blurYFilter=new Jy(!1,e,n,r,i),o.resolution=r,o.quality=n,o.blur=e,o.repeatEdgePixels=!1,o}qy(e,t),e.prototype.apply=function(t,e,n,r){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,Wy.CLEAR),this.blurYFilter.apply(t,s,n,r),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,n,r):this.blurXFilter.apply(t,e,n,r)},e.prototype.updatePadding=function(){this.padding=this._repeatEdgePixels?0:2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0})}(Xp),function(t,e){return(Xy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)}),Qy=function(t){function e(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,_g,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,e}return function(t,e){function n(){this.constructor=t}Xy(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){this._loadMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0],e)},e.prototype.greyscale=function(t,e){this._loadMatrix([t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0],e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=1/3,o=(0,Math.sqrt)(i);this._loadMatrix([n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0],e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,r=-.5*(n-1);this._loadMatrix([n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0],e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var n=2*t/3+1,r=-.5*(n-1);this._loadMatrix([n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0],e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,n,r,i){var o=((n=n||16770432)>>16&255)/255,s=(n>>8&255)/255,a=(255&n)/255,l=((r=r||3375104)>>16&255)/255,c=(r>>8&255)/255,u=(255&r)/255;this._loadMatrix([.3,.59,.11,0,0,o,s,a,t=t||.2,0,l,c,u,e=e||.15,0,o-l,s-c,a-u,0,0],i)},e.prototype.night=function(t,e){this._loadMatrix([-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},e.prototype.predator=function(t,e){this._loadMatrix([11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0],e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(Xp);Qy.prototype.grayscale=Qy.prototype.greyscale;var Ky=function(t,e){return(Ky=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){function e(e,n){var r=this,i=new Jd;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=i,null==n&&(n=20),r.scale=new Gd(n,n),r}(function(t,e){function n(){this.constructor=t}Ky(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.apply=function(t,e,n,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),s=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/s,this.uniforms.rotation[3]=i.d/s),t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0})}(Xp);var tv,ev=function(t,e){return(ev=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t,e){function n(){this.constructor=t}ev(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(function(){return tv.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputPixel;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputPixel;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputPixel.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this},tv=Xp);var nv=function(t,e){return(nv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){function e(e,n){void 0===e&&(e=.5),void 0===n&&(n=Math.random());var r=t.call(this,_g,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=n,r}(function(t,e){function n(){this.constructor=t}nv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0})}(Xp);var rv=new Jd;uf.prototype._cacheAsBitmap=!1,uf.prototype._cacheData=null;var iv=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(uf.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new iv),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),uf.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},uf.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();this.filters&&n.pad(this.filters[0].padding),n.ceil(qh.RESOLUTION);var r=t.renderTexture.current,i=t.renderTexture.sourceFrame.clone(),o=t.projection.transform,s=Qf.create({width:n.width,height:n.height}),a="cacheAsBitmap_"+kd();this._cacheData.textureCacheId=a,Df.addToCache(s.baseTexture,a),Jf.addToCache(s,a);var l=this.transform.localTransform.copyTo(rv).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,s,!0,l,!1),t.projection.transform=o,t.renderTexture.bind(r,i),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var c=new Zm(s);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-n.x/n.width,c.anchor.y=-n.y/n.height,c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)}},uf.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},uf.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=t.context,i=t._projTransform;e.ceil(qh.RESOLUTION);var o=Qf.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+kd();this._cacheData.textureCacheId=s,Df.addToCache(o.baseTexture,s),Jf.addToCache(o,s);var a=rv;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,o,!0,a,!1),t.context=r,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var l=new Zm(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=n,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},uf.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},uf.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},uf.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Df.removeFromCache(this._cacheData.textureCacheId),Jf.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},uf.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},uf.prototype.name=null,ff.prototype.getChildByName=function(t,e){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(n=0,r=this.children.length;n<r;n++)if(this.children[n].getChildByName){var i=this.children[n].getChildByName(t,!0);if(i)return i}return null},uf.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new Gd),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var ov=function(t,e){return(ov=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function sv(t,e){function n(){this.constructor=t}ov(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var av=function(t){function e(e,n,r,i){void 0===e&&(e=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===i&&(i=10);var o=t.call(this)||this;return o.segWidth=r,o.segHeight=i,o.width=e,o.height=n,o.build(),o}return sv(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],n=[],r=[],i=this.segWidth-1,o=this.segHeight-1,s=this.width/i,a=this.height/o,l=0;l<t;l++){var c=l%this.segWidth,u=l/this.segWidth|0;e.push(c*s,u*a),n.push(c/i,u/o)}var h=i*o;for(l=0;l<h;l++){var d=l%i,f=l/i|0,p=f*this.segWidth+d+1,g=(f+1)*this.segWidth+d;r.push(f*this.segWidth+d,p,g,p,(f+1)*this.segWidth+d+1,g)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(ky),lv=function(t){function e(e,n,r){void 0===e&&(e=200),void 0===r&&(r=0);var i=t.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return i.points=n,i._width=e,i.textureScale=r,i.build(),i}return sv(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var i=n.data,o=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var s=0,a=t[0],l=this._width*this.textureScale,c=t.length,u=0;u<c;u++){var h=4*u;if(this.textureScale>0){var d=a.x-t[u].x,f=a.y-t[u].y,p=Math.sqrt(d*d+f*f);a=t[u],s+=p/l}else s=u/(c-1);i[h]=s,i[h+1]=0,i[h+2]=s,i[h+3]=1}var g=0;for(u=0;u<c-1;u++)o[g++]=h=2*u,o[g++]=h+1,o[g++]=h+2,o[g++]=h+2,o[g++]=h+1,o[g++]=h+3;n.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,n=t[0],r=0,i=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var l=t[a],c=4*a;i=-((e=a<t.length-1?t[a+1]:l).x-n.x),r=e.y-n.y;var u=Math.sqrt(r*r+i*i),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=u,i/=u,i*=h,o[c]=l.x+(r*=h),o[c+1]=l.y+i,o[c+2]=l.x-r,o[c+3]=l.y-i,n=l}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(ky),cv=(function(t){function e(e,n,r){void 0===r&&(r=0);var i=this,o=new lv(e.height,n,r),s=new Py(e);return r>0&&(e.baseTexture.wrapMode=ad.REPEAT),(i=t.call(this,o,s)||this).autoUpdate=!0,i}sv(e,t),e.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,e)}}(Ay),function(t){function e(e,n,r){var i=this,o=new av(e.width,e.height,n,r),s=new Py(Jf.WHITE);return(i=t.call(this,o,s)||this).texture=e,i}return sv(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry;t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build()},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(Ay)),uv=(function(t){function e(e,n,r,i,o){void 0===e&&(e=Jf.EMPTY);var s=this,a=new ky(n,r,i);a.getBuffer("aVertexPosition").static=!1;var l=new Py(e);return(s=t.call(this,a,l,null,o)||this).autoUpdate=!0,s}sv(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)}}(Ay),function(t){function e(e,n,r,i,o){void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===o&&(o=10);var s=t.call(this,Jf.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=i,s._topHeight=r,s._bottomHeight=o,s.texture=e,s}sv(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._topHeight+this._bottomHeight;return Math.min(this._width>t?1:this._width/t,this._height>e?1:this._height/e)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}(cv),function(t,e){return(uv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)});!function(t){function e(e,n){void 0===n&&(n=!0);var r=t.call(this,e[0]instanceof Jf?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}(function(t,e){function n(){this.constructor=t}uv(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)})(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(yf.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(yf.shared.add(this.update,this,gf.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(Jf.from(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(Jf.from(t[r]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Jf)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(yf.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(yf.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0})}(Zm),bg.registerPlugin("accessibility",pf),bg.registerPlugin("extract",Rg),bg.registerPlugin("interaction",Tf),bg.registerPlugin("particle",lm),bg.registerPlugin("prepare",py),bg.registerPlugin("batch",Pg),bg.registerPlugin("tilingSprite",xy),rm.registerPlugin(Zy),rm.registerPlugin(my),kg.registerPlugin(vf),kg.registerPlugin(im);var hv=n(11524);class dv{constructor(){this.scrollX=0,this.zoom=20,this.width=500,this.scrollWidth=1}}const fv={[Ho.none]:{border:7580535,bg:4815436},[Ho.cli]:{border:7580535,bg:4815436},[Ho.database]:{border:7568811,bg:4802938},[Ho.email]:{border:7580535,bg:4815436},[Ho.event]:{border:7580535,bg:4815436},[Ho.function]:{border:7580535,bg:4815436},[Ho.http]:{border:7574187,bg:4811898},[Ho.job]:{border:7580535,bg:4815436},[Ho.lock]:{border:7580535,bg:4815436},[Ho.rpc]:{border:7580535,bg:4815436},[Ho.template]:{border:11508802,bg:9270562},[Ho.workflow]:{border:7580535,bg:4815436}};function pv(t){return 0===t?"0":Math.abs(t)<1e3?parseFloat(t.toFixed(1))+"\xb5s":Math.abs(t)<1e6?parseFloat((t/1e3).toFixed(1))+"ms":parseFloat((t/1e3/1e3).toFixed(1))+"s"}class gv extends ff{constructor(t,e,n){super(),this.frame=t,this.offset=e,this.viewState=n,this.textStyle={fontSize:12,fill:16777215},this.rectangle=new jm,this.drawBg();const r=new ey(t.label,this.textStyle);let i;r.y=3.5,r.x=3.5,this.updatePosition(),this.addChild(this.rectangle,r),this.interactive=!0,this.addListener("mouseover",t=>{if(i)return;i=new ff;const e=new ey(this.frame.label,this.textStyle);i.addChild(e),i.x=t.data.global.x,i.y=t.data.global.y,this.parent.addChild(i)}),this.addListener("mousemove",t=>{i&&(i.x=t.data.global.x,i.y=t.data.global.y)}),this.addListener("mouseout",t=>{i&&(this.parent.removeChild(i),i=void 0)}),this.mask=new Zm(Jf.WHITE),this.mask.width=this.width,this.mask.height=this.height,this.addChild(this.mask)}get frameWidth(){return this.frame.took/this.viewState.zoom}updatePosition(){this.x=(this.frame.x-this.offset-this.viewState.scrollX)/this.viewState.zoom+.5,this.y=25*this.frame.y+.5}drawBg(){this.rectangle.clear(),this.rectangle.beginFill(fv[this.frame.category].bg),this.rectangle.lineStyle(1,fv[this.frame.category].border),this.rectangle.drawRect(0,0,this.frameWidth,20),this.rectangle.endFill()}update(){this.updatePosition(),this.drawBg(),this.mask.width=this.frameWidth,this.mask.height=20}}class mv extends ff{constructor(t){super(),this.viewState=t,this.headerLines=new jm,this.headerText=new ff,this.frameContainer=new ff,this.containers=[],this.textStyle={fontSize:12,fill:14540253},this.offsetX=0,this.addChild(this.headerLines),this.addChild(this.headerText),this.addChild(this.frameContainer),this.offsetText=new ey("0",this.textStyle),this.addChild(this.offsetText),this.offsetText.x=0,this.offsetText.y=13,this.frameContainer.y=15}addFrames(t){const e=[],n=[];for(const r of t)if(r.type===qo.start)this.offsetX||(this.offsetX=r.timestamp),n[r.context]||(n[r.context]={y:0}),n[r.context].y++,e.push({id:r.id,category:r.category,context:r.context,y:n[r.context].y,label:r.label,x:r.timestamp,took:0});else{const t=e[r.id-1];if(!t||t.id!==r.id)throw new Error(`Frame end #${r.id} not in framesMap`);n[t.context].y--,t.took=r.timestamp-t.x,this.viewState.scrollWidth<r.timestamp-this.offsetX&&(this.viewState.scrollWidth=r.timestamp-this.offsetX)}for(const r of e){const t=new gv(r,this.offsetX,this.viewState);this.containers.push(t),this.frameContainer.addChild(t)}}forward(){let t=this.viewState.scrollX;for(const e of this.frameContainer.children)if(e.frame.x-this.offsetX>t){t=e.frame.x-this.offsetX;break}this.viewState.scrollX=t,this.update()}update(){for(const t of this.containers)t.update();this.renderHeaderLines()}renderHeaderLines(){let t=10/this.viewState.zoom;for(;t<5;)t+=10/this.viewState.zoom;const e=10*t;this.headerLines.clear(),this.headerLines.lineStyle(1,16777215,.7);for(const i of this.headerText.children)i.visible=!1;const n=this.viewState.scrollX;this.offsetText.text=(n>0?"+":"")+pv(n);const r=(this.viewState.width+e)/t;for(let i=0;i<r;i++){const e=i*t;if(this.headerLines.moveTo(e,0),this.headerLines.lineStyle(i%10==0?2:1,16777215,.7),this.headerLines.lineTo(e,i%10==0?12:i%5==0?7:5),i%10==0&&e>0){let t=this.headerText.children[i];this.headerText.children[i]||(t=new ey(pv(e*this.viewState.zoom),{fontSize:12,fill:14540253}),this.headerText.addChild(t)),t.x=e,t.y=13,t.visible=!0,t.text=pv(e*this.viewState.zoom)}}}}const yv=[{path:"",pathMatch:"full",redirectTo:"configuration"},{path:"configuration",component:Gu},{path:"http",component:ch},{path:"rpc",component:hh},{path:"timeline",component:(()=>{class t{constructor(t,e){this.client=t,this.host=e,this.app=new kg({width:500,height:500,antialias:!0,autoDensity:!0,transparent:!0,resolution:window.devicePixelRatio}),this.viewState=new dv,this.profiler=new mv(this.viewState)}ngOnDestroy(){this.app.destroy(!0)}forward(){this.profiler.forward()}onResize(){}ngOnInit(){var t=this;return(0,Co.Z)(function*(){t.host.nativeElement.appendChild(t.app.view),t.app.renderer.view.style.position="absolute",t.app.renderer.view.style.display="block",t.app.renderer.view.style.width="100%",t.app.renderer.view.style.height="100%",t.app.renderer.resize(t.host.nativeElement.clientWidth,t.host.nativeElement.clientHeight);const e=function(t){const e=new zo.X6(t),n=[];for(;e.offset<t.byteLength;){const t=e.eatUInt32(),r=e.eatByte(),i=e.eatByte(),o=e.eatDouble();if(i===qo.start){const i=e.eatUInt32(),s=e.eatByte(),a=e.eatByte(),l=e.eatString(a);n.push({id:t,worker:r,type:qo.start,timestamp:o,context:i,category:s,label:l})}else n.push({id:t,worker:r,type:qo.end,timestamp:o})}return n}(yield t.client.debug.getProfilerFrames());t.viewState.width=t.host.nativeElement.clientWidth,t.profiler.addFrames(e.slice(0,100)),t.profiler.update(),t.app.stage.addChild(t.profiler);const n=new hv.Manager(t.app.renderer.view);n.add(new hv.Pan({direction:hv.DIRECTION_ALL,threshold:0}));let r=0;n.on("panstart",()=>{r=t.viewState.scrollX}),n.on("pan",e=>{t.viewState.scrollX=r-e.deltaX*t.viewState.zoom,t.profiler.update()}),t.app.renderer.view.addEventListener("wheel",e=>{const n=Math.min(1e6,Math.max(.1,t.viewState.zoom-Math.min(-1*e.deltaY/500,.3)*t.viewState.zoom)),r=n/t.viewState.zoom,i=e.clientX-t.app.renderer.view.getBoundingClientRect().x;t.viewState.scrollX-=i*t.viewState.zoom*(r-1),t.viewState.zoom=n,t.profiler.update()})})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Yo),r.Y36(r.SBq))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],hostBindings:function(t,e){1&t&&r.NdJ("resize",function(){return e.onResize()},!1,r.Jf7)},decls:3,vars:0,consts:[["for","main"],["textured","","icon","arrow_right",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"dui-window-toolbar",0),r.TgZ(1,"dui-button-group"),r.TgZ(2,"dui-button",1),r.NdJ("click",function(){return e.forward()}),r.qZA(),r.qZA(),r.qZA())},directives:[Kc,lu,au],styles:["[_nghost-%COMP%]{position:absolute;left:0;top:0;width:100%;height:100%}"]}),t})()},{path:"events",component:dh},{path:"http/request/:id",component:_h}];let vv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[po.forRoot(yv)],po]}),t})();function bv(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}const _v=["*"];let wv=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-list-title"]],ngContentSelectors:_v,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},styles:["[_nghost-%COMP%]{display:block;padding:4px 10px;font-size:11px;font-weight:600;color:#45484a}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{color:#a6aaad}"]}),t})(),xv=(()=>{class t extends ca{constructor(e,n,r,i){super(e,n,i),this.injector=e,this.cd=n,this.host=r,this.cdParent=i,this.white=!1,this.id=++t.ids,this.focusable=!0,this.delimiterLine=!1,this.tabIndex=1,this.items=[],this.itemMap=new Map}deregister(t){(0,va.lH)(this.items,t),this.itemMap.delete(t.id+"")}register(t){this.items.push(t),this.itemMap.set(t.id+"",t)}getSortedList(){return Array.from(this.host.nativeElement.querySelectorAll(`dui-list-item[list-id="${this.id}"]`)).map(t=>this.itemMap.get(t.getAttribute("list-item-id")))}onKeyDown(t){var e=this;return(0,Co.Z)(function*(){if("ArrowDown"===t.key){t.preventDefault();const n=e.getSelectedItem();if(n){const t=e.getSortedList(),r=t.indexOf(n);t[r+1]&&(yield t[r+1].select())}}if("ArrowUp"===t.key){t.preventDefault();const n=e.getSelectedItem();if(n){const t=e.getSortedList(),r=t.indexOf(n);t[r-1]&&(yield t[r-1].select())}}})()}getSelectedItem(){for(const t of this.items)if(t.isSelected())return t}}return t.ids=0,t.\u0275fac=function(e){return new(e||t)(r.Y36(r.zs3),r.Y36(r.sBO),r.Y36(r.SBq),r.Y36(r.sBO,4))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-list"]],hostVars:9,hostBindings:function(t,e){1&t&&r.NdJ("keydown",function(t){return e.onKeyDown(t)}),2&t&&(r.Ikx("tabindex",e.tabIndex),r.ekj("white",!1!==e.white)("overlay-scrollbar-small",!0)("focusable",e.focusable)("delimiter-line",!1!==e.delimiterLine))},inputs:{white:"white",focusable:"focusable",delimiterLine:"delimiterLine"},features:[r._Bn([la(t)]),r.qOj],ngContentSelectors:_v,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},styles:["[_nghost-%COMP%]{display:block;height:100%}[_nghost-%COMP%]:focus{outline:0}.disabled[_nghost-%COMP%] > *[_ngcontent-%COMP%]{opacity:.6}[_nghost-%COMP%]     dui-list-item.selected{background-color:var(--dui-selection-unfocused)}[_nghost-%COMP%]:focus.focusable     dui-list-item.selected{background-color:var(--dui-selection);color:#fff;--text-light:#d1d1d1}.light.white[_nghost-%COMP%], .light   .white[_nghost-%COMP%]{background-color:#fff;border:1px solid #c5c5c5}.light.white[_nghost-%COMP%]:not(:focus)     dui-list-item.selected, .light   .white[_nghost-%COMP%]:not(:focus)     dui-list-item.selected{background-color:#dcdcdc}.dark.white[_nghost-%COMP%], .dark   .white[_nghost-%COMP%]{background-color:#1e1e1e;border:1px solid #565656}.delimiter-line[_nghost-%COMP%]     dui-list-item{border-bottom:1px solid var(--line-color-light)}.delimiter-line[_nghost-%COMP%]     dui-list-item.selected{border-bottom:1px solid #0000}.delimiter-line[_nghost-%COMP%]:focus     dui-list-item.selected{margin-top:-1px;border-top:1px solid #0000}"]}),t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Cv=(()=>{class t{constructor(e,n,i,o){this.list=e,this.element=n,this.cd=i,this.router=o,this.id=++t.ids,this.position=0,this.onSelect=new r.vpe,this.element.nativeElement.removeAttribute("tabindex"),e.register(this),this.list.registerOnChange(()=>{this.cd.detectChanges()}),this.router&&(this.routerSub=this.router.events.subscribe(t=>{t instanceof On&&this.cd.detectChanges()}))}ngOnDestroy(){this.list.deregister(this),this.routerSub&&this.routerSub.unsubscribe()}ngOnChanges(t){this.cd.detectChanges()}select(){var t=this;return(0,Co.Z)(function*(){t.routerLink&&t.router?"string"==typeof t.routerLink?yield t.router.navigateByUrl(t.routerLink):Array.isArray(t.routerLink)?yield t.router.navigate(t.routerLink):yield t.router.navigateByUrl(t.router.serializeUrl(t.routerLink)):t.list.innerValue=t.value,t.onSelect.emit(t.value)})()}isSelected(){return void 0!==this.active?this.active:void 0!==this.value?this.list.innerValue===this.value:!(!this.routerLink||!this.router)&&("string"==typeof this.routerLink?this.router.isActive(this.routerLink,!0===this.routerLinkExact):Array.isArray(this.routerLink)?this.router.isActive(this.router.createUrlTree(this.routerLink),!0===this.routerLinkExact):this.router.isActive(this.routerLink,!0===this.routerLinkExact))}onClick(){this.list.innerValue=this.value,this.onSelect.emit(this.value)}}return t.ids=0,t.\u0275fac=function(e){return new(e||t)(r.Y36(xv),r.Y36(r.SBq),r.Y36(r.sBO,4),r.Y36(to,8))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-list-item"]],hostVars:4,hostBindings:function(t,e){1&t&&r.NdJ("mousedown",function(){return e.onClick()}),2&t&&(r.uIk("list-id",e.list.id)("list-item-id",e.id),r.ekj("selected",e.isSelected()))},inputs:{value:"value",routerLink:"routerLink",routerLinkExact:"routerLinkExact",active:"active",position:"position"},outputs:{onSelect:"onSelect"},features:[r.TTD],ngContentSelectors:_v,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},styles:["[_nghost-%COMP%]{display:block;padding:4px 20px;font-size:11px;font-weight:500}"]}),t})();function Sv(t,e){return t}function Tv(t){return t.filter(t=>t.name&&!t.name.startsWith("@:embedded/"))}function Ev(t,e){return e.name}function Ov(t,e){return e.getName()}function Av(t,e){return e.name}var Pv=n(50436),kv=n(30754);function Mv(t,e){if(1&t&&(r.TgZ(0,"div",7),r._uU(1),r.qZA()),2&t){const t=r.oxw().$implicit,e=r.oxw().$implicit,n=r.oxw();r.xp6(1),r.hij(" (",n.state.getAddedItems(e.name,t.getName()).length,") ")}}const Iv=function(t,e){return["/database",t,e]};function Rv(t,e){if(1&t&&(r.TgZ(0,"dui-list-item",3),r.TgZ(1,"div",4),r.TgZ(2,"div"),r._uU(3),r.qZA(),r.YNc(4,Mv,2,1,"div",5),r.TgZ(5,"div",6),r._uU(6),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.$implicit,n=r.oxw().$implicit,i=r.oxw();r.Q6J("routerLink",r.WLB(4,Iv,i.encodeURIComponent(n.name),i.encodeURIComponent(t.getName()))),r.xp6(3),r.Oqu(t.getClassName()),r.xp6(1),r.Q6J("ngIf",i.state.hasAddedItems(n.name,t.getName())),r.xp6(2),r.Oqu(i.counts[i.state.getStoreKey(n.name,t.getName())]||0)}}const Dv=function(t){return["/database",t]};function Nv(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"dui-list-item",1),r._uU(2),r.qZA(),r.YNc(3,Rv,7,7,"dui-list-item",2),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("routerLink",r.VKq(6,Dv,n.encodeURIComponent(t.name)))("routerLinkExact",!0),r.xp6(1),r.AsE("",t.name," (",t.adapter,")"),r.xp6(1),r.Q6J("ngForOf",n.filterEntitiesToList(t.getClassSchemas()))("ngForTrackBy",n.trackBySchema)}}let Lv=(()=>{class t{constructor(t,e,n){this.state=t,this.cd=e,this.controllerClient=n,this.encodeURIComponent=encodeURIComponent,this.counts={},this.filterEntitiesToList=Tv,this.trackBySchema=Ov,this.trackByDatabase=Ev}ngOnInit(){var t=this;return(0,Co.Z)(function*(){t.state.databases=yield t.controllerClient.getDatabases(),ea(t.cd),console.log("databases",t.state.databases),t.state.onDataChange.subscribe(t.loadCounts.bind(t)),yield t.loadCounts()})()}loadCounts(){var t=this;return(0,Co.Z)(function*(){const e=[];for(const n of t.state.databases)for(const r of Tv(n.getClassSchemas())){const i=t.state.getStoreKey(n.name,r.getName());e.push(t.controllerClient.browser.getCount(n.name,r.getName(),{}).then(e=>{t.counts[i]=e},t=>console.log("loading count error",r.getName(),t)))}yield Promise.all(e),t.cd.detectChanges()})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Pv.Ky),r.Y36(r.sBO),r.Y36(kv.M))},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-list"]],decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink","routerLinkExact"],[3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[3,"routerLink"],[1,"item"],["class","add",4,"ngIf"],[1,"count"],[1,"add"]],template:function(t,e){1&t&&r.YNc(0,Nv,4,8,"ng-container",0),2&t&&r.Q6J("ngForOf",e.state.databases)("ngForTrackBy",e.trackByDatabase)},directives:[ht,Cv,eo,ft],styles:[".item[_ngcontent-%COMP%]{margin-left:15px;display:flex}.item[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{margin-left:5px;color:var(--color-orange)}.item[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{margin-left:auto;color:var(--text-light)}"]}),t})();function Fv(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"dui-list-item",16),r.TgZ(2,"div",17),r.TgZ(3,"div",18),r._uU(4),r.qZA(),r.TgZ(5,"div",19),r._uU(6),r.qZA(),r.TgZ(7,"div",20),r._uU(8),r.qZA(),r._UZ(9,"div",21),r.qZA(),r.TgZ(10,"div",22),r._uU(11),r.qZA(),r.qZA(),r.BQk()),2&t){const t=e.$implicit;r.xp6(1),r.MGl("routerLink","/http/request/",t.id,""),r.xp6(3),r.hij("#",t.id,""),r.xp6(2),r.Oqu(t.method),r.xp6(2),r.Oqu(t.statusCode),r.xp6(3),r.hij(" ",t.url," ")}}function Bv(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"dui-list-title"),r._uU(2,"HTTP Requests"),r.qZA(),r.YNc(3,Fv,12,5,"ng-container",15),r.BQk()),2&t){const t=r.oxw().ngIf,e=r.oxw();r.xp6(3),r.Q6J("ngForOf",e.filterRequests(t))}}function jv(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Bv,4,1,"ng-container",14),r.BQk()),2&t){const t=e.ngIf;r.xp6(1),r.Q6J("ngIf",t.length>0)}}class $v{constructor(t,e,n){this.controllerClient=t,this.cd=e,this.router=n,this.databases=[],this.sidebarVisible=!0}ngOnDestroy(){}filterRequests(t){return t.sort(function(t,e){return t.id>e.id?-1:t.id<e.id?1:0}),t.slice(0,10)}get requestObservable(){return this.requests}ngOnInit(){var t=this;return(0,Co.Z)(function*(){t.databases=yield t.controllerClient.debug.databases(),t.cd.detectChanges()})()}}$v.\u0275fac=function(t){return new(t||$v)(r.Y36(Yo),r.Y36(r.sBO),r.Y36(to))},$v.\u0275cmp=r.Xpm({type:$v,selectors:[["app-root"]],decls:33,vars:7,consts:[["size","small"],[2,"position","relative","top","-2px"],["src","assets/deepkit_white.svg",2,"width","16px","vertical-align","text-bottom","margin-left","4px"],[2,"margin-left","8px","display","inline-block","color","var(--text-grey)"],["float","sidebar"],["textured","","icon","toggle_sidebar",3,"click"],["name","main"],["name","orm-browser"],[3,"sidebarVisible"],["routerLink","/configuration"],["routerLink","/http",3,"routerLinkExact"],["routerLink","/rpc"],["routerLink","/events"],["routerLink","/timeline"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"routerLink"],[1,"request-line"],[1,"id"],[1,"method"],[1,"status"],[1,"icons"],[1,"request-subline"]],template:function(t,e){1&t&&(r.TgZ(0,"dui-window"),r.TgZ(1,"dui-window-header",0),r.TgZ(2,"dui-window-toolbar"),r.TgZ(3,"dui-button-group"),r.TgZ(4,"div",1),r._UZ(5,"img",2),r.TgZ(6,"span",3),r._uU(7,"Framework Debugger"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(8,"dui-button-group",4),r.TgZ(9,"dui-button",5),r.NdJ("click",function(){return e.sidebarVisible=!e.sidebarVisible}),r.qZA(),r.qZA(),r._UZ(10,"dui-window-toolbar-container",6),r._UZ(11,"dui-window-toolbar-container",7),r.qZA(),r.qZA(),r.TgZ(12,"dui-window-content",8),r.TgZ(13,"dui-window-sidebar"),r.TgZ(14,"dui-list"),r.TgZ(15,"dui-list-title"),r._uU(16,"Application"),r.qZA(),r.TgZ(17,"dui-list-item",9),r._uU(18,"Configuration"),r.qZA(),r.TgZ(19,"dui-list-item",10),r._uU(20,"HTTP"),r.qZA(),r.TgZ(21,"dui-list-item",11),r._uU(22,"RPC"),r.qZA(),r.TgZ(23,"dui-list-item",12),r._uU(24,"Events"),r.qZA(),r.TgZ(25,"dui-list-item",13),r._uU(26,"Timeline"),r.qZA(),r.TgZ(27,"dui-list-title"),r._uU(28,"Database"),r.qZA(),r._UZ(29,"orm-browser-list"),r.YNc(30,jv,2,1,"ng-container",14),r.ALo(31,"async"),r.qZA(),r.qZA(),r._UZ(32,"router-outlet"),r.qZA(),r.qZA()),2&t&&(r.xp6(12),r.ekj("no-padding",e.router.url.startsWith("/database/")),r.Q6J("sidebarVisible",e.sidebarVisible),r.xp6(7),r.Q6J("routerLinkExact",!0),r.xp6(11),r.Q6J("ngIf",r.lcZ(31,5,e.requests)))},directives:[ru,Qc,Kc,lu,au,tu,Zc,Nc,xv,wv,Cv,eo,Lv,ft,ro,ht],pipes:[Et],styles:["[_nghost-%COMP%]     dui-window-content.no-padding>.content{padding:0!important}.request-line[_ngcontent-%COMP%]{display:flex;font-size:10px;line-height:12px}.request-line[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%], .request-line[_ngcontent-%COMP%]   .method[_ngcontent-%COMP%]{flex:0;white-space:nowrap;margin-right:5px}.request-line[_ngcontent-%COMP%]   .url[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis}.request-line[_ngcontent-%COMP%]   .icons[_ngcontent-%COMP%]{width:34px}.request-subline[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;color:var(--text-light)}"]}),bv([function(t={}){return function(e,n){function r(t){if(t&&t.unsubscribe)try{t.unsubscribe()}catch(r){console.log("Subscription was already unsubscribed.",(0,va.gj)(e),n)}}Object.defineProperty(e,n,{enumerable:!0,configurable:!1,get(){return $l(this)[n]},set(e){const i=$l(this,jl),o=$l(this),s=$l(this,Bl);s[n]&&(r(s[n]),delete s[n]),t.unsubscribe&&o[n]&&o[n].unsubscribe&&r(o[n]),!i.destroyed&&e&&e.subscribe&&(s[n]=e.subscribe(()=>{zl.tick()})),i.destroyed&&t.unsubscribe&&r(e),zl.tick(),o[n]=e}}),Vl(e,"onDestroy",function(){$l(this,jl).destroyed=!0;const e=$l(this),i=$l(this,Bl);i[n]&&(r(i[n]),delete i[n]),t.unsubscribe&&r(e[n])})}}()],$v.prototype,"requests",void 0);let Uv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[],imports:[[]]}),t})(),Vv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[],imports:[[]]}),t})(),Zv=(()=>{class t{constructor(t,e,n){this.app=t,this.resolver=e,this.viewContainerRef=n,this.renderComponentInputs={}}ngAfterViewInit(){const t=this.resolver.resolveComponentFactory(this.renderComponent),e=t.create.bind(t);t.create=(...t)=>{const n=e(...t);for(const[e,r]of Object.entries(this.renderComponentInputs))n.instance[e]=r;return n},this.component=this.viewContainerRef.createComponent(t,0,this.viewContainerRef.injector),this.app.tick()}ngOnDestroy(){this.component&&this.component.destroy()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.z2F),r.Y36(r._Vd),r.Y36(r.s_b))},t.\u0275dir=r.lG2({type:t,selectors:[["","renderComponent",""]],inputs:{renderComponent:"renderComponent",renderComponentInputs:"renderComponentInputs"}}),t})();function zv(t,e){if(1&t&&r.GkF(0,4,5),2&t){const t=r.oxw();r.Q6J("renderComponent",t.component)("renderComponentInputs",t.componentInputs)}}function Hv(t,e){if(1&t&&r.GkF(0,6),2&t){const t=r.oxw();r.Q6J("ngTemplateOutlet",t.content)}}function qv(t,e){if(1&t&&(r.ynx(0),r.GkF(1,6),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngTemplateOutlet",t.container)}}function Yv(t,e){1&t&&(r.ynx(0),r.Hsn(1),r.BQk())}function Gv(t,e){if(1&t&&(r.TgZ(0,"div",7),r.GkF(1,6),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngTemplateOutlet",t.actions)}}const Wv=["*"],Jv=["template"];function Xv(t,e){1&t&&r.Hsn(0)}function Qv(t,e){1&t&&r.Hsn(0)}let Kv=(()=>{class t{constructor(t){this.cd=t,this.componentInputs={},this.class=""}setActions(t){this.actions=t,this.cd.detectChanges()}setDialogContainer(t){this.container=t,this.cd.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&r.Gf(Zv,5),2&t){let t;r.iGM(t=r.CRH())&&(e.renderComponentDirective=t.first)}},hostVars:1,hostBindings:function(t,e){2&t&&r.uIk("tabindex",1)},inputs:{component:"component",componentInputs:"componentInputs"},ngContentSelectors:Wv,decls:7,vars:8,consts:[[3,"renderComponent","renderComponentInputs",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[4,"ngIf"],["class","dialog-actions",4,"ngIf"],[3,"renderComponent","renderComponentInputs"],["renderComponentDirective",""],[3,"ngTemplateOutlet"],[1,"dialog-actions"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"dui-window"),r.TgZ(1,"dui-window-content"),r.YNc(2,zv,2,2,"ng-container",0),r.YNc(3,Hv,1,1,"ng-container",1),r.YNc(4,qv,2,1,"ng-container",2),r.YNc(5,Yv,2,0,"ng-container",2),r.qZA(),r.YNc(6,Gv,2,1,"div",3),r.qZA()),2&t&&(r.xp6(1),r.Tol(e.class),r.xp6(1),r.Q6J("ngIf",e.component),r.xp6(1),r.Q6J("ngIf",e.content),r.xp6(1),r.Q6J("ngIf",e.container),r.xp6(1),r.Q6J("ngIf",!e.container),r.xp6(1),r.Q6J("ngIf",e.actions))},directives:[ru,Zc,ft,Zv,_t],styles:["@keyframes dialog-fade-in{0%{top:-200px}to{top:0}}  .cdk-overlay-pane{overflow:hidden;display:flex}  .cdk-overlay-pane>ng-component{flex:1;display:flex;max-width:100%}  .cdk-overlay-pane dui-window{position:relative!important;flex:1;height:auto;width:calc(100% - 50px);margin:0 25px 25px;max-height:100%;border:1px solid #b8b8b8;box-shadow:0 5px 10px 2px #00000038}  .cdk-overlay-pane dui-window-content{padding-top:0}  .cdk-overlay-pane dui-window-content>.top-line{display:none}  .cdk-overlay-pane:not(.dialog-overlay-no-padding) dui-window-content>.content{padding-left:20px!important;padding-right:20px!important;padding-bottom:5px!important}  .dialog-overlay-with-animation dui-window{animation:dialog-fade-in .2s ease-out}  .cdk-overlay-dark-backdrop{background:rgba(0,0,0,.001)}.dialog-actions[_ngcontent-%COMP%]{padding:15px 20px 20px;background-color:#ececec;text-align:right;display:flex;justify-content:flex-end;flex-wrap:wrap}.dialog-actions[_ngcontent-%COMP%]    >*{margin:0 5px}.dialog-actions[_ngcontent-%COMP%]    >:last-child{margin-right:0}.dialog-actions[_ngcontent-%COMP%]    >:first-child{margin-left:0}  .dark .dialog-actions{background-color:var(--dui-window-content-bg)}  .dark   .cdk-overlay-pane dui-window{border:1px solid #060708}"]}),t})(),tb=(()=>{class t{constructor(t,e,n,i,o,s,a,l,c){this.applicationRef=t,this.overlayStack=e,this.viewContainerRef=n,this.cd=i,this.overlay=o,this.injector=s,this.registry=a,this.cdParent=l,this.window=c,this.title="",this.visible=!1,this.visibleChange=new r.vpe,this.class="",this.noPadding=!1,this.center=!1,this.backDropCloses=!1,this.componentInputs={},this.closed=new r.vpe,this.open=new r.vpe}toPromise(){return new Promise(t=>{this.closed.subscribe(e=>{t(e)})})}setDialogContainer(t){this.container=t,this.wrapperComponentRef&&this.wrapperComponentRef.instance.setDialogContainer(t)}setActions(t){this.actions=t,this.wrapperComponentRef&&this.wrapperComponentRef.instance.setActions(t)}ngOnChanges(t){this.visible?this.show():this.close(void 0)}show(){if(this.overlayRef)return;const e=this.window?this.window.getClosestNonDialogWindow():this.registry.getOuterActiveWindow(),n=e&&e.header?e.header.getBottomPosition():0,i=this.overlay;let o=i.position().global().centerHorizontally().top(n+"px");this.center&&(o=i.position().global().centerHorizontally().centerVertically()),this.overlayRef=i.create({width:this.width||void 0,height:this.height||void 0,minWidth:this.minWidth||void 0,minHeight:this.minHeight||void 0,maxWidth:this.maxWidth||"90%",maxHeight:this.maxHeight||"90%",hasBackdrop:!0,panelClass:[this.class,this.center?"dialog-overlay":"dialog-overlay-with-animation",!1!==this.noPadding?"dialog-overlay-no-padding":""],scrollStrategy:i.scrollStrategies.reposition(),positionStrategy:o}),this.backDropCloses&&this.overlayRef.backdropClick().subscribe(()=>{this.close(void 0)});const s=r.zs3.create({parent:this.injector,providers:[{provide:t,useValue:this},{provide:ru,useValue:e},{provide:Oc,useValue:!0}]});this.open.emit();const a=new Ml(Kv,this.viewContainerRef,s);this.wrapperComponentRef=this.overlayRef.attach(a),this.wrapperComponentRef.instance.component=this.component,this.wrapperComponentRef.instance.componentInputs=this.componentInputs,this.wrapperComponentRef.instance.content=this.template,this.wrapperComponentRef.instance.class=this.class,this.lastOverlayStackItem&&this.lastOverlayStackItem.release(),this.lastOverlayStackItem=this.overlayStack.register(this.overlayRef.hostElement),this.actions&&this.wrapperComponentRef.instance.setActions(this.actions),this.container&&this.wrapperComponentRef.instance.setDialogContainer(this.container),this.overlayRef.updatePosition(),this.visible=!0,this.visibleChange.emit(!0),this.wrapperComponentRef.location.nativeElement.focus(),this.wrapperComponentRef.changeDetectorRef.detectChanges(),this.cd.detectChanges(),this.cdParent.detectChanges()}beforeUnload(){this.lastOverlayStackItem&&this.lastOverlayStackItem.release(),this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=void 0)}ngAfterViewInit(){}close(t){this.beforeUnload(),this.visible=!1,this.visibleChange.emit(!1),this.closed.emit(t),zl.tick()}ngOnDestroy(){this.beforeUnload()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.z2F),r.Y36(Pc),r.Y36(r.s_b),r.Y36(r.sBO),r.Y36(wc),r.Y36(r.zs3),r.Y36(Sc),r.Y36(r.sBO,4),r.Y36(ru,8))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-dialog"]],viewQuery:function(t,e){if(1&t&&r.Gf(Jv,7),2&t){let t;r.iGM(t=r.CRH())&&(e.template=t.first)}},inputs:{title:"title",visible:"visible",class:"class",noPadding:"noPadding",minWidth:"minWidth",minHeight:"minHeight",width:"width",height:"height",maxWidth:"maxWidth",maxHeight:"maxHeight",center:"center",backDropCloses:"backDropCloses",component:"component",componentInputs:"componentInputs"},outputs:{visibleChange:"visibleChange",closed:"closed",open:"open"},features:[r.TTD],ngContentSelectors:Wv,decls:2,vars:0,consts:[["template",""]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,Xv,1,0,"ng-template",null,0,r.W1O))},styles:["[_nghost-%COMP%]{display:none}"]}),t})(),eb=(()=>{class t{constructor(t){this.dialog=t}ngAfterViewInit(){this.dialog.setActions(this.template)}ngOnDestroy(){this.dialog.actions===this.template&&this.dialog.setActions(void 0)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(tb))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-dialog-actions"]],viewQuery:function(t,e){if(1&t&&r.Gf(Jv,7),2&t){let t;r.iGM(t=r.CRH())&&(e.template=t.first)}},ngContentSelectors:Wv,decls:2,vars:0,consts:[["template",""]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,Qv,1,0,"ng-template",null,0,r.W1O))},encapsulation:2}),t})(),nb=(()=>{class t{constructor(t){this.dialog=t}onClick(){this.dialog.close(this.closeDialog)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(tb))},t.\u0275dir=r.lG2({type:t,selectors:[["","closeDialog",""]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{closeDialog:"closeDialog"}}),t})(),rb=(()=>{class t{constructor(t,e){this.elementRef=t,this.button=e}ngOnDestroy(){}ngOnChanges(){this.link()}ngAfterViewInit(){this.link()}link(){this.button&&this.openDialog&&(this.openSub=this.openDialog.open.subscribe(()=>{this.button&&(this.button.active=!0)}),this.hiddenSub=this.openDialog.closed.subscribe(()=>{this.button&&(this.button.active=!1)}))}onClick(){this.openDialog&&this.openDialog.show()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(au,8))},t.\u0275dir=r.lG2({type:t,selectors:[["","openDialog",""]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{openDialog:"openDialog"},features:[r.TTD]}),Pl([Zl()],t.prototype,"openSub",void 0),Pl([Zl()],t.prototype,"hiddenSub",void 0),t})();function ib(t,e){if(1&t&&(r.TgZ(0,"div"),r.TgZ(1,"h3"),r._uU(2),r.qZA(),r.TgZ(3,"div"),r.TgZ(4,"div",2),r._uU(5),r.qZA(),r.qZA(),r.qZA()),2&t){const t=e.ngIf;r.xp6(2),r.Oqu(t.title),r.xp6(3),r.AsE(" ",t.step," / ",t.steps," ")}}class ob{constructor(){this.title="",this.step=0,this.steps=1}}class sb extends me.X{constructor(){super(void 0),this.state=new ob,this.closer=new me.X(!1),this.next(this.state)}cancel(){this.closer.next(!0)}close(){this.closer.next(!0)}waitForClose(){var t=this;return(0,Co.Z)(function*(){return new Promise((e,n)=>{t.closer.subscribe(t=>{t&&e(t)})})})()}set title(t){this.state.title=t,this.next(this.state)}get title(){return this.state.title}set step(t){this.state.step=t,this.next(this.state)}get step(){return this.state.step}set steps(t){this.state.steps=t,this.next(this.state)}get steps(){return this.state.steps}}let ab=(()=>{class t{constructor(t){this.dialog=t}ngOnInit(){this.state$.closer.subscribe(t=>{t&&this.dialog.close(t)})}onCancelClick(){this.state$.closer.next(!0),this.dialog.close(!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(tb))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{state$:"state$"},decls:5,vars:3,consts:[[4,"ngIf"],["mat-button","",3,"click"],[2,"text-align","right","padding","2px 0"]],template:function(t,e){1&t&&(r.YNc(0,ib,6,3,"div",0),r.ALo(1,"async"),r.TgZ(2,"dui-dialog-actions"),r.TgZ(3,"button",1),r.NdJ("click",function(){return e.onCancelClick()}),r._uU(4,"Cancel"),r.qZA(),r.qZA()),2&t&&r.Q6J("ngIf",r.lcZ(1,1,e.state$))},directives:[ft,eb],pipes:[Et],encapsulation:2}),t})();function lb(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Oqu(t.content)}}function cb(t,e){if(1&t&&(r.TgZ(0,"div",2),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Oqu(t.content)}}function ub(t,e){if(1&t&&(r.TgZ(0,"div",4),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Oqu(t.content)}}let hb=(()=>{class t{constructor(){this.title="Confirm",this.content=""}}return t.dialogDefaults={maxWidth:"700px"},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{title:"title",content:"content"},decls:8,vars:4,consts:[[4,"ngIf"],[3,"closeDialog"],["focus","",3,"closeDialog"]],template:function(t,e){1&t&&(r.TgZ(0,"h3"),r._uU(1),r.qZA(),r.YNc(2,lb,2,1,"div",0),r.TgZ(3,"dui-dialog-actions"),r.TgZ(4,"dui-button",1),r._uU(5,"Cancel"),r.qZA(),r.TgZ(6,"dui-button",2),r._uU(7,"OK"),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Oqu(e.title||"No title"),r.xp6(1),r.Q6J("ngIf",e.content),r.xp6(2),r.Q6J("closeDialog",!1),r.xp6(2),r.Q6J("closeDialog",!0))},directives:[ft,eb,au,nb],encapsulation:2}),t})(),db=(()=>{class t{constructor(){this.title="Alert",this.content=""}}return t.dialogDefaults={maxWidth:"700px"},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{title:"title",content:"content"},decls:6,vars:3,consts:[["class","text-selection","style","white-space: pre-line;",4,"ngIf"],["focus","",3,"closeDialog"],[1,"text-selection",2,"white-space","pre-line"]],template:function(t,e){1&t&&(r.TgZ(0,"h3"),r._uU(1),r.qZA(),r.YNc(2,cb,2,1,"div",0),r.TgZ(3,"dui-dialog-actions"),r.TgZ(4,"dui-button",1),r._uU(5,"OK"),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Oqu(e.title||"No title"),r.xp6(1),r.Q6J("ngIf",e.content),r.xp6(2),r.Q6J("closeDialog",!0))},directives:[ft,eb,au,nb],encapsulation:2}),t})(),fb=(()=>{class t{constructor(t){this.dialog=t,this.title="Alert",this.content="",this.value=""}}return t.dialogDefaults={maxWidth:"700px"},t.\u0275fac=function(e){return new(e||t)(r.Y36(tb))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{title:"title",content:"content",value:"value"},decls:10,vars:5,consts:[["class","text-selection","style","white-space: pre-line;",4,"ngIf"],[2,"padding-top","5px"],["focus","",2,"width","100%",3,"ngModel","enter","ngModelChange"],[3,"closeDialog"],[1,"text-selection",2,"white-space","pre-line"]],template:function(t,e){1&t&&(r.TgZ(0,"h3"),r._uU(1),r.qZA(),r.YNc(2,ub,2,1,"div",0),r.TgZ(3,"div",1),r.TgZ(4,"dui-input",2),r.NdJ("enter",function(){return e.dialog.close(e.value)})("ngModelChange",function(t){return e.value=t}),r.qZA(),r.qZA(),r.TgZ(5,"dui-dialog-actions"),r.TgZ(6,"dui-button",3),r._uU(7,"Cancel"),r.qZA(),r.TgZ(8,"dui-button",3),r._uU(9,"OK"),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Oqu(e.title||"No title"),r.xp6(1),r.Q6J("ngIf",e.content),r.xp6(2),r.Q6J("ngModel",e.value),r.xp6(2),r.Q6J("closeDialog",!1),r.xp6(2),r.Q6J("closeDialog",e.value))},directives:[ft,ya,vs,Vs,eb,au,nb],encapsulation:2}),t})(),pb=(()=>{class t{constructor(t,e,n,r){this.resolver=t,this.app=e,this.injector=n,this.registry=r}open(t,e={},n={},r=null){r||(r=this.registry.getCurrentViewContainerRef());const i=this.resolver.resolveComponentFactory(tb),o=r.createComponent(i);if(o.instance.visible=!0,o.instance.component=t,o.instance.componentInputs=e,t.dialogDefaults)for(const[s,a]of Object.entries(t.dialogDefaults))o.instance[s]=a;for(const[s,a]of Object.entries(n))o.instance[s]=a;return o.instance.show(),o.changeDetectorRef.detectChanges(),o.instance.closed.subscribe(()=>{o.destroy()}),{dialog:o.instance,component:o.instance.wrapperComponentRef.instance.renderComponentDirective.component.instance}}alert(t,e,n={}){var r=this;return(0,Co.Z)(function*(){const{dialog:i}=r.open(db,{title:t,content:e},n);return i.toPromise()})()}confirm(t,e,n={}){var r=this;return(0,Co.Z)(function*(){const{dialog:i}=r.open(hb,{title:t,content:e},n);return i.toPromise()})()}prompt(t,e,n,r={}){var i=this;return(0,Co.Z)(function*(){const{dialog:o}=i.open(fb,{title:t,value:e,content:n},r);return o.toPromise()})()}progress(){const t=new sb;return this.open(ab,{state$:t}),t}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r._Vd),r.LFG(r.z2F),r.LFG(r.zs3),r.LFG(Sc))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function gb(t,e){if(1&t&&r.GkF(0,3,4),2&t){const t=r.oxw();r.Q6J("renderComponent",t.component)("renderComponentInputs",t.componentInputs)}}function mb(t,e){if(1&t&&r.GkF(0,5),2&t){const t=r.oxw();r.Q6J("ngTemplateOutlet",t.content)}}function yb(t,e){if(1&t&&(r.ynx(0),r.GkF(1,5),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngTemplateOutlet",t.container)}}function vb(t,e){1&t&&(r.ynx(0),r.Hsn(1),r.BQk())}const bb=["*"],_b=["template"];function wb(t,e){1&t&&r.Hsn(0)}let xb=(()=>{class t{constructor(t,e,n){this.cd=t,this.injector=e,this.componentInputs={}}setDialogContainer(t){this.container=t,this.cd.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO),r.Y36(r.zs3),r.Y36(Ec))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&r.Gf(Zv,5),2&t){let t;r.iGM(t=r.CRH())&&(e.renderComponentDirective=t.first)}},hostVars:1,hostBindings:function(t,e){2&t&&r.uIk("tabindex",1)},inputs:{component:"component",componentInputs:"componentInputs"},ngContentSelectors:bb,decls:4,vars:4,consts:[[3,"renderComponent","renderComponentInputs",4,"ngIf"],[3,"ngTemplateOutlet",4,"ngIf"],[4,"ngIf"],[3,"renderComponent","renderComponentInputs"],["renderComponentDirective",""],[3,"ngTemplateOutlet"]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,gb,2,2,"ng-container",0),r.YNc(1,mb,1,1,"ng-container",1),r.YNc(2,yb,2,1,"ng-container",2),r.YNc(3,vb,2,0,"ng-container",2)),2&t&&(r.Q6J("ngIf",e.component),r.xp6(1),r.Q6J("ngIf",e.content),r.xp6(1),r.Q6J("ngIf",e.container),r.xp6(1),r.Q6J("ngIf",!e.container))},directives:[ft,Zv,_t],encapsulation:2}),t})(),Cb=(()=>{class t{constructor(t,e,n,i,o,s,a){this.componentFactoryResolver=t,this.applicationRef=e,this.injector=n,this.dialog=i,this.registry=o,this.cd=s,this.viewContainerRef=a,this.alwaysRaised=!1,this.visible=!0,this.visibleChange=new r.vpe,this.closed=new r.vpe,this.componentInputs={}}ngOnChanges(t){this.visible?this.show():this.close()}setDialogContainer(t){this.container=t,this.wrapperComponentRef&&this.wrapperComponentRef.instance.setDialogContainer(t)}show(){if(this.externalWindow)return void this.electronWindow.focus();if(this.externalWindow=function(t,e,n,r){let i=window.screenTop+window.outerHeight/2-150;i=i>0?i:0;let o=window.screenLeft+window.outerWidth/2-150;return o=o>0?o:0,window.open("","","width=300, height=300, top="+i+", left="+o)}(),!this.externalWindow)return void this.dialog.alert("Error","Could not open window.");this.externalWindow.onunload=()=>{this.close()};const e=new Map;for(let t=0;t<window.document.styleSheets.length;t++){const n=window.document.styleSheets[t];if(!n.ownerNode)continue;const r=n.ownerNode.cloneNode(!0);e.set(n.ownerNode,r),this.externalWindow.document.head.appendChild(r)}this.observerStyles=new MutationObserver(t=>{for(const n of t){for(let t=0;t<n.addedNodes.length;t++){const r=n.addedNodes[t];if(!e.has(r)){const t=r.cloneNode(!0);e.set(r,t),this.externalWindow.document.head.appendChild(t)}}for(let t=0;t<n.removedNodes.length;t++){const r=n.removedNodes[t];if(e.has(r)){const t=e.get(r);t.parentNode.removeChild(t),e.delete(r)}}}}),this.observerStyles.observe(window.document.head,{childList:!0});const n=()=>{this.externalWindow&&(this.externalWindow.document.body.className=window.document.body.className)};this.observerClass=new MutationObserver(t=>{n()}),this.observerClass.observe(window.document.body,{attributeFilter:["class"]});const i=this.externalWindow.document;n(),this.electronWindow=Tl.isAvailable()?Tl.getRemote().BrowserWindow.getAllWindows()[0]:void 0,this.parentWindow=this.registry.getOuterActiveWindow(),this.parentWindow&&this.alwaysRaised&&(this.parentWindow.windowState.disableInputs.next(!0),this.parentWindow.electronWindow&&this.electronWindow.setParentWindow(this.parentWindow.electronWindow)),window.addEventListener("beforeunload",()=>{this.beforeUnload()}),this.portalHost=new Nl(i.body,this.componentFactoryResolver,this.applicationRef,this.injector),i.addEventListener("click",()=>ea()),i.addEventListener("focus",()=>ea()),i.addEventListener("blur",()=>ea()),i.addEventListener("keydown",()=>ea()),i.addEventListener("keyup",()=>ea()),i.addEventListener("keypress",()=>ea()),i.addEventListener("mousedown",()=>ea());const o=r.zs3.create({parent:this.injector,providers:[{provide:t,useValue:this},{provide:Ec,useValue:this.electronWindow},{provide:Oc,useValue:!1},{provide:s,useValue:this.externalWindow.document}]}),a=new Ml(xb,this.viewContainerRef,o);this.wrapperComponentRef=this.portalHost.attach(a),this.wrapperComponentRef.instance.component=this.component,this.wrapperComponentRef.instance.componentInputs=this.componentInputs,this.wrapperComponentRef.instance.content=this.template,this.container&&this.wrapperComponentRef.instance.setDialogContainer(this.container),this.visible=!0,this.visibleChange.emit(!0),this.wrapperComponentRef.changeDetectorRef.detectChanges(),this.wrapperComponentRef.location.nativeElement.focus(),this.cd.detectChanges()}beforeUnload(){this.externalWindow&&(this.portalHost&&(this.portalHost.detach(),this.portalHost.dispose(),delete this.portalHost),this.closed.emit(),this.parentFocusSub&&this.parentFocusSub.unsubscribe(),this.parentWindow&&this.alwaysRaised&&this.parentWindow.windowState.disableInputs.next(!1),this.externalWindow&&this.externalWindow.close(),delete this.externalWindow,this.observerStyles.disconnect(),this.observerClass.disconnect())}ngAfterViewInit(){}close(){this.visible=!1,this.visibleChange.emit(!1),this.beforeUnload(),requestAnimationFrame(()=>{this.applicationRef.tick()})}ngOnDestroy(){this.beforeUnload()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r._Vd),r.Y36(r.z2F),r.Y36(r.zs3),r.Y36(pb),r.Y36(Sc),r.Y36(r.sBO),r.Y36(r.s_b))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-external-dialog"]],viewQuery:function(t,e){if(1&t&&r.Gf(_b,5),2&t){let t;r.iGM(t=r.CRH())&&(e.template=t.first)}},inputs:{alwaysRaised:"alwaysRaised",visible:"visible",component:"component",componentInputs:"componentInputs"},outputs:{visibleChange:"visibleChange",closed:"closed"},features:[r.TTD],ngContentSelectors:bb,decls:2,vars:0,consts:[["template",""]],template:function(t,e){1&t&&(r.F$t(),r.YNc(0,wb,1,0,"ng-template",null,0,r.W1O))},encapsulation:2}),t})(),Sb=(()=>{class t{constructor(t,e,n){this.resolver=t,this.app=e,this.injector=n}open(t,e={},n={},r=null){const i=new Nl(document.body,this.resolver,this.app,this.injector),o=new Ml(Cb,r,r?r.injector:null),s=i.attach(o);return n&&n.alwaysRaised&&(s.instance.alwaysRaised=!0),s.instance.component=t,s.instance.componentInputs=e,s.instance.show(),s.changeDetectorRef.detectChanges(),s.instance.closed.subscribe(()=>{s.destroy()}),{window:s.instance,instance:s.instance.wrapperComponentRef.instance.renderComponentDirective.component.instance}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r._Vd),r.LFG(r.z2F),r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Tb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[],imports:[[]]}),t})(),Eb=(()=>{class t{static forRoot(){return{ngModule:t,providers:[Sc]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Sb],imports:[[Mt,Uv,Vv,Tb]]}),t})(),Ob=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Vv]]}),t})(),Ab=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Mt,Js,Vv]]}),t})(),Pb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Ot],imports:[[Mt,Js,Vv]]}),t})(),kb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Mt,Js,Xs]]}),t})(),Mb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),Ib=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Js,Mt,Vv,Ab]]}),t})(),Rb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[],imports:[[]]}),t})(),Db=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[],imports:[[Mt,Vv,Uv,Cl,Ab]]}),t})(),Nb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[pb],imports:[[Js,Mt,Cc,Eb,Ab,Tb,Pb]]}),t})(),Lb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Mt,Vv]]}),t})(),Fb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Mt]]}),t})();var Bb=n(85101);const jb=["*"];let $b=(()=>{class t extends ca{constructor(t,e,n){super(t,e,n),this.injector=t,this.cd=e,this.cdParent=n}get tabIndex(){return 1}get isChecked(){return!0===this.innerValue}onClick(){this.isDisabled||(this.touch(),this.innerValue=!this.innerValue)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.zs3),r.Y36(r.sBO),r.Y36(r.sBO,4))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-checkbox"]],hostVars:3,hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()}),2&t&&(r.Ikx("tabindex",e.tabIndex),r.ekj("checked",e.isChecked))},features:[r._Bn([la(t)]),r.qOj],ngContentSelectors:jb,decls:3,vars:1,consts:[[1,"box"],["name","check",3,"size"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"span",0),r._UZ(1,"dui-icon",1),r.qZA(),r.Hsn(2)),2&t&&(r.xp6(1),r.Q6J("size",12))},directives:[ua],styles:["[_nghost-%COMP%]{display:inline-block;vertical-align:middle;height:20px;line-height:20px;text-align:left}[_nghost-%COMP%]:focus{outline:0}.disabled[_nghost-%COMP%]{opacity:.6;pointer-events:none}.box[_ngcontent-%COMP%]{width:14px;height:14px;line-height:14px;margin-right:4px;vertical-align:top;margin-top:2px;background:#fff;border:1px solid #b8b8b8;border-top-color:#a5a5a5;border-radius:3px;display:inline-flex;align-items:center}dui-icon[_ngcontent-%COMP%]{opacity:0}.checked[_nghost-%COMP%]   .box[_ngcontent-%COMP%]{background:#3b88fd;border:1px solid #338ef4}.checked[_nghost-%COMP%]   .box[_ngcontent-%COMP%]   dui-icon[_ngcontent-%COMP%]{opacity:1;color:#fff;text-shadow:0 1px 1px #4d4d4da6}.dark[_nghost-%COMP%]   .box[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .box[_ngcontent-%COMP%]{background-image:linear-gradient(-180deg,#515151,#6a6a6a);box-shadow:0 0 1px 0 #0006,0 0 1px 0 #0003,inset 0 0 0 0 #ffffff40,inset 0 1px 0 0 #ffffff0f;border:1px solid #0000}.dark[_nghost-%COMP%]:active   .box[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]:active   .box[_ngcontent-%COMP%]{background-image:none;background-color:#7c7c7c}.dark.checked[_nghost-%COMP%]   .box[_ngcontent-%COMP%], .dark   .checked[_nghost-%COMP%]   .box[_ngcontent-%COMP%]{background-image:linear-gradient(-180deg,#1769e5,#165fd0)}.dark.checked[_nghost-%COMP%]:active   .box[_ngcontent-%COMP%], .dark   .checked[_nghost-%COMP%]:active   .box[_ngcontent-%COMP%]{background-image:none;background-color:#1f76ed}"],changeDetection:0}),t})();function Ub(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"dui-checkbox",9),r.NdJ("ngModelChange",function(e){const n=r.CHM(t).$implicit,i=r.oxw();return!!e&&i.chose(n.name)}),r.qZA(),r.BQk()}if(2&t){const t=e.$implicit;r.xp6(1),r.Q6J("ngModel",t.chosen)}}let Vb=(()=>{class t{constructor(t){this.dialog=t,this.filterFields=["name","type"],this.items=[],this.filterQuery="",this.chosen=new r.vpe}chose(t){this.dialog.close(),this.chosen.emit(t)}ngOnInit(){for(const[t,e]of Object.entries(this.fakerTypes))this.items.push({name:t,chosen:t===this.selected,type:e.type,example:e.example});this.items=this.items.slice()}}return t.dialogDefaults={width:"80%",height:"90%"},t.\u0275fac=function(e){return new(e||t)(r.Y36(tb))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{fakerTypes:"fakerTypes",selected:"selected"},outputs:{chosen:"chosen"},decls:11,vars:8,consts:[[1,"header"],["round","","clearer","","icon","filter","placeholder","Filter",3,"ngModel","ngModelChange"],["borderless","","noFocusOutline","",3,"items","filterQuery","filterFields"],["name","chosen","header","\u2713",3,"width"],[4,"duiTableCell"],["name","name",3,"width"],["name","type",3,"width"],["name","example",3,"width"],["closeDialog",""],[3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"dui-input",1),r.NdJ("ngModelChange",function(t){return e.filterQuery=t}),r.qZA(),r.qZA(),r.TgZ(2,"dui-table",2),r.TgZ(3,"dui-table-column",3),r.YNc(4,Ub,2,1,"ng-container",4),r.qZA(),r._UZ(5,"dui-table-column",5),r._UZ(6,"dui-table-column",6),r._UZ(7,"dui-table-column",7),r.qZA(),r.TgZ(8,"dui-dialog-actions"),r.TgZ(9,"dui-button",8),r._uU(10,"Cancel"),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngModel",e.filterQuery),r.xp6(1),r.Q6J("items",e.items)("filterQuery",e.filterQuery)("filterFields",e.filterFields),r.xp6(1),r.Q6J("width",50),r.xp6(2),r.Q6J("width",200),r.xp6(1),r.Q6J("width",100),r.xp6(1),r.Q6J("width",400))},directives:[ya,vs,Vs,Yu,qu,Vu,eb,au,nb,$b],styles:["dui-table[_ngcontent-%COMP%]{flex:1}.header[_ngcontent-%COMP%]{margin-bottom:12px}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}"]}),t})();function Zb(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"span",9),r._uU(2),r.qZA(),r.BQk()),2&t){const t=e.ngIf;r.xp6(2),r.Oqu(t.toString())}}function zb(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Zb,3,1,"ng-container",8),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",n.entity.getProperty(t.name))}}function Hb(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"orm-browser-seed-property",10),r.NdJ("modelChange",function(){return r.CHM(t),r.oxw(2).changed.emit()}),r.qZA(),r.BQk()}if(2&t){const t=e.ngIf,n=r.oxw().$implicit,i=r.oxw();r.xp6(1),r.Q6J("fakerTypes",i.fakerTypes)("model",n)("property",t)}}function qb(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Hb,2,3,"ng-container",8),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",n.entity.getProperty(t.name))}}function Yb(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw(2).$implicit,e=r.oxw();r.xp6(1),r.hij(" ",null==e.fakerTypes[t.faker]?null:e.fakerTypes[t.faker].example," ")}}function Gb(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Yb,2,1,"ng-container",8),r.BQk()),2&t){const t=e.ngIf,n=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",n.fake&&!t.isAutoIncrement&&!t.isReference)}}function Wb(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Gb,2,1,"ng-container",8),r.BQk()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",n.entity.getProperty(t.name))}}let Jb=(()=>{class t{constructor(){this.changed=new r.vpe}getProperties(t){return Object.values(t)}autoTypes(){!function(t,e,n,r=new Set){const i=(e,n)=>{e.isArray?i(e.getSubType(),n.getArray().seed):e.isMap?i(e.getSubType(),n.getMap().seed):("class"!==e.type||e.isReference)&&(e.isReference||(n.faker=(0,Bb.NH)(t,e),n.fake=!!n.faker))};for(const[o,s]of Object.entries(n))i(e.getProperty(o),s)}(this.fakerTypes,this.entity,this.properties),this.changed.emit()}resetTypes(){for(const t of Object.values(this.properties))t.faker="",t.array=void 0,t.map=void 0,t.value=void 0,t.fake=!1;this.changed.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-seed-properties"]],inputs:{entity:"entity",fakerTypes:"fakerTypes",properties:"properties"},outputs:{changed:"changed"},decls:13,vars:8,consts:[["padding","none",2,"margin","5px 0"],["textured","",3,"click"],["noFocusOutline","",3,"autoHeight","preferenceKey","sorting","items"],["name","name",3,"width"],["name","type",3,"width"],[4,"duiTableCell"],["name","value",1,"cell-value",3,"width"],["name","example",3,"width"],[4,"ngIf"],[2,"color","var(--text-grey)"],[3,"fakerTypes","model","property","modelChange"]],template:function(t,e){1&t&&(r.TgZ(0,"dui-button-group",0),r.TgZ(1,"dui-button",1),r.NdJ("click",function(){return e.resetTypes()}),r._uU(2,"Reset"),r.qZA(),r.TgZ(3,"dui-button",1),r.NdJ("click",function(){return e.autoTypes()}),r._uU(4,"Auto"),r.qZA(),r.qZA(),r.TgZ(5,"dui-table",2),r._UZ(6,"dui-table-column",3),r.TgZ(7,"dui-table-column",4),r.YNc(8,zb,2,1,"ng-container",5),r.qZA(),r.TgZ(9,"dui-table-column",6),r.YNc(10,qb,2,1,"ng-container",5),r.qZA(),r.TgZ(11,"dui-table-column",7),r.YNc(12,Wb,2,1,"ng-container",5),r.qZA(),r.qZA()),2&t&&(r.xp6(5),r.Q6J("autoHeight",!0)("preferenceKey","orm-browser/seed/"+e.entity.getName())("sorting",!1)("items",e.getProperties(e.properties)),r.xp6(1),r.Q6J("width",200),r.xp6(1),r.Q6J("width",100),r.xp6(2),r.Q6J("width",320),r.xp6(2),r.Q6J("width",350))},encapsulation:2}),t})();function Xb(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",8),r.TgZ(2,"dui-input",9),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().ngIf.amount=e}),r.qZA(),r.TgZ(3,"dui-checkbox",10),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().ngIf.truncate=e}),r._uU(4,"Delete all before seeding"),r.qZA(),r.qZA(),r.TgZ(5,"orm-browser-seed-properties",11),r.NdJ("changed",function(){r.CHM(t);const e=r.oxw(2).$implicit;return r.oxw(2).typeChanged(e)}),r.qZA(),r.BQk()}if(2&t){const t=r.oxw().ngIf,e=r.oxw().$implicit,n=r.oxw(2);r.xp6(2),r.Q6J("ngModel",t.amount),r.xp6(1),r.Q6J("ngModel",t.truncate),r.xp6(2),r.Q6J("fakerTypes",n.fakerTypes)("entity",e)("properties",t.properties)}}function Qb(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"h3"),r.TgZ(2,"dui-checkbox",7),r.NdJ("ngModelChange",function(t){return e.ngIf.active=t}),r._uU(3),r.qZA(),r.qZA(),r.YNc(4,Xb,6,5,"ng-container",6),r.BQk()),2&t){const t=e.ngIf,n=r.oxw().$implicit;r.xp6(2),r.Q6J("ngModel",t.active),r.xp6(1),r.Oqu(n.getClassName()),r.xp6(1),r.Q6J("ngIf",t.active)}}function Kb(t,e){if(1&t&&(r.TgZ(0,"div",5),r.YNc(1,Qb,5,3,"ng-container",6),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(1),r.Q6J("ngIf",n.state.getSeedSettings(n.fakerTypes,n.database.name,t.getName()))}}function t_(t,e){if(1&t&&(r.TgZ(0,"div",3),r.YNc(1,Kb,2,1,"div",4),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.filterEntitiesToList(t.database.getClassSchemas()))("ngForTrackBy",t.trackBySchema)}}let e_=(()=>{class t{constructor(t,e,n,r){this.controllerClient=t,this.cd=e,this.duiDialog=n,this.state=r,this.trackBySchema=Ov,this.trackByIndex=Sv,this.filterEntitiesToList=Tv,this.seeding=!1}ngOnChanges(){var t=this;return(0,Co.Z)(function*(){yield t.load()})()}load(){var t=this;return(0,Co.Z)(function*(){try{t.fakerTypes=yield t.controllerClient.browser.getFakerTypes(),t.fakerTypesArray=[];for(const[e,n]of Object.entries(t.fakerTypes))t.fakerTypesArray.push({name:e,type:n.type})}finally{}t.cd.detectChanges()})()}chooseType(t,e){var n;if(!this.fakerTypes)return;const r=(n=this.state.getSeedSettings(this.fakerTypes,this.database.name,t.getName()).properties)[e]||(n[e]=new Bb.W0(e)),{component:i}=this.duiDialog.open(Vb,{fakerTypes:this.fakerTypes,selected:r.faker});i.chosen.subscribe(t=>{r.faker=t,this.cd.detectChanges()})}typeChanged(t){this.state.storeSeedSettings(this.database.name,t.getName())}seed(){var t=this;return(0,Co.Z)(function*(){if(yield t.duiDialog.confirm("Seed now?","You are about to seed your database. All content may be lost.")){t.seeding=!0,t.cd.detectChanges();try{const e={entities:{}};for(const n of Tv(t.database.getClassSchemas())){const r=t.state.getStoreKey(t.database.name,n.getName()),i=t.state.seedSettings[r];i&&i.active&&(e.entities[n.getName()]=i)}yield t.controllerClient.browser.seed(t.database.name,e)}catch(e){yield t.duiDialog.alert("Error seeding",e)}t.state.onDataChange.emit(),t.seeding=!1,t.cd.detectChanges()}})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(kv.M),r.Y36(r.sBO),r.Y36(pb),r.Y36(Pv.Ky))},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-seed"]],inputs:{database:"database"},features:[r.TTD],decls:4,vars:2,consts:[[1,"actions"],[3,"disabled","click"],["class","entities",4,"ngIf"],[1,"entities"],["class","entity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"entity"],[4,"ngIf"],[3,"ngModel","ngModelChange"],[1,"settings"],["lightFocus","","round","","type","number","placeholder","amount",3,"ngModel","ngModelChange"],[2,"margin-left","5px",3,"ngModel","ngModelChange"],[3,"fakerTypes","entity","properties","changed"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"dui-button",1),r.NdJ("click",function(){return e.seed()}),r._uU(2,"Seed"),r.qZA(),r.qZA(),r.YNc(3,t_,2,2,"div",2)),2&t&&(r.xp6(1),r.Q6J("disabled",e.seeding),r.xp6(2),r.Q6J("ngIf",e.database&&e.fakerTypes))},directives:[au,ft,ht,$b,vs,Vs,ya,Jb],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.actions[_ngcontent-%COMP%]{padding:0 20px}.entities[_ngcontent-%COMP%]{padding:15px 20px;flex:1;overflow:auto}body[_nghost-%COMP%]   dui-table[_ngcontent-%COMP%]     .cell-value, body   [_nghost-%COMP%]   dui-table[_ngcontent-%COMP%]     .cell-value{display:inline-flex;align-items:center;height:22px;white-space:nowrap}body[_nghost-%COMP%]   dui-table[_ngcontent-%COMP%]     .cell-value dui-checkbox, body   [_nghost-%COMP%]   dui-table[_ngcontent-%COMP%]     .cell-value dui-checkbox{margin-right:5px}.entity[_ngcontent-%COMP%]{margin-bottom:15px}.entity[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%]{margin-top:5px}"]}),t})();var n_=n(61966),r_=n.n(n_);class i_{constructor(t=11,e=getComputedStyle(document.querySelector(".dui-body")||document.body).fontFamily){this.fontSize=t,this.fontFamily=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.canvas.style.display="none"}destroy(){document.body.removeChild(this.canvas)}getDimensions(t){this.context.font=this.fontSize+"px "+this.fontFamily;const e=this.context.measureText(t);return{width:e.width,height:e.actualBoundingBoxAscent+e.actualBoundingBoxDescent}}}const o_=["graph"];function s_(t,e){if(1&t&&(r.O4$(),r._UZ(0,"path")),2&t){const t=e.$implicit;r.Tol(t.class),r.uIk("d",t.d)}}function a_(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.hij(" ",t.property.name," ")}}function l_(t,e){if(1&t&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&t){const t=e.$implicit,n=r.oxw(3);r.xp6(1),r.hij(" ",n.propertyLabel(t)," ")}}function c_(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"div",6),r._uU(2),r.qZA(),r.YNc(3,l_,2,1,"div",7),r.BQk()),2&t){const t=r.oxw().$implicit;r.xp6(2),r.hij(" ",t.entity.getClassName()," "),r.xp6(1),r.Q6J("ngForOf",t.properties)}}function u_(t,e){if(1&t&&(r.O4$(),r.kcU(),r.TgZ(0,"div",4),r.YNc(1,a_,2,1,"ng-container",5),r.YNc(2,c_,4,2,"ng-container",5),r.qZA()),2&t){const t=e.$implicit;r.Udp("left",t.x-t.width/2,"px")("top",t.y-t.height/2,"px")("width",t.width,"px")("height",t.height,"px"),r.xp6(1),r.Q6J("ngIf",t.property),r.xp6(1),r.Q6J("ngIf",t.entity&&t.properties)}}let h_=(()=>{class t{constructor(t,e){this.cd=t,this.host=e,this.nodes=[],this.edges=[],this.width=1e3,this.height=500,this.graphWidth=500,this.graphHeight=500,this.browserText=new i_}ngOnChanges(t){t.database&&this.loadGraph()}ngAfterViewInit(){setTimeout(()=>this.loadGraph(),100)}propertyLabel(t){let e=t.toString(!1);return t.isReference&&(e="Reference<"+e+">"),t.backReference&&(e="BackReference<"+e+">"),t.isId&&(e="Primary<"+e+">"),t.name+(t.isOptional?"?":"")+": "+e}loadGraph(){if(!this.database)return;const t=new Ju.graphlib.Graph({directed:!0,compound:!0,multigraph:!1});t.setGraph({nodesep:50,ranksep:50,rankdir:"LR",align:"DL"}),t.setDefaultEdgeLabel(()=>({labelpos:"c",labeloffset:0})),this.nodes=[],this.edges=[];for(const a of this.database.getClassSchemas()){const e=[...a.getProperties()];let n=this.browserText.getDimensions(a.getClassName()).width+25;for(const t of e){const e=this.browserText.getDimensions(this.propertyLabel(t)).width+25;e>n&&(n=e)}t.setNode(a.getName(),{entity:a,properties:e,width:n,height:28+16*a.getPropertiesMap().size})}function e(n,r,i){"partial"===i.type||"array"===i.type||"map"===i.type?e(n,r,i.getSubType()):"class"===i.type&&t.setEdge(n.getName(),i.getResolvedClassSchema().getName())}for(const a of this.database.getClassSchemas())for(const t of a.getProperties())e(a,t,t);try{(0,Ju.layout)(t)}catch(s){console.error("Could not calc layout for graph",s)}let n=0,r=0;this.graphWidth=t.graph().width||0,this.graphHeight=t.graph().height||0,n*=-1,r*=-1;const i={};for(const a of t.nodes()){const e=t.node(a);i[a]=e,this.nodes.push(e)}const o=(t,e,n,r)=>{if("array"!==r.type&&"map"!==r.type&&"partial"!==r.type||o(t,e,n,r.getSubType()),"class"===r.type){const o=i[r.getResolvedClassSchema().getName()];let s={x:e.x-Math.floor(e.width/2),y:e.y-Math.floor(e.height/2)},a={x:o.x-Math.floor(o.width/2),y:o.y-Math.floor(o.height/2)+Math.floor(14)};if(a.x>s.x?s.x+=e.width:s.x>a.x&&(a.x+=o.width),s.y+=28+16*t+Math.floor(8),s.x>a.x){const t=s;s=a,a=t}const l=a.x-Math.floor(Math.abs(a.x-s.x)/2),c={d:`M ${s.x} ${s.y} C ${l} ${s.y} ${l} ${a.y} ${a.x} ${a.y}`};n.backReference?c.class="back-reference":n.isReference||(c.class="embedded"),this.edges.push(c)}};for(const a of t.nodes()){const t=i[a];for(let e=0;e<t.properties.length;e++){const n=t.properties[e];o(e,t,n,n)}}this.cd.detectChanges(),this.graphElement&&(this.graphPanZoom||(this.graphPanZoom=r_()(this.graphElement.nativeElement,{bounds:!0,zoomSpeed:.065,zoomDoubleClickSpeed:1})),this.zoomToFit(!0)),this.cd.detectChanges()}zoomToFit(t=!1){var e=this;return(0,Co.Z)(function*(){e._zoomToFit(),requestAnimationFrame(e._zoomToFit.bind(e,t))})()}_zoomToFit(t=!1){var e=this;return(0,Co.Z)(function*(){try{if(e.graphElement&&e.graphPanZoom){const n=e.graphElement.nativeElement,r=e.host.nativeElement.getBoundingClientRect(),i=n.getBoundingClientRect(),o=e.graphPanZoom.getTransform(),s=i.width/o.scale,a=i.height/o.scale,l=(r.width-20)/s,c=(r.height-20)/a;let u=l<c?l:c;if(!t){if(o.scale>1.001)return void e.graphPanZoom.smoothZoomAbs(r.width/2,r.height/2,1);Math.abs(u-o.scale)<.005&&(u=1)}u=Math.min(1,u);const h=s*o.scale,d=a*o.scale,f=h>r.width?-h/2+r.width/2:r.width/2-h/2,p=d>r.height?-d/2+r.height/2:r.height/2-d/2;e.graphPanZoom.pause(),e.graphPanZoom.resume(),e.graphPanZoom.moveBy(Math.floor(f-o.x),Math.floor(p-o.y),!1),e.graphPanZoom.smoothZoomAbs(Math.floor(o.x+s*o.scale/2),Math.floor(o.y+a*o.scale/2),1)}}catch(n){console.log("error zooming",n)}})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO),r.Y36(r.SBq))},t.\u0275cmp=r.Xpm({type:t,selectors:[["database-graph"]],viewQuery:function(t,e){if(1&t&&r.Gf(o_,5),2&t){let t;r.iGM(t=r.CRH())&&(e.graphElement=t.first)}},inputs:{database:"database"},features:[r.TTD],decls:5,vars:10,consts:[[1,"nodes",3,"dblclick"],["graph",""],[3,"class",4,"ngFor","ngForOf"],["class","node",3,"left","top","width","height",4,"ngFor","ngForOf"],[1,"node"],[4,"ngIf"],[1,"header"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0,1),r.NdJ("dblclick",function(){return e.zoomToFit()}),r.O4$(),r.TgZ(2,"svg"),r.YNc(3,s_,1,3,"path",2),r.qZA(),r.YNc(4,u_,3,10,"div",3),r.qZA()),2&t&&(r.Udp("width",e.graphWidth,"px")("height",e.graphHeight,"px"),r.xp6(2),r.Udp("width",e.graphWidth,"px")("height",e.graphHeight,"px"),r.xp6(1),r.Q6J("ngForOf",e.edges),r.xp6(1),r.Q6J("ngForOf",e.nodes))},directives:[ht,ft],styles:["[_nghost-%COMP%]{position:relative;display:block;height:100%;width:100%;overflow:hidden}.svg-container[_ngcontent-%COMP%]{top:0;bottom:50px}.actions[_ngcontent-%COMP%], .svg-container[_ngcontent-%COMP%]{position:absolute;left:0;right:0}.actions[_ngcontent-%COMP%]{height:50px;bottom:0}[_nghost-%COMP%]     svg{position:absolute;left:0;top:0}[_nghost-%COMP%]     svg path{fill:none;stroke:var(--line-color-prominent);opacity:.6;stroke-width:1px}[_nghost-%COMP%]     svg path.back-reference{stroke-dasharray:5,5}[_nghost-%COMP%]     svg path.embedded{stroke:var(--color-orange)}[_nghost-%COMP%]     svg rect{fill:#fff}[_nghost-%COMP%]     svg .node circle, [_nghost-%COMP%]     svg .node ellipse, [_nghost-%COMP%]     svg .node rect{stroke:#333;opacity:.8;fill-opacity:0}[_nghost-%COMP%]     svg .edgePath path{stroke:#333;fill:#333;fill-opacity:1;stroke-opacity:1}[_nghost-%COMP%]     svg .cluster{stroke:#999;fill-opacity:0;stroke-opacity:.6}[_nghost-%COMP%]     svg .entity-name rect{fill:#222;fill-opacity:.3}.node[_ngcontent-%COMP%]{position:absolute;background-color:#484848e6;border:1px solid var(--line-color-light);font-size:12px;line-height:16px;padding:5px;text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.node[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:600}.node[_ngcontent-%COMP%]   .property[_ngcontent-%COMP%]{line-height:16px;padding:1px 0}.dui-theme-light[_nghost-%COMP%]   .node[_ngcontent-%COMP%], .dui-theme-light   [_nghost-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#bdbdbdbf;border:1px solid var(--line-color)}"]}),t})();function d_(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"database-graph",3),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("database",t.database)}}function f_(t,e){1&t&&(r.TgZ(0,"div"),r._uU(1," Load migration "),r.qZA())}function p_(t,e){1&t&&(r.TgZ(0,"div",8),r._uU(1," No migrations available. Your models are in sync with the database schema. "),r.qZA())}function g_(t,e){if(1&t&&(r.TgZ(0,"div",12),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.hij(" ",t," ")}}function m_(t,e){if(1&t&&(r.TgZ(0,"div"),r.TgZ(1,"h3"),r._uU(2),r.qZA(),r.TgZ(3,"div",10),r._uU(4),r.qZA(),r.YNc(5,g_,2,1,"div",11),r.qZA()),2&t){const t=e.$implicit;r.xp6(2),r.Oqu(t.key),r.xp6(2),r.Oqu(t.value.diff),r.xp6(1),r.Q6J("ngForOf",t.value.sql)}}function y_(t,e){if(1&t&&(r.TgZ(0,"div",8),r.YNc(1,m_,6,3,"div",9),r.ALo(2,"keyvalue"),r.qZA()),2&t){const t=r.oxw(3);r.xp6(1),r.Q6J("ngForOf",r.lcZ(2,1,t.migrations))}}function v_(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"dui-button",6),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).resetAll()}),r._uU(2,"Reset all"),r.qZA(),r.TgZ(3,"dui-button",6),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).migrate()}),r._uU(4,"Migrate all"),r.qZA(),r.YNc(5,p_,2,0,"div",7),r.YNc(6,y_,3,3,"div",7),r.qZA()}if(2&t){const t=r.oxw(2);r.xp6(5),r.Q6J("ngIf",t.empty(t.migrations)),r.xp6(1),r.Q6J("ngIf",!t.empty(t.migrations))}}function b_(t,e){if(1&t&&(r.ynx(0),r.YNc(1,f_,2,0,"div",4),r.YNc(2,v_,7,2,"div",4),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.loadingMigrations),r.xp6(1),r.Q6J("ngIf",!t.loadingMigrations)}}class __{constructor(t,e,n,r,i){var o=this;this.controllerClient=t,this.cd=e,this.duiDialog=n,this.state=r,this.activatedRoute=i,this.trackByIndex=Sv,this.trackByProperty=Av,this.tab="model",this.empty=va.cS,this.migrations={},this.loadingMigrations=!1,i&&(this.routeSub=i.params.subscribe(function(){var t=(0,Co.Z)(function*(t){o.state.databases=yield o.controllerClient.getDatabases(),o.database=o.state.getDatabase(decodeURIComponent(t.database)),o.cd.detectChanges()});return function(e){return t.apply(this,arguments)}}()))}ngOnDestroy(){}setTab(t){var e=this;return(0,Co.Z)(function*(){e.tab=t,"migration"===t&&(yield e.loadMigration())})()}resetAll(){var t=this;return(0,Co.Z)(function*(){if(t.database&&(yield t.duiDialog.confirm("Reset all?","All database tables will be reset. All content deleted."))){try{yield t.controllerClient.browser.resetAllTables(t.database.name)}catch(e){yield t.duiDialog.alert("Error resetting all",e.message)}yield t.loadMigration(),t.state.onDataChange.emit()}})()}migrate(){var t=this;return(0,Co.Z)(function*(){if(t.database){try{yield t.controllerClient.browser.migrate(t.database.name)}catch(e){yield t.duiDialog.alert("Error migrating",e.message)}yield t.loadMigration(),t.state.onDataChange.emit()}})()}loadSeed(){return(0,Co.Z)(function*(){})()}loadMigration(){var t=this;return(0,Co.Z)(function*(){t.loadingMigrations=!0,t.cd.detectChanges();try{t.migrations=yield t.controllerClient.browser.getMigrations(t.database.name)}finally{t.loadingMigrations=!1,t.cd.detectChanges()}})()}}__.\u0275fac=function(t){return new(t||__)(r.Y36(kv.M),r.Y36(r.sBO),r.Y36(pb),r.Y36(Pv.Ky),r.Y36(Ir,8))},__.\u0275cmp=r.Xpm({type:__,selectors:[["orm-browser-database"]],inputs:{database:"database"},decls:14,vars:9,consts:[[1,"header"],[3,"active","click"],[1,"layout",3,"hidden"],[3,"database"],[4,"ngIf"],[1,"layout","migration-container",3,"hidden"],[3,"click"],["class","migrations",4,"ngIf"],[1,"migrations"],[4,"ngFor","ngForOf"],[1,"diff","text-selection"],["class","sql text-selection",4,"ngFor","ngForOf"],[1,"sql","text-selection"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"dui-button-group"),r.TgZ(2,"dui-tab-button",1),r.NdJ("click",function(){return e.setTab("model")}),r._uU(3,"Model"),r.qZA(),r.TgZ(4,"dui-tab-button",1),r.NdJ("click",function(){return e.setTab("migration")}),r._uU(5,"Migration "),r.qZA(),r.TgZ(6,"dui-tab-button",1),r.NdJ("click",function(){return e.setTab("seed")}),r._uU(7,"Seed"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(8,"div",2),r._UZ(9,"orm-browser-seed",3),r.qZA(),r.TgZ(10,"div",2),r.YNc(11,d_,2,1,"ng-container",4),r.qZA(),r.TgZ(12,"div",5),r.YNc(13,b_,3,2,"ng-container",4),r.qZA()),2&t&&(r.xp6(2),r.Q6J("active","model"===e.tab),r.xp6(2),r.Q6J("active","migration"===e.tab),r.xp6(2),r.Q6J("active","seed"===e.tab),r.xp6(2),r.Q6J("hidden","seed"!==e.tab),r.xp6(1),r.Q6J("database",e.database),r.xp6(1),r.Q6J("hidden","model"!==e.tab),r.xp6(1),r.Q6J("ngIf",e.database),r.xp6(1),r.Q6J("hidden","migration"!==e.tab),r.xp6(1),r.Q6J("ngIf",e.database))},directives:[lu,ph,e_,ft,h_,au,ht],pipes:[At],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.header[_ngcontent-%COMP%]{flex:0 0 50px;display:flex;padding:0 12px;justify-content:flex-start;align-items:center}[hidden][_ngcontent-%COMP%]{display:none!important}.layout[_ngcontent-%COMP%]{display:flex;height:100%;overflow:auto}.migration-container[_ngcontent-%COMP%]{display:block;padding:0 20px 20px}.migrations[_ngcontent-%COMP%]{margin:15px 0}.diff[_ngcontent-%COMP%], .sql[_ngcontent-%COMP%]{white-space:pre;margin-bottom:5px;margin-left:15px}"]}),bv([Zl()],__.prototype,"routeSub",void 0);var w_=n(7652);const x_=["*"],C_=["dropdown"];function S_(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"dui-button-group",3),r.Hsn(2),r._UZ(3,"dui-button",4),r.qZA(),r.BQk()),2&t){r.oxw();const t=r.MAs(3);r.xp6(3),r.Q6J("openDropdown",t)}}function T_(t,e){if(1&t&&(r.TgZ(0,"div",9),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Oqu(t.placeholder)}}function E_(t,e){if(1&t&&r.GkF(0,11),2&t){const t=r.oxw().ngIf;r.Q6J("ngTemplateOutlet",t.dynamic.template)}}function O_(t,e){if(1&t&&(r.TgZ(0,"div"),r._UZ(1,"div",12),r.qZA()),2&t){const t=r.oxw().ngIf;r.xp6(1),r.Q6J("innerHTML",t.element.nativeElement.innerHTML,r.oJD)}}function A_(t,e){if(1&t&&(r.ynx(0),r.YNc(1,E_,1,1,"ng-container",10),r.YNc(2,O_,2,1,"div",0),r.BQk()),2&t){const t=e.ngIf;r.xp6(1),r.Q6J("ngIf",t.dynamic),r.xp6(1),r.Q6J("ngIf",!t.dynamic)}}function P_(t,e){if(1&t&&(r.ynx(0),r.YNc(1,T_,2,1,"div",5),r.TgZ(2,"div",6),r.YNc(3,A_,3,2,"ng-container",0),r.qZA(),r.TgZ(4,"div",7),r._UZ(5,"dui-icon",8),r.qZA(),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",!t.isSelected),r.xp6(2),r.Q6J("ngIf",void 0!==t.innerValue&&t.optionsValueMap.get(t.innerValue)),r.xp6(2),r.Q6J("size",12)}}function k_(t,e){1&t&&r._UZ(0,"dui-dropdown-separator")}function M_(t,e){if(1&t&&r.GkF(0,11),2&t){const t=r.oxw(2).$implicit;r.Q6J("ngTemplateOutlet",t.dynamic.template)}}function I_(t,e){if(1&t&&(r.TgZ(0,"div"),r._UZ(1,"div",12),r.qZA()),2&t){const t=r.oxw(2).$implicit;r.xp6(1),r.Q6J("innerHTML",t.element.nativeElement.innerHTML,r.oJD)}}function R_(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-dropdown-item",15),r.NdJ("click",function(){r.CHM(t);const e=r.oxw().$implicit;return r.oxw(2).select(e.value)}),r.YNc(1,M_,1,1,"ng-container",10),r.YNc(2,I_,2,1,"div",0),r.qZA()}if(2&t){const t=r.oxw().$implicit,e=r.oxw(2);r.Q6J("selected",e.innerValue===t.value),r.xp6(1),r.Q6J("ngIf",t.dynamic),r.xp6(1),r.Q6J("ngIf",!t.dynamic)}}function D_(t,e){if(1&t&&(r.ynx(0),r.YNc(1,k_,1,0,"dui-dropdown-separator",0),r.YNc(2,R_,3,3,"dui-dropdown-item",14),r.BQk()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(1),r.Q6J("ngIf",n.isSeparator(t)),r.xp6(1),r.Q6J("ngIf",!n.isSeparator(t))}}function N_(t,e){if(1&t&&(r.ynx(0),r.YNc(1,D_,3,2,"ng-container",13),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.options.toArray())}}const L_=[[["dui-button"]]],F_=["dui-button"];let B_=(()=>{class t{constructor(t){this.template=t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","dynamicOption",""]]}),t})(),j_=(()=>{class t{constructor(t){this.element=t}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-option"]],contentQueries:function(t,e,n){if(1&t&&r.Suo(n,B_,5),2&t){let t;r.iGM(t=r.CRH())&&(e.dynamic=t.first)}},inputs:{value:"value"},ngContentSelectors:x_,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},encapsulation:2}),t})(),$_=(()=>{class t{constructor(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["dui-option-separator"]],features:[r._Bn([{provide:j_,useExisting:t}])]}),t})();class U_{}let V_=(()=>{class t extends ca{constructor(t,e,n,r,i){super(e,r,i),this.overlay=t,this.injector=e,this.element=n,this.cd=r,this.cdParent=i,this.placeholder="",this.textured=!1,this.small=!1,this.label="",this.optionsValueMap=new Map,this.innerValue=new U_}isSeparator(t){return t instanceof $_}ngAfterViewInit(){this.options&&(this.changeSubscription=this.options.changes.subscribe(()=>this.updateMap()),setTimeout(()=>{this.updateMap()}))}select(t){this.innerValue=t,this.touch(),this.dropdown.close()}onClick(){this.disabled||this.button||this.dropdown.toggle()}ngOnChanges(t){}open(){this.dropdown&&this.dropdown.open()}writeValue(t){var e=()=>super.writeValue,n=this;return(0,Co.Z)(function*(){e().call(n,t)})()}get isSelected(){return!(this.innerValue instanceof U_)}updateMap(){if(this.optionsValueMap.clear(),this.options){for(const t of this.options.toArray())this.optionsValueMap.set(t.value,t);this.cd.detectChanges()}}ngOnDestroy(){this.changeSubscription&&this.changeSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(wc),r.Y36(r.zs3),r.Y36(r.SBq),r.Y36(r.sBO),r.Y36(r.sBO,4))},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-select"]],contentQueries:function(t,e,n){if(1&t&&(r.Suo(n,au,5),r.Suo(n,j_,5)),2&t){let t;r.iGM(t=r.CRH())&&(e.button=t.first),r.iGM(t=r.CRH())&&(e.options=t)}},viewQuery:function(t,e){if(1&t&&r.Gf(C_,5),2&t){let t;r.iGM(t=r.CRH())&&(e.dropdown=t.first)}},hostVars:9,hostBindings:function(t,e){1&t&&r.NdJ("mousedown",function(){return e.onClick()}),2&t&&(r.uIk("tabIndex",1),r.ekj("split",!!e.button)("textured",!1!==e.textured)("small",!1!==e.small)("selected",e.isSelected))},inputs:{placeholder:"placeholder",textured:"textured",small:"small"},features:[r._Bn([la(t)]),r.qOj,r.TTD],ngContentSelectors:F_,decls:5,vars:4,consts:[[4,"ngIf"],[3,"host"],["dropdown",""],["padding","none"],["tight","","textured","","icon","arrow_down",1,"split-knob",2,"padding","0 2px",3,"openDropdown"],["class","placeholder",4,"ngIf"],[1,"value"],[1,"knob"],["name","arrows",3,"size"],[1,"placeholder"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"innerHTML"],[4,"ngFor","ngForOf"],[3,"selected","click",4,"ngIf"],[3,"selected","click"]],template:function(t,e){1&t&&(r.F$t(L_),r.YNc(0,S_,4,1,"ng-container",0),r.YNc(1,P_,6,3,"ng-container",0),r.TgZ(2,"dui-dropdown",1,2),r.YNc(4,N_,2,1,"ng-container",0),r.qZA()),2&t&&(r.Q6J("ngIf",e.button),r.xp6(1),r.Q6J("ngIf",!e.button),r.xp6(1),r.Q6J("host",e.element.nativeElement),r.xp6(2),r.Q6J("ngIf",e.options))},directives:[ft,yu,lu,au,vu,ua,_t,ht,wu,xu],styles:["[_nghost-%COMP%]:focus{outline:0}[_nghost-%COMP%]:not(.split){display:inline-block;position:relative;vertical-align:middle;width:100px;height:21px;line-height:18px;text-align:left;padding-left:8px;padding-right:20px;border-radius:4px;font-size:12px}.small[_nghost-%COMP%]{height:18px;font-size:11px;font-weight:500}.split[_nghost-%COMP%]{display:inline-flex;flex-direction:row}.disabled[_nghost-%COMP%]{opacity:.6;color:grey;pointer-events:none}.knob[_ngcontent-%COMP%]{position:absolute;right:-1px;bottom:-1px;top:-1px;padding-left:1px;border-radius:0 3px 3px 0;width:17px;color:#fff;display:flex;align-items:center;align-content:center;justify-content:space-around}.split-knob[_ngcontent-%COMP%]{flex:0 25px}dui-icon[_ngcontent-%COMP%]{color:#fff}select[_ngcontent-%COMP%]{border:0;color:#0000;background-color:initial;left:0;right:0;width:100%;height:100%;outline:0}.placeholder[_ngcontent-%COMP%], .value[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0}.placeholder[_ngcontent-%COMP%], .value[_ngcontent-%COMP%]{left:8px;right:17px;white-space:pre;overflow:hidden;text-overflow:ellipsis}.placeholder[_ngcontent-%COMP%]   dui-icon[_ngcontent-%COMP%], .value[_ngcontent-%COMP%]   dui-icon[_ngcontent-%COMP%]{overflow:visible}.placeholder[_ngcontent-%COMP%]{display:block;color:var(--text-grey)}.value[_ngcontent-%COMP%]{display:none}.selected[_nghost-%COMP%]   .placeholder[_ngcontent-%COMP%]{display:none}.selected[_nghost-%COMP%]   .value[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.light[_nghost-%COMP%]:not(.split), .light   [_nghost-%COMP%]:not(.split){background:#fff;border-color:#c9c9c9 #c2c2c2 #acacac;border-style:solid;border-width:1px;box-shadow:0 1px 0 #e5e5e5}.light[_nghost-%COMP%]:not(.split):not(.disabled):not(.textured)   .knob[_ngcontent-%COMP%], .light   [_nghost-%COMP%]:not(.split):not(.disabled):not(.textured)   .knob[_ngcontent-%COMP%]{border-top:1px solid #4990fa;border-right:1px solid #3383fc;border-bottom:1px solid #0063ff;background-image:linear-gradient(-180deg,#69a3fb,#599afc 20%,#428dfd 45%,#1974ff 83%,#0d6dff)}.light[_nghost-%COMP%]:not(.split).disabled   dui-icon[_ngcontent-%COMP%], .light   [_nghost-%COMP%]:not(.split).disabled   dui-icon[_ngcontent-%COMP%]{border-top:1px solid #0000;border-bottom:1px solid #0000;border-right:1px solid #0000;color:grey}.light[_nghost-%COMP%]:not(.split).textured, .light   [_nghost-%COMP%]:not(.split).textured{border-color:#c9cac9 #c6c7c6 #a1a1a1;border-style:solid;border-width:1px;background-image:linear-gradient(-180deg,#fdfdfd 5%,#fafafa 0,#f6f6f6 55%,#f1f1f1 99%);box-shadow:none}.light[_nghost-%COMP%]:not(.split).textured   dui-icon[_ngcontent-%COMP%], .light   [_nghost-%COMP%]:not(.split).textured   dui-icon[_ngcontent-%COMP%]{color:#585858}.light[_nghost-%COMP%]:not(.split).textured:not(.disabled).active, .light   [_nghost-%COMP%]:not(.split).textured:not(.disabled).active, .light[_nghost-%COMP%]:not(.split).textured:not(.disabled):active, .light   [_nghost-%COMP%]:not(.split).textured:not(.disabled):active{background-image:linear-gradient(-180deg,#eee 5%,#e4e4e4 0,#e2e2e2 49%,#dcdcdc)}.dark[_nghost-%COMP%]:not(.split).textured, .dark   [_nghost-%COMP%]:not(.split).textured{background-color:#62696f}.dark[_nghost-%COMP%]:not(.split).textured.active, .dark   [_nghost-%COMP%]:not(.split).textured.active, .dark[_nghost-%COMP%]:not(.split).textured:active, .dark   [_nghost-%COMP%]:not(.split).textured:active{background:#797f84}.dark[_nghost-%COMP%]:not(.split), .dark   [_nghost-%COMP%]:not(.split){background-image:linear-gradient(-180deg,#787878 1px,#696969 0,#696969 95%);border-left:1px solid #303030;border-right:1px solid #303030}.dark[_nghost-%COMP%]:not(.split).active, .dark   [_nghost-%COMP%]:not(.split).active, .dark[_nghost-%COMP%]:not(.split):active, .dark   [_nghost-%COMP%]:not(.split):active{background-image:none;background-color:#797f84}.dark[_nghost-%COMP%]:not(.split):not(.disabled):not(.textured)   .knob[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]:not(.split):not(.disabled):not(.textured)   .knob[_ngcontent-%COMP%]{border-top:1px solid #293239;border-bottom:1px solid #232a31;border-right:1px solid #273037;background-image:linear-gradient(-180deg,#1768e5,#145ccc)}"]}),t})();function Z_(t,e){1&t&&(r.ynx(0),r.TgZ(1,"div",3),r._uU(2,"undefined"),r.qZA(),r.BQk())}function z_(t,e){1&t&&(r.ynx(0),r.TgZ(1,"div",4),r._uU(2,"null"),r.qZA(),r.BQk())}function H_(t,e){if(1&t&&r._UZ(0,"orm-browser-property-view",7),2&t){const t=r.oxw(2);r.Q6J("model",t.model)("property",t.property)}}function q_(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"orm-browser-property-editing",8),r.NdJ("modelChange",function(e){r.CHM(t);const n=r.oxw(2);return n.model=e,n.modelChange.emit(n.model)})("done",function(){return r.CHM(t),r.oxw(2).editing=!1}),r.qZA()}if(2&t){const t=r.oxw(2);r.Q6J("property",t.property)("model",t.model)}}function Y_(t,e){if(1&t&&(r.ynx(0),r.YNc(1,H_,1,2,"orm-browser-property-view",5),r.YNc(2,q_,1,2,"orm-browser-property-editing",6),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",!t.editing),r.xp6(1),r.Q6J("ngIf",t.editing)}}function G_(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",9),r.TgZ(1,"dui-icon",10),r.NdJ("click",function(e){return r.CHM(t),r.oxw().unset(),e.stopPropagation()}),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(1),r.ekj("active",t.property.isOptional||t.property.isNullable)}}let W_=(()=>{class t{constructor(t){this.cd=t,this.modelChange=new r.vpe,this.editing=!1}unset(){this.model=this.property.isNullable?null:void 0,this.modelChange.emit(this.model),this.cd.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-property"]],inputs:{model:"model",property:"property"},outputs:{modelChange:"modelChange"},decls:5,vars:8,consts:[["tabindex","0",1,"cell",3,"focus","click"],[4,"ngIf"],["class","actions",4,"ngIf"],[1,"undefined"],[1,"null"],[3,"model","property",4,"ngIf"],[3,"property","model","modelChange","done",4,"ngIf"],[3,"model","property"],[3,"property","model","modelChange","done"],[1,"actions"],["name","clear","clickable","","title","Unset",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.NdJ("focus",function(){return e.editing=!0})("click",function(){return e.editing=!0}),r.YNc(1,Z_,3,0,"ng-container",1),r.YNc(2,z_,3,0,"ng-container",1),r.YNc(3,Y_,3,2,"ng-container",1),r.qZA(),r.YNc(4,G_,2,2,"div",2)),2&t&&(r.ekj("editing",e.editing)("inactive",!e.editing),r.xp6(1),r.Q6J("ngIf",!e.editing&&void 0===e.model),r.xp6(1),r.Q6J("ngIf",!e.editing&&null===e.model),r.xp6(1),r.Q6J("ngIf",e.editing||null!=e.model),r.xp6(1),r.Q6J("ngIf",!e.property.isAutoIncrement&&!e.editing))},styles:["[_nghost-%COMP%]{display:block;position:relative;height:100%}.actions[_ngcontent-%COMP%]{position:absolute;right:2px;top:0;display:none}[_nghost-%COMP%]:hover   .actions[_ngcontent-%COMP%]{display:block}.null[_ngcontent-%COMP%], .undefined[_ngcontent-%COMP%]{color:var(--text-light)}.cell[_ngcontent-%COMP%]{min-height:21px;padding:0 4px;height:100%;display:flex;align-items:center}.cell[_ngcontent-%COMP%]    >ng-component{display:block;width:100%}.cell.editing[_ngcontent-%COMP%]{padding:0}.cell.inactive[_ngcontent-%COMP%]{border:1px solid var(--line-color-light);border-radius:2px}"]}),t})();function J_(t,e){if(1&t&&(r.TgZ(0,"dui-option",13),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("value",t),r.xp6(1),r.Oqu(t.name)}}function X_(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",14),r.TgZ(1,"orm-browser-property",15),r.NdJ("modelChange",function(e){r.CHM(t);const n=r.oxw();return n.value=e,n.changed()}),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(1),r.Q6J("model",t.value)("property",t.propertyToShow)}}function Q_(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",4),r.TgZ(1,"orm-browser-filter-item",5),r.NdJ("modelChange",function(e){const n=r.CHM(t).index;return r.oxw().items[n]=e})("modelChange",function(){r.CHM(t);const e=r.oxw();return e.itemsChange.emit(e.items)}),r.qZA(),r.TgZ(2,"dui-button-group",6),r.TgZ(3,"dui-button",7),r.NdJ("click",function(){const e=r.CHM(t).$implicit,n=r.oxw();return n.remove(e),n.itemsChange.emit(n.items)}),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.index,n=r.oxw();r.xp6(1),r.Q6J("entity",n.entity)("model",n.items[t])("properties",n.properties)}}function K_(t,e){1&t&&(r.TgZ(0,"div",8),r._uU(1," No filter added yet. "),r.qZA())}let tw=(()=>{class t{constructor(){this.modelChange=new r.vpe,this.properties=[],this.trackByIndex=Sv,this.value="",this.comparator="$eq"}changed(){(this.comparator!==this.model.comparator||this.property&&this.property.name!==this.model.name)&&(this.propertyToShow=void 0),this.property&&(this.model.name=this.property.name),this.model.comparator=this.comparator,this.model.value=this.value,"$regex"===this.model.comparator&&(this.model.value=new RegExp(this.model.value)),this.modelChange.emit(this.model),this.loadProperty()}ngOnChanges(t){t.model&&(this.propertyToShow=void 0,this.load())}ngOnInit(){this.load()}loadProperty(){this.property||(this.property=this.properties[0]),this.propertyToShow||(this.propertyToShow=this.property,"$regex"===this.model.comparator?(this.model.value=new RegExp(this.model.value),this.propertyToShow=new So.GR(this.property.name),this.propertyToShow.type="string"):"$in"!==this.model.comparator&&"$nin"!==this.model.comparator||(this.propertyToShow=new So.GR(this.property.name),this.propertyToShow.type="array",this.propertyToShow.templateArgs.push(this.property)))}load(){this.model.name&&(this.property=this.properties.find(t=>t.name===this.model.name)),this.property||(this.property=this.properties[0]),this.comparator=this.model.comparator,this.value=this.model.value,"$regex"===this.model.comparator&&this.model.value instanceof RegExp&&(this.value=this.model.value.source),this.loadProperty()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-filter-item"]],inputs:{model:"model",entity:"entity",properties:"properties"},outputs:{modelChange:"modelChange"},features:[r.TTD],decls:23,vars:5,consts:[["textured","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["textured","",2,"width","72px",3,"ngModel","ngModelChange"],["value","$eq"],["value","$neq"],["value","$gt"],["value","$lt"],["value","$gte"],["value","$lte"],["value","$regex"],["value","$in"],["value","$nin"],["class","value",4,"ngIf"],[3,"value"],[1,"value"],[3,"model","property","modelChange"]],template:function(t,e){1&t&&(r.TgZ(0,"dui-select",0),r.NdJ("ngModelChange",function(t){return e.property=t})("ngModelChange",function(){return e.changed()}),r.YNc(1,J_,2,2,"dui-option",1),r.qZA(),r.TgZ(2,"dui-select",2),r.NdJ("ngModelChange",function(t){return e.comparator=t})("ngModelChange",function(){return e.changed()}),r.TgZ(3,"dui-option",3),r._uU(4,"="),r.qZA(),r.TgZ(5,"dui-option",4),r._uU(6,"!="),r.qZA(),r.TgZ(7,"dui-option",5),r._uU(8,">"),r.qZA(),r.TgZ(9,"dui-option",6),r._uU(10,"<"),r.qZA(),r.TgZ(11,"dui-option",7),r._uU(12,">="),r.qZA(),r.TgZ(13,"dui-option",8),r._uU(14,"<="),r.qZA(),r.TgZ(15,"dui-option",9),r._uU(16,"REGEX"),r.qZA(),r._UZ(17,"dui-option-separator"),r.TgZ(18,"dui-option",10),r._uU(19,"IN"),r.qZA(),r.TgZ(20,"dui-option",11),r._uU(21,"NOT IN"),r.qZA(),r.qZA(),r.YNc(22,X_,2,2,"div",12)),2&t&&(r.Q6J("ngModel",e.property),r.xp6(1),r.Q6J("ngForOf",e.properties)("ngForTrackBy",e.trackByIndex),r.xp6(1),r.Q6J("ngModel",e.comparator),r.xp6(20),r.Q6J("ngIf",e.property&&e.propertyToShow))},directives:[V_,vs,Vs,ht,j_,$_,ft,W_],styles:["[_nghost-%COMP%]{display:flex;width:100%}[_nghost-%COMP%] > *[_ngcontent-%COMP%]{margin-right:4px}.value[_ngcontent-%COMP%]{flex:1}"]}),t})(),ew=(()=>{class t{constructor(){this.properties=[],this.trackByIndex=Sv,this.items=[],this.itemsChange=new r.vpe}remove(t){(0,va.lH)(this.items,t)}add(){this.items.push({name:this.properties[0].name,comparator:"$eq",value:""}),this.itemsChange.emit(this.items)}ngOnChanges(t){this.properties=[];for(const e of this.entity.getProperties())e.backReference||e.isParentReference||this.properties.push(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-filter"]],inputs:{entity:"entity",items:"items"},outputs:{itemsChange:"itemsChange"},features:[r.TTD],decls:5,vars:3,consts:[["class","item",4,"ngFor","ngForOf","ngForTrackBy"],["style","color: var(--text-light)",4,"ngIf"],[2,"padding-top","8px"],["textured","","icon","add",3,"click"],[1,"item"],[3,"entity","model","properties","modelChange"],["padding","none"],["textured","","tight","","icon","garbage",3,"click"],[2,"color","var(--text-light)"]],template:function(t,e){1&t&&(r.YNc(0,Q_,4,3,"div",0),r.YNc(1,K_,2,0,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"dui-button",3),r.NdJ("click",function(){return e.add()}),r._uU(4,"Filter"),r.qZA(),r.qZA()),2&t&&(r.Q6J("ngForOf",e.items)("ngForTrackBy",e.trackByIndex),r.xp6(1),r.Q6J("ngIf",!e.items.length))},directives:[ht,ft,au,tw,lu],styles:["[_nghost-%COMP%]{display:block}.item[_ngcontent-%COMP%]{display:flex}.item[_ngcontent-%COMP%] + .item[_ngcontent-%COMP%]{margin-top:5px}"]}),t})();const nw=["*"];let rw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-tabs"]],ngContentSelectors:nw,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},styles:["[_nghost-%COMP%]{display:flex;border-bottom:1px solid var(--line-sidebar-light);overflow:hidden;position:relative;top:-1px}"]}),t})();function iw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-icon",2),r.NdJ("click",function(){return r.CHM(t),r.oxw().onClose()}),r.qZA()}}const ow=["*"];let sw=(()=>{class t{constructor(){this.active=!1,this.removable=!0,this.close=new r.vpe}onClose(){this.close.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-tab"]],hostVars:2,hostBindings:function(t,e){2&t&&r.ekj("active",e.active)},inputs:{active:"active",removable:"removable"},outputs:{close:"close"},ngContentSelectors:ow,decls:3,vars:1,consts:[[1,"content"],["class","closer","clickable","","name","times",3,"click",4,"ngIf"],["clickable","","name","times",1,"closer",3,"click"]],template:function(t,e){1&t&&(r.F$t(),r.TgZ(0,"div",0),r.Hsn(1),r.qZA(),r.YNc(2,iw,1,0,"dui-icon",1)),2&t&&(r.xp6(2),r.Q6J("ngIf",e.removable))},directives:[ft,ua],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;height:28px;flex:1;min-width:80px;font-size:12px;position:relative;border-top:1px solid var(--line-sidebar)}.dui-theme-light[_nghost-%COMP%], .dui-theme-light   [_nghost-%COMP%]{border-top:1px solid #cfcfcf}.content[_ngcontent-%COMP%]{margin:0 25px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}[_nghost-%COMP%]{background-color:#1d1e1d}[_nghost-%COMP%]:not(:last-of-type){border-right:1px solid #4b4b4c}[_nghost-%COMP%]:hover{background-color:#2a2a2b;transition:background-color .15s ease-in}[_nghost-%COMP%]:hover   dui-icon.closer[_ngcontent-%COMP%]{opacity:1}.active[_nghost-%COMP%]{border-top:1px solid #0000;transition:background-color 0s;background-color:var(--dui-window-header-bg)}.dui-theme-dark[_nghost-%COMP%]   dui-icon.closer[_ngcontent-%COMP%], .dui-theme-dark   [_nghost-%COMP%]   dui-icon.closer[_ngcontent-%COMP%]{color:#8c8d8d}.dui-theme-light[_nghost-%COMP%], .dui-theme-light   [_nghost-%COMP%]{background-color:#e3e3e3}.dui-theme-light[_nghost-%COMP%]:not(:last-of-type), .dui-theme-light   [_nghost-%COMP%]:not(:last-of-type){border-right:1px solid #cfd0d0}.dui-theme-light[_nghost-%COMP%]:not(.active), .dui-theme-light   [_nghost-%COMP%]:not(.active){box-shadow:inset 0 1px 0 #ddd}.dui-theme-light[_nghost-%COMP%]:not(.active):hover, .dui-theme-light   [_nghost-%COMP%]:not(.active):hover{box-shadow:inset 0 1px 0 #d3d3d3;background-color:#e1e1e1}.dui-theme-light.active[_nghost-%COMP%], .dui-theme-light   .active[_nghost-%COMP%]{background-color:var(--dui-window-header-bg)}.dui-theme-light[_nghost-%COMP%]   dui-icon.closer[_ngcontent-%COMP%], .dui-theme-light   [_nghost-%COMP%]   dui-icon.closer[_ngcontent-%COMP%]{color:#8c8d8d}dui-icon.closer[_ngcontent-%COMP%]{opacity:0;position:absolute;left:5px;top:6px;transition:opacity .15s ease-in}"]}),t})(),aw=(()=>{class t{constructor(){this.step=0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["dui-indicator"]],inputs:{step:"step"},decls:1,vars:4,consts:[[1,"active"]],template:function(t,e){1&t&&r._UZ(0,"div",0),2&t&&(r.Udp("width",100*e.step,"%"),r.ekj("invisible",e.step<=0))},styles:['[_nghost-%COMP%]{position:relative;width:150px;height:7px;border-radius:3px;background-color:#dbdbdb;overflow:hidden;display:inline-block}[_nghost-%COMP%]:after{content:"";position:absolute;left:0;right:0;top:0;bottom:0;border:1px solid #6765651c}.active[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;border-top-left-radius:3px;border-bottom-left-radius:3px;width:30%;transition:all .1s ease-in;background-color:var(--dui-selection-light)}.active.invisible[_ngcontent-%COMP%]{opacity:0}.light[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .light   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{border-top:1px solid #9cb2ea;border-bottom:1px solid #9cb2ea;border-right:1px solid #ffffff29}.light[_nghost-%COMP%]:after, .light   [_nghost-%COMP%]:after{top:1px;bottom:1px}.dark[_nghost-%COMP%], .dark   [_nghost-%COMP%]{background-color:#58534f}.dark[_nghost-%COMP%]   .active[_ngcontent-%COMP%], .dark   [_nghost-%COMP%]   .active[_ngcontent-%COMP%]{border-right:1px solid #34343433}.dark[_nghost-%COMP%]:after, .dark   [_nghost-%COMP%]:after{top:0;bottom:0;border:1px solid #3434343b}']}),t})();function lw(t){const e=[],n=(0,va.kJ)(t);for(let[r,i]of(0,va.hs)(t))(0,va.kJ)(i)?i=lw(i):null===i?i="null":void 0===i?i="undefined":i instanceof Date?i=i.toString():(0,va.Kn)(i)&&(i=lw(i)),e.push(n?i:r+": "+i);return n?"["+e.join(", ")+"]":"{"+e.join(", ")+"}"}var cw=n(93042),uw=n(49457);let hw=(()=>{class t{constructor(t){this.cd=t}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}transform(t){return this.lastValue!==t&&(this.subscription&&this.subscription.unsubscribe(),this.lastReturnedValue=void 0,this.lastValue=t,t&&(this.subscription=t.subscribe(t=>{this.lastReturnedValue=t,ea(this.cd)}))),this.lastReturnedValue}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO,16))},t.\u0275pipe=r.Yjl({name:"asyncRender",type:t,pure:!1}),t})(),dw=(()=>{class t{constructor(t){this.sanitizer=t}ngOnDestroy(){this.lastUrl&&URL.revokeObjectURL(this.lastUrl)}transform(t){if(t)return this.lastUrl&&URL.revokeObjectURL(this.lastUrl),this.lastUrl=URL.createObjectURL(new Blob([t])),this.sanitizer.bypassSecurityTrustResourceUrl(this.lastUrl)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(le,16))},t.\u0275pipe=r.Yjl({name:"objectURL",type:t,pure:!0}),t})(),fw=(()=>{class t{transform(t,e=!1){return(0,va.vW)(t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Yjl({name:"fileSize",type:t,pure:!0}),t})();function pw(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"img",3),r.ALo(2,"objectURL"),r.TgZ(3,"dui-dropdown",4,5),r.TgZ(5,"div",6),r._UZ(6,"img",7),r.ALo(7,"objectURL"),r.qZA(),r.qZA(),r.BQk()),2&t){const t=r.MAs(4),e=r.oxw();r.xp6(1),r.Q6J("src",r.lcZ(2,5,e.image),r.LSH)("openDropdownHover",t),r.xp6(2),r.Q6J("width",450)("height",450),r.xp6(3),r.Q6J("src",r.lcZ(7,7,e.image),r.LSH)}}function gw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-icon",8),r.NdJ("click",function(e){return r.CHM(t),r.oxw().download(),e.preventDefault(),e.stopPropagation()}),r.qZA()}}function mw(t,e){if(1&t&&(r.TgZ(0,"div",9),r._uU(1),r.ALo(2,"fileSize"),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.hij(" ",r.lcZ(2,1,t.model.byteLength)," ")}}let yw=(()=>{class t{constructor(t){this.cd=t,this.fileName="untitled",this.ext="bin"}display(){var t=this;return(0,Co.Z)(function*(){var e;if(t.image=void 0,!t.model)return;const n=yield(0,cw.fromBuffer)(t.model);(null===(e=null==n?void 0:n.mime)||void 0===e?void 0:e.startsWith("image/"))&&(t.image=t.model,t.ext=null==n?void 0:n.ext),t.cd.detectChanges()})()}download(){var t;const e=new Blob([this.model]);uw.saveAs(e,((null===(t=this.property)||void 0===t?void 0:t.name)||this.fileName)+"."+this.ext)}ngOnChanges(){this.display()}ngOnInit(){this.display()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-binary-cell"]],inputs:{model:"model",property:"property",fileName:"fileName"},features:[r.TTD],decls:3,vars:3,consts:[[4,"ngIf"],["name","download","clickable","",3,"click",4,"ngIf"],["class","bytes",4,"ngIf"],[2,"max-height","100%","max-width","50px",3,"src","openDropdownHover"],[3,"width","height"],["drop",""],[2,"height","100%","display","flex","justify-content","center","align-items","center"],[2,"max-height","100%","max-width","100%",3,"src"],["name","download","clickable","",3,"click"],[1,"bytes"]],template:function(t,e){1&t&&(r.YNc(0,pw,8,9,"ng-container",0),r.YNc(1,gw,1,0,"dui-icon",1),r.YNc(2,mw,3,3,"div",2)),2&t&&(r.Q6J("ngIf",e.image),r.xp6(1),r.Q6J("ngIf",e.model&&e.model.byteLength>0),r.xp6(1),r.Q6J("ngIf",e.model))},directives:[ft,bu,yu,ua],pipes:[dw,fw],styles:["[_nghost-%COMP%]{height:100%;display:flex;align-items:center}.bytes[_ngcontent-%COMP%], dui-icon[_ngcontent-%COMP%]{margin-left:6px;color:var(--text-light);font-size:12px}"]}),t})();function vw(t,e){1&t&&(r.TgZ(0,"div",6),r._uU(1,"null"),r.qZA())}function bw(t,e){1&t&&(r.TgZ(0,"div",7),r._uU(1,"undefined"),r.qZA())}function _w(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"orm-browser-binary-cell",8),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("model",t.model)}}function ww(t,e){if(1&t&&(r.TgZ(0,"span",9),r._uU(1),r.ALo(2,"date"),r.TgZ(3,"span",10),r._uU(4),r.ALo(5,"date"),r.qZA(),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.hij(" ",r.xi3(2,2,t.model,"M/d/yy, h:mm:ss"),""),r.xp6(3),r.Oqu(r.xi3(5,5,t.model,".SSS"))}}function xw(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.hij(" ",t.label," ")}}let Cw=(()=>{class t{constructor(t,e){this.state=t,this.cd=e,this.label=""}iBinary(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}isDate(t){return t instanceof Date}ngOnChanges(){this.setLabel()}ngOnInit(){this.setLabel()}setLabel(){this.label=(0,va.Kn)(this.model)||(0,va.kJ)(this.model)?lw(this.model):this.model}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Pv.Ky),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-json-cell"]],inputs:{model:"model"},features:[r.TTD],decls:6,vars:5,consts:[[3,"ngSwitch"],["class","null",4,"ngSwitchCase"],["class","undefined",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","monospace",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"null"],[1,"undefined"],[3,"model"],[1,"monospace"],[1,"date-ms"]],template:function(t,e){1&t&&(r.ynx(0,0),r.YNc(1,vw,2,0,"div",1),r.YNc(2,bw,2,0,"div",2),r.YNc(3,_w,2,1,"ng-container",3),r.YNc(4,ww,6,8,"span",4),r.YNc(5,xw,2,1,"ng-container",5),r.BQk()),2&t&&(r.Q6J("ngSwitch",!0),r.xp6(1),r.Q6J("ngSwitchCase",null===e.model),r.xp6(1),r.Q6J("ngSwitchCase",void 0===e.model),r.xp6(1),r.Q6J("ngSwitchCase",e.iBinary(e.model)),r.xp6(1),r.Q6J("ngSwitchCase",e.isDate(e.model)))},directives:[yt,vt,bt,yw],pipes:[Ot],styles:[".date-ms[_ngcontent-%COMP%], .null[_ngcontent-%COMP%], .undefined[_ngcontent-%COMP%]{color:var(--text-light)}"]}),t})();function Sw(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"orm-browser-property-editing",4),r.NdJ("modelChange",function(e){r.CHM(t);const n=r.oxw();return n.row[n.property.name]=e})("done",function(){r.CHM(t);const e=r.oxw();return e.changed(e.row)}),r.qZA(),r.BQk()}if(2&t){const t=r.oxw();r.xp6(1),r.Q6J("property",t.property)("row",t.row)("model",t.row[t.property.name])}}function Tw(t,e){1&t&&(r.ynx(0),r.TgZ(1,"div",6),r._uU(2,"undefined"),r.qZA(),r.BQk())}function Ew(t,e){1&t&&(r.ynx(0),r.TgZ(1,"div",7),r._uU(2,"null"),r.qZA(),r.BQk())}function Ow(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"div",7),r._uU(2),r.qZA(),r.BQk()),2&t){const t=r.oxw(2);r.xp6(2),r.Oqu(t.state.isNew(t.row)?"auto, #new-"+t.state.getNewItemId(t.row):t.row[t.property.name])}}function Aw(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"orm-browser-property-view",8),r.BQk()),2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("property",t.property)("model",t.row[t.property.name])}}function Pw(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Tw,3,0,"ng-container",5),r.YNc(2,Ew,3,0,"ng-container",5),r.YNc(3,Ow,3,1,"ng-container",5),r.YNc(4,Aw,2,2,"ng-container",5),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",void 0===t.row[t.property.name]),r.xp6(1),r.Q6J("ngIf",null===t.row[t.property.name]),r.xp6(1),r.Q6J("ngIf",t.property.isAutoIncrement),r.xp6(1),r.Q6J("ngIf",!t.property.isAutoIncrement&&null!=t.row[t.property.name])}}function kw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",9),r.TgZ(1,"dui-icon",10),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.reset(e.row,e.property.name)}),r.qZA(),r.TgZ(2,"dui-icon",11),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.unset(e.row,e.property)}),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(1),r.ekj("active",!0),r.xp6(1),r.ekj("active",t.property.isOptional||t.property.isNullable)}}let Mw=(()=>{class t{constructor(){this.actions=!1,this.cellClass=(t,e)=>{if(!this.entityState)return"";let n;const r=this.entityState.validationStore?this.entityState.validationStore.get(t):void 0;if(!this.state.isNew(t)){const e=(0,w_.We)(t).getLastKnownPKHash();n=this.entityState.changes&&this.entityState.changes[e]?this.entityState.changes[e].changes:void 0}return this.entityState.schema.getProperty(e).isAutoIncrement?"":t.$__activeColumn===e?"editing":n&&n.$set&&e in n.$set?"changed":r&&r[e]?"invalid":""}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-cell"]],inputs:{state:"state",entityState:"entityState",actions:"actions",row:"row",property:"property",changed:"changed",reset:"reset",unset:"unset"},decls:5,vars:6,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","cell-actions",4,"ngIf"],[3,"property","row","model","modelChange","done"],[4,"ngIf"],[1,"undefined"],[1,"null"],[3,"property","model"],[1,"cell-actions"],["name","arrow-small-left","clickable","","title","Reset to original value",3,"click"],["name","clear","clickable","","title","Unset",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"div"),r.ynx(1,0),r.YNc(2,Sw,2,3,"ng-container",1),r.YNc(3,Pw,5,4,"ng-container",2),r.YNc(4,kw,3,4,"div",3),r.BQk(),r.qZA()),2&t&&(r.Gre("cell-body ",e.cellClass(e.row,e.property.name),""),r.xp6(1),r.Q6J("ngSwitch",!0),r.xp6(1),r.Q6J("ngSwitchCase",e.row.$__activeColumn===e.property.name&&!e.property.isAutoIncrement),r.xp6(2),r.Q6J("ngIf",e.actions&&!e.property.isAutoIncrement&&e.row.$__activeColumn!==e.property.name))},styles:[".null[_ngcontent-%COMP%], .undefined[_ngcontent-%COMP%]{color:var(--text-light)}.cell-actions[_ngcontent-%COMP%]{position:absolute;right:2px;top:2px}.cell-actions[_ngcontent-%COMP%]   dui-icon[_ngcontent-%COMP%]{background-color:var(--dui-window-content-bg);border-radius:20px;display:none}.cell-actions[_ngcontent-%COMP%]   dui-icon[_ngcontent-%COMP%]:hover{opacity:1}.cell-body[_ngcontent-%COMP%]{border:1px solid #0000;padding:3px 5px;height:100%}.cell-body.changed[_ngcontent-%COMP%]{border-radius:24px;background-color:rgba(60,255,0,.212)}.cell-body.invalid[_ngcontent-%COMP%]{border-radius:24px;border:1px solid var(--color-red)}.cell-body.editing[_ngcontent-%COMP%]{padding:0 5px 0 0;overflow:hidden;text-overflow:clip}.cell-body.editing[_ngcontent-%COMP%]    >ng-component{display:block}.cell-body.editing[_ngcontent-%COMP%]    >*, .cell-body.editing[_ngcontent-%COMP%]    >ng-component>*{margin-right:3px;width:100%;height:100%}"]}),t})();function Iw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-window-toolbar",25),r.TgZ(1,"dui-button-group",4),r.TgZ(2,"dui-button",26),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).resetAll()}),r.qZA(),r.TgZ(3,"dui-button",27),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).commit()}),r._uU(4,"Commit"),r.qZA(),r.qZA(),r.TgZ(5,"dui-button",28),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).entityState.addQuery()}),r._uU(6,"Query"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw(2);r.xp6(2),r.Q6J("disabled",!t.state.hasChanges()),r.xp6(1),r.Q6J("disabled",!t.state.hasChanges())}}function Rw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-tab",31),r.NdJ("click",function(){const e=r.CHM(t).index;return r.oxw(3).entityState.activeQuery=e})("close",function(){const e=r.CHM(t).$implicit,n=r.oxw(3);return n.entityState.removeQuery(e),n.cd.detectChanges()}),r._uU(1),r.qZA()}if(2&t){const t=e.$implicit,n=e.index,i=r.oxw(3);r.Q6J("active",i.entityState.activeQuery===n),r.xp6(1),r.hij("Query ",t.id," ")}}function Dw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-tabs"),r.TgZ(1,"dui-tab",29),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).entityState.activeQuery=-1}),r._uU(2,"Browser "),r.qZA(),r.YNc(3,Rw,2,2,"dui-tab",30),r.qZA()}if(2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("removable",!1)("active",-1===t.entityState.activeQuery),r.xp6(2),r.Q6J("ngForOf",t.entityState.queries)("ngForTrackBy",t.trackByIndex)}}function Nw(t,e){if(1&t&&(r.TgZ(0,"span",41),r._UZ(1,"dui-indicator",42),r.ALo(2,"asyncRender"),r.qZA()),2&t){const t=r.oxw(2).ngIf;r.ekj("visible",t.loading),r.xp6(1),r.Q6J("step",r.lcZ(2,3,null==t.progress?null:t.progress.download)||0)}}function Lw(t,e){if(1&t&&(r.TgZ(0,"span"),r._uU(1),r.ALo(2,"number"),r.ALo(3,"fileSize"),r.ALo(4,"number"),r.qZA()),2&t){const t=r.oxw(2).ngIf;r.xp6(1),r.lnq(" Query time ",r.xi3(2,3,t.executionTime,"0.3-6")," ms, receiving ",r.lcZ(3,6,t.downloadBytes)," took ",r.xi3(4,8,t.downloadTime,"0.3-6")," ms. ")}}function Fw(t,e){if(1&t&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&t){const t=r.oxw(2).ngIf;r.xp6(1),r.hij(" ",t.result.length," records. ")}}function Bw(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Nw,3,5,"span",22),r.YNc(2,Lw,5,11,"span",0),r.YNc(3,Fw,2,1,"span",0),r.BQk()),2&t){const t=r.oxw().ngIf,e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",t.progress),r.xp6(1),r.Q6J("ngIf",!t.loading),r.xp6(1),r.Q6J("ngIf",e.isArray(t.result))}}function jw(t,e){1&t&&(r.ynx(0),r._uU(1," Press CMD+Enter to execute the query. "),r.BQk())}function $w(t,e){if(1&t&&(r.TgZ(0,"span",43),r._uU(1),r.qZA()),2&t){const t=r.oxw().ngIf;r.xp6(1),r.Oqu(t.javascriptError)}}function Uw(t,e){if(1&t&&(r.TgZ(0,"div",48),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.Oqu(t)}}function Vw(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"div",46),r.YNc(2,Uw,2,1,"div",47),r.qZA(),r.BQk()),2&t){const t=r.oxw(2).ngIf,e=r.oxw(2);r.xp6(2),r.Q6J("ngForOf",t.log)("ngForTrackBy",e.trackByIndex)}}function Zw(t,e){if(1&t&&(r.TgZ(0,"div",52),r._UZ(1,"orm-browser-json-cell",53),r.qZA()),2&t){const t=r.oxw(3).ngIf;r.xp6(1),r.Q6J("model",t.result)}}function zw(t,e){if(1&t&&(r.TgZ(0,"div",54),r.TgZ(1,"div",43),r._uU(2),r.qZA(),r.qZA()),2&t){const t=r.oxw(3).ngIf;r.xp6(2),r.Oqu(t.error)}}function Hw(t,e){1&t&&(r.TgZ(0,"div",55),r._uU(1," [] "),r.qZA())}function qw(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"div",60),r._UZ(2,"orm-browser-json-cell",53),r.qZA(),r.BQk()),2&t){const t=e.$implicit,n=r.oxw().$implicit;r.xp6(2),r.Q6J("model",t[n.key])}}function Yw(t,e){1&t&&(r.TgZ(0,"dui-table-column",58),r.YNc(1,qw,3,1,"ng-container",59),r.qZA()),2&t&&r.Q6J("name",e.$implicit.key)}function Gw(t,e){if(1&t&&(r.ynx(0),r.TgZ(1,"dui-table",56),r.YNc(2,Yw,2,1,"dui-table-column",57),r.ALo(3,"keyvalue"),r.qZA(),r.BQk()),2&t){const t=r.oxw(3).ngIf,e=r.oxw(2);r.xp6(1),r.Q6J("items",t.result)("sort",t.sort)("preferenceKey","query/"+e.entity.getName()),r.xp6(1),r.Q6J("ngForOf",r.lcZ(3,4,e.firstRowItem(t)))}}function Ww(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Zw,2,1,"div",49),r.YNc(2,zw,3,1,"div",50),r.YNc(3,Hw,2,0,"div",51),r.YNc(4,Gw,4,6,"ng-container",0),r.BQk()),2&t){const t=r.oxw(2).ngIf,e=r.oxw(2);r.xp6(1),r.Q6J("ngIf",!t.error&&!e.isArray(t.result)),r.xp6(1),r.Q6J("ngIf",t.error),r.xp6(1),r.Q6J("ngIf",!t.error&&e.isArray(t.result)&&0===t.result.length),r.xp6(1),r.Q6J("ngIf",!t.error&&e.isArray(t.result)&&t.result.length>0)}}function Jw(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",44),r.TgZ(2,"dui-button-group"),r.TgZ(3,"dui-tab-button",45),r.NdJ("click",function(){return r.CHM(t),r.oxw().ngIf.tab="result"}),r._uU(4," Result "),r.qZA(),r.TgZ(5,"dui-tab-button",45),r.NdJ("click",function(){return r.CHM(t),r.oxw().ngIf.tab="log"}),r._uU(6,"Log "),r.qZA(),r.qZA(),r.qZA(),r.YNc(7,Vw,3,2,"ng-container",0),r.YNc(8,Ww,5,4,"ng-container",0),r.BQk()}if(2&t){const t=r.oxw().ngIf;r.xp6(3),r.Q6J("active","result"===t.tab),r.xp6(2),r.Q6J("active","log"===t.tab),r.xp6(2),r.Q6J("ngIf","log"===t.tab),r.xp6(1),r.Q6J("ngIf","result"===t.tab)}}function Xw(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",32),r.TgZ(2,"div",33),r.TgZ(3,"dui-input",34),r.NdJ("ngModelChange",function(t){return e.ngIf.javascript=t})("ngModelChange",function(){return e.ngIf.eval()})("keyDown",function(e){const n=r.CHM(t).ngIf,i=r.oxw(2);return(e.metaKey||e.ctrlKey)&&"enter"===e.key.toLowerCase()&&[i.executeQuery(n),e.preventDefault()]}),r.qZA(),r.TgZ(4,"dui-splitter",35),r.NdJ("modelChange",function(e){const n=r.CHM(t).ngIf,i=r.oxw(2);return n.inputHeight=e,i.cd.detectChanges()}),r.qZA(),r.qZA(),r.TgZ(5,"div",36),r.TgZ(6,"div",37),r.YNc(7,Bw,4,3,"ng-container",0),r.YNc(8,jw,2,0,"ng-container",0),r.YNc(9,$w,2,1,"span",38),r.qZA(),r.TgZ(10,"div",39),r.TgZ(11,"dui-button-group",4),r.TgZ(12,"dui-button",40),r.NdJ("click",function(){const e=r.CHM(t).ngIf;return r.oxw(2).executeQuery(e)}),r.qZA(),r.TgZ(13,"dui-button",28),r.NdJ("click",function(){const e=r.CHM(t).ngIf;return r.oxw(2).openQueryJson(e)}),r._uU(14,"JSON"),r.qZA(),r.qZA(),r.qZA(),r.YNc(15,Jw,9,4,"ng-container",0),r.qZA(),r.qZA(),r.BQk()}if(2&t){const t=e.ngIf;r.xp6(2),r.Udp("flex-basis",t.inputHeight,"px"),r.xp6(1),r.Q6J("ngModel",t.javascript)("placeholder",t.placeholder),r.xp6(4),r.Q6J("ngIf",t.executed&&!t.javascriptError),r.xp6(1),r.Q6J("ngIf",!t.executed),r.xp6(1),r.Q6J("ngIf",t.javascriptError),r.xp6(3),r.Q6J("disabled",t.loading),r.xp6(3),r.Q6J("ngIf",t.executed)}}function Qw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-button-group",4),r.TgZ(1,"dui-button",61),r.NdJ("click",function(){return r.CHM(t),r.oxw(2).back.emit()}),r.qZA(),r.qZA()}}function Kw(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.BQk()),2&t){const t=r.oxw(2);r.xp6(1),r.hij(" ",t.entityState.filter.length," filter ")}}function tx(t,e){1&t&&(r.ynx(0),r._uU(1," No filter "),r.BQk())}function ex(t,e){if(1&t&&(r.TgZ(0,"span",41),r._UZ(1,"dui-indicator",42),r.ALo(2,"asyncRender"),r.qZA()),2&t){const t=r.oxw(2);r.ekj("visible",t.entityState.loading),r.xp6(1),r.Q6J("step",r.lcZ(2,3,null==t.entityState.progress?null:t.entityState.progress.download)||0)}}function nx(t,e){if(1&t&&(r.TgZ(0,"span"),r._uU(1),r.ALo(2,"number"),r.ALo(3,"fileSize"),r.ALo(4,"number"),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.lnq(" Query time ",r.xi3(2,3,t.entityState.executionTime,"0.3-6")," ms, receiving ",r.lcZ(3,6,t.entityState.downloadBytes)," took ",r.xi3(4,8,t.entityState.downloadTime,"0.3-6")," ms ")}}function rx(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"dui-checkbox",66),r.NdJ("ngModelChange",function(){return r.CHM(t),r.oxw(3).toggleAll()}),r.qZA(),r.BQk()}if(2&t){const t=r.oxw(3);r.xp6(1),r.Q6J("ngModel",t.selectedAll)}}function ix(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",67),r.TgZ(2,"dui-checkbox",66),r.NdJ("ngModelChange",function(){const e=r.CHM(t).$implicit;return r.oxw(3).changeSelection(e)}),r.qZA(),r.qZA(),r.BQk()}if(2&t){const t=e.$implicit,n=r.oxw(3);r.xp6(2),r.Q6J("ngModel",n.entityState.selection.includes(t))}}function ox(t,e){if(1&t&&(r.ynx(0),r._uU(1),r.TgZ(2,"span",69),r._uU(3),r.qZA(),r.BQk()),2&t){const t=r.oxw().$implicit;r.xp6(1),r.hij(" ",t.name," "),r.xp6(2),r.Oqu(t.toString())}}function sx(t,e){if(1&t&&(r.ynx(0),r._UZ(1,"orm-browser-cell",70),r.BQk()),2&t){const t=e.$implicit,n=r.oxw().$implicit,i=r.oxw(3);r.xp6(1),r.Q6J("state",i.state)("entityState",i.entityState)("reset",i.reset)("unset",i.unset)("changed",i.changed)("row",t)("actions",!0)("property",n)}}function ax(t,e){1&t&&(r.TgZ(0,"dui-table-column",68),r.YNc(1,ox,4,2,"ng-container",64),r.YNc(2,sx,2,8,"ng-container",59),r.qZA()),2&t&&r.Q6J("name",e.$implicit.name)("width",150)}function lx(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"dui-table",62),r.NdJ("customSort",function(e){return r.CHM(t),r.oxw(2).onSort(e)})("cellClick",function(e){return r.CHM(t),r.oxw(2).cellClick(e)}),r.TgZ(2,"dui-table-column",63),r.YNc(3,rx,2,1,"ng-container",64),r.YNc(4,ix,3,1,"ng-container",59),r.qZA(),r.YNc(5,ax,3,2,"dui-table-column",65),r.qZA(),r.BQk()}if(2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("items",t.entityState.items)("rowClass",t.rowClass)("preferenceKey","browser/"+t.entity.getName()),r.xp6(1),r.Q6J("width",40)("hideable",!1)("sortable",!1),r.xp6(3),r.Q6J("ngForOf",t.entityState.properties)("ngForTrackBy",t.trackByProperty)}}function cx(t,e){if(1&t&&(r.TgZ(0,"div",71),r.TgZ(1,"div",72),r.TgZ(2,"h3"),r._uU(3,"An error occurred"),r.qZA(),r.TgZ(4,"div",73),r._uU(5),r.qZA(),r.qZA(),r.qZA()),2&t){const t=r.oxw(2);r.xp6(5),r.Oqu(t.entityState.error)}}function ux(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.YNc(1,Iw,7,2,"dui-window-toolbar",1),r.YNc(2,Dw,4,4,"dui-tabs",0),r.YNc(3,Xw,16,9,"ng-container",0),r.ynx(4),r.TgZ(5,"div",2),r.YNc(6,Qw,2,0,"dui-button-group",3),r.TgZ(7,"dui-button-group",4),r.TgZ(8,"dui-button",5),r.NdJ("click",function(){return r.CHM(t),r.oxw().remove()}),r.qZA(),r.TgZ(9,"dui-button",6),r.NdJ("click",function(){return r.CHM(t),r.oxw().add()}),r.qZA(),r.qZA(),r.TgZ(10,"dui-button-group",4),r.TgZ(11,"dui-button",7),r.YNc(12,Kw,2,1,"ng-container",0),r.YNc(13,tx,2,0,"ng-container",0),r.qZA(),r.qZA(),r.TgZ(14,"dui-button-group",4),r.TgZ(15,"dui-button",8),r.NdJ("click",function(){return r.CHM(t),r.oxw().loadEntity(!0)}),r.qZA(),r.TgZ(16,"dui-button",9),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.goPage(e.entityState.page-1)}),r.qZA(),r.TgZ(17,"dui-input",10),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().goPage(e)})("ngModelChange",function(e){return r.CHM(t),r.oxw().entityState.page=e}),r.qZA(),r.TgZ(18,"dui-button",11),r.NdJ("click",function(){r.CHM(t);const e=r.oxw();return e.goPage(e.entityState.page+1)}),r.qZA(),r._UZ(19,"dui-button",12),r.qZA(),r.TgZ(20,"dui-dropdown",13,14),r.TgZ(22,"div",15),r.TgZ(23,"dui-form-row",16),r.TgZ(24,"dui-input",17),r.NdJ("ngModelChange",function(){return r.CHM(t),r.oxw().loadEntity(!0)})("ngModelChange",function(e){return r.CHM(t),r.oxw().entityState.itemsPerPage=e}),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(25,"dui-dropdown",13,18),r.TgZ(27,"div",19),r.TgZ(28,"orm-browser-filter",20),r.NdJ("itemsChange",function(e){return r.CHM(t),r.oxw().entityState.filter=e})("itemsChange",function(){return r.CHM(t),r.oxw().loadEntity(!0)}),r.qZA(),r.qZA(),r.qZA(),r.TgZ(29,"span",21),r.TgZ(30,"span"),r._uU(31),r.qZA(),r.YNc(32,ex,3,5,"span",22),r.YNc(33,nx,5,11,"span",0),r.qZA(),r.qZA(),r.TgZ(34,"div",23),r.YNc(35,lx,6,8,"ng-container",0),r.YNc(36,cx,6,1,"div",24),r.qZA(),r.BQk(),r.BQk()}if(2&t){const t=r.MAs(21),e=r.MAs(26),n=r.oxw();r.xp6(1),r.Q6J("ngIf",!n.dialog),r.xp6(1),r.Q6J("ngIf",!n.dialog&&n.entityState.queries.length),r.xp6(1),r.Q6J("ngIf",n.entityState.queries[n.entityState.activeQuery]),r.xp6(2),r.ekj("hidden",-1!==n.entityState.activeQuery),r.xp6(1),r.Q6J("ngIf",n.withBack),r.xp6(2),r.Q6J("disabled",!n.entityState.selection.length),r.xp6(3),r.Q6J("openDropdown",e),r.xp6(1),r.Q6J("ngIf",n.entityState.filter.length),r.xp6(1),r.Q6J("ngIf",!n.entityState.filter.length),r.xp6(2),r.Q6J("disabled",n.entityState.loading),r.xp6(1),r.Q6J("disabled",n.entityState.loading),r.xp6(1),r.Q6J("disabled",n.entityState.loading)("ngModel",n.entityState.page),r.xp6(1),r.Q6J("disabled",n.entityState.loading),r.xp6(1),r.Q6J("openDropdown",t)("disabled",n.entityState.loading),r.xp6(1),r.Q6J("width",230),r.xp6(3),r.Q6J("labelWidth",120),r.xp6(1),r.Q6J("ngModel",n.entityState.itemsPerPage),r.xp6(1),r.Q6J("width",450),r.xp6(3),r.Q6J("entity",n.entity)("items",n.entityState.filter),r.xp6(3),r.lnq(" of ",n.entityState.totalPages," page",1===n.entityState.totalPages?"":"s"," (",n.entityState.count," records). "),r.xp6(1),r.Q6J("ngIf",n.entityState.progress),r.xp6(1),r.Q6J("ngIf",!n.entityState.loading),r.xp6(1),r.ekj("hidden",-1!==n.entityState.activeQuery),r.xp6(1),r.Q6J("ngIf",n.entity),r.xp6(1),r.Q6J("ngIf",n.entityState.error)}}class hx{constructor(t,e,n,i,o,s){this.controllerClient=t,this.cd=e,this.duiDialog=n,this.host=i,this.state=o,this.activatedRoute=s,this.trackByIndex=Sv,this.isArray=va.kJ,this.dialog=!1,this.selectedPkHashes=[],this.multiSelect=!0,this.withBack=!1,this.back=new r.vpe,this.select=new r.vpe,this.sort={},this.selectedAll=!1,this.ignoreNextCellClick=!1,this.pkHasher=()=>"",this.rowClass=t=>this.state.isNew(t)?"new":"",this.unset=(t,e)=>{this.ignoreNextCellClick=!0,t[e.name]=e.isNullable?null:void 0,this.changed(t)},this.reset=(t,e)=>{if(!this.entity)return;this.ignoreNextCellClick=!0;const n=(0,w_.We)(t).getSnapshot();t[e]=So.$r.deserializeProperty(this.entity.getProperty(e),n[e]),this.changed(t)},this.changed=t=>{this.entity&&this.database&&(this.updateValidation(t),this.state.isNew(t)||this.state.changed(this.database.name,this.entity.getName(),t))}}trackByProperty(t,e){return e.name}openQueryJson(t){var e=this;return(0,Co.Z)(function*(){window.open("//"+kv.M.getServerHost()+"/_orm-browser/query?dbName="+encodeURIComponent(e.database.name)+"&entityName="+encodeURIComponent(e.entity.getName())+"&query="+encodeURIComponent(t.javascript),"_blank")})()}firstRowItem(t){return t.result[0]||{}}executeQuery(t){var e=this;return(0,Co.Z)(function*(){if(!t.loading){t.progress=Po.TY.track(),t.executed=!0,t.loading=!0,e.cd.detectChanges();try{t.log.push("Query: "+t.javascript);const n=performance.now(),r=yield e.controllerClient.browser.query(e.database.name,e.entity.getName(),t.javascript);console.log("query result",r),t.setValue(r.result),t.error=r.error,t.log.push(...r.log),t.executionTime=r.executionTime,t.downloadBytes=t.progress.download.total,t.downloadTime=performance.now()-n}catch(n){e.duiDialog.alert("Error",n)}t.loading=!1,e.cd.detectChanges()}})()}ngOnDestroy(){var t;null===(t=this.paramsSub)||void 0===t||t.unsubscribe()}ngOnInit(){var t=this;this.database||this.entity||this.activatedRoute&&(this.routeSub=this.activatedRoute.params.subscribe(function(){var e=(0,Co.Z)(function*(e){t.state.databases=yield t.controllerClient.getDatabases(),t.database=t.state.database=t.state.getDatabase(decodeURIComponent(e.database)),t.entity=t.database.getEntity(decodeURIComponent(e.entity)),yield t.loadEntity(!0)});return function(t){return e.apply(this,arguments)}}()))}ngOnChanges(t){var e=this;return(0,Co.Z)(function*(){yield e.loadEntity()})()}toggleAll(){this.entityState&&(this.selectedAll?(this.selectedAll=!1,this.entityState.selection=[]):(this.entityState.selection=this.entityState.items.slice(),this.selectedAll=!0))}changeSelection(t){this.entityState&&(this.entityState.selection.includes(t)?(0,va.lH)(this.entityState.selection,t):(this.multiSelect||(this.entityState.selection=[]),this.entityState.selection.push(t)),this.selectedAll=this.entityState.selection.length===this.entityState.items.length&&this.entityState.items.length>0,this.entityState.selection=this.entityState.selection.slice(),this.select.emit({items:this.entityState.selection,pkHashes:this.entityState.selection.map(t=>this.pkHasher(t))}))}cellClick(t){this.ignoreNextCellClick?this.ignoreNextCellClick=!1:t.item.$__activeColumn=t.column}goPage(t){this.entityState&&(t<=0||t>this.entityState.totalPages||(this.entityState.page=t,this.loadEntity(!0)))}onSort(t){this.sort=t,this.loadEntity(!0)}resetAll(){var t=this;return(0,Co.Z)(function*(){if(!t.entityState)return;if(!(yield t.duiDialog.confirm("Reset all?","All changes and added data will be lost. Continue?")))return;const e=t.state.getAddedItems(t.database.name,t.entity.getName());for(const n of e)(0,va.lH)(t.entityState.items,n);t.entityState.selection=[],t.entityState.items=t.entityState.items.slice(),t.state.resetAll(),yield t.loadEntity(!0)})()}commit(){var t=this;return(0,Co.Z)(function*(){if(t.database){try{yield t.state.commit(),yield t.state.resetAll()}catch(e){t.duiDialog.alert("Error saving",e),console.log(e)}yield t.loadEntity(!0)}})()}updateValidation(t){if(this.entityState&&this.entityState.validationStore){const e=(0,So.Gu)(this.entity,t);if(e.length){const n={};for(const t of e)n[t.path]=t;this.entityState.validationStore.set(t,n)}else this.entityState.validationStore.has(t)&&this.entityState.validationStore.delete(t)}}remove(){var t=this;return(0,Co.Z)(function*(){if(!t.entityState)return;const e=t.state.getAddedItems(t.database.name,t.entity.getName());for(const n of t.entityState.selection)t.state.isNew(n)?((0,va.lH)(e,n),(0,va.lH)(t.entityState.items,n),t.state.disconnectForNewItem(n)):t.state.scheduleForDeletion(t.database.name,t.entity.getName(),n);t.entityState.selection=[],t.softReload()})()}add(){var t=this;return(0,Co.Z)(function*(){if(!t.entity)return;if(!t.database)return;if(!t.entityState)return;const e=t.state.getAddedItems(t.database.name,t.entity.getName());try{const n=yield t.controllerClient.browser.create(t.database.name,t.entity.getName()),r=(0,So.d8)(t.entity,n),i=(0,w_.We)(r);i.markAsPersisted(),i.markAsFromDatabase(),t.changed(r),t.state.registerNewItem(r),t.entityState.items.splice(e.length,0,r),e.push(r),t.entityState.items=t.entityState.items.slice(),t.cd.detectChanges()}catch(n){t.duiDialog.alert("Could not create item",n.message),console.log(n)}})()}softReload(t=!0){if(!this.entity)return;if(!this.database)return;if(!this.entityState)return;this.entityState.changes=this.state.getChangeStore(this.database.name,this.entity.getName()),this.entityState.validationStore=this.state.getValidationStore(this.database.name,this.entity.getName()),this.pkHasher=(0,So.G8)(this.entity),this.entityState.properties=[...this.entity.getProperties()].filter(t=>!t.backReference),this.entityState.properties.sort((t,e)=>{if(t.isId&&!e.isId)return-1;if(!t.isId&&e.isId)return 1;if(!t.isId&&!e.isId){if("constructor"===t.methodName&&"constructor"!==e.methodName)return-1;if("constructor"!==t.methodName&&"constructor"===e.methodName)return 1}return 0}),this.cd.detectChanges();const e=this.entity.getName();if(this.entityState.deletions=this.state.getDeletions(this.database.name,e),t){if(this.entityState.items=[],this.state.hasAddedItems(this.database.name,e))for(const t of this.state.getAddedItems(this.database.name,e)){this.entityState.items.push(t);const e=this.state.extractHashFromNewItem(t);this.selectedPkHashes.includes(e)&&this.entityState.selection.push(t)}for(const t of this.entityState.dbItems){const e=(0,w_.We)(t).getLastKnownPKHash();this.selectedPkHashes.includes(e)&&this.entityState.selection.push(t),this.entityState.deletions[e]||this.entityState.items.push(t)}}}loadCount(){var t=this;return(0,Co.Z)(function*(){t.entity&&t.database&&t.entityState&&(t.entityState.count=yield t.controllerClient.browser.getCount(t.database.name,t.entity.getName(),t.getFilter()))})()}getFilter(){if(!this.entityState)return{};const t=[];for(const e of this.entityState.filter)t.push({[e.name]:{[e.comparator]:e.value}});return t.length?{$and:t}:{}}loadEntity(t=!1){var e=this;return(0,Co.Z)(function*(){if(!e.entity)return;if(!e.database)return;if(e.entityState=e.state.getBrowserEntityState(e.database.name,e.entity.getName()),e.dialog&&(e.entityState.selection=[]),e.entityState.error=void 0,e.softReload(!0!==t),!t&&e.entityState.items.length)return void e.cd.detectChanges();const n=e.entity.getName(),r=e.entityState.changes,i=new Set(r?Object.keys(r):[]);try{e.entityState.loading=!0,e.cd.detectChanges(),yield e.loadCount();const t=performance.now();e.entityState.progress=Po.TY.track(),e.cd.detectChanges();const{items:o,executionTime:s}=yield e.controllerClient.browser.getItems(e.database.name,e.entity.getName(),e.getFilter(),e.sort,e.entityState.itemsPerPage,(e.entityState.page-1)*e.entityState.itemsPerPage);if(e.entityState.executionTime=s,e.entityState.downloadTime=performance.now()-t,e.entityState.downloadBytes=e.entityState.progress.download.total,e.entityState.loading=!1,e.entityState.dbItems=[],e.entityState.items=[],e.entityState.selection=[],e.state.hasAddedItems(e.database.name,n))for(const r of e.state.getAddedItems(e.database.name,n)){e.entityState.items.push(r);const t=e.state.extractHashFromNewItem(r);e.selectedPkHashes.includes(t)&&e.entityState.selection.push(r)}for(const n of o){const t=(0,So.d8)(e.entity,n),o=(0,w_.We)(t);o.markAsPersisted(),o.markAsFromDatabase(),e.updateValidation(t);const s=o.getLastKnownPKHash();if(i.delete(s),e.selectedPkHashes.includes(s)&&e.entityState.selection.push(t),r){const e=r[s];if(e&&e.changes.$set)for(const n in e.changes.$set)e.changes.$set.hasOwnProperty(n)&&(t[n]=e.changes.$set[n])}e.entityState.deletions[s]||e.entityState.items.push(t),e.entityState.dbItems.push(t)}e.selectedAll=e.entityState.selection.length===e.entityState.items.length&&e.entityState.items.length>0}catch(o){e.entityState.loading=!1,e.entityState.error=o instanceof Error?o.stack:o,console.log(o)}e.cd.detectChanges()})()}}hx.\u0275fac=function(t){return new(t||hx)(r.Y36(kv.M),r.Y36(r.sBO),r.Y36(pb),r.Y36(r.SBq),r.Y36(Pv.Ky),r.Y36(Ir,8))},hx.\u0275cmp=r.Xpm({type:hx,selectors:[["orm-browser-database-browser"]],inputs:{database:"database",entity:"entity",dialog:"dialog",selectedPkHashes:"selectedPkHashes",multiSelect:"multiSelect",withBack:"withBack"},outputs:{back:"back",select:"select"},features:[r.TTD],decls:1,vars:1,consts:[[4,"ngIf"],["for","orm-browser",4,"ngIf"],[1,"actions"],["padding","none",4,"ngIf"],["padding","none"],["textured","","icon","garbage",3,"disabled","click"],["textured","","icon","add",3,"click"],["textured","","icon","search",3,"openDropdown"],["textured","","tight","","icon","reload",3,"disabled","click"],["textured","","tight","","icon","arrow_left",3,"disabled","click"],["textured","","noControls","","lightFocus","","type","number",2,"width","50px",3,"disabled","ngModel","ngModelChange"],["textured","","tight","","icon","arrow_right",3,"disabled","click"],["textured","","tight","","icon","arrow_down",3,"openDropdown","disabled"],[3,"width"],["paginationDropdown",""],[2,"padding","12px"],["left","","label","Records per page",3,"labelWidth"],["textured","","type","number",3,"ngModel","ngModelChange"],["filterDropdown",""],[1,"search"],[3,"entity","items","itemsChange"],[2,"color","var(--text-light)","line-height","19px","font-size","12px"],["class","executing-progress",3,"visible",4,"ngIf"],[1,"table"],["class","error",4,"ngIf"],["for","orm-browser"],["textured","","title","Reset all changes","icon","clear",3,"disabled","click"],["textured","",3,"disabled","click"],["textured","",3,"click"],[3,"removable","active","click"],[3,"active","click","close",4,"ngFor","ngForOf","ngForTrackBy"],[3,"active","click","close"],[1,"query"],[1,"input"],["semiTransparent","","lightFocus","","type","textarea",3,"ngModel","placeholder","ngModelChange","keyDown"],["position","bottom",3,"modelChange"],[1,"result"],[1,"results-header"],["class","error-message",4,"ngIf"],[1,"results-header-actions"],["textured","","icon","play",3,"disabled","click"],[1,"executing-progress"],[3,"step"],[1,"error-message"],[1,"result-tabs"],[3,"active","click"],[1,"log","overlay-scrollbar-small"],["class","log-entry text-selection",4,"ngFor","ngForOf","ngForTrackBy"],[1,"log-entry","text-selection"],["class","plain-result text-selection",4,"ngIf"],["class","query-failed",4,"ngIf"],["class","plain-result",4,"ngIf"],[1,"plain-result","text-selection"],[3,"model"],[1,"query-failed"],[1,"plain-result"],["noFocusOutline","","borderless","",1,"raw-table",2,"height","100%",3,"items","sort","preferenceKey"],[3,"name",4,"ngFor","ngForOf"],[3,"name"],[4,"duiTableCell"],[1,"cell-body","text-selection"],["textured","","icon","arrow-small-left",3,"click"],["noFocusOutline","","borderless","",3,"items","rowClass","preferenceKey","customSort","cellClick"],["name","__select","header","\u2713",3,"width","hideable","sortable"],[4,"duiTableHeader"],[3,"name","width",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngModel","ngModelChange"],[1,"cell-body"],[3,"name","width"],[2,"color","var(--text-light)"],[3,"state","entityState","reset","unset","changed","row","actions","property"],[1,"error"],[1,"box"],[1,"error-message","text-selection"]],template:function(t,e){1&t&&r.YNc(0,ux,37,32,"ng-container",0),2&t&&r.Q6J("ngIf",e.database&&e.entity&&e.entityState)},directives:[ft,lu,au,vu,ya,vs,Vs,yu,sa,ew,Kc,rw,sw,ht,Lc,aw,ph,Cw,Yu,qu,Vu,Hu,$b,Mw],pipes:[hw,kt,fw,At],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative}[hidden][_ngcontent-%COMP%]{display:none!important}.actions[_ngcontent-%COMP%]{position:relative;display:flex;margin-bottom:12px;padding:12px 12px 0}dui-table[_ngcontent-%COMP%]     .table-row.new>div{background-color:rgba(255,255,0,.212)}.hidden[_ngcontent-%COMP%]{display:none}.raw-table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]{border-top:1px solid var(--line-color-light)!important}.table[_ngcontent-%COMP%]{position:relative;flex:1}dui-table[_ngcontent-%COMP%]{height:100%}.executing-progress[_ngcontent-%COMP%]{position:absolute;right:5px;top:calc(50% - 7 / 2);opacity:0;transition:opacity .5s ease-in}.executing-progress.visible[_ngcontent-%COMP%]{opacity:1}.query[_ngcontent-%COMP%]   .executing-progress[_ngcontent-%COMP%]{top:33px;right:14px}.info[_ngcontent-%COMP%]{height:100%;align-items:center;color:var(--text-grey)}.error[_ngcontent-%COMP%], .info[_ngcontent-%COMP%]{display:flex;justify-content:center}.error[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background-color:var(--dui-window-content-bg-trans);text-align:center;padding-top:30px;overflow:auto;z-index:100}.error[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{margin:auto;text-align:left}.error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:30px}.error-message[_ngcontent-%COMP%]{color:var(--color-red);white-space:pre}.results-header-actions[_ngcontent-%COMP%]{position:absolute;right:8px;top:8px;height:20px}.query[_ngcontent-%COMP%]{overflow:hidden}.query[_ngcontent-%COMP%], .query[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.query[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%]{position:relative}.query[_ngcontent-%COMP%]   .query-failed[_ngcontent-%COMP%]{padding:5px 15px}.query[_ngcontent-%COMP%]   .log[_ngcontent-%COMP%]{flex:1;overflow:auto;white-space:pre-wrap}.query[_ngcontent-%COMP%]   .log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]{padding:2px 15px;border-bottom:1px solid var(--line-color-light)}.query[_ngcontent-%COMP%]   .log[_ngcontent-%COMP%]   .log-entry[_ngcontent-%COMP%]:first-child{border-top:1px solid var(--line-color-light)}.query[_ngcontent-%COMP%]   .results-header[_ngcontent-%COMP%]{padding:5px 15px;font-size:12px;color:var(--text-grey)}.query[_ngcontent-%COMP%]   .result-tabs[_ngcontent-%COMP%]{padding:0 15px;margin-bottom:15px}.query[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{position:relative;width:100%;min-height:40px;border-bottom:1px solid var(--line-sidebar-light)}.query[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   dui-input[_ngcontent-%COMP%]{width:100%;padding:4px;height:100%;border:0}.query[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   dui-input[_ngcontent-%COMP%]     textarea{font-family:ui-monospace,Menlo,Monaco,Cascadia Mono,Segoe UI Mono,Roboto Mono,Oxygen Mono,"Ubuntu Monospace",Source Code Pro,Fira Mono,Droid Sans Mono,Courier New,monospace;font-size:12px}.cell-body[_ngcontent-%COMP%]{border:1px solid #0000;padding:3px 5px;height:100%;overflow:hidden;text-overflow:ellipsis}.plain-result[_ngcontent-%COMP%]{padding:0 15px;overflow:auto}dui-table[_ngcontent-%COMP%]     .table-row>div:hover dui-icon.active{display:inline-block}dui-table[_ngcontent-%COMP%]     .table-row>div{padding:0!important}.search[_ngcontent-%COMP%]{flex:0;max-height:40%;padding:12px}']}),bv([Zl()],hx.prototype,"routeSub",void 0);let dx=(()=>{class t{constructor(t,e){this.state=t,this.cd=e,this.label=""}ngOnChanges(){this.foreignSchema=this.property.getResolvedClassSchema(),this.setLabel()}ngOnInit(){this.setLabel()}setLabel(){if(this.foreignSchema||(this.foreignSchema=this.property.getResolvedClassSchema()),this.label="",null==this.model)return;const t=this.model;if(this.property.isReference){if(void 0===t)return;this.label=this.state.isIdWrapper(t)?"#new-"+this.state.extractIdWrapper(t):this.foreignSchema.getClassName()+"#"+t[this.foreignSchema.getPrimaryFields()[0].name]}else this.label=lw(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Pv.Ky),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},features:[r.TTD],decls:1,vars:1,template:function(t,e){1&t&&r._uU(0),2&t&&r.Oqu(e.label)},encapsulation:2}),t})(),fx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},decls:6,vars:8,consts:[[1,"monospace"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._uU(1),r.ALo(2,"date"),r.TgZ(3,"span"),r._uU(4),r.ALo(5,"date"),r.qZA(),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,2,e.model,"M/d/yy, h:mm:ss"),""),r.xp6(3),r.Oqu(r.xi3(5,5,e.model,".SSS")))},pipes:[Ot],styles:["span[_ngcontent-%COMP%]{color:var(--text-light)}"]}),t})(),px=(()=>{class t{ngOnInit(){this.load()}ngOnChanges(){this.load()}load(){this.keyValueMap=(0,va.bs)(this.property.classType||{})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},features:[r.TTD],decls:1,vars:1,template:function(t,e){1&t&&r._uU(0),2&t&&r.Oqu(e.keyValueMap?e.keyValueMap.get(e.model):e.model)},encapsulation:2}),t})(),gx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},decls:1,vars:1,template:function(t,e){1&t&&r._uU(0),2&t&&r.Oqu(e.model)},encapsulation:2}),t})();function mx(t,e){1&t&&r.GkF(0)}function yx(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-dialog",3),r.NdJ("closed",function(){return r.CHM(t),r.oxw().done.emit()}),r.TgZ(1,"div",4),r.TgZ(2,"h3"),r._uU(3,"JSON"),r.qZA(),r.TgZ(4,"dui-input",5),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().jsonContent=e}),r.qZA(),r.qZA(),r.TgZ(5,"dui-dialog-actions"),r.TgZ(6,"dui-button",6),r._uU(7,"Cancel"),r.qZA(),r.TgZ(8,"dui-button",7),r.NdJ("click",function(){return r.CHM(t),r.oxw().jsonDone()}),r._uU(9,"Ok"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("visible",!0)("backDropCloses",!0)("minWidth",450)("minHeight",350),r.xp6(4),r.Q6J("ngModel",t.jsonContent)}}function vx(t,e){if(1&t&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.xp6(1),r.hij(" \xbb ",null==t.foreignSchema?null:t.foreignSchema.getClassName()," ")}}function bx(t,e){if(1&t&&(r.TgZ(0,"div",12),r.YNc(1,vx,2,1,"span",11),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",t.browserStack)}}function _x(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"orm-browser-database-browser",14),r.NdJ("back",function(){return r.CHM(t),r.oxw(3).popBrowser()})("select",function(e){return r.CHM(t),r.oxw().$implicit.onSelect(e)}),r.qZA()}if(2&t){const t=r.oxw().$implicit,e=r.oxw(2);r.ekj("hidden",e.browserStack.length>0&&t!==e.browserStack[e.browserStack.length-1]),r.Q6J("dialog",!0)("withBack",t!==e.browserStack[0])("selectedPkHashes",t.selectedPkHashes)("multiSelect",t.property.isArray)("database",e.state.database)("entity",t.foreignSchema)}}function wx(t,e){if(1&t&&(r.ynx(0),r.YNc(1,_x,1,8,"orm-browser-database-browser",13),r.BQk()),2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(1),r.Q6J("ngIf",n.state.database&&t.foreignSchema)}}function xx(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-dialog",8),r.NdJ("closed",function(){r.CHM(t);const e=r.oxw();return e.done.emit(),e.open=!1}),r.TgZ(1,"div",9),r.YNc(2,bx,2,1,"div",10),r.YNc(3,wx,2,1,"ng-container",11),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("backDropCloses",!0)("visible",t.browserStack.length>0),r.xp6(2),r.Q6J("ngIf",t.foreignSchema),r.xp6(1),r.Q6J("ngForOf",t.browserStack)}}let Cx=(()=>{class t{constructor(t,e,n,i,o){this.duiDialog=t,this.host=e,this.state=n,this.cd=i,this.parent=o,this.modelChange=new r.vpe,this.autoOpen=!0,this.open=!1,this.jsonEditor=!1,this.jsonContent="",this.selectedPkHashes=[],this.done=new r.vpe,this.keyDown=new r.vpe,this.browserStack=[],this.browserStack.push(this)}getLastBrowser(){if(this.browserStack.length)return this.browserStack[this.browserStack.length-1]}jsonDone(){try{const t=JSON.parse(this.jsonContent);this.model=So.$r.deserializeProperty(this.property,t),this.modelChange.emit(this.model),this.jsonEditor=!1,this.done.emit()}catch(t){this.duiDialog.alert("Invalid JSON")}}popBrowser(){const t=this.browserStack[this.browserStack.length-1];t&&t.closeAndDone()}closeAndDone(){this.done.emit()}registerBrowser(t){console.log("registerBrowser",this.browserStack.length),this.browserStack.push(t),this.browserStack=this.browserStack.slice(),this.cd.detectChanges()}deregisterBrowser(t){(0,va.lH)(this.browserStack,t),this.cd.detectChanges()}ngOnDestroy(){this.done.emit(),this.parent&&this.parent.deregisterBrowser(this)}ngOnChanges(){this.load()}load(){this.foreignSchema=this.property.getResolvedClassSchema(),this.property.isReference?(this.open=this.autoOpen,this.loadSelection()):(this.jsonEditor=!0,this.jsonContent=void 0!==this.model?JSON.stringify(So.$r.serializeProperty(this.property,this.model)):""),this.cd.detectChanges()}loadSelection(){this.foreignSchema&&(this.selectedPkHashes=[],void 0!==this.model&&(this.state.isIdWrapper(this.model)?this.selectedPkHashes.push(this.state.extractHashFromIdWrapper(this.model)):this.selectedPkHashes.push((0,So.G8)(this.foreignSchema)(this.model))))}onSelect(t){if(!this.foreignSchema)return;const e=t.items[0];e?this.state.isNew(e)?(this.state.connectNewItem(e,this.row,this.property),this.model=this.state.getNewItemIdWrapper(e)):this.model=this.foreignSchema.extractPrimaryKey(e):(this.property.isOptional||this.property.isNullable)&&(this.model=this.property.isNullable?null:void 0),this.modelChange.emit(this.model),setTimeout(()=>{this.popBrowser(),zl.tick()},60)}ngAfterViewInit(){this.load(),this.property.isReference&&(this.foreignSchema=this.property.getResolvedClassSchema(),this.loadSelection(),this.parent?this.parent.registerBrowser(this):this.cd.detectChanges())}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(pb),r.Y36(r.SBq),r.Y36(Pv.Ky),r.Y36(r.sBO),r.Y36(t,12))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.open=!0}),2&t&&r.uIk("tabIndex",1)},inputs:{model:"model",row:"row",property:"property",autoOpen:"autoOpen"},outputs:{modelChange:"modelChange",done:"done",keyDown:"keyDown"},features:[r.TTD],decls:3,vars:3,consts:[[4,"ngIf"],["class","class-field-dialog","noPadding","",3,"visible","backDropCloses","minWidth","minHeight","closed",4,"ngIf"],["class","class-field-dialog","noPadding","","minWidth","80%","minHeight","75%",3,"backDropCloses","visible","closed",4,"ngIf"],["noPadding","",1,"class-field-dialog",3,"visible","backDropCloses","minWidth","minHeight","closed"],[1,"json-editor"],["type","textarea",3,"ngModel","ngModelChange"],["closeDialog",""],[3,"click"],["noPadding","","minWidth","80%","minHeight","75%",1,"class-field-dialog",3,"backDropCloses","visible","closed"],[1,"layout"],["class","header",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"header"],[3,"hidden","dialog","withBack","selectedPkHashes","multiSelect","database","entity","back","select",4,"ngIf"],[3,"dialog","withBack","selectedPkHashes","multiSelect","database","entity","back","select"]],template:function(t,e){1&t&&(r.YNc(0,mx,1,0,"ng-container",0),r.YNc(1,yx,10,5,"dui-dialog",1),r.YNc(2,xx,4,4,"dui-dialog",2)),2&t&&(r.Q6J("ngIf",!e.open),r.xp6(1),r.Q6J("ngIf",e.jsonEditor),r.xp6(1),r.Q6J("ngIf",!e.parent&&e.open))},directives:[ft,tb,ya,vs,Vs,eb,au,nb,ht,hx],styles:[".json-editor[_ngcontent-%COMP%]{height:100%;padding:0 12px;display:flex;flex-direction:column}.json-editor[_ngcontent-%COMP%]   dui-input[_ngcontent-%COMP%]{margin-top:15px;width:100%;flex:1}.layout[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}  dui-window-content>div.class-field-dialog{padding:10px 0 0!important}.header[_ngcontent-%COMP%]{flex:0 0 18px;padding:4px 15px 0}orm-browser-database-browser[_ngcontent-%COMP%]{flex:1}.hidden[_ngcontent-%COMP%]{display:none}"]}),t})(),Sx=(()=>{class t{constructor(){this.modelChange=new r.vpe,this.done=new r.vpe,this.change=new r.vpe,this.keyDown=new r.vpe}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},outputs:{modelChange:"modelChange",done:"done",change:"change",keyDown:"keyDown"},decls:1,vars:1,consts:[["round","","textured","","lightFocus","","type","datetime-local","focus","",2,"width","100%",3,"ngModel","focusChange","enter","esc","keyDown","ngModelChange"]],template:function(t,e){1&t&&(r.TgZ(0,"dui-input",0),r.NdJ("focusChange",function(t){return!t&&e.done.emit()})("enter",function(){return e.done.emit()})("esc",function(){return e.done.emit()})("keyDown",function(t){return e.keyDown.emit(t)})("ngModelChange",function(t){return e.model=t})("ngModelChange",function(){return e.modelChange.emit(e.model)}),r.qZA()),2&t&&r.Q6J("ngModel",e.model)},directives:[ya,vs,Vs],encapsulation:2}),t})();const Tx=["select"];function Ex(t,e){if(1&t&&(r.TgZ(0,"dui-option",3),r._uU(1),r.qZA()),2&t){const t=e.$implicit;r.Q6J("value",t.value),r.xp6(1),r.Oqu(t.label)}}class Ox{constructor(){this.modelChange=new r.vpe,this.keyValues=[],this.done=new r.vpe,this.keyDown=new r.vpe}ngOnDestroy(){}ngOnInit(){this.load()}ngOnChanges(){this.load()}ngAfterViewInit(){var t,e;null===(t=this.select)||void 0===t||t.open(),this.dropdownSub=null===(e=this.select)||void 0===e?void 0:e.dropdown.hidden.subscribe(()=>{this.done.emit()})}load(){const t=(0,va.bs)(this.property.classType||{});for(const[e,n]of t.entries())this.keyValues.push({value:e,label:n})}}Ox.\u0275fac=function(t){return new(t||Ox)},Ox.\u0275cmp=r.Xpm({type:Ox,selectors:[["ng-component"]],viewQuery:function(t,e){if(1&t&&r.Gf(Tx,5),2&t){let t;r.iGM(t=r.CRH())&&(e.select=t.first)}},inputs:{model:"model",property:"property"},outputs:{modelChange:"modelChange",done:"done",keyDown:"keyDown"},features:[r.TTD],decls:3,vars:2,consts:[["textured","",2,"width","100%",3,"ngModel","ngModelChange"],["select",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(r.TgZ(0,"dui-select",0,1),r.NdJ("ngModelChange",function(t){return e.model=t})("ngModelChange",function(){return e.modelChange.emit(e.model),e.done.emit()}),r.YNc(2,Ex,2,2,"dui-option",2),r.qZA()),2&t&&(r.Q6J("ngModel",e.model),r.xp6(2),r.Q6J("ngForOf",e.keyValues))},directives:[V_,vs,Vs,ht,j_],encapsulation:2}),bv([Zl()],Ox.prototype,"dropdownSub",void 0);let Ax=(()=>{class t{constructor(){this.modelChange=new r.vpe,this.done=new r.vpe,this.keyDown=new r.vpe}getType(){return"number"===this.property.type?"number":"text"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},outputs:{modelChange:"modelChange",done:"done",keyDown:"keyDown"},decls:1,vars:2,consts:[["round","","textured","","lightFocus","","focus","",2,"width","100%",3,"type","ngModel","focusChange","enter","esc","keyDown","ngModelChange"]],template:function(t,e){1&t&&(r.TgZ(0,"dui-input",0),r.NdJ("focusChange",function(t){return!t&&e.done.emit()})("enter",function(){return e.done.emit()})("esc",function(){return e.done.emit()})("keyDown",function(t){return e.keyDown.emit(t)})("ngModelChange",function(t){return e.model=t})("ngModelChange",function(){return e.modelChange.emit(e.model)}),r.qZA()),2&t&&r.Q6J("type",e.getType())("ngModel",e.model)},directives:[ya,vs,Vs],encapsulation:2}),t})();function Px(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"orm-browser-property-editing",7),r.NdJ("modelChange",function(e){const n=r.CHM(t).index;return r.oxw(3).model[n]=e})("modelChange",function(){r.CHM(t);const e=r.oxw(3);return e.modelChange.emit(e.model)}),r.qZA(),r.TgZ(2,"dui-button",8),r.NdJ("click",function(){const e=r.CHM(t).index;return r.oxw(3).remove(e)}),r.qZA(),r.qZA()}if(2&t){const t=e.index,n=r.oxw(3);r.xp6(1),r.Q6J("property",n.subType)("model",n.model[t])}}function kx(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Px,3,2,"div",5),r.BQk()),2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",t.model)("ngForTrackBy",t.trackByIndex)}}function Mx(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-dialog",1),r.NdJ("closed",function(){return r.CHM(t),r.oxw().done.emit()}),r.YNc(1,kx,2,2,"ng-container",2),r.TgZ(2,"div",3),r.TgZ(3,"dui-button",4),r.NdJ("click",function(){return r.CHM(t),r.oxw().add()}),r._uU(4,"Add"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("visible",!0)("backDropCloses",!0),r.xp6(1),r.Q6J("ngIf",t.model)}}let Ix=(()=>{class t{constructor(){this.trackByIndex=Sv,this.modelChange=new r.vpe,this.done=new r.vpe,this.keyDown=new r.vpe}ngOnChanges(){(0,va.kJ)(this.model)||(this.model=[]),this.subType=this.property.getSubType()}ngOnInit(){(0,va.kJ)(this.model)||(this.model=[]),this.subType=this.property.getSubType()}remove(t){(0,va.kJ)(this.model)&&(this.model.splice(t,1),this.modelChange.emit(this.model))}add(){this.subType&&((0,va.kJ)(this.model)||(this.model=[]),this.model.push(So.$r.deserializeProperty(this.subType,void 0)),this.modelChange.emit(this.model))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},outputs:{modelChange:"modelChange",done:"done",keyDown:"keyDown"},features:[r.TTD],decls:1,vars:1,consts:[[3,"visible","backDropCloses","closed",4,"ngIf"],[3,"visible","backDropCloses","closed"],[4,"ngIf"],[1,"actions"],[3,"click"],["class","item",4,"ngFor","ngForOf","ngForTrackBy"],[1,"item"],[3,"property","model","modelChange"],["icon","garbage","tight","",3,"click"]],template:function(t,e){1&t&&r.YNc(0,Mx,5,3,"dui-dialog",0),2&t&&r.Q6J("ngIf",e.subType)},styles:[".actions[_ngcontent-%COMP%]{margin-top:6px}.item[_ngcontent-%COMP%]{padding:2px 0;display:flex}.item[_ngcontent-%COMP%]   dui-button[_ngcontent-%COMP%]{flex:0;margin-left:3px}"]}),t})(),Rx=(()=>{class t{constructor(t,e,n){this.containerRef=t,this.resolver=e,this.registry=n,this.componentRefs=[]}ngOnChanges(){this.setLabel()}ngOnInit(){this.setLabel()}setLabel(){const t=this.property.getSubType();if(!(0,va.kJ)(this.model))return;for(const r of this.componentRefs)r.destroy();const e=this.registry.cellComponents[t.type];if(!e)return;const n=this.resolver.resolveComponentFactory(e);for(const r of this.model){const e=this.containerRef.createComponent(n);e.instance.property=t,e.instance.model=r,this.componentRefs.push(e),e.changeDetectorRef.markForCheck()}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r._Vd),r.Y36(Fx))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},features:[r.TTD],decls:0,vars:0,template:function(t,e){},styles:['[_nghost-%COMP%]    ~ng-component:not(:last-of-type):after{content:","}']}),t})();function Dx(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"dui-dialog",1),r.NdJ("closed",function(){return r.CHM(t),r.oxw().done.emit()}),r.TgZ(1,"div",2),r.TgZ(2,"h3"),r._uU(3,"JSON"),r.qZA(),r.TgZ(4,"dui-input",3),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().jsonContent=e}),r.qZA(),r.qZA(),r.TgZ(5,"dui-dialog-actions"),r.TgZ(6,"dui-button",4),r._uU(7,"Cancel"),r.qZA(),r.TgZ(8,"dui-button",5),r.NdJ("click",function(){return r.CHM(t),r.oxw().jsonDone()}),r._uU(9,"Ok"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.Q6J("visible",!0)("backDropCloses",!0)("minWidth",450)("minHeight",350),r.xp6(4),r.Q6J("ngModel",t.jsonContent)}}let Nx=(()=>{class t{constructor(t){this.duiDialog=t,this.modelChange=new r.vpe,this.done=new r.vpe,this.keyDown=new r.vpe,this.jsonEditor=!1,this.jsonContent=""}getType(){return"number"===this.property.type?"number":"text"}jsonDone(){try{const t=JSON.parse(this.jsonContent);this.model=So.$r.deserializeProperty(this.property,t),this.modelChange.emit(this.model),this.jsonEditor=!1,this.done.emit()}catch(t){this.duiDialog.alert("Invalid JSON")}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(pb))},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},outputs:{modelChange:"modelChange",done:"done",keyDown:"keyDown"},decls:1,vars:1,consts:[["class","class-field-dialog","noPadding","",3,"visible","backDropCloses","minWidth","minHeight","closed",4,"ngIf"],["noPadding","",1,"class-field-dialog",3,"visible","backDropCloses","minWidth","minHeight","closed"],[1,"json-editor"],["type","textarea",3,"ngModel","ngModelChange"],["closeDialog",""],[3,"click"]],template:function(t,e){1&t&&r.YNc(0,Dx,10,5,"dui-dialog",0),2&t&&r.Q6J("ngIf",e.jsonEditor)},directives:[ft,tb,ya,vs,Vs,eb,au,nb],styles:[".json-editor[_ngcontent-%COMP%]{height:100%;padding:0 12px;display:flex;flex-direction:column}.json-editor[_ngcontent-%COMP%]   dui-input[_ngcontent-%COMP%]{margin-top:15px;width:100%;flex:1}"]}),t})(),Lx=(()=>{class t{constructor(){this.modelChange=new r.vpe,this.done=new r.vpe,this.keyDown=new r.vpe}chosen(t){const e=(t=(0,va.kJ)(t)?t:[t])[0];e&&(this.model="arrayBuffer"===this.property.type?e.data.buffer:e.data,this.modelChange.emit(this.model),this.done.emit())}ngOnChanges(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],inputs:{model:"model",property:"property"},outputs:{modelChange:"modelChange",done:"done",keyDown:"keyDown"},features:[r.TTD],decls:2,vars:1,consts:[["duiFilePicker","",3,"duiFileAutoOpen","duiFilePickerChange"]],template:function(t,e){1&t&&(r.TgZ(0,"dui-button",0),r.NdJ("duiFilePickerChange",function(t){return e.chosen(t)}),r._uU(1," Choose file "),r.qZA()),2&t&&r.Q6J("duiFileAutoOpen",!0)},directives:[au,hu],encapsulation:2}),t})();class Fx{constructor(){this.inputComponents={string:Ax,array:Ix,number:Ax,uuid:Ax,objectId:Ax,class:Cx,date:Sx,enum:Ox,map:Nx,union:Nx,any:Nx,partial:Cx,literal:Nx,patch:Nx,arrayBuffer:Lx,Uint8Array:Lx,Int8Array:Lx,Uint8ClampedArray:Lx,Int16Array:Lx,Uint16Array:Lx,Int32Array:Lx,Uint32Array:Lx,Float32Array:Lx,Float64Array:Lx},this.cellComponents={string:gx,array:Rx,number:gx,uuid:gx,objectId:gx,date:fx,class:dx,enum:px,map:Cw,union:Cw,any:Cw,partial:Cx,literal:Cw,patch:Cw,arrayBuffer:yw,Uint8Array:yw,Uint8ClampedArray:yw,Int16Array:yw,Uint16Array:yw,Int32Array:yw,Uint32Array:yw,Float32Array:yw,Float64Array:yw}}}class Bx{constructor(t,e,n,i){this.registry=t,this.containerRef=e,this.resolver=n,this.table=i,this.modelChange=new r.vpe,this.autoOpen=!0,this.done=new r.vpe}ngOnDestroy(){this.unlink()}ngOnChanges(t){(t.property||t.type)&&this.link()}unlink(){var t,e,n;null===(t=this.subDone)||void 0===t||t.unsubscribe(),null===(e=this.subKey)||void 0===e||e.unsubscribe(),null===(n=this.componentRef)||void 0===n||n.destroy()}link(){this.unlink();const t=this.registry.inputComponents[this.type||this.property.type];if(!t)return;const e=this.resolver.resolveComponentFactory(t);this.componentRef=this.containerRef.createComponent(e),this.componentRef.instance.model=this.model,this.componentRef.instance.modelChange=this.modelChange,this.componentRef.instance.property=this.property,this.componentRef.instance.row=this.row,this.componentRef.instance.autoOpen=this.autoOpen,this.subDone=this.componentRef.instance.done.subscribe(()=>{this.row&&this.row.$__activeColumn===this.property.name&&(this.row.$__activeColumn=void 0),this.done.emit(this.row)}),this.table&&(this.subKey=this.componentRef.instance.keyDown.subscribe(t=>{if(!this.table||!this.row)return;if("tab"!==t.key.toLowerCase())return;t.preventDefault();const e=this.row.$__activeColumn,n=this.table.sortedColumnDefs.findIndex(t=>t.name===e);if(-1!==n)if(t.shiftKey){const t=this.table.sortedColumnDefs[n-1];t&&(this.row.$__activeColumn=t.name)}else{const t=this.table.sortedColumnDefs[n+1];t&&(this.row.$__activeColumn=t.name)}}))}}Bx.\u0275fac=function(t){return new(t||Bx)(r.Y36(Fx),r.Y36(r.s_b),r.Y36(r._Vd),r.Y36(Yu,8))},Bx.\u0275cmp=r.Xpm({type:Bx,selectors:[["orm-browser-property-editing"]],inputs:{model:"model",row:"row",property:"property",autoOpen:"autoOpen",type:"type"},outputs:{modelChange:"modelChange",done:"done"},features:[r.TTD],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]{display:none}"]}),bv([Zl()],Bx.prototype,"subDone",void 0),bv([Zl()],Bx.prototype,"subKey",void 0),bv([Zl()],Bx.prototype,"subChange",void 0);let jx=(()=>{class t{constructor(t,e,n){this.containerRef=t,this.resolver=e,this.registry=n}ngOnDestroy(){this.unlink()}unlink(){var t;null===(t=this.componentRef)||void 0===t||t.destroy()}ngOnChanges(){this.link()}link(){var t;const e=this.registry.cellComponents[this.property.type];if(!e)return;null===(t=this.componentRef)||void 0===t||t.destroy();const n=this.resolver.resolveComponentFactory(e);this.componentRef=this.containerRef.createComponent(n),this.componentRef.instance.property=this.property,this.componentRef.instance.model=this.model,this.componentRef.changeDetectorRef.detectChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r._Vd),r.Y36(Fx))},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-property-view"]],inputs:{property:"property",model:"model"},features:[r.TTD],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]{display:none}"]}),t})();function $x(t,e){1&t&&(r.ynx(0,2),r._uU(1," Auto-Increment "),r.BQk())}function Ux(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"dui-dialog",11,12),r.TgZ(3,"orm-browser-seed-properties",13),r.NdJ("changed",function(){return r.CHM(t),r.oxw(3).changed()}),r.qZA(),r.TgZ(4,"dui-dialog-actions"),r.TgZ(5,"dui-button",14),r._uU(6,"OK"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"dui-button",15),r._uU(8,"Configure"),r.qZA(),r.BQk()}if(2&t){const t=r.MAs(2),e=r.oxw(3);r.xp6(1),r.Q6J("backDropCloses",!0),r.xp6(2),r.Q6J("fakerTypes",e.fakerTypes)("entity",e.property.getResolvedClassSchema())("properties",e.getSubProperties()),r.xp6(4),r.Q6J("openDialog",t)}}function Vx(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",6),r.TgZ(1,"dui-select",7),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw(2).model.reference=e}),r.TgZ(2,"dui-option",8),r._uU(3,"Random from database"),r.qZA(),r.TgZ(4,"dui-option",9),r._uU(5,"Random from seed"),r.qZA(),r.TgZ(6,"dui-option",10),r._uU(7,"Create new"),r.qZA(),r.qZA(),r.YNc(8,Ux,9,5,"ng-container",1),r.qZA()}if(2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("ngModel",t.model.reference),r.xp6(7),r.Q6J("ngIf","create"===t.model.reference)}}function Zx(t,e){1&t&&(r.TgZ(0,"div",18),r._uU(1," Random enum "),r.qZA())}function zx(t,e){1&t&&(r.TgZ(0,"div",18),r._uU(1," Random boolean "),r.qZA())}function Hx(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",18),r.TgZ(1,"dui-dialog",11,12),r.TgZ(3,"orm-browser-seed-properties",13),r.NdJ("changed",function(){return r.CHM(t),r.oxw(3).changed()}),r.qZA(),r.TgZ(4,"dui-dialog-actions"),r.TgZ(5,"dui-button",14),r._uU(6,"OK"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(7,"dui-button",19),r._uU(8,"Configure"),r.qZA(),r.qZA()}if(2&t){const t=r.MAs(2),e=r.oxw(3);r.xp6(1),r.Q6J("backDropCloses",!0),r.xp6(2),r.Q6J("fakerTypes",e.fakerTypes)("entity",e.property.getResolvedClassSchema())("properties",e.getSubProperties()),r.xp6(4),r.Q6J("openDialog",t)}}function qx(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",21),r.TgZ(2,"div"),r._uU(3,"Min"),r.qZA(),r.TgZ(4,"dui-input",22),r.NdJ("ngModelChange",function(t){return e.ngIf.min=t}),r.qZA(),r.TgZ(5,"div"),r._uU(6,"Max"),r.qZA(),r.TgZ(7,"dui-input",22),r.NdJ("ngModelChange",function(t){return e.ngIf.max=t}),r.qZA(),r.qZA(),r.TgZ(8,"div"),r.TgZ(9,"orm-browser-seed-property",23),r.NdJ("modelChange",function(){return r.CHM(t),r.oxw(4).changed()}),r.qZA(),r.qZA(),r.BQk()}if(2&t){const t=e.ngIf,n=r.oxw(4);r.xp6(4),r.Q6J("ngModel",t.min),r.xp6(3),r.Q6J("ngModel",t.max),r.xp6(2),r.Q6J("model",t.seed)("property",n.property.getSubType())("fakerTypes",n.fakerTypes)}}function Yx(t,e){if(1&t&&(r.TgZ(0,"div",18),r.TgZ(1,"dui-dialog",11,20),r.TgZ(3,"h3"),r._uU(4,"Array configuration"),r.qZA(),r.YNc(5,qx,10,5,"ng-container",1),r.TgZ(6,"dui-dialog-actions"),r.TgZ(7,"dui-button",14),r._uU(8,"OK"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"div"),r._uU(10," Array config "),r.qZA(),r.TgZ(11,"dui-button",19),r._uU(12,"Configure"),r.qZA(),r.qZA()),2&t){const t=r.MAs(2),e=r.oxw(3);r.xp6(1),r.Q6J("backDropCloses",!0),r.xp6(4),r.Q6J("ngIf",e.model.getArray()),r.xp6(6),r.Q6J("openDialog",t)}}function Gx(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"div",21),r.TgZ(2,"div"),r._uU(3,"Min"),r.qZA(),r.TgZ(4,"dui-input",22),r.NdJ("ngModelChange",function(t){return e.ngIf.min=t}),r.qZA(),r.TgZ(5,"div"),r._uU(6,"Max"),r.qZA(),r.TgZ(7,"dui-input",22),r.NdJ("ngModelChange",function(t){return e.ngIf.max=t}),r.qZA(),r.qZA(),r.TgZ(8,"div"),r.TgZ(9,"orm-browser-seed-property",23),r.NdJ("modelChange",function(){return r.CHM(t),r.oxw(4).changed()}),r.qZA(),r.qZA(),r.BQk()}if(2&t){const t=e.ngIf,n=r.oxw(4);r.xp6(4),r.Q6J("ngModel",t.min),r.xp6(3),r.Q6J("ngModel",t.max),r.xp6(2),r.Q6J("model",t.seed)("property",n.property.getSubType())("fakerTypes",n.fakerTypes)}}function Wx(t,e){if(1&t&&(r.TgZ(0,"div",18),r.TgZ(1,"dui-dialog",11,20),r.TgZ(3,"h3"),r._uU(4,"Map configuration"),r.qZA(),r.YNc(5,Gx,10,5,"ng-container",1),r.TgZ(6,"dui-dialog-actions"),r.TgZ(7,"dui-button",14),r._uU(8,"OK"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"div"),r._uU(10," Map config "),r.qZA(),r.TgZ(11,"dui-button",19),r._uU(12,"Configure"),r.qZA(),r.qZA()),2&t){const t=r.MAs(2),e=r.oxw(3);r.xp6(1),r.Q6J("backDropCloses",!0),r.xp6(4),r.Q6J("ngIf",e.model.getMap()),r.xp6(6),r.Q6J("openDialog",t)}}function Jx(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"dui-button",24),r.NdJ("click",function(){return r.CHM(t),r.oxw(4).chooseType()}),r._uU(2,"Choose"),r.qZA(),r.BQk()}}function Xx(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",18),r.TgZ(1,"div"),r._uU(2),r.TgZ(3,"span",2),r._uU(4),r.qZA(),r.qZA(),r.TgZ(5,"dui-button",24),r.NdJ("click",function(){return r.CHM(t),r.oxw(4).chooseType()}),r._uU(6,"Change"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw(4);r.xp6(2),r.hij(" ",t.model.faker," "),r.xp6(2),r.hij(" ",null==t.fakerTypes[t.model.faker]?null:t.fakerTypes[t.model.faker].type," ")}}function Qx(t,e){if(1&t&&(r.ynx(0),r.YNc(1,Jx,3,0,"ng-container",1),r.YNc(2,Xx,7,2,"div",17),r.BQk()),2&t){const t=r.oxw(3);r.xp6(1),r.Q6J("ngIf",!t.model.faker),r.xp6(1),r.Q6J("ngIf",t.model.faker)}}function Kx(t,e){if(1&t&&(r.TgZ(0,"div",16),r.YNc(1,Zx,2,0,"div",17),r.YNc(2,zx,2,0,"div",17),r.YNc(3,Hx,9,5,"div",17),r.YNc(4,Yx,13,3,"div",17),r.YNc(5,Wx,13,3,"div",17),r.YNc(6,Qx,3,2,"ng-container",1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("ngIf","enum"===t.property.type),r.xp6(1),r.Q6J("ngIf","boolean"===t.property.type),r.xp6(1),r.Q6J("ngIf","class"===t.property.type),r.xp6(1),r.Q6J("ngIf",t.property.isArray),r.xp6(1),r.Q6J("ngIf",t.property.isMap),r.xp6(1),r.Q6J("ngIf",!t.property.isArray&&!t.property.isMap&&"enum"!==t.property.type&&"class"!==t.property.type&&"boolean"!==t.property.type)}}function tC(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",16),r.TgZ(1,"orm-browser-property",25),r.NdJ("modelChange",function(e){return r.CHM(t),r.oxw(2).model.value=e}),r.qZA(),r.qZA()}if(2&t){const t=r.oxw(2);r.xp6(1),r.Q6J("model",t.model.value)("property",t.property)}}function eC(t,e){if(1&t){const t=r.EpF();r.ynx(0),r.TgZ(1,"dui-checkbox",3),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().model.fake=e})("ngModelChange",function(){return r.CHM(t),r.oxw().changed()}),r._uU(2,"Fake"),r.qZA(),r.YNc(3,Vx,9,2,"div",4),r.YNc(4,Kx,7,6,"div",5),r.YNc(5,tC,2,2,"div",5),r.BQk()}if(2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngModel",t.model.fake),r.xp6(2),r.Q6J("ngIf",t.model.fake&&t.property.isReference),r.xp6(1),r.Q6J("ngIf",t.model.fake&&!t.property.isReference),r.xp6(1),r.Q6J("ngIf",!t.model.fake)}}let nC=(()=>{class t{constructor(t,e){this.duiDialog=t,this.cd=e,this.modelChange=new r.vpe}changed(){this.modelChange.emit(this.model)}ngOnInit(){}getSubProperties(){if(!(0,va.cS)(this.model.properties))return this.model.properties;const t=this.property.getResolvedClassSchema();for(const e of t.getProperties())e.backReference||e.isParentReference||(this.model.properties[e.name]=new Bb.W0(e.name));return this.model.properties}chooseType(){const{component:t}=this.duiDialog.open(Vb,{fakerTypes:this.fakerTypes,selected:this.model.faker});t.chosen.subscribe(t=>{this.model.faker=t,this.cd.detectChanges()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(pb),r.Y36(r.sBO))},t.\u0275cmp=r.Xpm({type:t,selectors:[["orm-browser-seed-property"]],inputs:{model:"model",property:"property",fakerTypes:"fakerTypes"},outputs:{modelChange:"modelChange"},decls:2,vars:2,consts:[["style","color: var(--text-grey)",4,"ngIf"],[4,"ngIf"],[2,"color","var(--text-grey)"],[3,"ngModel","ngModelChange"],["class","property-seed-value select",4,"ngIf"],["class","property-seed-value",4,"ngIf"],[1,"property-seed-value","select"],["textured","","small","",3,"ngModel","ngModelChange"],["value","random"],["value","random-seed"],["value","create"],[3,"backDropCloses"],["classConfig",""],[3,"fakerTypes","entity","properties","changed"],["closeDialog",""],["small","",2,"width","80px","margin-left","6px",3,"openDialog"],[1,"property-seed-value"],["class","choose-type",4,"ngIf"],[1,"choose-type"],["small","",3,"openDialog"],["arrayConfig",""],[1,"array-config"],["type","number",3,"ngModel","ngModelChange"],[3,"model","property","fakerTypes","modelChange"],["small","",3,"click"],[3,"model","property","modelChange"]],template:function(t,e){1&t&&(r.YNc(0,$x,2,0,"ng-container",0),r.YNc(1,eC,6,4,"ng-container",1)),2&t&&(r.Q6J("ngIf",e.property.isAutoIncrement),r.xp6(1),r.Q6J("ngIf",!e.property.isAutoIncrement))},directives:[ft,$b,vs,Vs,V_,j_,tb,Jb,eb,au,nb,rb,ya,t,W_],styles:["[_nghost-%COMP%]{display:flex;align-items:center;width:100%}.property-seed-value[_ngcontent-%COMP%]{margin-left:5px;flex:1;height:21px}.property-seed-value.select[_ngcontent-%COMP%]{display:flex;align-items:center}.property-seed-value.select[_ngcontent-%COMP%]   dui-select[_ngcontent-%COMP%]{width:100%}.choose-type[_ngcontent-%COMP%]{display:flex;align-items:center;height:22px;flex:1}.choose-type[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;padding:1px 4px 1px 0}.choose-type[_ngcontent-%COMP%]   dui-button[_ngcontent-%COMP%]{margin-left:auto}.array-config[_ngcontent-%COMP%]{margin:15px 0;display:flex;width:100%}.array-config[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:4px}"]}),t})(),rC=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:Po.U3,useFactory:()=>new Po.U3("ws://"+kv.M.getServerHost())}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Pv.Ky,Fx,kv.M],imports:[[po.forChild([{path:"database/:database/:entity",component:hx},{path:"database/:database",component:__}]),fe,Js,Cc,Mc,Eb,Nb,Ob,Ab,Pb,kb,Ib,Vv,Rb,Db,Lb,Uv,Fb]]}),t})();r.B6R(Ix,[ft,tb,ht,Bx,au],[]),r.B6R(Mw,[yt,vt,Bx,bt,ft,jx,ua],[]),r.B6R(W_,[ft,jx,Bx,ua],[]),r.B6R(Jb,[lu,au,Yu,qu,Vu,ft,nC],[]);let iC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[$v]}),t.\u0275inj=r.cJS({providers:[{provide:Po.U3,useFactory:()=>new Po.U3("ws://"+Yo.getServerHost())},Yo],imports:[[fe,vv,Js,po.forRoot([]),rC.forRoot(),Mc.forRoot(),Eb.forRoot(),Cc,Ob,Ab,Pb,kb,Mb,Ib,Vv,Rb,Db]]}),t})();(0,r.G48)(),he().bootstrapModule(iC,{ngZone:"noop"}).catch(t=>console.error(t))},91052:t=>{function e(t,e,n,r,i,o,s){try{var a=t[o](s),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(r,i)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise(function(i,o){var s=t.apply(n,r);function a(t){e(s,i,o,a,l,"next",t)}function l(t){e(s,i,o,a,l,"throw",t)}a(void 0)})}},t.exports.default=t.exports,t.exports.__esModule=!0},16304:(t,e,n)=>{"use strict";function r(t,e,n,r,i,o,s){try{var a=t[o](s),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,l,"next",t)}function l(t){r(s,i,o,a,l,"throw",t)}a(void 0)})}}n.d(e,{Z:()=>i})},44379:()=>{},52361:()=>{},94616:()=>{}},t=>{"use strict";t(t.s=65088)}]);