"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.databaseFactory = void 0;
const orm_1 = require("@deepkit/orm");
const adapter_1 = require("../src/adapter");
const databaseFactory = async (entities) => {
    const adapter = new adapter_1.MongoDatabaseAdapter('mongodb://localhost/orm-integration');
    const database = new orm_1.Database(adapter);
    if (entities)
        database.registerEntity(...entities);
    await database.migrate();
    await adapter.resetAutoIncrementSequences();
    await adapter.client.dropDatabase('orm-integration');
    return database;
};
exports.databaseFactory = databaseFactory;
//# sourceMappingURL=factory.js.map