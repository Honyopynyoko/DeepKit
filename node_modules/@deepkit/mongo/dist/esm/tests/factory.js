import { Database } from '@deepkit/orm';
import { MongoDatabaseAdapter } from '../src/adapter';
export const databaseFactory = async (entities) => {
    const adapter = new MongoDatabaseAdapter('mongodb://localhost/orm-integration');
    const database = new Database(adapter);
    if (entities)
        database.registerEntity(...entities);
    await database.migrate();
    await adapter.resetAutoIncrementSequences();
    await adapter.client.dropDatabase('orm-integration');
    return database;
};
//# sourceMappingURL=factory.js.map